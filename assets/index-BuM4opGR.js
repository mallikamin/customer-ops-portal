function h_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function f_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p_={exports:{}},Ic={},m_={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),kx=Symbol.for("react.portal"),Px=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),bx=Symbol.for("react.profiler"),Dx=Symbol.for("react.provider"),Ox=Symbol.for("react.context"),Lx=Symbol.for("react.forward_ref"),jx=Symbol.for("react.suspense"),Vx=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),dg=Symbol.iterator;function Ux(t){return t===null||typeof t!="object"?null:(t=dg&&t[dg]||t["@@iterator"],typeof t=="function"?t:null)}var g_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y_=Object.assign,v_={};function _o(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=_o.prototype;function Vf(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}var Mf=Vf.prototype=new __;Mf.constructor=Vf;y_(Mf,_o.prototype);Mf.isPureReactComponent=!0;var hg=Array.isArray,w_=Object.prototype.hasOwnProperty,Uf={current:null},E_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)w_.call(e,r)&&!E_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:sl,type:t,key:s,ref:o,props:i,_owner:Uf.current}}function Fx(t,e){return{$$typeof:sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ff(t){return typeof t=="object"&&t!==null&&t.$$typeof===sl}function Bx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fg=/\/+/g;function Sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bx(""+t.key):e.toString(36)}function uu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sl:case kx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Sd(o,0):r,hg(i)?(n="",t!=null&&(n=t.replace(fg,"$&/")+"/"),uu(i,e,n,"",function(c){return c})):i!=null&&(Ff(i)&&(i=Fx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Sd(s,l);o+=uu(s,e,n,u,i)}else if(u=Ux(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Sd(s,l++),o+=uu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(t,e,n){if(t==null)return t;var r=[],i=0;return uu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},cu={transition:null},$x={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:cu,ReactCurrentOwner:Uf};function x_(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Ul,forEach:function(t,e,n){Ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!Ff(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=_o;ge.Fragment=Px;ge.Profiler=bx;ge.PureComponent=Vf;ge.StrictMode=Nx;ge.Suspense=jx;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x;ge.act=x_;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Uf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w_.call(e,u)&&!E_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:sl,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:Ox,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dx,_context:t},t.Consumer=t};ge.createElement=T_;ge.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Lx,render:t}};ge.isValidElement=Ff;ge.lazy=function(t){return{$$typeof:Mx,_payload:{_status:-1,_result:t},_init:zx}};ge.memo=function(t,e){return{$$typeof:Vx,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=cu.transition;cu.transition={};try{t()}finally{cu.transition=e}};ge.unstable_act=x_;ge.useCallback=function(t,e){return $t.current.useCallback(t,e)};ge.useContext=function(t){return $t.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};ge.useEffect=function(t,e){return $t.current.useEffect(t,e)};ge.useId=function(){return $t.current.useId()};ge.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return $t.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};ge.useRef=function(t){return $t.current.useRef(t)};ge.useState=function(t){return $t.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return $t.current.useTransition()};ge.version="18.3.1";m_.exports=ge;var D=m_.exports;const I_=f_(D),Wx=h_({__proto__:null,default:I_},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx=D,qx=Symbol.for("react.element"),Kx=Symbol.for("react.fragment"),Gx=Object.prototype.hasOwnProperty,Qx=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yx={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gx.call(e,r)&&!Yx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qx,type:t,key:s,ref:o,props:i,_owner:Qx.current}}Ic.Fragment=Kx;Ic.jsx=S_;Ic.jsxs=S_;p_.exports=Ic;var h=p_.exports,ph={},R_={exports:{}},cn={},A_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,re){var se=B.length;B.push(re);e:for(;0<se;){var Ie=se-1>>>1,me=B[Ie];if(0<i(me,re))B[Ie]=re,B[se]=me,se=Ie;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var re=B[0],se=B.pop();if(se!==re){B[0]=se;e:for(var Ie=0,me=B.length,be=me>>>1;Ie<be;){var Ut=2*(Ie+1)-1,Ye=B[Ut],gt=Ut+1,yt=B[gt];if(0>i(Ye,se))gt<me&&0>i(yt,Ye)?(B[Ie]=yt,B[gt]=se,Ie=gt):(B[Ie]=Ye,B[Ut]=se,Ie=Ut);else if(gt<me&&0>i(yt,se))B[Ie]=yt,B[gt]=se,Ie=gt;else break e}}return re}function i(B,re){var se=B.sortIndex-re.sortIndex;return se!==0?se:B.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,p=null,g=3,_=!1,T=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=B)r(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function O(B){if(C=!1,A(B),!T)if(n(u)!==null)T=!0,ht(M);else{var re=n(c);re!==null&&q(O,re.startTime-B)}}function M(B,re){T=!1,C&&(C=!1,S(v),v=-1),_=!0;var se=g;try{for(A(re),p=n(u);p!==null&&(!(p.expirationTime>re)||B&&!b());){var Ie=p.callback;if(typeof Ie=="function"){p.callback=null,g=p.priorityLevel;var me=Ie(p.expirationTime<=re);re=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(u)&&r(u),A(re)}else r(u);p=n(u)}if(p!==null)var be=!0;else{var Ut=n(c);Ut!==null&&q(O,Ut.startTime-re),be=!1}return be}finally{p=null,g=se,_=!1}}var F=!1,y=null,v=-1,x=5,I=-1;function b(){return!(t.unstable_now()-I<x)}function k(){if(y!==null){var B=t.unstable_now();I=B;var re=!0;try{re=y(!0,B)}finally{re?R():(F=!1,y=null)}}else F=!1}var R;if(typeof w=="function")R=function(){w(k)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,xe=oe.port2;oe.port1.onmessage=k,R=function(){xe.postMessage(null)}}else R=function(){P(k,0)};function ht(B){y=B,F||(F=!0,R())}function q(B,re){v=P(function(){B(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||_||(T=!0,ht(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var se=g;g=re;try{return B()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,re){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var se=g;g=B;try{return re()}finally{g=se}},t.unstable_scheduleCallback=function(B,re,se){var Ie=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ie+se:Ie):se=Ie,B){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,B={id:f++,callback:re,priorityLevel:B,startTime:se,expirationTime:me,sortIndex:-1},se>Ie?(B.sortIndex=se,e(c,B),n(u)===null&&B===n(c)&&(C?(S(v),v=-1):C=!0,q(O,se-Ie))):(B.sortIndex=me,e(u,B),T||_||(T=!0,ht(M))),B},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(B){var re=g;return function(){var se=g;g=re;try{return B.apply(this,arguments)}finally{g=se}}}})(C_);A_.exports=C_;var Xx=A_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=D,un=Xx;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k_=new Set,ka={};function cs(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(ka[t]=e,t=0;t<e.length;t++)k_.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mh=Object.prototype.hasOwnProperty,Zx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pg={},mg={};function eI(t){return mh.call(mg,t)?!0:mh.call(pg,t)?!1:Zx.test(t)?mg[t]=!0:(pg[t]=!0,!1)}function tI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nI(t,e,n,r){if(e===null||typeof e>"u"||tI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bf=/[\-:]([a-z])/g;function zf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bf,zf);St[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bf,zf);St[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bf,zf);St[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function $f(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nI(e,n,i,r)&&(n=null),r||i===null?eI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dr=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fl=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),Wf=Symbol.for("react.strict_mode"),gh=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),N_=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),yh=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),qf=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),b_=Symbol.for("react.offscreen"),gg=Symbol.iterator;function qo(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Rd;function ia(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Ad=!1;function Cd(t,e){if(!t||Ad)return"";Ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ia(t):""}function rI(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function _h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case bs:return"Portal";case gh:return"Profiler";case Wf:return"StrictMode";case yh:return"Suspense";case vh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N_:return(t.displayName||"Context")+".Consumer";case P_:return(t._context.displayName||"Context")+".Provider";case Hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qf:return e=t.displayName||null,e!==null?e:_h(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return _h(t(e))}catch{}}return null}function iI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(e);case 8:return e===Wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sI(t){var e=D_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bl(t){t._valueTracker||(t._valueTracker=sI(t))}function O_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wh(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&$f(t,"checked",e,!1)}function Eh(t,e){L_(t,e);var n=gi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Th(t,e.type,n):e.hasOwnProperty("defaultValue")&&Th(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Th(t,e,n){(e!=="number"||Nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _g(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(sa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gi(n)}}function j_(t,e){var n=gi(e.value),r=gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,M_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oI=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){oI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function U_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function F_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aI=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sh(t,e){if(e){if(aI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ah=null;function Kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,qs=null,Ks=null;function Eg(t){if(t=ll(t)){if(typeof Ch!="function")throw Error(H(280));var e=t.stateNode;e&&(e=kc(e),Ch(t.stateNode,t.type,e))}}function B_(t){qs?Ks?Ks.push(t):Ks=[t]:qs=t}function z_(){if(qs){var t=qs,e=Ks;if(Ks=qs=null,Eg(t),e)for(t=0;t<e.length;t++)Eg(e[t])}}function $_(t,e){return t(e)}function W_(){}var kd=!1;function H_(t,e,n){if(kd)return t(e,n);kd=!0;try{return $_(t,e,n)}finally{kd=!1,(qs!==null||Ks!==null)&&(W_(),z_())}}function Na(t,e){var n=t.stateNode;if(n===null)return null;var r=kc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var kh=!1;if(xr)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){kh=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{kh=!1}function lI(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ga=!1,bu=null,Du=!1,Ph=null,uI={onError:function(t){ga=!0,bu=t}};function cI(t,e,n,r,i,s,o,l,u){ga=!1,bu=null,lI.apply(uI,arguments)}function dI(t,e,n,r,i,s,o,l,u){if(cI.apply(this,arguments),ga){if(ga){var c=bu;ga=!1,bu=null}else throw Error(H(198));Du||(Du=!0,Ph=c)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tg(t){if(ds(t)!==t)throw Error(H(188))}function hI(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Tg(i),t;if(s===r)return Tg(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function K_(t){return t=hI(t),t!==null?G_(t):null}function G_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G_(t);if(e!==null)return e;t=t.sibling}return null}var Q_=un.unstable_scheduleCallback,xg=un.unstable_cancelCallback,fI=un.unstable_shouldYield,pI=un.unstable_requestPaint,Je=un.unstable_now,mI=un.unstable_getCurrentPriorityLevel,Gf=un.unstable_ImmediatePriority,Y_=un.unstable_UserBlockingPriority,Ou=un.unstable_NormalPriority,gI=un.unstable_LowPriority,X_=un.unstable_IdlePriority,Sc=null,qn=null;function yI(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Sc,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:wI,vI=Math.log,_I=Math.LN2;function wI(t){return t>>>=0,t===0?32:31-(vI(t)/_I|0)|0}var $l=64,Wl=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=oa(l):(s&=o,s!==0&&(r=oa(s)))}else o=n&~i,o!==0?r=oa(o):s!==0&&(r=oa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function EI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=EI(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Nh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J_(){var t=$l;return $l<<=1,!($l&4194240)&&($l=64),t}function Pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function xI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function Z_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var e0,Yf,t0,n0,r0,bh=!1,Hl=[],ii=null,si=null,oi=null,ba=new Map,Da=new Map,Kr=[],II="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ig(t,e){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(e.pointerId)}}function Go(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ll(e),e!==null&&Yf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SI(t,e,n,r,i){switch(e){case"focusin":return ii=Go(ii,t,e,n,r,i),!0;case"dragenter":return si=Go(si,t,e,n,r,i),!0;case"mouseover":return oi=Go(oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ba.set(s,Go(ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Da.set(s,Go(Da.get(s)||null,t,e,n,r,i)),!0}return!1}function i0(t){var e=Hi(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=q_(n),e!==null){t.blockedOn=e,r0(t.priority,function(){t0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ah=r,n.target.dispatchEvent(r),Ah=null}else return e=ll(n),e!==null&&Yf(e),t.blockedOn=n,!1;e.shift()}return!0}function Sg(t,e,n){du(t)&&n.delete(e)}function RI(){bh=!1,ii!==null&&du(ii)&&(ii=null),si!==null&&du(si)&&(si=null),oi!==null&&du(oi)&&(oi=null),ba.forEach(Sg),Da.forEach(Sg)}function Qo(t,e){t.blockedOn===e&&(t.blockedOn=null,bh||(bh=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,RI)))}function Oa(t){function e(i){return Qo(i,t)}if(0<Hl.length){Qo(Hl[0],t);for(var n=1;n<Hl.length;n++){var r=Hl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ii!==null&&Qo(ii,t),si!==null&&Qo(si,t),oi!==null&&Qo(oi,t),ba.forEach(e),Da.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)i0(n),n.blockedOn===null&&Kr.shift()}var Gs=Dr.ReactCurrentBatchConfig,ju=!0;function AI(t,e,n,r){var i=ke,s=Gs.transition;Gs.transition=null;try{ke=1,Xf(t,e,n,r)}finally{ke=i,Gs.transition=s}}function CI(t,e,n,r){var i=ke,s=Gs.transition;Gs.transition=null;try{ke=4,Xf(t,e,n,r)}finally{ke=i,Gs.transition=s}}function Xf(t,e,n,r){if(ju){var i=Dh(t,e,n,r);if(i===null)Fd(t,e,r,Vu,n),Ig(t,r);else if(SI(i,t,e,n,r))r.stopPropagation();else if(Ig(t,r),e&4&&-1<II.indexOf(t)){for(;i!==null;){var s=ll(i);if(s!==null&&e0(s),s=Dh(t,e,n,r),s===null&&Fd(t,e,r,Vu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fd(t,e,r,null,n)}}var Vu=null;function Dh(t,e,n,r){if(Vu=null,t=Kf(r),t=Hi(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vu=t,null}function s0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mI()){case Gf:return 1;case Y_:return 4;case Ou:case gI:return 16;case X_:return 536870912;default:return 16}default:return 16}}var Zr=null,Jf=null,hu=null;function o0(){if(hu)return hu;var t,e=Jf,n=e.length,r,i="value"in Zr?Zr.value:Zr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return hu=i.slice(t,1<r?1-r:void 0)}function fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function Rg(){return!1}function dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ql:Rg,this.isPropagationStopped=Rg,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=dn(wo),al=qe({},wo,{view:0,detail:0}),kI=dn(al),Nd,bd,Yo,Rc=qe({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yo&&(Yo&&t.type==="mousemove"?(Nd=t.screenX-Yo.screenX,bd=t.screenY-Yo.screenY):bd=Nd=0,Yo=t),Nd)},movementY:function(t){return"movementY"in t?t.movementY:bd}}),Ag=dn(Rc),PI=qe({},Rc,{dataTransfer:0}),NI=dn(PI),bI=qe({},al,{relatedTarget:0}),Dd=dn(bI),DI=qe({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),OI=dn(DI),LI=qe({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jI=dn(LI),VI=qe({},wo,{data:0}),Cg=dn(VI),MI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FI[t])?!!e[t]:!1}function ep(){return BI}var zI=qe({},al,{key:function(t){if(t.key){var e=MI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ep,charCode:function(t){return t.type==="keypress"?fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$I=dn(zI),WI=qe({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kg=dn(WI),HI=qe({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ep}),qI=dn(HI),KI=qe({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),GI=dn(KI),QI=qe({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YI=dn(QI),XI=[9,13,27,32],tp=xr&&"CompositionEvent"in window,ya=null;xr&&"documentMode"in document&&(ya=document.documentMode);var JI=xr&&"TextEvent"in window&&!ya,a0=xr&&(!tp||ya&&8<ya&&11>=ya),Pg=" ",Ng=!1;function l0(t,e){switch(t){case"keyup":return XI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function ZI(t,e){switch(t){case"compositionend":return u0(e);case"keypress":return e.which!==32?null:(Ng=!0,Pg);case"textInput":return t=e.data,t===Pg&&Ng?null:t;default:return null}}function eS(t,e){if(Os)return t==="compositionend"||!tp&&l0(t,e)?(t=o0(),hu=Jf=Zr=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a0&&e.locale!=="ko"?null:e.data;default:return null}}var tS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tS[t.type]:e==="textarea"}function c0(t,e,n,r){B_(r),e=Mu(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var va=null,La=null;function nS(t){E0(t,0)}function Ac(t){var e=Vs(t);if(O_(e))return t}function rS(t,e){if(t==="change")return e}var d0=!1;if(xr){var Od;if(xr){var Ld="oninput"in document;if(!Ld){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Ld=typeof Dg.oninput=="function"}Od=Ld}else Od=!1;d0=Od&&(!document.documentMode||9<document.documentMode)}function Og(){va&&(va.detachEvent("onpropertychange",h0),La=va=null)}function h0(t){if(t.propertyName==="value"&&Ac(La)){var e=[];c0(e,La,t,Kf(t)),H_(nS,e)}}function iS(t,e,n){t==="focusin"?(Og(),va=e,La=n,va.attachEvent("onpropertychange",h0)):t==="focusout"&&Og()}function sS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ac(La)}function oS(t,e){if(t==="click")return Ac(e)}function aS(t,e){if(t==="input"||t==="change")return Ac(e)}function lS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:lS;function ja(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mh.call(e,i)||!Dn(t[i],e[i]))return!1}return!0}function Lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jg(t,e){var n=Lg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lg(n)}}function f0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function p0(){for(var t=window,e=Nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nu(t.document)}return e}function np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uS(t){var e=p0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&f0(n.ownerDocument.documentElement,n)){if(r!==null&&np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jg(n,s);var o=jg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cS=xr&&"documentMode"in document&&11>=document.documentMode,Ls=null,Oh=null,_a=null,Lh=!1;function Vg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lh||Ls==null||Ls!==Nu(r)||(r=Ls,"selectionStart"in r&&np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_a&&ja(_a,r)||(_a=r,r=Mu(Oh,"onSelect"),0<r.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ls)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},jd={},m0={};xr&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Cc(t){if(jd[t])return jd[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m0)return jd[t]=e[n];return t}var g0=Cc("animationend"),y0=Cc("animationiteration"),v0=Cc("animationstart"),_0=Cc("transitionend"),w0=new Map,Mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){w0.set(t,e),cs(e,[t])}for(var Vd=0;Vd<Mg.length;Vd++){var Md=Mg[Vd],dS=Md.toLowerCase(),hS=Md[0].toUpperCase()+Md.slice(1);xi(dS,"on"+hS)}xi(g0,"onAnimationEnd");xi(y0,"onAnimationIteration");xi(v0,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(_0,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Ug(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dI(r,e,void 0,t),t.currentTarget=null}function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Ug(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Ug(i,l,c),s=u}}}if(Du)throw t=Ph,Du=!1,Ph=null,t}function Me(t,e){var n=e[Fh];n===void 0&&(n=e[Fh]=new Set);var r=t+"__bubble";n.has(r)||(T0(e,t,2,!1),n.add(r))}function Ud(t,e,n){var r=0;e&&(r|=4),T0(n,t,r,e)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function Va(t){if(!t[Gl]){t[Gl]=!0,k_.forEach(function(n){n!=="selectionchange"&&(fS.has(n)||Ud(n,!1,t),Ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gl]||(e[Gl]=!0,Ud("selectionchange",!1,e))}}function T0(t,e,n,r){switch(s0(e)){case 1:var i=AI;break;case 4:i=CI;break;default:i=Xf}n=i.bind(null,e,n,t),i=void 0,!kh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Hi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}H_(function(){var c=s,f=Kf(n),p=[];e:{var g=w0.get(t);if(g!==void 0){var _=Zf,T=t;switch(t){case"keypress":if(fu(n)===0)break e;case"keydown":case"keyup":_=$I;break;case"focusin":T="focus",_=Dd;break;case"focusout":T="blur",_=Dd;break;case"beforeblur":case"afterblur":_=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=NI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=qI;break;case g0:case y0:case v0:_=OI;break;case _0:_=GI;break;case"scroll":_=kI;break;case"wheel":_=YI;break;case"copy":case"cut":case"paste":_=jI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=kg}var C=(e&4)!==0,P=!C&&t==="scroll",S=C?g!==null?g+"Capture":null:g;C=[];for(var w=c,A;w!==null;){A=w;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,S!==null&&(O=Na(w,S),O!=null&&C.push(Ma(w,O,A)))),P)break;w=w.return}0<C.length&&(g=new _(g,T,null,n,f),p.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Ah&&(T=n.relatedTarget||n.fromElement)&&(Hi(T)||T[Ir]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(T=n.relatedTarget||n.toElement,_=c,T=T?Hi(T):null,T!==null&&(P=ds(T),T!==P||T.tag!==5&&T.tag!==6)&&(T=null)):(_=null,T=c),_!==T)){if(C=Ag,O="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=kg,O="onPointerLeave",S="onPointerEnter",w="pointer"),P=_==null?g:Vs(_),A=T==null?g:Vs(T),g=new C(O,w+"leave",_,n,f),g.target=P,g.relatedTarget=A,O=null,Hi(f)===c&&(C=new C(S,w+"enter",T,n,f),C.target=A,C.relatedTarget=P,O=C),P=O,_&&T)t:{for(C=_,S=T,w=0,A=C;A;A=As(A))w++;for(A=0,O=S;O;O=As(O))A++;for(;0<w-A;)C=As(C),w--;for(;0<A-w;)S=As(S),A--;for(;w--;){if(C===S||S!==null&&C===S.alternate)break t;C=As(C),S=As(S)}C=null}else C=null;_!==null&&Fg(p,g,_,C,!1),T!==null&&P!==null&&Fg(p,P,T,C,!0)}}e:{if(g=c?Vs(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var M=rS;else if(bg(g))if(d0)M=aS;else{M=sS;var F=iS}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=oS);if(M&&(M=M(t,c))){c0(p,M,n,f);break e}F&&F(t,g,c),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Th(g,"number",g.value)}switch(F=c?Vs(c):window,t){case"focusin":(bg(F)||F.contentEditable==="true")&&(Ls=F,Oh=c,_a=null);break;case"focusout":_a=Oh=Ls=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Vg(p,n,f);break;case"selectionchange":if(cS)break;case"keydown":case"keyup":Vg(p,n,f)}var y;if(tp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Os?l0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(a0&&n.locale!=="ko"&&(Os||v!=="onCompositionStart"?v==="onCompositionEnd"&&Os&&(y=o0()):(Zr=f,Jf="value"in Zr?Zr.value:Zr.textContent,Os=!0)),F=Mu(c,v),0<F.length&&(v=new Cg(v,t,null,n,f),p.push({event:v,listeners:F}),y?v.data=y:(y=u0(n),y!==null&&(v.data=y)))),(y=JI?ZI(t,n):eS(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(f=new Cg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=y))}E0(p,e)})}function Ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Na(t,n),s!=null&&r.unshift(Ma(t,s,i)),s=Na(t,e),s!=null&&r.push(Ma(t,s,i))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Na(n,s),u!=null&&o.unshift(Ma(n,u,l))):i||(u=Na(n,s),u!=null&&o.push(Ma(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function Bg(t){return(typeof t=="string"?t:""+t).replace(pS,`
`).replace(mS,"")}function Ql(t,e,n){if(e=Bg(e),Bg(t)!==e&&n)throw Error(H(425))}function Uu(){}var jh=null,Vh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uh=typeof setTimeout=="function"?setTimeout:void 0,gS=typeof clearTimeout=="function"?clearTimeout:void 0,zg=typeof Promise=="function"?Promise:void 0,yS=typeof queueMicrotask=="function"?queueMicrotask:typeof zg<"u"?function(t){return zg.resolve(null).then(t).catch(vS)}:Uh;function vS(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Oa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Oa(e)}function ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $g(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Eo,Ua="__reactProps$"+Eo,Ir="__reactContainer$"+Eo,Fh="__reactEvents$"+Eo,_S="__reactListeners$"+Eo,wS="__reactHandles$"+Eo;function Hi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$g(t);t!==null;){if(n=t[Hn])return n;t=$g(t)}return e}t=n,n=t.parentNode}return null}function ll(t){return t=t[Hn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function kc(t){return t[Ua]||null}var Bh=[],Ms=-1;function Ii(t){return{current:t}}function Fe(t){0>Ms||(t.current=Bh[Ms],Bh[Ms]=null,Ms--)}function Le(t,e){Ms++,Bh[Ms]=t.current,t.current=e}var yi={},Vt=Ii(yi),Qt=Ii(!1),Zi=yi;function no(t,e){var n=t.type.contextTypes;if(!n)return yi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(t){return t=t.childContextTypes,t!=null}function Fu(){Fe(Qt),Fe(Vt)}function Wg(t,e,n){if(Vt.current!==yi)throw Error(H(168));Le(Vt,e),Le(Qt,n)}function x0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,iI(t)||"Unknown",i));return qe({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,Zi=Vt.current,Le(Vt,t),Le(Qt,Qt.current),!0}function Hg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=x0(t,e,Zi),r.__reactInternalMemoizedMergedChildContext=t,Fe(Qt),Fe(Vt),Le(Vt,t)):Fe(Qt),Le(Qt,n)}var fr=null,Pc=!1,zd=!1;function I0(t){fr===null?fr=[t]:fr.push(t)}function ES(t){Pc=!0,I0(t)}function Si(){if(!zd&&fr!==null){zd=!0;var t=0,e=ke;try{var n=fr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fr=null,Pc=!1}catch(i){throw fr!==null&&(fr=fr.slice(t+1)),Q_(Gf,Si),i}finally{ke=e,zd=!1}}return null}var Us=[],Fs=0,zu=null,$u=0,pn=[],mn=0,es=null,pr=1,mr="";function Fi(t,e){Us[Fs++]=$u,Us[Fs++]=zu,zu=t,$u=e}function S0(t,e,n){pn[mn++]=pr,pn[mn++]=mr,pn[mn++]=es,es=t;var r=pr;t=mr;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pr=1<<32-Nn(e)+i|n<<i|r,mr=s+t}else pr=1<<s|n<<i|r,mr=t}function rp(t){t.return!==null&&(Fi(t,1),S0(t,1,0))}function ip(t){for(;t===zu;)zu=Us[--Fs],Us[Fs]=null,$u=Us[--Fs],Us[Fs]=null;for(;t===es;)es=pn[--mn],pn[mn]=null,mr=pn[--mn],pn[mn]=null,pr=pn[--mn],pn[mn]=null}var ln=null,on=null,$e=!1,kn=null;function R0(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,on=ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=es!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,on=null,!0):!1;default:return!1}}function zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $h(t){if($e){var e=on;if(e){var n=e;if(!qg(t,e)){if(zh(t))throw Error(H(418));e=ai(n.nextSibling);var r=ln;e&&qg(t,e)?R0(r,n):(t.flags=t.flags&-4097|2,$e=!1,ln=t)}}else{if(zh(t))throw Error(H(418));t.flags=t.flags&-4097|2,$e=!1,ln=t}}}function Kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function Yl(t){if(t!==ln)return!1;if(!$e)return Kg(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=on)){if(zh(t))throw A0(),Error(H(418));for(;e;)R0(t,e),e=ai(e.nextSibling)}if(Kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=ln?ai(t.stateNode.nextSibling):null;return!0}function A0(){for(var t=on;t;)t=ai(t.nextSibling)}function ro(){on=ln=null,$e=!1}function sp(t){kn===null?kn=[t]:kn.push(t)}var TS=Dr.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Xl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gg(t){var e=t._init;return e(t._payload)}function C0(t){function e(S,w){if(t){var A=S.deletions;A===null?(S.deletions=[w],S.flags|=16):A.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=di(S,w),S.index=0,S.sibling=null,S}function s(S,w,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<w?(S.flags|=2,w):A):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,A,O){return w===null||w.tag!==6?(w=Qd(A,S.mode,O),w.return=S,w):(w=i(w,A),w.return=S,w)}function u(S,w,A,O){var M=A.type;return M===Ds?f(S,w,A.props.children,O,A.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Hr&&Gg(M)===w.type)?(O=i(w,A.props),O.ref=Xo(S,w,A),O.return=S,O):(O=wu(A.type,A.key,A.props,null,S.mode,O),O.ref=Xo(S,w,A),O.return=S,O)}function c(S,w,A,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Yd(A,S.mode,O),w.return=S,w):(w=i(w,A.children||[]),w.return=S,w)}function f(S,w,A,O,M){return w===null||w.tag!==7?(w=Xi(A,S.mode,O,M),w.return=S,w):(w=i(w,A),w.return=S,w)}function p(S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qd(""+w,S.mode,A),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fl:return A=wu(w.type,w.key,w.props,null,S.mode,A),A.ref=Xo(S,null,w),A.return=S,A;case bs:return w=Yd(w,S.mode,A),w.return=S,w;case Hr:var O=w._init;return p(S,O(w._payload),A)}if(sa(w)||qo(w))return w=Xi(w,S.mode,A,null),w.return=S,w;Xl(S,w)}return null}function g(S,w,A,O){var M=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(S,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fl:return A.key===M?u(S,w,A,O):null;case bs:return A.key===M?c(S,w,A,O):null;case Hr:return M=A._init,g(S,w,M(A._payload),O)}if(sa(A)||qo(A))return M!==null?null:f(S,w,A,O,null);Xl(S,A)}return null}function _(S,w,A,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(A)||null,l(w,S,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Fl:return S=S.get(O.key===null?A:O.key)||null,u(w,S,O,M);case bs:return S=S.get(O.key===null?A:O.key)||null,c(w,S,O,M);case Hr:var F=O._init;return _(S,w,A,F(O._payload),M)}if(sa(O)||qo(O))return S=S.get(A)||null,f(w,S,O,M,null);Xl(w,O)}return null}function T(S,w,A,O){for(var M=null,F=null,y=w,v=w=0,x=null;y!==null&&v<A.length;v++){y.index>v?(x=y,y=null):x=y.sibling;var I=g(S,y,A[v],O);if(I===null){y===null&&(y=x);break}t&&y&&I.alternate===null&&e(S,y),w=s(I,w,v),F===null?M=I:F.sibling=I,F=I,y=x}if(v===A.length)return n(S,y),$e&&Fi(S,v),M;if(y===null){for(;v<A.length;v++)y=p(S,A[v],O),y!==null&&(w=s(y,w,v),F===null?M=y:F.sibling=y,F=y);return $e&&Fi(S,v),M}for(y=r(S,y);v<A.length;v++)x=_(y,S,v,A[v],O),x!==null&&(t&&x.alternate!==null&&y.delete(x.key===null?v:x.key),w=s(x,w,v),F===null?M=x:F.sibling=x,F=x);return t&&y.forEach(function(b){return e(S,b)}),$e&&Fi(S,v),M}function C(S,w,A,O){var M=qo(A);if(typeof M!="function")throw Error(H(150));if(A=M.call(A),A==null)throw Error(H(151));for(var F=M=null,y=w,v=w=0,x=null,I=A.next();y!==null&&!I.done;v++,I=A.next()){y.index>v?(x=y,y=null):x=y.sibling;var b=g(S,y,I.value,O);if(b===null){y===null&&(y=x);break}t&&y&&b.alternate===null&&e(S,y),w=s(b,w,v),F===null?M=b:F.sibling=b,F=b,y=x}if(I.done)return n(S,y),$e&&Fi(S,v),M;if(y===null){for(;!I.done;v++,I=A.next())I=p(S,I.value,O),I!==null&&(w=s(I,w,v),F===null?M=I:F.sibling=I,F=I);return $e&&Fi(S,v),M}for(y=r(S,y);!I.done;v++,I=A.next())I=_(y,S,v,I.value,O),I!==null&&(t&&I.alternate!==null&&y.delete(I.key===null?v:I.key),w=s(I,w,v),F===null?M=I:F.sibling=I,F=I);return t&&y.forEach(function(k){return e(S,k)}),$e&&Fi(S,v),M}function P(S,w,A,O){if(typeof A=="object"&&A!==null&&A.type===Ds&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Fl:e:{for(var M=A.key,F=w;F!==null;){if(F.key===M){if(M=A.type,M===Ds){if(F.tag===7){n(S,F.sibling),w=i(F,A.props.children),w.return=S,S=w;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Hr&&Gg(M)===F.type){n(S,F.sibling),w=i(F,A.props),w.ref=Xo(S,F,A),w.return=S,S=w;break e}n(S,F);break}else e(S,F);F=F.sibling}A.type===Ds?(w=Xi(A.props.children,S.mode,O,A.key),w.return=S,S=w):(O=wu(A.type,A.key,A.props,null,S.mode,O),O.ref=Xo(S,w,A),O.return=S,S=O)}return o(S);case bs:e:{for(F=A.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(S,w.sibling),w=i(w,A.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Yd(A,S.mode,O),w.return=S,S=w}return o(S);case Hr:return F=A._init,P(S,w,F(A._payload),O)}if(sa(A))return T(S,w,A,O);if(qo(A))return C(S,w,A,O);Xl(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,A),w.return=S,S=w):(n(S,w),w=Qd(A,S.mode,O),w.return=S,S=w),o(S)):n(S,w)}return P}var io=C0(!0),k0=C0(!1),Wu=Ii(null),Hu=null,Bs=null,op=null;function ap(){op=Bs=Hu=null}function lp(t){var e=Wu.current;Fe(Wu),t._currentValue=e}function Wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Hu=t,op=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(op!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(Hu===null)throw Error(H(308));Bs=t,Hu.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var qi=null;function up(t){qi===null?qi=[t]:qi.push(t)}function P0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,up(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function cp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(t,n)}return i=r.interleaved,i===null?(e.next=e,up(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(t,n)}function pu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}function Qg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qu(t,e,n,r){var i=t.updateQueue;qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,C=l;switch(g=e,_=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){p=T.call(_,p,g);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,g=typeof T=="function"?T.call(_,p,g):T,g==null)break e;p=qe({},p,g);break e;case 2:qr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=_,u=p):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ns|=o,t.lanes=o,t.memoizedState=p}}function Yg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var ul={},Kn=Ii(ul),Fa=Ii(ul),Ba=Ii(ul);function Ki(t){if(t===ul)throw Error(H(174));return t}function dp(t,e){switch(Le(Ba,e),Le(Fa,t),Le(Kn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ih(e,t)}Fe(Kn),Le(Kn,e)}function so(){Fe(Kn),Fe(Fa),Fe(Ba)}function b0(t){Ki(Ba.current);var e=Ki(Kn.current),n=Ih(e,t.type);e!==n&&(Le(Fa,t),Le(Kn,n))}function hp(t){Fa.current===t&&(Fe(Kn),Fe(Fa))}var We=Ii(0);function Ku(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $d=[];function fp(){for(var t=0;t<$d.length;t++)$d[t]._workInProgressVersionPrimary=null;$d.length=0}var mu=Dr.ReactCurrentDispatcher,Wd=Dr.ReactCurrentBatchConfig,ts=0,He=null,ut=null,pt=null,Gu=!1,wa=!1,za=0,xS=0;function kt(){throw Error(H(321))}function pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function mp(t,e,n,r,i,s){if(ts=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mu.current=t===null||t.memoizedState===null?AS:CS,t=n(r,i),wa){s=0;do{if(wa=!1,za=0,25<=s)throw Error(H(301));s+=1,pt=ut=null,e.updateQueue=null,mu.current=kS,t=n(r,i)}while(wa)}if(mu.current=Qu,e=ut!==null&&ut.next!==null,ts=0,pt=ut=He=null,Gu=!1,e)throw Error(H(300));return t}function gp(){var t=za!==0;return za=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?He.memoizedState=pt=t:pt=pt.next=t,pt}function wn(){if(ut===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=pt===null?He.memoizedState:pt.next;if(e!==null)pt=e,ut=t;else{if(t===null)throw Error(H(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?He.memoizedState=pt=t:pt=pt.next=t}return pt}function $a(t,e){return typeof e=="function"?e(t):e}function Hd(t){var e=wn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((ts&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,He.lanes|=f,ns|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Dn(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,ns|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=wn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dn(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function D0(){}function O0(t,e){var n=He,r=wn(),i=e(),s=!Dn(r.memoizedState,i);if(s&&(r.memoizedState=i,Gt=!0),r=r.queue,yp(V0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Wa(9,j0.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(H(349));ts&30||L0(n,e,i)}return i}function L0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function j0(t,e,n,r){e.value=n,e.getSnapshot=r,M0(e)&&U0(t)}function V0(t,e,n){return n(function(){M0(e)&&U0(t)})}function M0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function U0(t){var e=Sr(t,1);e!==null&&bn(e,t,1,-1)}function Xg(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=RS.bind(null,He,t),[e.memoizedState,t]}function Wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F0(){return wn().memoizedState}function gu(t,e,n,r){var i=Wn();He.flags|=t,i.memoizedState=Wa(1|e,n,void 0,r===void 0?null:r)}function Nc(t,e,n,r){var i=wn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&pp(r,o.deps)){i.memoizedState=Wa(e,n,s,r);return}}He.flags|=t,i.memoizedState=Wa(1|e,n,s,r)}function Jg(t,e){return gu(8390656,8,t,e)}function yp(t,e){return Nc(2048,8,t,e)}function B0(t,e){return Nc(4,2,t,e)}function z0(t,e){return Nc(4,4,t,e)}function $0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W0(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4,4,$0.bind(null,e,t),n)}function vp(){}function H0(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function q0(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function K0(t,e,n){return ts&21?(Dn(n,e)||(n=J_(),He.lanes|=n,ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function IS(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Wd.transition;Wd.transition={};try{t(!1),e()}finally{ke=n,Wd.transition=r}}function G0(){return wn().memoizedState}function SS(t,e,n){var r=ci(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q0(t))Y0(e,n);else if(n=P0(t,e,n,r),n!==null){var i=zt();bn(n,t,r,i),X0(n,e,r)}}function RS(t,e,n){var r=ci(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q0(t))Y0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Dn(l,o)){var u=e.interleaved;u===null?(i.next=i,up(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=P0(t,e,i,r),n!==null&&(i=zt(),bn(n,t,r,i),X0(n,e,r))}}function Q0(t){var e=t.alternate;return t===He||e!==null&&e===He}function Y0(t,e){wa=Gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}var Qu={readContext:_n,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},AS={readContext:_n,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:Jg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gu(4194308,4,$0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return gu(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SS.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:Xg,useDebugValue:vp,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=Xg(!1),e=t[0];return t=IS.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Wn();if($e){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),mt===null)throw Error(H(349));ts&30||L0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Jg(V0.bind(null,r,s,t),[t]),r.flags|=2048,Wa(9,j0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=mt.identifierPrefix;if($e){var n=mr,r=pr;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CS={readContext:_n,useCallback:H0,useContext:_n,useEffect:yp,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:z0,useMemo:q0,useReducer:Hd,useRef:F0,useState:function(){return Hd($a)},useDebugValue:vp,useDeferredValue:function(t){var e=wn();return K0(e,ut.memoizedState,t)},useTransition:function(){var t=Hd($a)[0],e=wn().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:O0,useId:G0,unstable_isNewReconciler:!1},kS={readContext:_n,useCallback:H0,useContext:_n,useEffect:yp,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:z0,useMemo:q0,useReducer:qd,useRef:F0,useState:function(){return qd($a)},useDebugValue:vp,useDeferredValue:function(t){var e=wn();return ut===null?e.memoizedState=t:K0(e,ut.memoizedState,t)},useTransition:function(){var t=qd($a)[0],e=wn().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:O0,useId:G0,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bc={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=ci(t),s=wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(bn(e,t,i,r),pu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=ci(t),s=wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(bn(e,t,i,r),pu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=ci(t),i=wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=li(t,i,r),e!==null&&(bn(e,t,r,n),pu(e,t,r))}};function Zg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ja(n,r)||!ja(i,s):!0}function J0(t,e,n){var r=!1,i=yi,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(i=Yt(e)?Zi:Vt.current,r=e.contextTypes,s=(r=r!=null)?no(t,i):yi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ey(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bc.enqueueReplaceState(e,e.state,null)}function qh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_n(s):(s=Yt(e)?Zi:Vt.current,i.context=no(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bc.enqueueReplaceState(i,i.state,null),qu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do n+=rI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function Z0(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,rf=r),Kh(t,e)},n}function ew(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kh(t,e),typeof r!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ty(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WS.bind(null,t,e,n),e.then(t,t))}function ny(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ry(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,li(n,e,1))),n.lanes|=1),t)}var NS=Dr.ReactCurrentOwner,Gt=!1;function Bt(t,e,n,r){e.child=t===null?k0(e,null,n,r):io(e,t.child,n,r)}function iy(t,e,n,r,i){n=n.render;var s=e.ref;return Qs(e,i),r=mp(t,e,n,r,s,i),n=gp(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):($e&&n&&rp(e),e.flags|=1,Bt(t,e,r,i),e.child)}function sy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tw(t,e,s,r,i)):(t=wu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(o,r)&&t.ref===e.ref)return Rr(t,e,i)}return e.flags|=1,t=di(s,r),t.ref=e.ref,t.return=e,e.child=t}function tw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ja(s,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Rr(t,e,i)}return Gh(t,e,n,r,i)}function nw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le($s,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le($s,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le($s,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le($s,rn),rn|=r;return Bt(t,e,i,n),e.child}function rw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,i){var s=Yt(n)?Zi:Vt.current;return s=no(e,s),Qs(e,i),n=mp(t,e,n,r,s,i),r=gp(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):($e&&r&&rp(e),e.flags|=1,Bt(t,e,n,i),e.child)}function oy(t,e,n,r,i){if(Yt(n)){var s=!0;Bu(e)}else s=!1;if(Qs(e,i),e.stateNode===null)yu(t,e),J0(e,n,r),qh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Yt(n)?Zi:Vt.current,c=no(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ey(e,o,r,c),qr=!1;var g=e.memoizedState;o.state=g,qu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||Qt.current||qr?(typeof f=="function"&&(Hh(e,n,f,r),u=e.memoizedState),(l=qr||Zg(e,n,l,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,N0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Rn(e.type,l),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=Yt(n)?Zi:Vt.current,u=no(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&ey(e,o,r,u),qr=!1,g=e.memoizedState,o.state=g,qu(e,r,o,i);var T=e.memoizedState;l!==p||g!==T||Qt.current||qr?(typeof _=="function"&&(Hh(e,n,_,r),T=e.memoizedState),(c=qr||Zg(e,n,c,r,g,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Qh(t,e,n,r,s,i)}function Qh(t,e,n,r,i,s){rw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Hg(e,n,!1),Rr(t,e,s);r=e.stateNode,NS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=io(e,t.child,null,s),e.child=io(e,null,l,s)):Bt(t,e,l,s),e.memoizedState=r.state,i&&Hg(e,n,!0),e.child}function iw(t){var e=t.stateNode;e.pendingContext?Wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wg(t,e.context,!1),dp(t,e.containerInfo)}function ay(t,e,n,r,i){return ro(),sp(i),e.flags|=256,Bt(t,e,n,r),e.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function sw(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(We,i&1),t===null)return $h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lc(o,r,0,null),t=Xi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xh(n),e.memoizedState=Yh,t):_p(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return bS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=di(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=di(l,s):(s=Xi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yh,r}return s=t.child,t=s.sibling,r=di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _p(t,e){return e=Lc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jl(t,e,n,r){return r!==null&&sp(r),io(e,t.child,null,n),t=_p(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(H(422))),Jl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Lc({mode:"visible",children:r.children},i,0,null),s=Xi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&io(e,t.child,null,o),e.child.memoizedState=Xh(o),e.memoizedState=Yh,s);if(!(e.mode&1))return Jl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(H(419)),r=Kd(s,r,void 0),Jl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Gt||l){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(t,i),bn(r,t,i,-1))}return Sp(),r=Kd(Error(H(421))),Jl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,on=ai(i.nextSibling),ln=e,$e=!0,kn=null,t!==null&&(pn[mn++]=pr,pn[mn++]=mr,pn[mn++]=es,pr=t.id,mr=t.overflow,es=e),e=_p(e,r.children),e.flags|=4096,e)}function ly(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wh(t.return,e,n)}function Gd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ow(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ly(t,n,e);else if(t.tag===19)ly(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ku(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ku(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gd(e,!0,n,null,s);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DS(t,e,n){switch(e.tag){case 3:iw(e),ro();break;case 5:b0(e);break;case 1:Yt(e.type)&&Bu(e);break;case 4:dp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(Wu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?sw(t,e,n):(Le(We,We.current&1),t=Rr(t,e,n),t!==null?t.sibling:null);Le(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ow(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,nw(t,e,n)}return Rr(t,e,n)}var aw,Jh,lw,uw;aw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jh=function(){};lw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ki(Kn.current);var s=null;switch(n){case"input":i=wh(t,i),r=wh(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=xh(t,i),r=xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uu)}Sh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ka.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ka.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};uw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jo(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OS(t,e,n){var r=e.pendingProps;switch(ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Yt(e.type)&&Fu(),Pt(e),null;case 3:return r=e.stateNode,so(),Fe(Qt),Fe(Vt),fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(af(kn),kn=null))),Jh(t,e),Pt(e),null;case 5:hp(e);var i=Ki(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)lw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Pt(e),null}if(t=Ki(Kn.current),Yl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Ua]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<aa.length;i++)Me(aa[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":yg(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":_g(r,s),Me("invalid",r)}Sh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ql(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ql(r.textContent,l,t),i=["children",""+l]):ka.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Bl(r),vg(r,s,!0);break;case"textarea":Bl(r),wg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Uu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[Ua]=r,aw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rh(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<aa.length;i++)Me(aa[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":yg(t,r),i=wh(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Me("invalid",t);break;case"textarea":_g(t,r),i=xh(t,r),Me("invalid",t);break;default:i=r}Sh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?F_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&M_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pa(t,u):typeof u=="number"&&Pa(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ka.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Me("scroll",t):u!=null&&$f(t,s,u,o))}switch(n){case"input":Bl(t),vg(t,r,!1);break;case"textarea":Bl(t),wg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)uw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ki(Ba.current),Ki(Kn.current),Yl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:Ql(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Fe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&on!==null&&e.mode&1&&!(e.flags&128))A0(),ro(),e.flags|=98560,s=!1;else if(s=Yl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Hn]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else kn!==null&&(af(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ct===0&&(ct=3):Sp())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return so(),Jh(t,e),t===null&&Va(e.stateNode.containerInfo),Pt(e),null;case 10:return lp(e.type._context),Pt(e),null;case 17:return Yt(e.type)&&Fu(),Pt(e),null;case 19:if(Fe(We),s=e.memoizedState,s===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jo(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ku(t),o!==null){for(e.flags|=128,Jo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>ao&&(e.flags|=128,r=!0,Jo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ku(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return Pt(e),null}else 2*Je()-s.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,r=!0,Jo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=We.current,Le(We,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Ip(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function LS(t,e){switch(ip(e),e.tag){case 1:return Yt(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),Fe(Qt),Fe(Vt),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hp(e),null;case 13:if(Fe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(We),null;case 4:return so(),null;case 10:return lp(e.type._context),null;case 22:case 23:return Ip(),null;case 24:return null;default:return null}}var Zl=!1,Dt=!1,jS=typeof WeakSet=="function"?WeakSet:Set,X=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Zh(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var uy=!1;function VS(t,e){if(jh=ju,t=p0(),np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vh={focusedElem:t,selectionRange:n},ju=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,P=T.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?C:Rn(e.type,C),P);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(O){Qe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return T=uy,uy=!1,T}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zh(e,n,s)}i=i.next}while(i!==r)}}function Dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cw(t){var e=t.alternate;e!==null&&(t.alternate=null,cw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Ua],delete e[Fh],delete e[_S],delete e[wS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dw(t){return t.tag===5||t.tag===3||t.tag===4}function cy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uu));else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}function nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nf(t,e,n),t=t.sibling;t!==null;)nf(t,e,n),t=t.sibling}var wt=null,An=!1;function zr(t,e,n){for(n=n.child;n!==null;)hw(t,e,n),n=n.sibling}function hw(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Sc,n)}catch{}switch(n.tag){case 5:Dt||zs(n,e);case 6:var r=wt,i=An;wt=null,zr(t,e,n),wt=r,An=i,wt!==null&&(An?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(An?(t=wt,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),Oa(t)):Bd(wt,n.stateNode));break;case 4:r=wt,i=An,wt=n.stateNode.containerInfo,An=!0,zr(t,e,n),wt=r,An=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zh(n,e,o),i=i.next}while(i!==r)}zr(t,e,n);break;case 1:if(!Dt&&(zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Qe(n,e,l)}zr(t,e,n);break;case 21:zr(t,e,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,zr(t,e,n),Dt=r):zr(t,e,n);break;default:zr(t,e,n)}}function dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jS),e.forEach(function(r){var i=qS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,An=!1;break e;case 3:wt=l.stateNode.containerInfo,An=!0;break e;case 4:wt=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(wt===null)throw Error(H(160));hw(s,o,i),wt=null,An=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fw(e,t),e=e.sibling}function fw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),$n(t),r&4){try{Ea(3,t,t.return),Dc(3,t)}catch(C){Qe(t,t.return,C)}try{Ea(5,t,t.return)}catch(C){Qe(t,t.return,C)}}break;case 1:Sn(e,t),$n(t),r&512&&n!==null&&zs(n,n.return);break;case 5:if(Sn(e,t),$n(t),r&512&&n!==null&&zs(n,n.return),t.flags&32){var i=t.stateNode;try{Pa(i,"")}catch(C){Qe(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&L_(i,s),Rh(l,o);var c=Rh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?F_(i,p):f==="dangerouslySetInnerHTML"?M_(i,p):f==="children"?Pa(i,p):$f(i,f,p,c)}switch(l){case"input":Eh(i,s);break;case"textarea":j_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Hs(i,!!s.multiple,_,!1):g!==!!s.multiple&&(s.defaultValue!=null?Hs(i,!!s.multiple,s.defaultValue,!0):Hs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ua]=s}catch(C){Qe(t,t.return,C)}}break;case 6:if(Sn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Qe(t,t.return,C)}}break;case 3:if(Sn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(e.containerInfo)}catch(C){Qe(t,t.return,C)}break;case 4:Sn(e,t),$n(t);break;case 13:Sn(e,t),$n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Tp=Je())),r&4&&dy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(c=Dt)||f,Sn(e,t),Dt=c):Sn(e,t),$n(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(X=t,f=t.child;f!==null;){for(p=X=f;X!==null;){switch(g=X,_=g.child,g.tag){case 0:case 11:case 14:case 15:Ea(4,g,g.return);break;case 1:zs(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){Qe(r,n,C)}}break;case 5:zs(g,g.return);break;case 22:if(g.memoizedState!==null){fy(p);continue}}_!==null?(_.return=g,X=_):fy(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=U_("display",o))}catch(C){Qe(t,t.return,C)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(C){Qe(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Sn(e,t),$n(t),r&4&&dy(t);break;case 21:break;default:Sn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pa(i,""),r.flags&=-33);var s=cy(t);nf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=cy(t);tf(t,l,o);break;default:throw Error(H(161))}}catch(u){Qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MS(t,e,n){X=t,pw(t)}function pw(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Dt;l=Zl;var c=Dt;if(Zl=o,(Dt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?py(i):u!==null?(u.return=o,X=u):py(i);for(;s!==null;)X=s,pw(s),s=s.sibling;X=i,Zl=l,Dt=c}hy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):hy(t)}}function hy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Yg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Oa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Dt||e.flags&512&&ef(e)}catch(g){Qe(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function fy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function py(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dc(4,e)}catch(u){Qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Qe(e,i,u)}}var s=e.return;try{ef(e)}catch(u){Qe(e,s,u)}break;case 5:var o=e.return;try{ef(e)}catch(u){Qe(e,o,u)}}}catch(u){Qe(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var US=Math.ceil,Yu=Dr.ReactCurrentDispatcher,wp=Dr.ReactCurrentOwner,yn=Dr.ReactCurrentBatchConfig,Te=0,mt=null,nt=null,xt=0,rn=0,$s=Ii(0),ct=0,Ha=null,ns=0,Oc=0,Ep=0,Ta=null,qt=null,Tp=0,ao=1/0,hr=null,Xu=!1,rf=null,ui=null,eu=!1,ei=null,Ju=0,xa=0,sf=null,vu=-1,_u=0;function zt(){return Te&6?Je():vu!==-1?vu:vu=Je()}function ci(t){return t.mode&1?Te&2&&xt!==0?xt&-xt:TS.transition!==null?(_u===0&&(_u=J_()),_u):(t=ke,t!==0||(t=window.event,t=t===void 0?16:s0(t.type)),t):1}function bn(t,e,n,r){if(50<xa)throw xa=0,sf=null,Error(H(185));ol(t,n,r),(!(Te&2)||t!==mt)&&(t===mt&&(!(Te&2)&&(Oc|=n),ct===4&&Gr(t,xt)),Xt(t,r),n===1&&Te===0&&!(e.mode&1)&&(ao=Je()+500,Pc&&Si()))}function Xt(t,e){var n=t.callbackNode;TI(t,e);var r=Lu(t,t===mt?xt:0);if(r===0)n!==null&&xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xg(n),e===1)t.tag===0?ES(my.bind(null,t)):I0(my.bind(null,t)),yS(function(){!(Te&6)&&Si()}),n=null;else{switch(Z_(r)){case 1:n=Gf;break;case 4:n=Y_;break;case 16:n=Ou;break;case 536870912:n=X_;break;default:n=Ou}n=Tw(n,mw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mw(t,e){if(vu=-1,_u=0,Te&6)throw Error(H(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Lu(t,t===mt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zu(t,r);else{e=r;var i=Te;Te|=2;var s=yw();(mt!==t||xt!==e)&&(hr=null,ao=Je()+500,Yi(t,e));do try{zS();break}catch(l){gw(t,l)}while(!0);ap(),Yu.current=s,Te=i,nt!==null?e=0:(mt=null,xt=0,e=ct)}if(e!==0){if(e===2&&(i=Nh(t),i!==0&&(r=i,e=of(t,i))),e===1)throw n=Ha,Yi(t,0),Gr(t,r),Xt(t,Je()),n;if(e===6)Gr(t,r);else{if(i=t.current.alternate,!(r&30)&&!FS(i)&&(e=Zu(t,r),e===2&&(s=Nh(t),s!==0&&(r=s,e=of(t,s))),e===1))throw n=Ha,Yi(t,0),Gr(t,r),Xt(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Bi(t,qt,hr);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=Tp+500-Je(),10<e)){if(Lu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uh(Bi.bind(null,t,qt,hr),e);break}Bi(t,qt,hr);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*US(r/1960))-r,10<r){t.timeoutHandle=Uh(Bi.bind(null,t,qt,hr),r);break}Bi(t,qt,hr);break;case 5:Bi(t,qt,hr);break;default:throw Error(H(329))}}}return Xt(t,Je()),t.callbackNode===n?mw.bind(null,t):null}function of(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=Zu(t,e),t!==2&&(e=qt,qt=n,e!==null&&af(e)),t}function af(t){qt===null?qt=t:qt.push.apply(qt,t)}function FS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~Ep,e&=~Oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function my(t){if(Te&6)throw Error(H(327));Ys();var e=Lu(t,0);if(!(e&1))return Xt(t,Je()),null;var n=Zu(t,e);if(t.tag!==0&&n===2){var r=Nh(t);r!==0&&(e=r,n=of(t,r))}if(n===1)throw n=Ha,Yi(t,0),Gr(t,e),Xt(t,Je()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,qt,hr),Xt(t,Je()),null}function xp(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(ao=Je()+500,Pc&&Si())}}function rs(t){ei!==null&&ei.tag===0&&!(Te&6)&&Ys();var e=Te;Te|=1;var n=yn.transition,r=ke;try{if(yn.transition=null,ke=1,t)return t()}finally{ke=r,yn.transition=n,Te=e,!(Te&6)&&Si()}}function Ip(){rn=$s.current,Fe($s)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gS(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(ip(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fu();break;case 3:so(),Fe(Qt),Fe(Vt),fp();break;case 5:hp(r);break;case 4:so();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:lp(r.type._context);break;case 22:case 23:Ip()}n=n.return}if(mt=t,nt=t=di(t.current,null),xt=rn=e,ct=0,Ha=null,Ep=Oc=ns=0,qt=Ta=null,qi!==null){for(e=0;e<qi.length;e++)if(n=qi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qi=null}return t}function gw(t,e){do{var n=nt;try{if(ap(),mu.current=Qu,Gu){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gu=!1}if(ts=0,pt=ut=He=null,wa=!1,za=0,wp.current=null,n===null||n.return===null){ct=1,Ha=e,nt=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=xt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=ny(o);if(_!==null){_.flags&=-257,ry(_,o,l,s,e),_.mode&1&&ty(s,c,e),e=_,u=c;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){ty(s,c,e),Sp();break e}u=Error(H(426))}}else if($e&&l.mode&1){var P=ny(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ry(P,o,l,s,e),sp(oo(u,l));break e}}s=u=oo(u,l),ct!==4&&(ct=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Z0(s,u,e);Qg(s,S);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ui===null||!ui.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=ew(s,l,e);Qg(s,O);break e}}s=s.return}while(s!==null)}_w(n)}catch(M){e=M,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function yw(){var t=Yu.current;return Yu.current=Qu,t===null?Qu:t}function Sp(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(ns&268435455)&&!(Oc&268435455)||Gr(mt,xt)}function Zu(t,e){var n=Te;Te|=2;var r=yw();(mt!==t||xt!==e)&&(hr=null,Yi(t,e));do try{BS();break}catch(i){gw(t,i)}while(!0);if(ap(),Te=n,Yu.current=r,nt!==null)throw Error(H(261));return mt=null,xt=0,ct}function BS(){for(;nt!==null;)vw(nt)}function zS(){for(;nt!==null&&!fI();)vw(nt)}function vw(t){var e=Ew(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?_w(t):nt=e,wp.current=null}function _w(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LS(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,nt=null;return}}else if(n=OS(n,e,rn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ct===0&&(ct=5)}function Bi(t,e,n){var r=ke,i=yn.transition;try{yn.transition=null,ke=1,$S(t,e,n,r)}finally{yn.transition=i,ke=r}return null}function $S(t,e,n,r){do Ys();while(ei!==null);if(Te&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xI(t,s),t===mt&&(nt=mt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eu||(eu=!0,Tw(Ou,function(){return Ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yn.transition,yn.transition=null;var o=ke;ke=1;var l=Te;Te|=4,wp.current=null,VS(t,n),fw(n,t),uS(Vh),ju=!!jh,Vh=jh=null,t.current=n,MS(n),pI(),Te=l,ke=o,yn.transition=s}else t.current=n;if(eu&&(eu=!1,ei=t,Ju=i),s=t.pendingLanes,s===0&&(ui=null),yI(n.stateNode),Xt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xu)throw Xu=!1,t=rf,rf=null,t;return Ju&1&&t.tag!==0&&Ys(),s=t.pendingLanes,s&1?t===sf?xa++:(xa=0,sf=t):xa=0,Si(),null}function Ys(){if(ei!==null){var t=Z_(Ju),e=yn.transition,n=ke;try{if(yn.transition=null,ke=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,Ju=0,Te&6)throw Error(H(331));var i=Te;for(Te|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Ea(8,f,s)}var p=f.child;if(p!==null)p.return=f,X=p;else for(;X!==null;){f=X;var g=f.sibling,_=f.return;if(cw(f),f===c){X=null;break}if(g!==null){g.return=_,X=g;break}X=_}}}var T=s.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,X=S;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=w;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dc(9,l)}}catch(M){Qe(l,l.return,M)}if(l===o){X=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,X=O;break e}X=l.return}}if(Te=i,Si(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Sc,t)}catch{}r=!0}return r}finally{ke=n,yn.transition=e}}return!1}function gy(t,e,n){e=oo(n,e),e=Z0(t,e,1),t=li(t,e,1),e=zt(),t!==null&&(ol(t,1,e),Xt(t,e))}function Qe(t,e,n){if(t.tag===3)gy(t,t,n);else for(;e!==null;){if(e.tag===3){gy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ui===null||!ui.has(r))){t=oo(n,t),t=ew(e,t,1),e=li(e,t,1),t=zt(),e!==null&&(ol(e,1,t),Xt(e,t));break}}e=e.return}}function WS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(xt&n)===n&&(ct===4||ct===3&&(xt&130023424)===xt&&500>Je()-Tp?Yi(t,0):Ep|=n),Xt(t,e)}function ww(t,e){e===0&&(t.mode&1?(e=Wl,Wl<<=1,!(Wl&130023424)&&(Wl=4194304)):e=1);var n=zt();t=Sr(t,e),t!==null&&(ol(t,e,n),Xt(t,n))}function HS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ww(t,n)}function qS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),ww(t,n)}var Ew;Ew=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,DS(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,$e&&e.flags&1048576&&S0(e,$u,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yu(t,e),t=e.pendingProps;var i=no(e,Vt.current);Qs(e,n),i=mp(null,e,r,t,i,n);var s=gp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(s=!0,Bu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cp(e),i.updater=bc,e.stateNode=i,i._reactInternals=e,qh(e,r,t,n),e=Qh(null,e,r,!0,s,n)):(e.tag=0,$e&&s&&rp(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GS(r),t=Rn(r,t),i){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=oy(null,e,r,t,n);break e;case 11:e=iy(null,e,r,t,n);break e;case 14:e=sy(null,e,r,Rn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Gh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),oy(t,e,r,i,n);case 3:e:{if(iw(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,N0(t,e),qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oo(Error(H(423)),e),e=ay(t,e,r,n,i);break e}else if(r!==i){i=oo(Error(H(424)),e),e=ay(t,e,r,n,i);break e}else for(on=ai(e.stateNode.containerInfo.firstChild),ln=e,$e=!0,kn=null,n=k0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),r===i){e=Rr(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return b0(e),t===null&&$h(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mh(r,i)?o=null:s!==null&&Mh(r,s)&&(e.flags|=32),rw(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&$h(e),null;case 13:return sw(t,e,n);case 4:return dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=io(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),iy(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(Wu,r._currentValue),r._currentValue=o,s!==null)if(Dn(s.value,o)){if(s.children===i.children&&!Qt.current){e=Rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Wh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qs(e,n),i=_n(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Rn(r,e.pendingProps),i=Rn(r.type,i),sy(t,e,r,i,n);case 15:return tw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),yu(t,e),e.tag=1,Yt(r)?(t=!0,Bu(e)):t=!1,Qs(e,n),J0(e,r,i),qh(e,r,i,n),Qh(null,e,r,!0,t,n);case 19:return ow(t,e,n);case 22:return nw(t,e,n)}throw Error(H(156,e.tag))};function Tw(t,e){return Q_(t,e)}function KS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new KS(t,e,n,r)}function Rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GS(t){if(typeof t=="function")return Rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hf)return 11;if(t===qf)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ds:return Xi(n.children,i,s,e);case Wf:o=8,i|=8;break;case gh:return t=gn(12,n,e,i|2),t.elementType=gh,t.lanes=s,t;case yh:return t=gn(13,n,e,i),t.elementType=yh,t.lanes=s,t;case vh:return t=gn(19,n,e,i),t.elementType=vh,t.lanes=s,t;case b_:return Lc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P_:o=10;break e;case N_:o=9;break e;case Hf:o=11;break e;case qf:o=14;break e;case Hr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xi(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function Lc(t,e,n,r){return t=gn(22,t,r,e),t.elementType=b_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function Yd(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ap(t,e,n,r,i,s,o,l,u){return t=new QS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cp(s),t}function YS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xw(t){if(!t)return yi;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Yt(n))return x0(t,n,e)}return e}function Iw(t,e,n,r,i,s,o,l,u){return t=Ap(n,r,!0,t,i,s,o,l,u),t.context=xw(null),n=t.current,r=zt(),i=ci(n),s=wr(r,i),s.callback=e??null,li(n,s,i),t.current.lanes=i,ol(t,i,r),Xt(t,r),t}function jc(t,e,n,r){var i=e.current,s=zt(),o=ci(i);return n=xw(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=li(i,e,o),t!==null&&(bn(t,i,o,s),pu(t,i,o)),o}function ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cp(t,e){yy(t,e),(t=t.alternate)&&yy(t,e)}function XS(){return null}var Sw=typeof reportError=="function"?reportError:function(t){console.error(t)};function kp(t){this._internalRoot=t}Vc.prototype.render=kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));jc(t,e,null,null)};Vc.prototype.unmount=kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rs(function(){jc(null,t,null,null)}),e[Ir]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=n0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&i0(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vy(){}function JS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ec(o);s.call(c)}}var o=Iw(e,r,t,0,null,!1,!1,"",vy);return t._reactRootContainer=o,t[Ir]=o.current,Va(t.nodeType===8?t.parentNode:t),rs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ec(u);l.call(c)}}var u=Ap(t,0,!1,null,null,!1,!1,"",vy);return t._reactRootContainer=u,t[Ir]=u.current,Va(t.nodeType===8?t.parentNode:t),rs(function(){jc(e,u,n,r)}),u}function Uc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=ec(o);l.call(u)}}jc(e,o,t,i)}else o=JS(n,e,t,i,r);return ec(o)}e0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(Qf(e,n|1),Xt(e,Je()),!(Te&6)&&(ao=Je()+500,Si()))}break;case 13:rs(function(){var r=Sr(t,1);if(r!==null){var i=zt();bn(r,t,1,i)}}),Cp(t,1)}};Yf=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=zt();bn(e,t,134217728,n)}Cp(t,134217728)}};t0=function(t){if(t.tag===13){var e=ci(t),n=Sr(t,e);if(n!==null){var r=zt();bn(n,t,e,r)}Cp(t,e)}};n0=function(){return ke};r0=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Ch=function(t,e,n){switch(e){case"input":if(Eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kc(r);if(!i)throw Error(H(90));O_(r),Eh(r,i)}}}break;case"textarea":j_(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};$_=xp;W_=rs;var ZS={usingClientEntryPoint:!1,Events:[ll,Vs,kc,B_,z_,xp]},Zo={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eR={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K_(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||XS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Sc=tu.inject(eR),qn=tu}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(H(200));return YS(t,e,null,n)};cn.createRoot=function(t,e){if(!Pp(t))throw Error(H(299));var n=!1,r="",i=Sw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ap(t,1,!1,null,null,n,!1,r,i),t[Ir]=e.current,Va(t.nodeType===8?t.parentNode:t),new kp(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=K_(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return rs(t)};cn.hydrate=function(t,e,n){if(!Mc(e))throw Error(H(200));return Uc(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Sw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Iw(e,null,t,1,n??null,i,!1,s,o),t[Ir]=e.current,Va(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Vc(e)};cn.render=function(t,e,n){if(!Mc(e))throw Error(H(200));return Uc(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!Mc(t))throw Error(H(40));return t._reactRootContainer?(rs(function(){Uc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};cn.unstable_batchedUpdates=xp;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Uc(t,e,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function Rw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rw)}catch(t){console.error(t)}}Rw(),R_.exports=cn;var Np=R_.exports;const tR=f_(Np),nR=h_({__proto__:null,default:tR},[Np]);var _y=Np;ph.createRoot=_y.createRoot,ph.hydrateRoot=_y.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)}var tt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(tt||(tt={}));const wy="popstate";function rR(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:u=""}=Or(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),qa("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof s=="string"?s:is(s))}function r(i,s){vi(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return sR(e,n,r,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iR(){return Math.random().toString(36).substr(2,8)}function Ey(t,e){return{usr:t.state,key:t.key,idx:e}}function qa(t,e,n,r){return n===void 0&&(n=null),ze({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Or(e):e,{state:n,key:e&&e.key||r||iR()})}function is(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Or(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=tt.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(ze({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=tt.Pop;let P=f(),S=P==null?null:P-c;c=P,u&&u({action:l,location:C.location,delta:S})}function g(P,S){l=tt.Push;let w=qa(C.location,P,S);n&&n(w,P),c=f()+1;let A=Ey(w,c),O=C.createHref(w);try{o.pushState(A,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(O)}s&&u&&u({action:l,location:C.location,delta:1})}function _(P,S){l=tt.Replace;let w=qa(C.location,P,S);n&&n(w,P),c=f();let A=Ey(w,c),O=C.createHref(w);o.replaceState(A,"",O),s&&u&&u({action:l,location:C.location,delta:0})}function T(P){let S=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof P=="string"?P:is(P);return w=w.replace(/ $/,"%20"),pe(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let C={get action(){return l},get location(){return t(i,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(wy,p),u=P,()=>{i.removeEventListener(wy,p),u=null}},createHref(P){return e(i,P)},createURL:T,encodeLocation(P){let S=T(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:_,go(P){return o.go(P)}};return C}var Ce;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ce||(Ce={}));const oR=new Set(["lazy","caseSensitive","path","id","index","children"]);function aR(t){return t.index===!0}function tc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),pe(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),aR(i)){let u=ze({},i,e(i),{id:l});return r[l]=u,u}else{let u=ze({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=tc(i.children,e,o,r)),u}})}function $i(t,e,n){return n===void 0&&(n="/"),Eu(t,e,n,!1)}function Eu(t,e,n,r){let i=typeof e=="string"?Or(e):e,s=Ar(i.pathname||"/",n);if(s==null)return null;let o=Aw(t);uR(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=wR(s);l=vR(o[u],c,r)}return l}function lR(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Aw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Er([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Aw(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:gR(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Cw(s.path))i(s,o,u)}),e}function Cw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Cw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function uR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cR=/^:[\w-]+$/,dR=3,hR=2,fR=1,pR=10,mR=-2,Ty=t=>t==="*";function gR(t,e){let n=t.split("/"),r=n.length;return n.some(Ty)&&(r+=mR),e&&(r+=hR),n.filter(i=>!Ty(i)).reduce((i,s)=>i+(cR.test(s)?dR:s===""?fR:pR),r)}function yR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vR(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=nc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=nc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Er([s,p.pathname]),pathnameBase:IR(Er([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Er([s,p.pathnameBase]))}return o}function nc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_R(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,p)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let C=l[p]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const T=l[p];return _&&!T?c[g]=void 0:c[g]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _R(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ar(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const ER=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=t=>ER.test(t);function xR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Or(t):t,s;if(n)if(TR(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),vi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=xy(n.substring(1),"/"):s=xy(n,e)}else s=e;return{pathname:s,search:SR(r),hash:RR(i)}}function xy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fc(t,e){let n=kw(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bc(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Or(t):(i=ze({},t),pe(!i.pathname||!i.pathname.includes("?"),Xd("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),Xd("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),Xd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=xR(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),IR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class rc{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ka(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Pw=["post","put","patch","delete"],AR=new Set(Pw),CR=["get",...Pw],kR=new Set(CR),PR=new Set([301,302,303,307,308]),NR=new Set([307,308]),Jd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ea={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Nw="remix-router-transitions";function OR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=L=>({hasErrorBoundary:N(L)})}else i=DR;let s={},o=tc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||MR,f=t.patchRoutesOnNavigation,p=ze({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,_=new Set,T=null,C=null,P=null,S=t.hydrationData!=null,w=$i(o,t.history.location,u),A=!1,O=null;if(w==null&&!f){let N=Ht(404,{pathname:t.history.location.pathname}),{matches:L,route:V}=Oy(o);w=L,O={[V.id]:N}}w&&!t.hydrationData&&Vi(w,o,t.history.location.pathname).active&&(w=null);let M;if(w)if(w.some(N=>N.route.lazy))M=!1;else if(!w.some(N=>N.route.loader))M=!0;else if(p.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null;if(L){let V=w.findIndex($=>L[$.route.id]!==void 0);M=w.slice(0,V+1).every($=>!uf($.route,N,L))}else M=w.every(V=>!uf(V.route,N,L))}else M=t.hydrationData!=null;else if(M=!1,w=[],p.v7_partialHydration){let N=Vi(null,o,t.history.location.pathname);N.active&&N.matches&&(A=!0,w=N.matches)}let F,y={historyAction:t.history.action,location:t.history.location,matches:w,initialized:M,navigation:Jd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},v=tt.Pop,x=!1,I,b=!1,k=new Map,R=null,oe=!1,xe=!1,ht=[],q=new Set,B=new Map,re=0,se=-1,Ie=new Map,me=new Set,be=new Map,Ut=new Map,Ye=new Set,gt=new Map,yt=new Map,gs;function md(){if(g=t.history.listen(N=>{let{action:L,location:V,delta:$}=N;if(gs){gs(),gs=void 0;return}vi(yt.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=jo({currentLocation:y.location,nextLocation:V,historyAction:L});if(G&&$!=null){let te=new Promise(ae=>{gs=ae});t.history.go($*-1),Oi(G,{state:"blocked",location:V,proceed(){Oi(G,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),te.then(()=>t.history.go($))},reset(){let ae=new Map(y.blockers);ae.set(G,ea),ot({blockers:ae})}});return}return Un(L,V)}),n){JR(e,k);let N=()=>ZR(e,k);e.addEventListener("pagehide",N),R=()=>e.removeEventListener("pagehide",N)}return y.initialized||Un(tt.Pop,y.location,{initialHydration:!0}),F}function ys(){g&&g(),R&&R(),_.clear(),I&&I.abort(),y.fetchers.forEach((N,L)=>ws(L)),y.blockers.forEach((N,L)=>Ts(L))}function vs(N){return _.add(N),()=>_.delete(N)}function ot(N,L){L===void 0&&(L={}),y=ze({},y,N);let V=[],$=[];p.v7_fetcherPersist&&y.fetchers.forEach((G,te)=>{G.state==="idle"&&(Ye.has(te)?$.push(te):V.push(te))}),Ye.forEach(G=>{!y.fetchers.has(G)&&!B.has(G)&&$.push(G)}),[..._].forEach(G=>G(y,{deletedFetchers:$,viewTransitionOpts:L.viewTransitionOpts,flushSync:L.flushSync===!0})),p.v7_fetcherPersist?(V.forEach(G=>y.fetchers.delete(G)),$.forEach(G=>ws(G))):$.forEach(G=>Ye.delete(G))}function Mn(N,L,V){var $,G;let{flushSync:te}=V===void 0?{}:V,ae=y.actionData!=null&&y.navigation.formMethod!=null&&Cn(y.navigation.formMethod)&&y.navigation.state==="loading"&&(($=N.state)==null?void 0:$._isRedirect)!==!0,Z;L.actionData?Object.keys(L.actionData).length>0?Z=L.actionData:Z=null:ae?Z=y.actionData:Z=null;let J=L.loaderData?by(y.loaderData,L.loaderData,L.matches||[],L.errors):y.loaderData,Y=y.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((fe,Ze)=>Y.set(Ze,ea)));let ne=x===!0||y.navigation.formMethod!=null&&Cn(y.navigation.formMethod)&&((G=N.state)==null?void 0:G._isRedirect)!==!0;l&&(o=l,l=void 0),oe||v===tt.Pop||(v===tt.Push?t.history.push(N,N.state):v===tt.Replace&&t.history.replace(N,N.state));let ue;if(v===tt.Pop){let fe=k.get(y.location.pathname);fe&&fe.has(N.pathname)?ue={currentLocation:y.location,nextLocation:N}:k.has(N.pathname)&&(ue={currentLocation:N,nextLocation:y.location})}else if(b){let fe=k.get(y.location.pathname);fe?fe.add(N.pathname):(fe=new Set([N.pathname]),k.set(y.location.pathname,fe)),ue={currentLocation:y.location,nextLocation:N}}ot(ze({},L,{actionData:Z,loaderData:J,historyAction:v,location:N,initialized:!0,navigation:Jd,revalidation:"idle",restoreScrollPosition:ji(N,L.matches||y.matches),preventScrollReset:ne,blockers:Y}),{viewTransitionOpts:ue,flushSync:te===!0}),v=tt.Pop,x=!1,b=!1,oe=!1,xe=!1,ht=[]}async function _s(N,L){if(typeof N=="number"){t.history.go(N);return}let V=lf(y.location,y.matches,u,p.v7_prependBasename,N,p.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:$,submission:G,error:te}=Iy(p.v7_normalizeFormMethod,!1,V,L),ae=y.location,Z=qa(y.location,$,L&&L.state);Z=ze({},Z,t.history.encodeLocation(Z));let J=L&&L.replace!=null?L.replace:void 0,Y=tt.Push;J===!0?Y=tt.Replace:J===!1||G!=null&&Cn(G.formMethod)&&G.formAction===y.location.pathname+y.location.search&&(Y=tt.Replace);let ne=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,ue=(L&&L.flushSync)===!0,fe=jo({currentLocation:ae,nextLocation:Z,historyAction:Y});if(fe){Oi(fe,{state:"blocked",location:Z,proceed(){Oi(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),_s(N,L)},reset(){let Ze=new Map(y.blockers);Ze.set(fe,ea),ot({blockers:Ze})}});return}return await Un(Y,Z,{submission:G,pendingError:te,preventScrollReset:ne,replace:L&&L.replace,enableViewTransition:L&&L.viewTransition,flushSync:ue})}function Po(){if(lt(),ot({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){Un(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}Un(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:b===!0})}}async function Un(N,L,V){I&&I.abort(),I=null,v=N,oe=(V&&V.startUninterruptedRevalidation)===!0,Sl(y.location,y.matches),x=(V&&V.preventScrollReset)===!0,b=(V&&V.enableViewTransition)===!0;let $=l||o,G=V&&V.overrideNavigation,te=V!=null&&V.initialHydration&&y.matches&&y.matches.length>0&&!A?y.matches:$i($,L,u),ae=(V&&V.flushSync)===!0;if(te&&y.initialized&&!xe&&WR(y.location,L)&&!(V&&V.submission&&Cn(V.submission.formMethod))){Mn(L,{matches:te},{flushSync:ae});return}let Z=Vi(te,$,L.pathname);if(Z.active&&Z.matches&&(te=Z.matches),!te){let{error:Ae,notFoundMatches:ve,route:Oe}=or(L.pathname);Mn(L,{matches:ve,loaderData:{},errors:{[Oe.id]:Ae}},{flushSync:ae});return}I=new AbortController;let J=Cs(t.history,L,I.signal,V&&V.submission),Y;if(V&&V.pendingError)Y=[Wi(te).route.id,{type:Ce.error,error:V.pendingError}];else if(V&&V.submission&&Cn(V.submission.formMethod)){let Ae=await gd(J,L,V.submission,te,Z.active,{replace:V.replace,flushSync:ae});if(Ae.shortCircuited)return;if(Ae.pendingActionResult){let[ve,Oe]=Ae.pendingActionResult;if(sn(Oe)&&Ka(Oe.error)&&Oe.error.status===404){I=null,Mn(L,{matches:Ae.matches,loaderData:{},errors:{[ve]:Oe.error}});return}}te=Ae.matches||te,Y=Ae.pendingActionResult,G=Zd(L,V.submission),ae=!1,Z.active=!1,J=Cs(t.history,J.url,J.signal)}let{shortCircuited:ne,matches:ue,loaderData:fe,errors:Ze}=await yd(J,L,te,Z.active,G,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,ae,Y);ne||(I=null,Mn(L,ze({matches:ue||te},Dy(Y),{loaderData:fe,errors:Ze})))}async function gd(N,L,V,$,G,te){te===void 0&&(te={}),lt();let ae=YR(L,V);if(ot({navigation:ae},{flushSync:te.flushSync===!0}),G){let Y=await Bn($,L.pathname,N.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let ne=Wi(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[ne,{type:Ce.error,error:Y.error}]}}else if(Y.matches)$=Y.matches;else{let{notFoundMatches:ne,error:ue,route:fe}=or(L.pathname);return{matches:ne,pendingActionResult:[fe.id,{type:Ce.error,error:ue}]}}}let Z,J=la($,L);if(!J.route.action&&!J.route.lazy)Z={type:Ce.error,error:Ht(405,{method:N.method,pathname:L.pathname,routeId:J.route.id})};else if(Z=(await jr("action",y,N,[J],$,null))[J.route.id],N.signal.aborted)return{shortCircuited:!0};if(Gi(Z)){let Y;return te&&te.replace!=null?Y=te.replace:Y=ky(Z.response.headers.get("Location"),new URL(N.url),u,t.history)===y.location.pathname+y.location.search,await En(N,Z,!0,{submission:V,replace:Y}),{shortCircuited:!0}}if(ti(Z))throw Ht(400,{type:"defer-action"});if(sn(Z)){let Y=Wi($,J.route.id);return(te&&te.replace)!==!0&&(v=tt.Push),{matches:$,pendingActionResult:[Y.route.id,Z]}}return{matches:$,pendingActionResult:[J.route.id,Z]}}async function yd(N,L,V,$,G,te,ae,Z,J,Y,ne){let ue=G||Zd(L,te),fe=te||ae||jy(ue),Ze=!oe&&(!p.v7_partialHydration||!J);if($){if(Ze){let je=No(ne);ot(ze({navigation:ue},je!==void 0?{actionData:je}:{}),{flushSync:Y})}let we=await Bn(V,L.pathname,N.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){let je=Wi(we.partialMatches).route.id;return{matches:we.partialMatches,loaderData:{},errors:{[je]:we.error}}}else if(we.matches)V=we.matches;else{let{error:je,notFoundMatches:ur,route:Ur}=or(L.pathname);return{matches:ur,loaderData:{},errors:{[Ur.id]:je}}}}let Ae=l||o,[ve,Oe]=Ry(t.history,y,V,fe,L,p.v7_partialHydration&&J===!0,p.v7_skipActionErrorRevalidation,xe,ht,q,Ye,be,me,Ae,u,ne);if(Li(we=>!(V&&V.some(je=>je.route.id===we))||ve&&ve.some(je=>je.route.id===we)),se=++re,ve.length===0&&Oe.length===0){let we=Es();return Mn(L,ze({matches:V,loaderData:{},errors:ne&&sn(ne[1])?{[ne[0]]:ne[1].error}:null},Dy(ne),we?{fetchers:new Map(y.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(Ze){let we={};if(!$){we.navigation=ue;let je=No(ne);je!==void 0&&(we.actionData=je)}Oe.length>0&&(we.fetchers=bo(Oe)),ot(we,{flushSync:Y})}Oe.forEach(we=>{Tn(we.key),we.controller&&B.set(we.key,we.controller)});let ar=()=>Oe.forEach(we=>Tn(we.key));I&&I.signal.addEventListener("abort",ar);let{loaderResults:Vr,fetcherResults:xn}=await at(y,V,ve,Oe,N);if(N.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",ar),Oe.forEach(we=>B.delete(we.key));let Ft=nu(Vr);if(Ft)return await En(N,Ft.result,!0,{replace:Z}),{shortCircuited:!0};if(Ft=nu(xn),Ft)return me.add(Ft.key),await En(N,Ft.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:xs,errors:lr}=Ny(y,V,Vr,ne,Oe,xn,gt);gt.forEach((we,je)=>{we.subscribe(ur=>{(ur||we.done)&&gt.delete(je)})}),p.v7_partialHydration&&J&&y.errors&&(lr=ze({},y.errors,lr));let tn=Es(),fn=Il(se),Mr=tn||fn||Oe.length>0;return ze({matches:V,loaderData:xs,errors:lr},Mr?{fetchers:new Map(y.fetchers)}:{})}function No(N){if(N&&!sn(N[1]))return{[N[0]]:N[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function bo(N){return N.forEach(L=>{let V=y.fetchers.get(L.key),$=ta(void 0,V?V.data:void 0);y.fetchers.set(L.key,$)}),new Map(y.fetchers)}function xl(N,L,V,$){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Tn(N);let G=($&&$.flushSync)===!0,te=l||o,ae=lf(y.location,y.matches,u,p.v7_prependBasename,V,p.v7_relativeSplatPath,L,$==null?void 0:$.relative),Z=$i(te,ae,u),J=Vi(Z,te,ae);if(J.active&&J.matches&&(Z=J.matches),!Z){hn(N,L,Ht(404,{pathname:ae}),{flushSync:G});return}let{path:Y,submission:ne,error:ue}=Iy(p.v7_normalizeFormMethod,!0,ae,$);if(ue){hn(N,L,ue,{flushSync:G});return}let fe=la(Z,Y),Ze=($&&$.preventScrollReset)===!0;if(ne&&Cn(ne.formMethod)){vd(N,L,Y,fe,Z,J.active,G,Ze,ne);return}be.set(N,{routeId:L,path:Y}),Do(N,L,Y,fe,Z,J.active,G,Ze,ne)}async function vd(N,L,V,$,G,te,ae,Z,J){lt(),be.delete(N);function Y(Be){if(!Be.route.action&&!Be.route.lazy){let zn=Ht(405,{method:J.formMethod,pathname:V,routeId:L});return hn(N,L,zn,{flushSync:ae}),!0}return!1}if(!te&&Y($))return;let ne=y.fetchers.get(N);en(N,XR(J,ne),{flushSync:ae});let ue=new AbortController,fe=Cs(t.history,V,ue.signal,J);if(te){let Be=await Bn(G,new URL(fe.url).pathname,fe.signal,N);if(Be.type==="aborted")return;if(Be.type==="error"){hn(N,L,Be.error,{flushSync:ae});return}else if(Be.matches){if(G=Be.matches,$=la(G,V),Y($))return}else{hn(N,L,Ht(404,{pathname:V}),{flushSync:ae});return}}B.set(N,ue);let Ze=re,ve=(await jr("action",y,fe,[$],G,N))[$.route.id];if(fe.signal.aborted){B.get(N)===ue&&B.delete(N);return}if(p.v7_fetcherPersist&&Ye.has(N)){if(Gi(ve)||sn(ve)){en(N,Wr(void 0));return}}else{if(Gi(ve))if(B.delete(N),se>Ze){en(N,Wr(void 0));return}else return me.add(N),en(N,ta(J)),En(fe,ve,!1,{fetcherSubmission:J,preventScrollReset:Z});if(sn(ve)){hn(N,L,ve.error);return}}if(ti(ve))throw Ht(400,{type:"defer-action"});let Oe=y.navigation.location||y.location,ar=Cs(t.history,Oe,ue.signal),Vr=l||o,xn=y.navigation.state!=="idle"?$i(Vr,y.navigation.location,u):y.matches;pe(xn,"Didn't find any matches after fetcher action");let Ft=++re;Ie.set(N,Ft);let xs=ta(J,ve.data);y.fetchers.set(N,xs);let[lr,tn]=Ry(t.history,y,xn,J,Oe,!1,p.v7_skipActionErrorRevalidation,xe,ht,q,Ye,be,me,Vr,u,[$.route.id,ve]);tn.filter(Be=>Be.key!==N).forEach(Be=>{let zn=Be.key,Mo=y.fetchers.get(zn),Al=ta(void 0,Mo?Mo.data:void 0);y.fetchers.set(zn,Al),Tn(zn),Be.controller&&B.set(zn,Be.controller)}),ot({fetchers:new Map(y.fetchers)});let fn=()=>tn.forEach(Be=>Tn(Be.key));ue.signal.addEventListener("abort",fn);let{loaderResults:Mr,fetcherResults:we}=await at(y,xn,lr,tn,ar);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",fn),Ie.delete(N),B.delete(N),tn.forEach(Be=>B.delete(Be.key));let je=nu(Mr);if(je)return En(ar,je.result,!1,{preventScrollReset:Z});if(je=nu(we),je)return me.add(je.key),En(ar,je.result,!1,{preventScrollReset:Z});let{loaderData:ur,errors:Ur}=Ny(y,xn,Mr,void 0,tn,we,gt);if(y.fetchers.has(N)){let Be=Wr(ve.data);y.fetchers.set(N,Be)}Il(Ft),y.navigation.state==="loading"&&Ft>se?(pe(v,"Expected pending action"),I&&I.abort(),Mn(y.navigation.location,{matches:xn,loaderData:ur,errors:Ur,fetchers:new Map(y.fetchers)})):(ot({errors:Ur,loaderData:by(y.loaderData,ur,xn,Ur),fetchers:new Map(y.fetchers)}),xe=!1)}async function Do(N,L,V,$,G,te,ae,Z,J){let Y=y.fetchers.get(N);en(N,ta(J,Y?Y.data:void 0),{flushSync:ae});let ne=new AbortController,ue=Cs(t.history,V,ne.signal);if(te){let ve=await Bn(G,new URL(ue.url).pathname,ue.signal,N);if(ve.type==="aborted")return;if(ve.type==="error"){hn(N,L,ve.error,{flushSync:ae});return}else if(ve.matches)G=ve.matches,$=la(G,V);else{hn(N,L,Ht(404,{pathname:V}),{flushSync:ae});return}}B.set(N,ne);let fe=re,Ae=(await jr("loader",y,ue,[$],G,N))[$.route.id];if(ti(Ae)&&(Ae=await Dp(Ae,ue.signal,!0)||Ae),B.get(N)===ne&&B.delete(N),!ue.signal.aborted){if(Ye.has(N)){en(N,Wr(void 0));return}if(Gi(Ae))if(se>fe){en(N,Wr(void 0));return}else{me.add(N),await En(ue,Ae,!1,{preventScrollReset:Z});return}if(sn(Ae)){hn(N,L,Ae.error);return}pe(!ti(Ae),"Unhandled fetcher deferred data"),en(N,Wr(Ae.data))}}async function En(N,L,V,$){let{submission:G,fetcherSubmission:te,preventScrollReset:ae,replace:Z}=$===void 0?{}:$;L.response.headers.has("X-Remix-Revalidate")&&(xe=!0);let J=L.response.headers.get("Location");pe(J,"Expected a Location header on the redirect Response"),J=ky(J,new URL(N.url),u,t.history);let Y=qa(y.location,J,{_isRedirect:!0});if(n){let ve=!1;if(L.response.headers.has("X-Remix-Reload-Document"))ve=!0;else if(bp.test(J)){const Oe=t.history.createURL(J);ve=Oe.origin!==e.location.origin||Ar(Oe.pathname,u)==null}if(ve){Z?e.location.replace(J):e.location.assign(J);return}}I=null;let ne=Z===!0||L.response.headers.has("X-Remix-Replace")?tt.Replace:tt.Push,{formMethod:ue,formAction:fe,formEncType:Ze}=y.navigation;!G&&!te&&ue&&fe&&Ze&&(G=jy(y.navigation));let Ae=G||te;if(NR.has(L.response.status)&&Ae&&Cn(Ae.formMethod))await Un(ne,Y,{submission:ze({},Ae,{formAction:J}),preventScrollReset:ae||x,enableViewTransition:V?b:void 0});else{let ve=Zd(Y,G);await Un(ne,Y,{overrideNavigation:ve,fetcherSubmission:te,preventScrollReset:ae||x,enableViewTransition:V?b:void 0})}}async function jr(N,L,V,$,G,te){let ae,Z={};try{ae=await UR(c,N,L,V,$,G,te,s,i)}catch(J){return $.forEach(Y=>{Z[Y.route.id]={type:Ce.error,error:J}}),Z}for(let[J,Y]of Object.entries(ae))if(HR(Y)){let ne=Y.result;Z[J]={type:Ce.redirect,response:zR(ne,V,J,G,u,p.v7_relativeSplatPath)}}else Z[J]=await BR(Y);return Z}async function at(N,L,V,$,G){let te=N.matches,ae=jr("loader",N,G,V,L,null),Z=Promise.all($.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let fe=(await jr("loader",N,Cs(t.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:fe}}else return Promise.resolve({[ne.key]:{type:Ce.error,error:Ht(404,{pathname:ne.path})}})})),J=await ae,Y=(await Z).reduce((ne,ue)=>Object.assign(ne,ue),{});return await Promise.all([GR(L,J,G.signal,te,N.loaderData),QR(L,Y,$)]),{loaderResults:J,fetcherResults:Y}}function lt(){xe=!0,ht.push(...Li()),be.forEach((N,L)=>{B.has(L)&&q.add(L),Tn(L)})}function en(N,L,V){V===void 0&&(V={}),y.fetchers.set(N,L),ot({fetchers:new Map(y.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function hn(N,L,V,$){$===void 0&&($={});let G=Wi(y.matches,L);ws(N),ot({errors:{[G.route.id]:V},fetchers:new Map(y.fetchers)},{flushSync:($&&$.flushSync)===!0})}function Oo(N){return Ut.set(N,(Ut.get(N)||0)+1),Ye.has(N)&&Ye.delete(N),y.fetchers.get(N)||bR}function ws(N){let L=y.fetchers.get(N);B.has(N)&&!(L&&L.state==="loading"&&Ie.has(N))&&Tn(N),be.delete(N),Ie.delete(N),me.delete(N),p.v7_fetcherPersist&&Ye.delete(N),q.delete(N),y.fetchers.delete(N)}function Di(N){let L=(Ut.get(N)||0)-1;L<=0?(Ut.delete(N),Ye.add(N),p.v7_fetcherPersist||ws(N)):Ut.set(N,L),ot({fetchers:new Map(y.fetchers)})}function Tn(N){let L=B.get(N);L&&(L.abort(),B.delete(N))}function Lo(N){for(let L of N){let V=Oo(L),$=Wr(V.data);y.fetchers.set(L,$)}}function Es(){let N=[],L=!1;for(let V of me){let $=y.fetchers.get(V);pe($,"Expected fetcher: "+V),$.state==="loading"&&(me.delete(V),N.push(V),L=!0)}return Lo(N),L}function Il(N){let L=[];for(let[V,$]of Ie)if($<N){let G=y.fetchers.get(V);pe(G,"Expected fetcher: "+V),G.state==="loading"&&(Tn(V),Ie.delete(V),L.push(V))}return Lo(L),L.length>0}function _d(N,L){let V=y.blockers.get(N)||ea;return yt.get(N)!==L&&yt.set(N,L),V}function Ts(N){y.blockers.delete(N),yt.delete(N)}function Oi(N,L){let V=y.blockers.get(N)||ea;pe(V.state==="unblocked"&&L.state==="blocked"||V.state==="blocked"&&L.state==="blocked"||V.state==="blocked"&&L.state==="proceeding"||V.state==="blocked"&&L.state==="unblocked"||V.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+L.state);let $=new Map(y.blockers);$.set(N,L),ot({blockers:$})}function jo(N){let{currentLocation:L,nextLocation:V,historyAction:$}=N;if(yt.size===0)return;yt.size>1&&vi(!1,"A router only supports one blocker at a time");let G=Array.from(yt.entries()),[te,ae]=G[G.length-1],Z=y.blockers.get(te);if(!(Z&&Z.state==="proceeding")&&ae({currentLocation:L,nextLocation:V,historyAction:$}))return te}function or(N){let L=Ht(404,{pathname:N}),V=l||o,{matches:$,route:G}=Oy(V);return Li(),{notFoundMatches:$,route:G,error:L}}function Li(N){let L=[];return gt.forEach((V,$)=>{(!N||N($))&&(V.cancel(),L.push($),gt.delete($))}),L}function Vo(N,L,V){if(T=N,P=L,C=V||null,!S&&y.navigation===Jd){S=!0;let $=ji(y.location,y.matches);$!=null&&ot({restoreScrollPosition:$})}return()=>{T=null,P=null,C=null}}function Fn(N,L){return C&&C(N,L.map($=>lR($,y.loaderData)))||N.key}function Sl(N,L){if(T&&P){let V=Fn(N,L);T[V]=P()}}function ji(N,L){if(T){let V=Fn(N,L),$=T[V];if(typeof $=="number")return $}return null}function Vi(N,L,V){if(f)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:Eu(L,V,u,!0)}}else return{active:!0,matches:Eu(L,V,u,!0)||[]};return{active:!1,matches:null}}async function Bn(N,L,V,$){if(!f)return{type:"success",matches:N};let G=N;for(;;){let te=l==null,ae=l||o,Z=s;try{await f({signal:V,path:L,matches:G,fetcherKey:$,patch:(ne,ue)=>{V.aborted||Cy(ne,ue,ae,Z,i)}})}catch(ne){return{type:"error",error:ne,partialMatches:G}}finally{te&&!V.aborted&&(o=[...o])}if(V.aborted)return{type:"aborted"};let J=$i(ae,L,u);if(J)return{type:"success",matches:J};let Y=Eu(ae,L,u,!0);if(!Y||G.length===Y.length&&G.every((ne,ue)=>ne.route.id===Y[ue].route.id))return{type:"success",matches:null};G=Y}}function Rl(N){s={},l=tc(N,i,void 0,s)}function vt(N,L){let V=l==null;Cy(N,L,l||o,s,i),V&&(o=[...o],ot({}))}return F={get basename(){return u},get future(){return p},get state(){return y},get routes(){return o},get window(){return e},initialize:md,subscribe:vs,enableScrollRestoration:Vo,navigate:_s,fetch:xl,revalidate:Po,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Oo,deleteFetcher:Di,dispose:ys,getBlocker:_d,deleteBlocker:Ts,patchRoutes:vt,_internalFetchControllers:B,_internalActiveDeferreds:gt,_internalSetRoutes:Rl},F}function LR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function lf(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let p of e)if(u.push(p),p.route.id===o){c=p;break}}else u=e,c=e[e.length-1];let f=Bc(i||".",Fc(u,s),Ar(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c){let p=Op(f.search);if(c.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let g=new URLSearchParams(f.search),_=g.getAll("index");g.delete("index"),_.filter(C=>C).forEach(C=>g.append("index",C));let T=g.toString();f.search=T?"?"+T:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Er([n,f.pathname])),is(f)}function Iy(t,e,n,r){if(!r||!LR(r))return{path:n};if(r.formMethod&&!KR(r.formMethod))return{path:n,error:Ht(405,{method:r.formMethod})};let i=()=>({path:n,error:Ht(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=Ow(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Cn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,T)=>{let[C,P]=T;return""+_+C+"="+P+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Cn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}pe(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=cf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=cf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Py(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Py(u)}catch{return i()}let f={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Cn(f.formMethod))return{path:n,submission:f};let p=Or(n);return e&&p.search&&Op(p.search)&&u.append("index",""),p.search="?"+u,{path:is(p),submission:f}}function Sy(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Ry(t,e,n,r,i,s,o,l,u,c,f,p,g,_,T,C){let P=C?sn(C[1])?C[1].error:C[1].data:void 0,S=t.createURL(e.location),w=t.createURL(i),A=n;s&&e.errors?A=Sy(n,Object.keys(e.errors)[0],!0):C&&sn(C[1])&&(A=Sy(n,C[0]));let O=C?C[1].statusCode:void 0,M=o&&O&&O>=400,F=A.filter((v,x)=>{let{route:I}=v;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return uf(I,e.loaderData,e.errors);if(jR(e.loaderData,e.matches[x],v)||u.some(R=>R===v.route.id))return!0;let b=e.matches[x],k=v;return Ay(v,ze({currentUrl:S,currentParams:b.params,nextUrl:w,nextParams:k.params},r,{actionResult:P,actionStatus:O,defaultShouldRevalidate:M?!1:l||S.pathname+S.search===w.pathname+w.search||S.search!==w.search||bw(b,k)}))}),y=[];return p.forEach((v,x)=>{if(s||!n.some(oe=>oe.route.id===v.routeId)||f.has(x))return;let I=$i(_,v.path,T);if(!I){y.push({key:x,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let b=e.fetchers.get(x),k=la(I,v.path),R=!1;g.has(x)?R=!1:c.has(x)?(c.delete(x),R=!0):b&&b.state!=="idle"&&b.data===void 0?R=l:R=Ay(k,ze({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:P,actionStatus:O,defaultShouldRevalidate:M?!1:l})),R&&y.push({key:x,routeId:v.routeId,path:v.path,matches:I,match:k,controller:new AbortController})}),[F,y]}function uf(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function jR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function bw(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Ay(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Cy(t,e,n,r,i){var s;let o;if(t){let c=r[t];pe(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(f=>Dw(c,f))),u=tc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function Dw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>Dw(n,s))}):!1}async function VR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];pe(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";vi(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!oR.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ze({},e(i),{lazy:void 0}))}async function MR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function UR(t,e,n,r,i,s,o,l,u,c){let f=s.map(_=>_.route.lazy?VR(_.route,u,l):void 0),p=s.map((_,T)=>{let C=f[T],P=i.some(w=>w.route.id===_.route.id);return ze({},_,{shouldLoad:P,resolve:async w=>(w&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(P=!0),P?FR(e,r,_,C,w,c):Promise.resolve({type:Ce.data,result:void 0}))})}),g=await t({matches:p,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(f)}catch{}return g}async function FR(t,e,n,r,i,s){let o,l,u=c=>{let f,p=new Promise((T,C)=>f=C);l=()=>f(),e.signal.addEventListener("abort",l);let g=T=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...T!==void 0?[T]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(C=>g(C)):g())}}catch(T){return{type:"error",result:T}}})();return Promise.race([_,p])};try{let c=n.route[t];if(r)if(c){let f,[p]=await Promise.all([u(c).catch(g=>{f=g}),r]);if(f!==void 0)throw f;o=p}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw Ht(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Ce.data,result:void 0};else if(c)o=await u(c);else{let f=new URL(e.url),p=f.pathname+f.search;throw Ht(404,{pathname:p})}pe(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Ce.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function BR(t){let{result:e,type:n}=t;if(Lw(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:Ce.error,error:g}}return n===Ce.error?{type:Ce.error,error:new rc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:Ce.data,data:p,statusCode:e.status,headers:e.headers}}if(n===Ce.error){if(Ly(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Ce.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Ce.error,error:new rc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Ka(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Ce.error,error:e,statusCode:Ka(e)?e.status:void 0}}if(qR(e)){var l,u;return{type:Ce.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(Ly(e)){var c,f;return{type:Ce.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Ce.data,data:e}}function zR(t,e,n,r,i,s){let o=t.headers.get("Location");if(pe(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!bp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=lf(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function ky(t,e,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(bp.test(t)){let s=t,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s);if(i.includes(o.protocol))throw new Error("Invalid redirect location");let l=Ar(o.pathname,n)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}try{let s=r.createURL(t);if(i.includes(s.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Cs(t,e,n,r){let i=t.createURL(Ow(e)).toString(),s={signal:n};if(r&&Cn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=cf(r.formData):s.body=r.formData}return new Request(i,s)}function cf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Py(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function $R(t,e,n,r,i){let s={},o=null,l,u=!1,c={},f=n&&sn(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let g=p.route.id,_=e[g];if(pe(!Gi(_),"Cannot handle redirect results in processLoaderData"),sn(_)){let T=_.error;f!==void 0&&(T=f,f=void 0),o=o||{};{let C=Wi(t,g);o[C.route.id]==null&&(o[C.route.id]=T)}s[g]=void 0,u||(u=!0,l=Ka(_.error)?_.error.status:500),_.headers&&(c[g]=_.headers)}else ti(_)?(r.set(g,_.deferredData),s[g]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!u&&(l=_.statusCode),_.headers&&(c[g]=_.headers)):(s[g]=_.data,_.statusCode&&_.statusCode!==200&&!u&&(l=_.statusCode),_.headers&&(c[g]=_.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function Ny(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=$R(e,n,r,o);return i.forEach(c=>{let{key:f,match:p,controller:g}=c,_=s[f];if(pe(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(sn(_)){let T=Wi(t.matches,p==null?void 0:p.route.id);u&&u[T.route.id]||(u=ze({},u,{[T.route.id]:_.error})),t.fetchers.delete(f)}else if(Gi(_))pe(!1,"Unhandled fetcher revalidation redirect");else if(ti(_))pe(!1,"Unhandled fetcher deferred data");else{let T=Wr(_.data);t.fetchers.set(f,T)}}),{loaderData:l,errors:u}}function by(t,e,n,r){let i=ze({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Dy(t){return t?sn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Wi(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Oy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ht(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new rc(t||500,l,new Error(u),!0)}function nu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Gi(i))return{key:r,result:i}}}function Ow(t){let e=typeof t=="string"?Or(t):t;return is(ze({},e,{hash:""}))}function WR(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function HR(t){return Lw(t.result)&&PR.has(t.result.status)}function ti(t){return t.type===Ce.deferred}function sn(t){return t.type===Ce.error}function Gi(t){return(t&&t.type)===Ce.redirect}function Ly(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function qR(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Lw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function KR(t){return kR.has(t.toLowerCase())}function Cn(t){return AR.has(t.toLowerCase())}async function GR(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=r.find(g=>g.route.id===c.route.id),p=f!=null&&!bw(f,c)&&(i&&i[c.route.id])!==void 0;ti(u)&&p&&await Dp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function QR(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&ti(l)&&(pe(o,"Expected an AbortController for revalidating fetcher deferred result"),await Dp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function Dp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ce.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ce.error,error:i}}return{type:Ce.data,data:t.deferredData.data}}}function Op(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function la(t,e){let n=typeof e=="string"?Or(e).search:e.search;if(t[t.length-1].route.index&&Op(n||""))return t[t.length-1];let r=kw(t);return r[r.length-1]}function jy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Zd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function YR(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ta(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function XR(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Wr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function JR(t,e){try{let n=t.sessionStorage.getItem(Nw);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function ZR(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Nw,JSON.stringify(n))}catch(r){vi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ic.apply(this,arguments)}const cl=D.createContext(null),Lp=D.createContext(null),Lr=D.createContext(null),jp=D.createContext(null),nr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),jw=D.createContext(null);function eA(t,e){let{relative:n}=e===void 0?{}:e;To()||pe(!1);let{basename:r,navigator:i}=D.useContext(Lr),{hash:s,pathname:o,search:l}=zc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Er([r,o])),i.createHref({pathname:u,search:l,hash:s})}function To(){return D.useContext(jp)!=null}function Ri(){return To()||pe(!1),D.useContext(jp).location}function Vw(t){D.useContext(Lr).static||D.useLayoutEffect(t)}function Ai(){let{isDataRoute:t}=D.useContext(nr);return t?pA():tA()}function tA(){To()||pe(!1);let t=D.useContext(cl),{basename:e,future:n,navigator:r}=D.useContext(Lr),{matches:i}=D.useContext(nr),{pathname:s}=Ri(),o=JSON.stringify(Fc(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return Vw(()=>{l.current=!0}),D.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=Bc(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Er([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}const nA=D.createContext(null);function rA(t){let e=D.useContext(nr).outlet;return e&&D.createElement(nA.Provider,{value:t},e)}function Vp(){let{matches:t}=D.useContext(nr),e=t[t.length-1];return e?e.params:{}}function zc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Lr),{matches:i}=D.useContext(nr),{pathname:s}=Ri(),o=JSON.stringify(Fc(i,r.v7_relativeSplatPath));return D.useMemo(()=>Bc(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function iA(t,e,n,r){To()||pe(!1);let{navigator:i}=D.useContext(Lr),{matches:s}=D.useContext(nr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Ri(),f;f=c;let p=f.pathname||"/",g=p;if(u!=="/"){let C=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=$i(t,{pathname:g});return uA(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Er([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Er([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r)}function sA(){let t=fA(),e=Ka(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const oA=D.createElement(sA,null);class aA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(nr.Provider,{value:this.props.routeContext},D.createElement(jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lA(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(cl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(nr.Provider,{value:e},r)}function uA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||pe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:_}=n,T=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,T=!1,C=null,P=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,C=p.route.errorElement||oA,u&&(c<0&&g===0?(mA("route-fallback"),T=!0,P=null):c===g&&(T=!0,P=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),w=()=>{let A;return _?A=C:T?A=P:p.route.Component?A=D.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,D.createElement(lA,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?D.createElement(aA,{location:n.location,revalidation:n.revalidation,component:C,error:_,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var Mw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Mw||{}),Uw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Uw||{});function cA(t){let e=D.useContext(cl);return e||pe(!1),e}function dA(t){let e=D.useContext(Lp);return e||pe(!1),e}function hA(t){let e=D.useContext(nr);return e||pe(!1),e}function Fw(t){let e=hA(),n=e.matches[e.matches.length-1];return n.route.id||pe(!1),n.route.id}function fA(){var t;let e=D.useContext(jw),n=dA(Uw.UseRouteError),r=Fw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pA(){let{router:t}=cA(Mw.UseNavigateStable),e=Fw(),n=D.useRef(!1);return Vw(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ic({fromRouteId:e},s)))},[t,e])}const Vy={};function mA(t,e,n){Vy[t]||(Vy[t]=!0)}function gA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function lo(t){let{to:e,replace:n,state:r,relative:i}=t;To()||pe(!1);let{future:s,static:o}=D.useContext(Lr),{matches:l}=D.useContext(nr),{pathname:u}=Ri(),c=Ai(),f=Bc(e,Fc(l,s.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return D.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function yA(t){return rA(t.context)}function vA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=tt.Pop,navigator:s,static:o=!1,future:l}=t;To()&&pe(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:ic({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Or(r));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:T="default"}=r,C=D.useMemo(()=>{let P=Ar(f,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:_,key:T},navigationType:i}},[u,f,p,g,_,T,i]);return C==null?null:D.createElement(Lr.Provider,{value:c},D.createElement(jp.Provider,{children:n,value:C}))}new Promise(()=>{});function _A(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uo(){return uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uo.apply(this,arguments)}function Bw(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EA(t,e){return t.button===0&&(!e||e==="_self")&&!wA(t)}const TA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],IA="6";try{window.__reactRouterVersion=IA}catch{}function SA(t,e){return OR({basename:void 0,future:uo({},void 0,{v7_prependBasename:!0}),history:rR({window:void 0}),hydrationData:RA(),routes:t,mapRouteProperties:_A,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function RA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=uo({},e,{errors:AA(e.errors)})),e}function AA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new rc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const zw=D.createContext({isTransitioning:!1}),CA=D.createContext(new Map),kA="startTransition",My=Wx[kA],PA="flushSync",Uy=nR[PA];function NA(t){My?My(t):t()}function na(t){Uy?Uy(t):t()}let bA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function DA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,l]=D.useState(),[u,c]=D.useState({isTransitioning:!1}),[f,p]=D.useState(),[g,_]=D.useState(),[T,C]=D.useState(),P=D.useRef(new Map),{v7_startTransition:S}=r||{},w=D.useCallback(v=>{S?NA(v):v()},[S]),A=D.useCallback((v,x)=>{let{deletedFetchers:I,flushSync:b,viewTransitionOpts:k}=x;v.fetchers.forEach((oe,xe)=>{oe.data!==void 0&&P.current.set(xe,oe.data)}),I.forEach(oe=>P.current.delete(oe));let R=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||R){b?na(()=>s(v)):w(()=>s(v));return}if(b){na(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let oe=n.window.document.startViewTransition(()=>{na(()=>s(v))});oe.finished.finally(()=>{na(()=>{p(void 0),_(void 0),l(void 0),c({isTransitioning:!1})})}),na(()=>_(oe));return}g?(f&&f.resolve(),g.skipTransition(),C({state:v,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,g,f,P,w]);D.useLayoutEffect(()=>n.subscribe(A),[n,A]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new bA)},[u]),D.useEffect(()=>{if(f&&o&&n.window){let v=o,x=f.promise,I=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await x});I.finished.finally(()=>{p(void 0),_(void 0),l(void 0),c({isTransitioning:!1})}),_(I)}},[w,o,f,n.window]),D.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,g,i.location,o]),D.useEffect(()=>{!u.isTransitioning&&T&&(l(T.state),c({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),C(void 0))},[u.isTransitioning,T]),D.useEffect(()=>{},[]);let O=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,x,I)=>n.navigate(v,{state:x,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(v,x,I)=>n.navigate(v,{replace:!0,state:x,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),M=n.basename||"/",F=D.useMemo(()=>({router:n,navigator:O,static:!1,basename:M}),[n,O,M]),y=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.useEffect(()=>gA(r,n.future),[r,n.future]),D.createElement(D.Fragment,null,D.createElement(cl.Provider,{value:F},D.createElement(Lp.Provider,{value:i},D.createElement(CA.Provider,{value:P.current},D.createElement(zw.Provider,{value:u},D.createElement(vA,{basename:M,location:i.location,navigationType:i.historyAction,navigator:O,future:y},i.initialized||n.future.v7_partialHydration?D.createElement(OA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const OA=D.memo(LA);function LA(t){let{routes:e,future:n,state:r}=t;return iA(e,void 0,r,n)}const jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ot=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:p}=e,g=Bw(e,TA),{basename:_}=D.useContext(Lr),T,C=!1;if(typeof c=="string"&&VA.test(c)&&(T=c,jA))try{let A=new URL(window.location.href),O=c.startsWith("//")?new URL(A.protocol+c):new URL(c),M=Ar(O.pathname,_);O.origin===A.origin&&M!=null?c=M+O.search+O.hash:C=!0}catch{}let P=eA(c,{relative:i}),S=UA(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function w(A){r&&r(A),A.defaultPrevented||S(A)}return D.createElement("a",uo({},g,{href:T||P,onClick:C||s?r:w,ref:n,target:u}))}),sc=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:f}=e,p=Bw(e,xA),g=zc(u,{relative:p.relative}),_=Ri(),T=D.useContext(Lp),{navigator:C,basename:P}=D.useContext(Lr),S=T!=null&&FA(g)&&c===!0,w=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,A=_.pathname,O=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;i||(A=A.toLowerCase(),O=O?O.toLowerCase():null,w=w.toLowerCase()),O&&P&&(O=Ar(O,P)||O);const M=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=A===w||!o&&A.startsWith(w)&&A.charAt(M)==="/",y=O!=null&&(O===w||!o&&O.startsWith(w)&&O.charAt(w.length)==="/"),v={isActive:F,isPending:y,isTransitioning:S},x=F?r:void 0,I;typeof s=="function"?I=s(v):I=[s,F?"active":null,y?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let b=typeof l=="function"?l(v):l;return D.createElement(Ot,uo({},p,{"aria-current":x,className:I,ref:n,style:b,to:u,viewTransition:c}),typeof f=="function"?f(v):f)});var df;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(df||(df={}));var Fy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fy||(Fy={}));function MA(t){let e=D.useContext(cl);return e||pe(!1),e}function UA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Ai(),c=Ri(),f=zc(t,{relative:o});return D.useCallback(p=>{if(EA(p,n)){p.preventDefault();let g=r!==void 0?r:is(c)===is(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,f,r,i,n,t,s,o,l])}function FA(t,e){e===void 0&&(e={});let n=D.useContext(zw);n==null&&pe(!1);let{basename:r}=MA(df.useViewTransitionState),i=zc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ar(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ar(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nc(i.pathname,o)!=null||nc(i.pathname,s)!=null}var By={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($w(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||p==null)throw new zA;const g=s<<2|l>>4;if(r.push(g),c!==64){const _=l<<4&240|c>>2;if(r.push(_),p!==64){const T=c<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $A=function(t){const e=$w(t);return Ww.encodeByteArray(e,!0)},oc=function(t){return $A(t).replace(/\./g,"")},Hw=function(t){try{return Ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=()=>WA().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof By>"u")return;const t=By.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hw(t[1]);return e&&JSON.parse(e)},$c=()=>{try{return HA()||qA()||KA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qw=t=>{var e,n;return(n=(e=$c())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kw=t=>{const e=qw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gw=()=>{var t;return(t=$c())===null||t===void 0?void 0:t.config},Qw=t=>{var e;return(e=$c())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oc(JSON.stringify(n)),oc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function YA(){var t;const e=(t=$c())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tC(){return!YA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="FirebaseError";class rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iC,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?sC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new rr(i,l,r)}}function sC(t,e){return t.replace(oC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oC=/\{\$([^}]+)}/g;function aC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ac(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zy(s)&&zy(o)){if(!ac(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ua(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lC(t,e){const n=new uC(t,e);return n.subscribe.bind(n)}class uC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class _i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hC(t){return t===zi?void 0:t}function fC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const mC={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},gC=_e.INFO,yC={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},vC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mp{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const _C=(t,e)=>e.some(n=>t instanceof n);let $y,Wy;function wC(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xw=new WeakMap,hf=new WeakMap,Jw=new WeakMap,th=new WeakMap,Up=new WeakMap;function TC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xw.set(n,t)}).catch(()=>{}),Up.set(e,t),e}function xC(t){if(hf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hf.set(t,e)}let ff={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IC(t){ff=t(ff)}function SC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return Jw.set(r,e.sort?e.sort():[e]),hi(r)}:EC().includes(t)?function(...e){return t.apply(nh(this),e),hi(Xw.get(this))}:function(...e){return hi(t.apply(nh(this),e))}}function RC(t){return typeof t=="function"?SC(t):(t instanceof IDBTransaction&&xC(t),_C(t,wC())?new Proxy(t,ff):t)}function hi(t){if(t instanceof IDBRequest)return TC(t);if(th.has(t))return th.get(t);const e=RC(t);return e!==t&&(th.set(t,e),Up.set(e,t)),e}const nh=t=>Up.get(t);function AC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=hi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(hi(o.result),u.oldVersion,u.newVersion,hi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const CC=["get","getKey","getAll","getAllKeys","count"],kC=["put","add","delete","clear"],rh=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CC.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return rh.set(e,s),s}IC(t=>({...t,get:(e,n,r)=>Hy(e,n)||t.get(e,n,r),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pf="@firebase/app",qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Mp("@firebase/app"),bC="@firebase/app-compat",DC="@firebase/analytics-compat",OC="@firebase/analytics",LC="@firebase/app-check-compat",jC="@firebase/app-check",VC="@firebase/auth",MC="@firebase/auth-compat",UC="@firebase/database",FC="@firebase/data-connect",BC="@firebase/database-compat",zC="@firebase/functions",$C="@firebase/functions-compat",WC="@firebase/installations",HC="@firebase/installations-compat",qC="@firebase/messaging",KC="@firebase/messaging-compat",GC="@firebase/performance",QC="@firebase/performance-compat",YC="@firebase/remote-config",XC="@firebase/remote-config-compat",JC="@firebase/storage",ZC="@firebase/storage-compat",e1="@firebase/firestore",t1="@firebase/vertexai-preview",n1="@firebase/firestore-compat",r1="firebase",i1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",s1={[pf]:"fire-core",[bC]:"fire-core-compat",[OC]:"fire-analytics",[DC]:"fire-analytics-compat",[jC]:"fire-app-check",[LC]:"fire-app-check-compat",[VC]:"fire-auth",[MC]:"fire-auth-compat",[UC]:"fire-rtdb",[FC]:"fire-data-connect",[BC]:"fire-rtdb-compat",[zC]:"fire-fn",[$C]:"fire-fn-compat",[WC]:"fire-iid",[HC]:"fire-iid-compat",[qC]:"fire-fcm",[KC]:"fire-fcm-compat",[GC]:"fire-perf",[QC]:"fire-perf-compat",[YC]:"fire-rc",[XC]:"fire-rc-compat",[JC]:"fire-gcs",[ZC]:"fire-gcs-compat",[e1]:"fire-fst",[n1]:"fire-fst-compat",[t1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,o1=new Map,gf=new Map;function Ky(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ss(t){const e=t.name;if(gf.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,t);for(const n of lc.values())Ky(n,t);for(const n of o1.values())Ky(n,t);return!0}function Wc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new dl("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=i1;function Zw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=Gw()),!n)throw fi.create("no-options");const s=lc.get(i);if(s){if(ac(n,s.options)&&ac(r,s.config))return s;throw fi.create("duplicate-app",{appName:i})}const o=new pC(i);for(const u of gf.values())o.addComponent(u);const l=new l1(n,r,o);return lc.set(i,l),l}function Fp(t=mf){const e=lc.get(t);if(!e&&t===mf&&Gw())return Zw();if(!e)throw fi.create("no-app",{appName:t});return e}function Gn(t,e,n){var r;let i=(r=s1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(l.join(" "));return}ss(new _i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",c1=1,Ga="firebase-heartbeat-store";let ih=null;function eE(){return ih||(ih=AC(u1,c1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ga)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),ih}async function d1(t){try{const n=(await eE()).transaction(Ga),r=await n.objectStore(Ga).get(tE(t));return await n.done,r}catch(e){if(e instanceof rr)Cr.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(n.message)}}}async function Gy(t,e){try{const r=(await eE()).transaction(Ga,"readwrite");await r.objectStore(Ga).put(e,tE(t)),await r.done}catch(n){if(n instanceof rr)Cr.warn(n.message);else{const r=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cr.warn(r.message)}}}function tE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=1024,f1=30*24*60*60*1e3;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=f1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:r,unsentEntries:i}=m1(this._heartbeatsCache.heartbeats),s=oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cr.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function m1(t,e=h1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Yy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yy(t){return oc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){ss(new _i("platform-logger",e=>new PC(e),"PRIVATE")),ss(new _i("heartbeat",e=>new p1(e),"PRIVATE")),Gn(pf,qy,t),Gn(pf,qy,"esm2017"),Gn("fire-js","")}y1("");function Bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v1=nE,rE=new dl("auth","Firebase",nE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Mp("@firebase/auth");function _1(t,...e){uc.logLevel<=_e.WARN&&uc.warn(`Auth (${hs}): ${t}`,...e)}function Tu(t,...e){uc.logLevel<=_e.ERROR&&uc.error(`Auth (${hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw zp(t,...e)}function Qn(t,...e){return zp(t,...e)}function iE(t,e,n){const r=Object.assign(Object.assign({},v1()),{[e]:n});return new dl("auth","Firebase",r).create(e,{appName:t.name})}function pi(t){return iE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rE.create(t,...e)}function le(t,e,...n){if(!t)throw zp(e,...n)}function yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function kr(t,e){t||yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function w1(){return Xy()==="http:"||Xy()==="https:"}function Xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||JA()||"connection"in navigator)?navigator.onLine:!0}function T1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,kr(n>e,"Short delay should be less than long delay!"),this.isMobile=QA()||ZA()}get(){return E1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new fl(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ci(t,e,n,r,i={}){return oE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=hl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return XA()||(c.referrerPolicy="no-referrer"),sE.fetch()(aE(t,t.config.apiHost,n,l),c)})}async function oE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},x1),e);try{const i=new R1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ru(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ru(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ru(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw iE(t,f,c);On(t,f)}}catch(i){if(i instanceof rr)throw i;On(t,"network-request-failed",{message:String(i)})}}async function Hc(t,e,n,r,i={}){const s=await Ci(t,e,n,r,i);return"mfaPendingCredential"in s&&On(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?$p(t.config,i):`${t.config.apiScheme}://${i}`}function S1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),I1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ru(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qn(t,e,r);return i.customData._tokenResponse=n,i}function Jy(t){return t!==void 0&&t.enterprise!==void 0}class A1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return S1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function C1(t,e){return Ci(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function lE(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P1(t,e=!1){const n=it(t),r=await n.getIdToken(e),i=Wp(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ia(sh(i.auth_time)),issuedAtTime:Ia(sh(i.iat)),expirationTime:Ia(sh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function Wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hw(n);return i?JSON.parse(i):(Tu("Failed to decode base64 JWT payload"),null)}catch(i){return Tu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zy(t){const e=Wp(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rr&&N1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function N1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Qa(t,lE(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uE(s.providerUserInfo):[],l=O1(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new vf(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function D1(t){const e=it(t);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uE(t){return t.map(e=>{var{providerId:n}=e,r=Bp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e){const n=await oE(t,{},async()=>{const r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j1(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Zy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await L1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xs;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new b1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qa(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return P1(this,e)}reload(){return D1(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await Qa(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:O,isAnonymous:M,providerData:F,stsTokenManager:y}=n;le(A&&y,e,"internal-error");const v=Xs.fromJSON(this.name,y);le(typeof A=="string",e,"internal-error"),$r(p,e.name),$r(g,e.name),le(typeof O=="boolean",e,"internal-error"),le(typeof M=="boolean",e,"internal-error"),$r(_,e.name),$r(T,e.name),$r(C,e.name),$r(P,e.name),$r(S,e.name),$r(w,e.name);const x=new vr({uid:A,auth:e,email:g,emailVerified:O,displayName:p,isAnonymous:M,photoURL:T,phoneNumber:_,tenantId:C,stsTokenManager:v,createdAt:S,lastLoginAt:w});return F&&Array.isArray(F)&&(x.providerData=F.map(I=>Object.assign({},I))),P&&(x._redirectEventId=P),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xs;i.updateFromServerResponse(n);const s=new vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Xs;l.updateFromIdToken(r);const u=new vr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function _r(t){kr(t instanceof Function,"Expected a class definition");let e=ev.get(t);return e?(kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cE.type="NONE";const tv=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=xu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Js(_r(tv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||_r(tv);const o=xu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const p=vr._fromJSON(e,f);c!==s&&(l=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Js(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Js(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gE(e))return"Blackberry";if(yE(e))return"Webos";if(hE(e))return"Safari";if((e.includes("chrome/")||fE(e))&&!e.includes("edge/"))return"Chrome";if(mE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dE(t=Mt()){return/firefox\//i.test(t)}function hE(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fE(t=Mt()){return/crios\//i.test(t)}function pE(t=Mt()){return/iemobile/i.test(t)}function mE(t=Mt()){return/android/i.test(t)}function gE(t=Mt()){return/blackberry/i.test(t)}function yE(t=Mt()){return/webos/i.test(t)}function Hp(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V1(t=Mt()){var e;return Hp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M1(){return eC()&&document.documentMode===10}function vE(t=Mt()){return Hp(t)||mE(t)||yE(t)||gE(t)||/windows phone/i.test(t)||pE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e=[]){let n;switch(t){case"Browser":n=nv(Mt());break;case"Worker":n=`${nv(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=6;class z1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:B1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new U1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lE(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(pi(this));const n=e?it(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F1(this),n=new z1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await j1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xo(t){return it(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W1(t){qc=t}function wE(t){return qc.loadJS(t)}function H1(){return qc.recaptchaEnterpriseScript}function q1(){return qc.gapiScript}function K1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const G1="recaptcha-enterprise",Q1="NO_RECAPTCHA";class Y1{constructor(e){this.type=G1,this.auth=xo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{C1(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new A1(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Jy(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Q1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Jy(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=H1();u.length!==0&&(u+=l),wE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function iv(t,e,n,r=!1){const i=new Y1(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sv(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await iv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await iv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e){const n=Wc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ac(s,e??{}))return i;On(i,"already-initialized")}return n.initialize({options:e})}function J1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Z1(t,e,n){const r=xo(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=EE(e),{host:o,port:l}=ek(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),tk()}function EE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ek(t){const e=EE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ov(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ov(o)}}}function ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function nk(t,e){return Ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e){return Hc(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function sk(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends qp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ya(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ya(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,n,"signInWithPassword",rk);case"emailLink":return ik(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,r,"signUpPassword",nk);case"emailLink":return sk(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e){return Hc(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="http://localhost";class os extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new os(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zs(e,n)}buildRequest(){const e={requestUri:ok,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lk(t){const e=ua(ca(t)).link,n=e?ua(ca(e)).deep_link_id:null,r=ua(ca(t)).deep_link_id;return(r?ua(ca(r)).link:null)||r||n||e||t}class Kp{constructor(e){var n,r,i,s,o,l;const u=ua(ca(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=ak((i=u.mode)!==null&&i!==void 0?i:null);le(c&&f&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=lk(e);try{return new Kp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return Ya._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kp.parseLink(n);return le(r,"argument-error"),Ya._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends TE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends pl{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends pl{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends pl{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.TWITTER_SIGN_IN_METHOD="twitter.com";Jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await vr._fromIdTokenResponse(e,r,i),o=av(r);return new co({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=av(r);return new co({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends rr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new dc(e,n,r,i)}}function xE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(t,s,e,r):s})}async function uk(t,e,n=!1){const r=await Qa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return co._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e,n=!1){const{auth:r}=t;if(gr(r.app))return Promise.reject(pi(r));const i="reauthenticate";try{const s=await Qa(t,xE(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Wp(s.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),co._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&On(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(t,e,n=!1){if(gr(t.app))return Promise.reject(pi(t));const r="signIn",i=await xE(t,r,e),s=await co._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function dk(t,e){return IE(xo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t){const e=xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function fk(t,e,n){return gr(t.app)?Promise.reject(pi(t)):dk(it(t),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hk(t),r})}function pk(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function mk(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function gk(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function yk(t){return it(t).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1e3,_k=10;class RE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);M1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_k):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const wk=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AE.type="SESSION";const CE=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Kc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await Ek(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Gp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function xk(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function Ik(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Rk(){return kE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="firebaseLocalStorageDb",Ak=1,fc="firebaseLocalStorage",NE="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function Ck(){const t=indexedDB.deleteDatabase(PE);return new ml(t).toPromise()}function _f(){const t=indexedDB.open(PE,Ak);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fc,{keyPath:NE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fc)?e(r):(r.close(),await Ck(),e(await _f()))})})}async function lv(t,e,n){const r=Gc(t,!0).put({[NE]:e,value:n});return new ml(r).toPromise()}async function kk(t,e){const n=Gc(t,!1).get(e),r=await new ml(n).toPromise();return r===void 0?null:r.value}function uv(t,e){const n=Gc(t,!0).delete(e);return new ml(n).toPromise()}const Pk=800,Nk=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Nk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(Rk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ik(),!this.activeServiceWorker)return;this.sender=new Tk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await lv(e,hc,"1"),await uv(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gc(i,!1).getAll();return new ml(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const bk=bE;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t,e){return e?_r(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ok(t){return IE(t.auth,new Qp(t),t.bypassAuthState)}function Lk(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),ck(n,new Qp(t),t.bypassAuthState)}async function jk(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),uk(n,new Qp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ok;case"linkViaPopup":case"linkViaRedirect":return jk;case"reauthViaPopup":case"reauthViaRedirect":return Lk;default:On(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new fl(2e3,1e4);class Ws extends DE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=Gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vk.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="pendingRedirect",Iu=new Map;class Uk extends DE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Iu.get(this.auth._key());if(!e){try{const r=await Fk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Iu.set(this.auth._key(),e)}return this.bypassAuthState||Iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fk(t,e){const n=$k(e),r=zk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Bk(t,e){Iu.set(t._key(),e)}function zk(t){return _r(t._redirectPersistence)}function $k(t){return xu(Mk,t.config.apiKey,t.name)}async function Wk(t,e,n=!1){if(gr(t.app))return Promise.reject(pi(t));const r=xo(t),i=Dk(r,e),o=await new Uk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=10*60*1e3;class qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Hk&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yk=/^https?/;async function Xk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gk(t);for(const n of e)try{if(Jk(n))return}catch{}On(t,"unauthorized-domain")}function Jk(t){const e=yf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Yk.test(n))return!1;if(Qk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=new fl(3e4,6e4);function dv(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eP(t){return new Promise((e,n)=>{var r,i,s;function o(){dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dv(),n(Qn(t,"network-request-failed"))},timeout:Zk.get()})}if(!((i=(r=Yn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yn().gapi)===null||s===void 0)&&s.load)o();else{const l=K1("iframefcb");return Yn()[l]=()=>{gapi.load?o():n(Qn(t,"network-request-failed"))},wE(`${q1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Su=null,e})}let Su=null;function tP(t){return Su=Su||eP(t),Su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new fl(5e3,15e3),rP="__/auth/iframe",iP="emulator/auth/iframe",sP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aP(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$p(e,iP):`https://${t.config.authDomain}/${rP}`,r={apiKey:e.apiKey,appName:t.name,v:hs},i=oP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hl(r).slice(1)}`}async function lP(t){const e=await tP(t),n=Yn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:aP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),l=Yn().setTimeout(()=>{s(o)},nP.get());function u(){Yn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cP=500,dP=600,hP="_blank",fP="http://localhost";class hv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pP(t,e,n,r=cP,i=dP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},uP),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Mt().toLowerCase();n&&(l=fE(c)?hP:n),dE(c)&&(e=e||fP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,T])=>`${g}${_}=${T},`,"");if(V1(c)&&l!=="_self")return mP(e||"",l),new hv(null);const p=window.open(e||"",l,f);le(p,t,"popup-blocked");try{p.focus()}catch{}return new hv(p)}function mP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="__/auth/handler",yP="emulator/auth/handler",vP=encodeURIComponent("fac");async function fv(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hs,eventId:i};if(e instanceof TE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",aC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof pl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${vP}=${encodeURIComponent(u)}`:"";return`${_P(t)}?${hl(l).slice(1)}${c}`}function _P({config:t}){return t.emulator?$p(t,yP):`https://${t.authDomain}/${gP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="webStorageSupport";class wP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=Wk,this._overrideRedirectResult=Bk}async _openPopup(e,n,r,i){var s;kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await fv(e,n,r,yf(),i);return pP(e,o,Gp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await fv(e,n,r,yf(),i);return xk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(kr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lP(e),r=new qk(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(oh,{type:oh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[oh];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vE()||hE()||Hp()}}const EP=wP;var pv="@firebase/auth",mv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IP(t){ss(new _i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_E(t)},c=new $1(r,i,s,u);return J1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ss(new _i("auth-internal",e=>{const n=xo(e.getProvider("auth").getImmediate());return(r=>new TP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(pv,mv,xP(t)),Gn(pv,mv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=5*60,RP=Qw("authIdTokenMaxAge")||SP;let gv=null;const AP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RP)return;const i=n==null?void 0:n.token;gv!==i&&(gv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CP(t=Fp()){const e=Wc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X1(t,{popupRedirectResolver:EP,persistence:[bk,wk,CE]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=AP(s.toString());mk(n,o,()=>o(n.currentUser)),pk(n,l=>o(l))}}const i=qw("auth");return i&&Z1(n,`http://${i}`),n}function kP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}W1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Qn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IP("Browser");var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,LE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function x(){}x.prototype=v.prototype,y.D=v.prototype,y.prototype=new x,y.prototype.constructor=y,y.C=function(I,b,k){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return v.prototype[b].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,x){x||(x=0);var I=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)I[b]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(b=0;16>b;++b)I[b]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=y.g[0],x=y.g[1],b=y.g[2];var k=y.g[3],R=v+(k^x&(b^k))+I[0]+3614090360&4294967295;v=x+(R<<7&4294967295|R>>>25),R=k+(b^v&(x^b))+I[1]+3905402710&4294967295,k=v+(R<<12&4294967295|R>>>20),R=b+(x^k&(v^x))+I[2]+606105819&4294967295,b=k+(R<<17&4294967295|R>>>15),R=x+(v^b&(k^v))+I[3]+3250441966&4294967295,x=b+(R<<22&4294967295|R>>>10),R=v+(k^x&(b^k))+I[4]+4118548399&4294967295,v=x+(R<<7&4294967295|R>>>25),R=k+(b^v&(x^b))+I[5]+1200080426&4294967295,k=v+(R<<12&4294967295|R>>>20),R=b+(x^k&(v^x))+I[6]+2821735955&4294967295,b=k+(R<<17&4294967295|R>>>15),R=x+(v^b&(k^v))+I[7]+4249261313&4294967295,x=b+(R<<22&4294967295|R>>>10),R=v+(k^x&(b^k))+I[8]+1770035416&4294967295,v=x+(R<<7&4294967295|R>>>25),R=k+(b^v&(x^b))+I[9]+2336552879&4294967295,k=v+(R<<12&4294967295|R>>>20),R=b+(x^k&(v^x))+I[10]+4294925233&4294967295,b=k+(R<<17&4294967295|R>>>15),R=x+(v^b&(k^v))+I[11]+2304563134&4294967295,x=b+(R<<22&4294967295|R>>>10),R=v+(k^x&(b^k))+I[12]+1804603682&4294967295,v=x+(R<<7&4294967295|R>>>25),R=k+(b^v&(x^b))+I[13]+4254626195&4294967295,k=v+(R<<12&4294967295|R>>>20),R=b+(x^k&(v^x))+I[14]+2792965006&4294967295,b=k+(R<<17&4294967295|R>>>15),R=x+(v^b&(k^v))+I[15]+1236535329&4294967295,x=b+(R<<22&4294967295|R>>>10),R=v+(b^k&(x^b))+I[1]+4129170786&4294967295,v=x+(R<<5&4294967295|R>>>27),R=k+(x^b&(v^x))+I[6]+3225465664&4294967295,k=v+(R<<9&4294967295|R>>>23),R=b+(v^x&(k^v))+I[11]+643717713&4294967295,b=k+(R<<14&4294967295|R>>>18),R=x+(k^v&(b^k))+I[0]+3921069994&4294967295,x=b+(R<<20&4294967295|R>>>12),R=v+(b^k&(x^b))+I[5]+3593408605&4294967295,v=x+(R<<5&4294967295|R>>>27),R=k+(x^b&(v^x))+I[10]+38016083&4294967295,k=v+(R<<9&4294967295|R>>>23),R=b+(v^x&(k^v))+I[15]+3634488961&4294967295,b=k+(R<<14&4294967295|R>>>18),R=x+(k^v&(b^k))+I[4]+3889429448&4294967295,x=b+(R<<20&4294967295|R>>>12),R=v+(b^k&(x^b))+I[9]+568446438&4294967295,v=x+(R<<5&4294967295|R>>>27),R=k+(x^b&(v^x))+I[14]+3275163606&4294967295,k=v+(R<<9&4294967295|R>>>23),R=b+(v^x&(k^v))+I[3]+4107603335&4294967295,b=k+(R<<14&4294967295|R>>>18),R=x+(k^v&(b^k))+I[8]+1163531501&4294967295,x=b+(R<<20&4294967295|R>>>12),R=v+(b^k&(x^b))+I[13]+2850285829&4294967295,v=x+(R<<5&4294967295|R>>>27),R=k+(x^b&(v^x))+I[2]+4243563512&4294967295,k=v+(R<<9&4294967295|R>>>23),R=b+(v^x&(k^v))+I[7]+1735328473&4294967295,b=k+(R<<14&4294967295|R>>>18),R=x+(k^v&(b^k))+I[12]+2368359562&4294967295,x=b+(R<<20&4294967295|R>>>12),R=v+(x^b^k)+I[5]+4294588738&4294967295,v=x+(R<<4&4294967295|R>>>28),R=k+(v^x^b)+I[8]+2272392833&4294967295,k=v+(R<<11&4294967295|R>>>21),R=b+(k^v^x)+I[11]+1839030562&4294967295,b=k+(R<<16&4294967295|R>>>16),R=x+(b^k^v)+I[14]+4259657740&4294967295,x=b+(R<<23&4294967295|R>>>9),R=v+(x^b^k)+I[1]+2763975236&4294967295,v=x+(R<<4&4294967295|R>>>28),R=k+(v^x^b)+I[4]+1272893353&4294967295,k=v+(R<<11&4294967295|R>>>21),R=b+(k^v^x)+I[7]+4139469664&4294967295,b=k+(R<<16&4294967295|R>>>16),R=x+(b^k^v)+I[10]+3200236656&4294967295,x=b+(R<<23&4294967295|R>>>9),R=v+(x^b^k)+I[13]+681279174&4294967295,v=x+(R<<4&4294967295|R>>>28),R=k+(v^x^b)+I[0]+3936430074&4294967295,k=v+(R<<11&4294967295|R>>>21),R=b+(k^v^x)+I[3]+3572445317&4294967295,b=k+(R<<16&4294967295|R>>>16),R=x+(b^k^v)+I[6]+76029189&4294967295,x=b+(R<<23&4294967295|R>>>9),R=v+(x^b^k)+I[9]+3654602809&4294967295,v=x+(R<<4&4294967295|R>>>28),R=k+(v^x^b)+I[12]+3873151461&4294967295,k=v+(R<<11&4294967295|R>>>21),R=b+(k^v^x)+I[15]+530742520&4294967295,b=k+(R<<16&4294967295|R>>>16),R=x+(b^k^v)+I[2]+3299628645&4294967295,x=b+(R<<23&4294967295|R>>>9),R=v+(b^(x|~k))+I[0]+4096336452&4294967295,v=x+(R<<6&4294967295|R>>>26),R=k+(x^(v|~b))+I[7]+1126891415&4294967295,k=v+(R<<10&4294967295|R>>>22),R=b+(v^(k|~x))+I[14]+2878612391&4294967295,b=k+(R<<15&4294967295|R>>>17),R=x+(k^(b|~v))+I[5]+4237533241&4294967295,x=b+(R<<21&4294967295|R>>>11),R=v+(b^(x|~k))+I[12]+1700485571&4294967295,v=x+(R<<6&4294967295|R>>>26),R=k+(x^(v|~b))+I[3]+2399980690&4294967295,k=v+(R<<10&4294967295|R>>>22),R=b+(v^(k|~x))+I[10]+4293915773&4294967295,b=k+(R<<15&4294967295|R>>>17),R=x+(k^(b|~v))+I[1]+2240044497&4294967295,x=b+(R<<21&4294967295|R>>>11),R=v+(b^(x|~k))+I[8]+1873313359&4294967295,v=x+(R<<6&4294967295|R>>>26),R=k+(x^(v|~b))+I[15]+4264355552&4294967295,k=v+(R<<10&4294967295|R>>>22),R=b+(v^(k|~x))+I[6]+2734768916&4294967295,b=k+(R<<15&4294967295|R>>>17),R=x+(k^(b|~v))+I[13]+1309151649&4294967295,x=b+(R<<21&4294967295|R>>>11),R=v+(b^(x|~k))+I[4]+4149444226&4294967295,v=x+(R<<6&4294967295|R>>>26),R=k+(x^(v|~b))+I[11]+3174756917&4294967295,k=v+(R<<10&4294967295|R>>>22),R=b+(v^(k|~x))+I[2]+718787259&4294967295,b=k+(R<<15&4294967295|R>>>17),R=x+(k^(b|~v))+I[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,y.g[2]=y.g[2]+b&4294967295,y.g[3]=y.g[3]+k&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var x=v-this.blockSize,I=this.B,b=this.h,k=0;k<v;){if(b==0)for(;k<=x;)i(this,y,k),k+=this.blockSize;if(typeof y=="string"){for(;k<v;)if(I[b++]=y.charCodeAt(k++),b==this.blockSize){i(this,I),b=0;break}}else for(;k<v;)if(I[b++]=y[k++],b==this.blockSize){i(this,I),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var x=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=x&255,x/=256;for(this.u(y),y=Array(16),v=x=0;4>v;++v)for(var I=0;32>I;I+=8)y[x++]=this.g[v]>>>I&255;return y};function s(y,v){var x=l;return Object.prototype.hasOwnProperty.call(x,y)?x[y]:x[y]=v(y)}function o(y,v){this.h=v;for(var x=[],I=!0,b=y.length-1;0<=b;b--){var k=y[b]|0;I&&k==v||(x[b]=k,I=!1)}this.g=x}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return p;if(0>y)return P(c(-y));for(var v=[],x=1,I=0;y>=x;I++)v[I]=y/x|0,x*=4294967296;return new o(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return P(f(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(v,8)),I=p,b=0;b<y.length;b+=8){var k=Math.min(8,y.length-b),R=parseInt(y.substring(b,b+k),v);8>k?(k=c(Math.pow(v,k)),I=I.j(k).add(c(R))):(I=I.j(x),I=I.add(c(R)))}return I}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-P(this).m();for(var y=0,v=1,x=0;x<this.g.length;x++){var I=this.i(x);y+=(0<=I?I:4294967296+I)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T(this))return"0";if(C(this))return"-"+P(this).toString(y);for(var v=c(Math.pow(y,6)),x=this,I="";;){var b=O(x,v).g;x=S(x,b.j(v));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(y);if(x=b,T(x))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function T(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function C(y){return y.h==-1}t.l=function(y){return y=S(this,y),C(y)?-1:T(y)?0:1};function P(y){for(var v=y.g.length,x=[],I=0;I<v;I++)x[I]=~y.g[I];return new o(x,~y.h).add(g)}t.abs=function(){return C(this)?P(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],I=0,b=0;b<=v;b++){var k=I+(this.i(b)&65535)+(y.i(b)&65535),R=(k>>>16)+(this.i(b)>>>16)+(y.i(b)>>>16);I=R>>>16,k&=65535,R&=65535,x[b]=R<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(y,v){return y.add(P(v))}t.j=function(y){if(T(this)||T(y))return p;if(C(this))return C(y)?P(this).j(P(y)):P(P(this).j(y));if(C(y))return P(this.j(P(y)));if(0>this.l(_)&&0>y.l(_))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,x=[],I=0;I<2*v;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(var b=0;b<y.g.length;b++){var k=this.i(I)>>>16,R=this.i(I)&65535,oe=y.i(b)>>>16,xe=y.i(b)&65535;x[2*I+2*b]+=R*xe,w(x,2*I+2*b),x[2*I+2*b+1]+=k*xe,w(x,2*I+2*b+1),x[2*I+2*b+1]+=R*oe,w(x,2*I+2*b+1),x[2*I+2*b+2]+=k*oe,w(x,2*I+2*b+2)}for(I=0;I<v;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=v;I<2*v;I++)x[I]=0;return new o(x,0)};function w(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function A(y,v){this.g=y,this.h=v}function O(y,v){if(T(v))throw Error("division by zero");if(T(y))return new A(p,p);if(C(y))return v=O(P(y),v),new A(P(v.g),P(v.h));if(C(v))return v=O(y,P(v)),new A(P(v.g),v.h);if(30<y.g.length){if(C(y)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,I=v;0>=I.l(y);)x=M(x),I=M(I);var b=F(x,1),k=F(I,1);for(I=F(I,2),x=F(x,2);!T(I);){var R=k.add(I);0>=R.l(y)&&(b=b.add(x),k=R),I=F(I,1),x=F(x,1)}return v=S(y,b.j(v)),new A(b,v)}for(b=p;0<=y.l(v);){for(x=Math.max(1,Math.floor(y.m()/v.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=c(x),R=k.j(v);C(R)||0<R.l(y);)x-=I,k=c(x),R=k.j(v);T(k)&&(k=g),b=b.add(k),y=S(y,R)}return new A(b,y)}t.A=function(y){return O(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],I=0;I<v;I++)x[I]=this.i(I)&y.i(I);return new o(x,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],I=0;I<v;I++)x[I]=this.i(I)|y.i(I);return new o(x,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],I=0;I<v;I++)x[I]=this.i(I)^y.i(I);return new o(x,this.h^y.h)};function M(y){for(var v=y.g.length+1,x=[],I=0;I<v;I++)x[I]=y.i(I)<<1|y.i(I-1)>>>31;return new o(x,y.h)}function F(y,v){var x=v>>5;v%=32;for(var I=y.g.length-x,b=[],k=0;k<I;k++)b[k]=0<v?y.i(k+x)>>>v|y.i(k+x+1)<<32-v:y.i(k+x);return new o(b,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Ji=o}).apply(typeof yv<"u"?yv:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,da,VE,Ru,wf,ME,UE,FE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,m){return a==Array.prototype||a==Object.prototype||(a[d]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var m=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var j=a[E];if(!(j in m))break e;m=m[j]}a=a[a.length-1],E=m[a],d=d(E),d!=E&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var m=0,E=!1,j={next:function(){if(!E&&m<a.length){var U=m++;return{value:d(U,a[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,m){return a.call.apply(a.bind,arguments)}function p(a,d,m){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,E),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function g(a,d,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function T(a,d){function m(){}m.prototype=d.prototype,a.aa=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(E,j,U){for(var K=Array(arguments.length-2),De=2;De<arguments.length;De++)K[De-2]=arguments[De];return d.prototype[j].apply(E,K)}}function C(a){const d=a.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=a[E];return m}return[]}function P(a,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const j=a.length||0,U=E.length||0;a.length=j+U;for(let K=0;K<U;K++)a[j+K]=E[K]}else a.push(E)}}class S{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function F(a,d,m){for(const E in a)d.call(m,a[E],E,a)}function y(a,d){for(const m in a)d.call(void 0,a[m],m,a)}function v(a){const d={};for(const m in a)d[m]=a[m];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let m,E;for(let j=1;j<arguments.length;j++){E=arguments[j];for(m in E)a[m]=E[m];for(let U=0;U<x.length;U++)m=x[U],Object.prototype.hasOwnProperty.call(E,m)&&(a[m]=E[m])}}function b(a){var d=1;a=a.split(":");const m=[];for(;0<d&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function k(a){l.setTimeout(()=>{throw a},0)}function R(){var a=re;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class oe{constructor(){this.h=this.g=null}add(d,m){const E=xe.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var xe=new S(()=>new ht,a=>a.reset());class ht{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,re=new oe,se=()=>{const a=l.Promise.resolve(void 0);q=()=>{a.then(Ie)}};var Ie=()=>{for(var a;a=R();){try{a.h.call(a.g)}catch(m){k(m)}var d=xe;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}B=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Ut=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,d),l.removeEventListener("test",m,d)}catch{}return a}();function Ye(a,d){if(be.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(M){e:{try{O(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:gt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ye.aa.h.call(this)}}T(Ye,be);var gt={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),gs=0;function md(a,d,m,E,j){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=j,this.key=++gs,this.da=this.fa=!1}function ys(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function vs(a){this.src=a,this.g={},this.h=0}vs.prototype.add=function(a,d,m,E,j){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var K=Mn(a,d,E,j);return-1<K?(d=a[K],m||(d.fa=!1)):(d=new md(d,this.src,U,!!E,j),d.fa=m,a.push(d)),d};function ot(a,d){var m=d.type;if(m in a.g){var E=a.g[m],j=Array.prototype.indexOf.call(E,d,void 0),U;(U=0<=j)&&Array.prototype.splice.call(E,j,1),U&&(ys(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Mn(a,d,m,E){for(var j=0;j<a.length;++j){var U=a[j];if(!U.da&&U.listener==d&&U.capture==!!m&&U.ha==E)return j}return-1}var _s="closure_lm_"+(1e6*Math.random()|0),Po={};function Un(a,d,m,E,j){if(Array.isArray(d)){for(var U=0;U<d.length;U++)Un(a,d[U],m,E,j);return null}return m=jr(m),a&&a[yt]?a.K(d,m,c(E)?!!E.capture:!1,j):gd(a,d,m,!1,E,j)}function gd(a,d,m,E,j,U){if(!d)throw Error("Invalid event type");var K=c(j)?!!j.capture:!!j,De=Do(a);if(De||(a[_s]=De=new vs(a)),m=De.add(d,m,E,K,U),m.proxy)return m;if(E=yd(),m.proxy=E,E.src=a,E.listener=m,a.addEventListener)Ut||(j=K),j===void 0&&(j=!1),a.addEventListener(d.toString(),E,j);else if(a.attachEvent)a.attachEvent(xl(d.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function yd(){function a(m){return d.call(a.src,a.listener,m)}const d=vd;return a}function No(a,d,m,E,j){if(Array.isArray(d))for(var U=0;U<d.length;U++)No(a,d[U],m,E,j);else E=c(E)?!!E.capture:!!E,m=jr(m),a&&a[yt]?(a=a.i,d=String(d).toString(),d in a.g&&(U=a.g[d],m=Mn(U,m,E,j),-1<m&&(ys(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete a.g[d],a.h--)))):a&&(a=Do(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Mn(d,m,E,j)),(m=-1<a?d[a]:null)&&bo(m))}function bo(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[yt])ot(d.i,a);else{var m=a.type,E=a.proxy;d.removeEventListener?d.removeEventListener(m,E,a.capture):d.detachEvent?d.detachEvent(xl(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=Do(d))?(ot(m,a),m.h==0&&(m.src=null,d[_s]=null)):ys(a)}}}function xl(a){return a in Po?Po[a]:Po[a]="on"+a}function vd(a,d){if(a.da)a=!0;else{d=new Ye(d,this);var m=a.listener,E=a.ha||a.src;a.fa&&bo(a),a=m.call(E,d)}return a}function Do(a){return a=a[_s],a instanceof vs?a:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(a){return typeof a=="function"?a:(a[En]||(a[En]=function(d){return a.handleEvent(d)}),a[En])}function at(){me.call(this),this.i=new vs(this),this.M=this,this.F=null}T(at,me),at.prototype[yt]=!0,at.prototype.removeEventListener=function(a,d,m,E){No(this,a,d,m,E)};function lt(a,d){var m,E=a.F;if(E)for(m=[];E;E=E.F)m.push(E);if(a=a.M,E=d.type||d,typeof d=="string")d=new be(d,a);else if(d instanceof be)d.target=d.target||a;else{var j=d;d=new be(E,a),I(d,j)}if(j=!0,m)for(var U=m.length-1;0<=U;U--){var K=d.g=m[U];j=en(K,E,!0,d)&&j}if(K=d.g=a,j=en(K,E,!0,d)&&j,j=en(K,E,!1,d)&&j,m)for(U=0;U<m.length;U++)K=d.g=m[U],j=en(K,E,!1,d)&&j}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var m=a.g[d],E=0;E<m.length;E++)ys(m[E]);delete a.g[d],a.h--}}this.F=null},at.prototype.K=function(a,d,m,E){return this.i.add(String(a),d,!1,m,E)},at.prototype.L=function(a,d,m,E){return this.i.add(String(a),d,!0,m,E)};function en(a,d,m,E){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,U=0;U<d.length;++U){var K=d[U];if(K&&!K.da&&K.capture==m){var De=K.listener,_t=K.ha||K.src;K.fa&&ot(a.i,K),j=De.call(_t,E)!==!1&&j}}return j&&!E.defaultPrevented}function hn(a,d,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Oo(a){a.g=hn(()=>{a.g=null,a.i&&(a.i=!1,Oo(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ws extends me{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(a){me.call(this),this.h=a,this.g={}}T(Di,me);var Tn=[];function Lo(a){F(a.g,function(d,m){this.g.hasOwnProperty(m)&&bo(d)},a),a.g={}}Di.prototype.N=function(){Di.aa.N.call(this),Lo(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=l.JSON.stringify,Il=l.JSON.parse,_d=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ts(){}Ts.prototype.h=null;function Oi(a){return a.h||(a.h=a.i())}function jo(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Li(){be.call(this,"d")}T(Li,be);function Vo(){be.call(this,"c")}T(Vo,be);var Fn={},Sl=null;function ji(){return Sl=Sl||new at}Fn.La="serverreachability";function Vi(a){be.call(this,Fn.La,a)}T(Vi,be);function Bn(a){const d=ji();lt(d,new Vi(d))}Fn.STAT_EVENT="statevent";function Rl(a,d){be.call(this,Fn.STAT_EVENT,a),this.stat=d}T(Rl,be);function vt(a){const d=ji();lt(d,new Rl(d,a))}Fn.Ma="timingevent";function N(a,d){be.call(this,Fn.Ma,a),this.size=d}T(N,be);function L(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function V(){this.g=!0}V.prototype.xa=function(){this.g=!1};function $(a,d,m,E,j,U){a.info(function(){if(a.g)if(U)for(var K="",De=U.split("&"),_t=0;_t<De.length;_t++){var Se=De[_t].split("=");if(1<Se.length){var At=Se[0];Se=Se[1];var Ct=At.split("_");K=2<=Ct.length&&Ct[1]=="type"?K+(At+"="+Se+"&"):K+(At+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+E+") [attempt "+j+"]: "+d+`
`+m+`
`+K})}function G(a,d,m,E,j,U,K){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+j+"]: "+d+`
`+m+`
`+U+" "+K})}function te(a,d,m,E){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Z(a,m)+(E?" "+E:"")})}function ae(a,d){a.info(function(){return"TIMEOUT: "+d})}V.prototype.info=function(){};function Z(a,d){if(!a.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var E=m[a];if(!(2>E.length)){var j=E[1];if(Array.isArray(j)&&!(1>j.length)){var U=j[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<j.length;K++)j[K]=""}}}}return Es(m)}catch{return d}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function ue(){}T(ue,Ts),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},ne=new ue;function fe(a,d,m,E){this.j=a,this.i=d,this.l=m,this.R=E||1,this.U=new Di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ze}function Ze(){this.i=null,this.g="",this.h=!1}var Ae={},ve={};function Oe(a,d,m){a.L=1,a.v=Pl(cr(d)),a.m=m,a.P=!0,ar(a,null)}function ar(a,d){a.F=Date.now(),Ft(a),a.A=cr(a.v);var m=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),$m(m.i,"t",E),a.C=0,m=a.j.J,a.h=new Ze,a.g=ag(a.j,m?d:null,!a.m),0<a.O&&(a.M=new ws(g(a.Y,a,a.g),a.O)),d=a.U,m=a.g,E=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Tn[0]=j.toString()),j=Tn);for(var U=0;U<j.length;U++){var K=Un(m,j[U],E||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Bn(),$(a.i,a.u,a.A,a.l,a.R,a.m)}fe.prototype.ca=function(a){a=a.target;const d=this.M;d&&dr(a)==3?d.j():this.Y(a)},fe.prototype.Y=function(a){try{if(a==this.g)e:{const Ct=dr(this.g);var d=this.g.Ba();const Rs=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Ym(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Rs?Bn(3):Bn(2)),lr(this);var m=this.g.Z();this.X=m;t:if(Vr(this)){var E=Ym(this.g);a="";var j=E.length,U=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),tn(this);var K="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(E[d],{stream:!(U&&d==j-1)});E.length=0,this.h.g+=a,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,G(this.i,this.u,this.A,this.l,this.R,Ct,m),this.o){if(this.T&&!this.K){t:{if(this.g){var De,_t=this.g;if((De=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(De)){var Se=De;break t}}Se=null}if(m=Se)te(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mr(this,m);else{this.o=!1,this.s=3,vt(12),fn(this),tn(this);break e}}if(this.P){m=!0;let In;for(;!this.J&&this.C<K.length;)if(In=xn(this,K),In==ve){Ct==4&&(this.s=4,vt(14),m=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Ae){this.s=4,vt(15),te(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else te(this.i,this.l,In,null),Mr(this,In);if(Vr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||K.length!=0||this.h.h||(this.s=1,vt(16),m=!1),this.o=this.o&&m,!m)te(this.i,this.l,K,"[Invalid Chunked Response]"),fn(this),tn(this);else if(0<K.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),xd(At),At.M=!0,vt(11))}}else te(this.i,this.l,K,null),Mr(this,K);Ct==4&&fn(this),this.o&&!this.J&&(Ct==4?rg(this.j,this):(this.o=!1,Ft(this)))}else Ax(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),fn(this),tn(this)}}}catch{}finally{}};function Vr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xn(a,d){var m=a.C,E=d.indexOf(`
`,m);return E==-1?ve:(m=Number(d.substring(m,E)),isNaN(m)?Ae:(E+=1,E+m>d.length?ve:(d=d.slice(E,E+m),a.C=E+m,d)))}fe.prototype.cancel=function(){this.J=!0,fn(this)};function Ft(a){a.S=Date.now()+a.I,xs(a,a.I)}function xs(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=L(g(a.ba,a),d)}function lr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}fe.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ae(this.i,this.A),this.L!=2&&(Bn(),vt(17)),fn(this),this.s=2,tn(this)):xs(this,this.S-a)};function tn(a){a.j.G==0||a.J||rg(a.j,a)}function fn(a){lr(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Lo(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Mr(a,d){try{var m=a.j;if(m.G!=0&&(m.g==a||Be(m.h,a))){if(!a.K&&Be(m.h,a)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var j=E;if(j[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)jl(m),Ol(m);else break e;Td(m),vt(18)}}else m.za=j[1],0<m.za-m.T&&37500>j[2]&&m.F&&m.v==0&&!m.C&&(m.C=L(g(m.Za,m),6e3));if(1>=Ur(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ui(m,11)}else if((a.K||m.g==a)&&jl(m),!w(d))for(j=m.Da.g.parse(d),d=0;d<j.length;d++){let Se=j[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const At=Se[3];At!=null&&(m.la=At,m.j.info("VER="+m.la));const Ct=Se[4];Ct!=null&&(m.Aa=Ct,m.j.info("SVER="+m.Aa));const Rs=Se[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(E=1.5*Rs,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const In=a.g;if(In){const Ml=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var U=E.h;U.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(zn(U,U.h),U.h=null))}if(E.D){const Id=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(E.ya=Id,Ve(E.I,E.D,Id))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var K=a;if(E.qa=og(E,E.J?E.ia:null,E.W),K.K){Mo(E.h,K);var De=K,_t=E.L;_t&&(De.I=_t),De.B&&(lr(De),Ft(De)),E.g=K}else tg(E);0<m.i.length&&Ll(m)}else Se[0]!="stop"&&Se[0]!="close"||Ui(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ui(m,7):Ed(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}Bn(4)}catch{}}var we=class{constructor(a,d){this.g=a,this.map=d}};function je(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ur(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ur(a){return a.h?1:a.g?a.g.size:0}function Be(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function zn(a,d){a.g?a.g.add(d):a.h=d}function Mo(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}je.prototype.cancel=function(){if(this.i=Al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Al(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const m of a.g.values())d=d.concat(m.D);return d}return C(a.i)}function hx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],m=a.length,E=0;E<m;E++)d.push(a[E]);return d}d=[],m=0;for(E in a)d[m++]=a[E];return d}function fx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var m=0;m<a;m++)d.push(m);return d}d=[],m=0;for(const E in a)d[m++]=E;return d}}}function Vm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var m=fx(a),E=hx(a),j=E.length,U=0;U<j;U++)d.call(void 0,E[U],m&&m[U],a)}var Mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function px(a,d){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var E=a[m].indexOf("="),j=null;if(0<=E){var U=a[m].substring(0,E);j=a[m].substring(E+1)}else U=a[m];d(U,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Mi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Mi){this.h=a.h,Cl(this,a.j),this.o=a.o,this.g=a.g,kl(this,a.s),this.l=a.l;var d=a.i,m=new Bo;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Um(this,m),this.m=a.m}else a&&(d=String(a).match(Mm))?(this.h=!1,Cl(this,d[1]||"",!0),this.o=Uo(d[2]||""),this.g=Uo(d[3]||"",!0),kl(this,d[4]),this.l=Uo(d[5]||"",!0),Um(this,d[6]||"",!0),this.m=Uo(d[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}Mi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Fo(d,Fm,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Fo(d,Fm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Fo(m,m.charAt(0)=="/"?yx:gx,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Fo(m,_x)),a.join("")};function cr(a){return new Mi(a)}function Cl(a,d,m){a.j=m?Uo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function kl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Um(a,d,m){d instanceof Bo?(a.i=d,wx(a.i,a.h)):(m||(d=Fo(d,vx)),a.i=new Bo(d,a.h))}function Ve(a,d,m){a.i.set(d,m)}function Pl(a){return Ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Uo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Fo(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,mx),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function mx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fm=/[#\/\?@]/g,gx=/[#\?:]/g,yx=/[#\?]/g,vx=/[#\?@]/g,_x=/#/g;function Bo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Fr(a){a.g||(a.g=new Map,a.h=0,a.i&&px(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Bo.prototype,t.add=function(a,d){Fr(this),this.i=null,a=Is(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function Bm(a,d){Fr(a),d=Is(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function zm(a,d){return Fr(a),d=Is(a,d),a.g.has(d)}t.forEach=function(a,d){Fr(this),this.g.forEach(function(m,E){m.forEach(function(j){a.call(d,j,E,this)},this)},this)},t.na=function(){Fr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const j=a[E];for(let U=0;U<j.length;U++)m.push(d[E])}return m},t.V=function(a){Fr(this);let d=[];if(typeof a=="string")zm(this,a)&&(d=d.concat(this.g.get(Is(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)d=d.concat(a[m])}return d},t.set=function(a,d){return Fr(this),this.i=null,a=Is(this,a),zm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function $m(a,d,m){Bm(a,d),0<m.length&&(a.i=null,a.g.set(Is(a,d),C(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const U=encodeURIComponent(String(E)),K=this.V(E);for(E=0;E<K.length;E++){var j=U;K[E]!==""&&(j+="="+encodeURIComponent(String(K[E]))),a.push(j)}}return this.i=a.join("&")};function Is(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function wx(a,d){d&&!a.j&&(Fr(a),a.i=null,a.g.forEach(function(m,E){var j=E.toLowerCase();E!=j&&(Bm(this,E),$m(this,j,m))},a)),a.j=d}function Ex(a,d){const m=new V;if(l.Image){const E=new Image;E.onload=_(Br,m,"TestLoadImage: loaded",!0,d,E),E.onerror=_(Br,m,"TestLoadImage: error",!1,d,E),E.onabort=_(Br,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=_(Br,m,"TestLoadImage: timeout",!1,d,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else d(!1)}function Tx(a,d){const m=new V,E=new AbortController,j=setTimeout(()=>{E.abort(),Br(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:E.signal}).then(U=>{clearTimeout(j),U.ok?Br(m,"TestPingServer: ok",!0,d):Br(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Br(m,"TestPingServer: error",!1,d)})}function Br(a,d,m,E,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),E(m)}catch{}}function xx(){this.g=new _d}function Ix(a,d,m){const E=m||"";try{Vm(a,function(j,U){let K=j;c(j)&&(K=Es(j)),d.push(E+U+"="+encodeURIComponent(K))})}catch(j){throw d.push(E+"type="+encodeURIComponent("_badmap")),j}}function Nl(a){this.l=a.Ub||null,this.j=a.eb||!1}T(Nl,Ts),Nl.prototype.g=function(){return new bl(this.l,this.j)},Nl.prototype.i=function(a){return function(){return a}}({});function bl(a,d){at.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(bl,at),t=bl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,$o(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?zo(this):$o(this),this.readyState==3&&Wm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,zo(this))},t.Qa=function(a){this.g&&(this.response=a,zo(this))},t.ga=function(){this.g&&zo(this)};function zo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,$o(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function $o(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hm(a){let d="";return F(a,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function wd(a,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Hm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Ve(a,d,m))}function Ge(a){at.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ge,at);var Sx=/^https?$/i,Rx=["POST","PUT"];t=Ge.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Oi(this.o):Oi(ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(U){qm(this,U);return}if(a=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var j in E)m.set(j,E[j]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())m.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Rx,d,void 0))||E||j||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of m)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qm(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){qm(this,U)}};function qm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Km(a),Dl(a)}function Km(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,lt(this,"complete"),lt(this,"abort"),Dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gm(this):this.bb())},t.bb=function(){Gm(this)};function Gm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||dr(a)!=4||a.Z()!=2)){if(a.u&&dr(a)==4)hn(a.Ea,0,a);else if(lt(a,"readystatechange"),dr(a)==4){a.h=!1;try{const K=a.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=K===0){var j=String(a.D).match(Mm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),E=!Sx.test(j?j.toLowerCase():"")}m=E}if(m)lt(a,"complete"),lt(a,"success");else{a.m=6;try{var U=2<dr(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",Km(a)}}finally{Dl(a)}}}}function Dl(a,d){if(a.g){Qm(a);const m=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||lt(a,"ready");try{m.onreadystatechange=E}catch{}}}function Qm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function dr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Il(d)}};function Ym(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ax(a){const d={};a=(a.g&&2<=dr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(w(a[E]))continue;var m=b(a[E]);const j=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=d[j]||[];d[j]=U,U.push(m)}y(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wo(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function Xm(a){this.Aa=0,this.i=[],this.j=new V,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wo("baseRetryDelayMs",5e3,a),this.cb=Wo("retryDelaySeedMs",1e4,a),this.Wa=Wo("forwardChannelMaxRetries",2,a),this.wa=Wo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new je(a&&a.concurrentRequestLimit),this.Da=new xx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xm.prototype,t.la=8,t.G=1,t.connect=function(a,d,m,E){vt(0),this.W=a,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=og(this,null,this.W),Ll(this)};function Ed(a){if(Jm(a),a.G==3){var d=a.U++,m=cr(a.I);if(Ve(m,"SID",a.K),Ve(m,"RID",d),Ve(m,"TYPE","terminate"),Ho(a,m),d=new fe(a,a.j,d),d.L=2,d.v=Pl(cr(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=d.v,m=!0),m||(d.g=ag(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ft(d)}sg(a)}function Ol(a){a.g&&(xd(a),a.g.cancel(),a.g=null)}function Jm(a){Ol(a),a.u&&(l.clearTimeout(a.u),a.u=null),jl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ll(a){if(!ur(a.h)&&!a.s){a.s=!0;var d=a.Ga;q||se(),B||(q(),B=!0),re.add(d,a),a.B=0}}function Cx(a,d){return Ur(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=L(g(a.Ga,a,d),ig(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new fe(this,this.j,a);let U=this.o;if(this.S&&(U?(U=v(U),I(U,this.S)):U=this.S),this.m!==null||this.O||(j.H=U,U=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=eg(this,j,d),m=cr(this.I),Ve(m,"RID",a),Ve(m,"CVER",22),this.D&&Ve(m,"X-HTTP-Session-Id",this.D),Ho(this,m),U&&(this.O?d="headers="+encodeURIComponent(String(Hm(U)))+"&"+d:this.m&&wd(m,this.m,U)),zn(this.h,j),this.Ua&&Ve(m,"TYPE","init"),this.P?(Ve(m,"$req",d),Ve(m,"SID","null"),j.T=!0,Oe(j,m,null)):Oe(j,m,d),this.G=2}}else this.G==3&&(a?Zm(this,a):this.i.length==0||ur(this.h)||Zm(this))};function Zm(a,d){var m;d?m=d.l:m=a.U++;const E=cr(a.I);Ve(E,"SID",a.K),Ve(E,"RID",m),Ve(E,"AID",a.T),Ho(a,E),a.m&&a.o&&wd(E,a.m,a.o),m=new fe(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),d&&(a.i=d.D.concat(a.i)),d=eg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),zn(a.h,m),Oe(m,E,d)}function Ho(a,d){a.H&&F(a.H,function(m,E){Ve(d,E,m)}),a.l&&Vm({},function(m,E){Ve(d,E,m)})}function eg(a,d,m){m=Math.min(a.i.length,m);var E=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let U=-1;for(;;){const K=["count="+m];U==-1?0<m?(U=j[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let De=!0;for(let _t=0;_t<m;_t++){let Se=j[_t].g;const At=j[_t].map;if(Se-=U,0>Se)U=Math.max(0,j[_t].g-100),De=!1;else try{Ix(At,K,"req"+Se+"_")}catch{E&&E(At)}}if(De){E=K.join("&");break e}}}return a=a.i.splice(0,m),d.D=a,E}function tg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;q||se(),B||(q(),B=!0),re.add(d,a),a.v=0}}function Td(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=L(g(a.Fa,a),ig(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ng(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=L(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Ol(this),ng(this))};function xd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ng(a){a.g=new fe(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=cr(a.qa);Ve(d,"RID","rpc"),Ve(d,"SID",a.K),Ve(d,"AID",a.T),Ve(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ve(d,"TO",a.ja),Ve(d,"TYPE","xmlhttp"),Ho(a,d),a.m&&a.o&&wd(d,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Pl(cr(d)),m.m=null,m.P=!0,ar(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Ol(this),Td(this),vt(19))};function jl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function rg(a,d){var m=null;if(a.g==d){jl(a),xd(a),a.g=null;var E=2}else if(Be(a.h,d))m=d.D,Mo(a.h,d),E=1;else return;if(a.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;E=ji(),lt(E,new N(E,m)),Ll(a)}else tg(a);else if(j=d.s,j==3||j==0&&0<d.X||!(E==1&&Cx(a,d)||E==2&&Td(a)))switch(m&&0<m.length&&(d=a.h,d.i=d.i.concat(m)),j){case 1:Ui(a,5);break;case 4:Ui(a,10);break;case 3:Ui(a,6);break;default:Ui(a,2)}}}function ig(a,d){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*d}function Ui(a,d){if(a.j.info("Error code "+d),d==2){var m=g(a.fb,a),E=a.Xa;const j=!E;E=new Mi(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cl(E,"https"),Pl(E),j?Ex(E.toString(),m):Tx(E.toString(),m)}else vt(2);a.G=0,a.l&&a.l.sa(d),sg(a),Jm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function sg(a){if(a.G=0,a.ka=[],a.l){const d=Al(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function og(a,d,m){var E=m instanceof Mi?cr(m):new Mi(m);if(E.g!="")d&&(E.g=d+"."+E.g),kl(E,E.s);else{var j=l.location;E=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var U=new Mi(null);E&&Cl(U,E),d&&(U.g=d),j&&kl(U,j),m&&(U.l=m),E=U}return m=a.D,d=a.ya,m&&d&&Ve(E,m,d),Ve(E,"VER",a.la),Ho(a,E),E}function ag(a,d,m){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ge(new Nl({eb:m})):new Ge(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lg(){}t=lg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vl(){}Vl.prototype.g=function(a,d){return new nn(a,d)};function nn(a,d){at.call(this),this.g=new Xm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ss(this)}T(nn,at),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ed(this.g)},nn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Es(a),a=m);d.i.push(new we(d.Ya++,a)),d.G==3&&Ll(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,nn.aa.N.call(this)};function ug(a){Li.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}T(ug,Li);function cg(){Vo.call(this),this.status=1}T(cg,Vo);function Ss(a){this.g=a}T(Ss,lg),Ss.prototype.ua=function(){lt(this.g,"a")},Ss.prototype.ta=function(a){lt(this.g,new ug(a))},Ss.prototype.sa=function(a){lt(this.g,new cg)},Ss.prototype.ra=function(){lt(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,FE=function(){return new Vl},UE=function(){return ji()},ME=Fn,wf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Ru=J,Y.COMPLETE="complete",VE=Y,jo.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",at.prototype.listen=at.prototype.K,da=jo,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,jE=Ge}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});const vv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Mp("@firebase/firestore");function ra(){return as.logLevel}function ee(t,...e){if(as.logLevel<=_e.DEBUG){const n=e.map(Yp);as.debug(`Firestore (${So}): ${t}`,...n)}}function Pr(t,...e){if(as.logLevel<=_e.ERROR){const n=e.map(Yp);as.error(`Firestore (${So}): ${t}`,...n)}}function ho(t,...e){if(as.logLevel<=_e.WARN){const n=e.map(Yp);as.warn(`Firestore (${So}): ${t}`,...n)}}function Yp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+t;throw Pr(e),new Error(e)}function Pe(t,e){t||ce()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class NP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bP{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new BE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new bt(e)}}class DP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new LP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new dt(0,0))}static max(){return new de(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Xa{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const MP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Xa{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return MP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ue.fromString(e))}static fromName(e){return new ie(Ue.fromString(e).popFirst(5))}static empty(){return new ie(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ue(e.slice()))}}function UP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new wi(i,ie.empty(),e)}function FP(t){return new wi(t.readTime,t.key,-1)}class wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wi(de.min(),ie.empty(),-1)}static max(){return new wi(de.max(),ie.empty(),-1)}}function BP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $P{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==zP)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function WP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xp.oe=-1;function Qc(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function HP(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Et.RED,this.left=i??Et.EMPTY,this.right=s??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new an([])}unionWith(e){let n=new It(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WE("Invalid base64 string: "+s):s}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const qP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=qP.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zp(t){const e=t.mapValue.fields.__previous_value__;return Jp(e)?Zp(e):e}function Ja(t){const e=Ei(t.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou={mapValue:{}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jp(t)?4:QP(t)?9007199254740991:GP(t)?10:11:ce()}function Zn(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ei(i.timestampValue),l=Ei(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ls(i.bytesValue).isEqual(ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),l=Xe(s.doubleValue);return o===l?pc(o)===pc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(_v(o)!==_v(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Zn(o[u],l[u])))return!1;return!0}(t,e);default:return ce()}}function el(t,e){return(t.values||[]).find(n=>Zn(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Xe(s.integerValue||s.doubleValue),u=Xe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ev(t.timestampValue,e.timestampValue);case 4:return Ev(Ja(t),Ja(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ls(s),u=ls(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=Re(l[c],u[c]);if(f!==0)return f}return Re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Re(Xe(s.latitude),Xe(o.latitude));return l!==0?l:Re(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,f;const p=s.fields||{},g=o.fields||{},_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=Re(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Tv(_,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ou.mapValue&&o===ou.mapValue)return 0;if(s===ou.mapValue)return 1;if(o===ou.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Re(u[p],f[p]);if(g!==0)return g;const _=po(l[u[p]],c[f[p]]);if(_!==0)return _}return Re(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ce()}}function Ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Ei(t),r=Ei(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function Tv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=po(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function mo(t){return Ef(t)}function Ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ef(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ef(n.fields[o])}`;return i+"}"}(t.mapValue):ce()}function xv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tf(t){return!!t&&"integerValue"in t}function em(t){return!!t&&"arrayValue"in t}function Iv(t){return!!t&&"nullValue"in t}function Sv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Au(t){return!!t&&"mapValue"in t}function GP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Sa(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Au(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ps(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kt(Sa(this.value))}}function HE(t){const e=[];return ps(t.fields,(n,r)=>{const i=new Tt([n]);if(Au(r)){const s=HE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Lt(e,0,de.min(),de.min(),de.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,de.min(),de.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,de.min(),de.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.position=e,this.inclusive=n}}function Rv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=po(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function YP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class rt extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JP(e,n,r):n==="array-contains"?new tN(e,r):n==="in"?new nN(e,r):n==="not-in"?new rN(e,r):n==="array-contains-any"?new iN(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ZP(e,r):new eN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return KE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function KE(t){return t.op==="and"}function GE(t){return XP(t)&&KE(t)}function XP(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function xf(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+mo(t.value);if(GE(t))return t.filters.map(e=>xf(e)).join(",");{const e=t.filters.map(n=>xf(n)).join(",");return`${t.op}(${e})`}}function QE(t,e){return t instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Zn(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&QE(o,i.filters[l]),!0):!1}(t,e):void ce()}function YE(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"}(t):"Filter"}class JP extends rt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZP extends rt{constructor(e,n){super(e,"in",n),this.keys=XE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eN extends rt{constructor(e,n){super(e,"not-in",n),this.keys=XE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class tN extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return em(n)&&el(n.arrayValue,this.value)}}class nN extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}}class rN extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!el(this.value.arrayValue,n)}}class iN extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!em(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>el(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Cv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new sN(t,e,n,r,i,s,o)}function tm(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mo(r)).join(",")),e.ue=n}return e.ue}function nm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Av(t.startAt,e.startAt)&&Av(t.endAt,e.endAt)}function If(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oN(t,e,n,r,i,s,o,l){return new Ro(t,e,n,r,i,s,o,l)}function Yc(t){return new Ro(t)}function kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JE(t){return t.collectionGroup!==null}function Ra(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new It(Tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new tl(s,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new tl(Tt.keyField(),r))}return e.ce}function Xn(t){const e=he(t);return e.le||(e.le=aN(e,Ra(t))),e.le}function aN(t,e){if(t.limitType==="F")return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new tl(i.field,s)});const n=t.endAt?new mc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mc(t.startAt.position,t.startAt.inclusive):null;return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sf(t,e){const n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rf(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return nm(Xn(t),Xn(e))&&t.limitType===e.limitType}function ZE(t){return`${tm(Xn(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YE(i)).join(", ")}]`),Qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mo(i)).join(",")),`Target(${r})`}(Xn(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ra(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Rv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Ra(r),i)||r.endAt&&!function(o,l,u){const c=Rv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Ra(r),i))}(t,e)}function lN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eT(t){return(e,n)=>{let r=!1;for(const i of Ra(t)){const s=uN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uN(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?po(u,c):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new Ke(ie.comparator);function Nr(){return cN}const tT=new Ke(ie.comparator);function ha(...t){let e=tT;for(const n of t)e=e.insert(n.key,n);return e}function nT(t){let e=tT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qi(){return Aa()}function rT(){return Aa()}function Aa(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const dN=new Ke(ie.comparator),hN=new It(ie.comparator);function ye(...t){let e=hN;for(const n of t)e=e.add(n);return e}const fN=new It(Re);function pN(){return fN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function iT(t){return{integerValue:""+t}}function mN(t,e){return HP(e)?iT(e):rm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function gN(t,e,n){return t instanceof nl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Jp(s)&&(s=Zp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rl?oT(t,e):t instanceof il?aT(t,e):function(i,s){const o=sT(i,s),l=Pv(o)+Pv(i.Pe);return Tf(o)&&Tf(i.Pe)?iT(l):rm(i.serializer,l)}(t,e)}function yN(t,e,n){return t instanceof rl?oT(t,e):t instanceof il?aT(t,e):n}function sT(t,e){return t instanceof gc?function(r){return Tf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nl extends Zc{}class rl extends Zc{constructor(e){super(),this.elements=e}}function oT(t,e){const n=lT(e);for(const r of t.elements)n.some(i=>Zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class il extends Zc{constructor(e){super(),this.elements=e}}function aT(t,e){let n=lT(e);for(const r of t.elements)n=n.filter(i=>!Zn(i,r));return{arrayValue:{values:n}}}class gc extends Zc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Pv(t){return Xe(t.integerValue||t.doubleValue)}function lT(t){return em(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.field=e,this.transform=n}}function _N(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rl&&i instanceof rl||r instanceof il&&i instanceof il?fo(r.elements,i.elements,Zn):r instanceof gc&&i instanceof gc?Zn(r.Pe,i.Pe):r instanceof nl&&i instanceof nl}(t.transform,e.transform)}class wN{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ed{}function uT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new im(t.key,vn.none()):new vl(t.key,t.data,vn.none());{const n=t.data,r=Kt.empty();let i=new It(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ki(t.key,r,new an(i.toArray()),vn.none())}}function EN(t,e,n){t instanceof vl?function(i,s,o){const l=i.value.clone(),u=bv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(i,s,o){if(!Cu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=bv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(cT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ca(t,e,n,r){return t instanceof vl?function(s,o,l,u){if(!Cu(s.precondition,o))return l;const c=s.value.clone(),f=Dv(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(s,o,l,u){if(!Cu(s.precondition,o))return l;const c=Dv(s.fieldTransforms,u,o),f=o.data;return f.setAll(cT(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Cu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function TN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sT(r.transform,i||null);s!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,s))}return n||null}function Nv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fo(r,i,(s,o)=>_N(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vl extends ed{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ki extends ed{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bv(t,e,n){const r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,yN(o,l,n[i]))}return r}function Dv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,gN(s,o,e))}return r}class im extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xN extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&EN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=uT(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,r)=>Nv(n,r))&&fo(this.baseMutations,e.baseMutations,(n,r)=>Nv(n,r))}}class sm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length);let i=function(){return dN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,Ee;function AN(t){switch(t){default:return ce();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function dT(t){if(t===void 0)return Pr("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return ce()}}(Ee=et||(et={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new Ji([4294967295,4294967295],0);function Ov(t){const e=CN().encode(t),n=new LE;return n.update(e),new Uint8Array(n.digest())}function Lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([i,s],0)]}class om{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ji.fromNumber(r)));return i.compare(kN)===1&&(i=new Ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ov(e),[r,i]=Lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new om(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ov(e),[r,i]=Lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new td(de.min(),i,new Ke(Re),Nr(),ye())}}class _l{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _l(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class hT{constructor(e,n){this.targetId=e,this.me=n}}class fT{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jv{constructor(){this.fe=0,this.ge=Mv(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new _l(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Mv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nr(),this.qe=Vv(),this.Qe=new Ke(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(If(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,Lt.newNoDocument(o,de.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ls(r).toUint8Array()}catch(u){if(u instanceof WE)return ho("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new om(o,i,s)}catch(u){return ho(u instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&If(l.target)){const u=new ie(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Lt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new td(e,n,this.Qe,this.ke,r);return this.ke=Nr(),this.qe=Vv(),this.Qe=new Ke(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Vv(){return new Ke(ie.comparator)}function Mv(){return new Ke(ie.comparator)}const NN={asc:"ASCENDING",desc:"DESCENDING"},bN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DN={and:"AND",or:"OR"};class ON{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Af(t,e){return t.useProto3Json||Qc(e)?e:{value:e}}function yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LN(t,e){return yc(t,e.toTimestamp())}function Jn(t){return Pe(!!t),de.fromTimestamp(function(n){const r=Ei(n);return new dt(r.seconds,r.nanos)}(t))}function am(t,e){return Cf(t,e).canonicalString()}function Cf(t,e){const n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mT(t){const e=Ue.fromString(t);return Pe(wT(e)),e}function kf(t,e){return am(t.databaseId,e.path)}function ah(t,e){const n=mT(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(yT(n))}function gT(t,e){return am(t.databaseId,e)}function jN(t){const e=mT(t);return e.length===4?Ue.emptyPath():yT(e)}function Pf(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yT(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Uv(t,e,n){return{name:kf(t,e),fields:n.value.mapValue.fields}}function VN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(Pe(f===void 0||typeof f=="string"),Rt.fromBase64String(f||"")):(Pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?z.UNKNOWN:dT(c.code);return new Q(f,c.message||"")}(o);n=new fT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),s=Jn(r.document.updateTime),o=r.document.createTime?Jn(r.document.createTime):de.min(),l=new Kt({mapValue:{fields:r.document.fields}}),u=Lt.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new ku(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),s=r.readTime?Jn(r.readTime):de.min(),o=Lt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ku([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),s=r.removedTargetIds||[];n=new ku([],s,i,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RN(i,s),l=r.targetId;n=new hT(l,o)}}return n}function MN(t,e){let n;if(e instanceof vl)n={update:Uv(t,e.key,e.value)};else if(e instanceof im)n={delete:kf(t,e.key)};else if(e instanceof ki)n={update:Uv(t,e.key,e.data),updateMask:KN(e.fieldMask)};else{if(!(e instanceof xN))return ce();n={verify:kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LN(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce()}(t,e.precondition)),n}function UN(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Jn(i.updateTime):Jn(s);return o.isEqual(de.min())&&(o=Jn(s)),new wN(o,i.transformResults||[])}(n,e))):[]}function FN(t,e){return{documents:[gT(t,e.path)]}}function BN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gT(t,i);const s=function(c){if(c.length!==0)return _T(Ln.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Ps(g.field),direction:WN(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Af(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function zN(t){let e=jN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=vT(p);return g instanceof Ln&&GE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(T){return new tl(Ns(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Qc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new mc(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,_=p.values||[];return new mc(_,g)}(n.endAt)),oN(e,i,o,s,l,"F",u,c)}function $N(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ns(n.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ns(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>vT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function WN(t){return NN[t]}function HN(t){return bN[t]}function qN(t){return DN[t]}function Ps(t){return{fieldPath:t.canonicalString()}}function Ns(t){return Tt.fromServerFormat(t.fieldPath)}function _T(t){return t instanceof rt?function(n){if(n.op==="=="){if(Sv(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sv(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(n.field),op:HN(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(i=>_T(i));return r.length===1?r[0]:{compositeFilter:{op:qN(n.op),filters:r}}}(t):ce()}function KN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r,i,s=de.min(),o=de.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.ct=e}}function QN(t){const e=zN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.un=new XN}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(wi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class XN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(Ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ca(r.mutation,i,an.empty(),dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ha();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Nr();const o=Aa(),l=function(){return Aa()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof ki)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Ca(f.mutation,c,f.mutation.getFieldMask(),dt.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return l.set(c,new ZN(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Aa();let i=new Ke((o,l)=>o-l),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||an.empty();f=l.applyToLocalView(c,f),r.set(u,f);const p=(i.get(l.batchId)||ye()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,p=rT();f.forEach(g=>{if(!s.has(g)){const _=uT(n.get(g),r.get(g));_!==null&&p.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(Qi());let l=-1,u=s;return o.next(c=>W.forEach(c,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?W.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ye())).next(f=>({batchId:l,changes:nT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(l=>W.forEach(l,u=>{const c=function(p,g){return new Ro(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Lt.newInvalidDocument(f)))});let l=ha();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Ca(f.mutation,c,an.empty(),dt.now()),Jc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jn(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:QN(i.bundledQuery),readTime:Jn(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.overlays=new Ke(ie.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qi();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Qi(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=Qi(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Qi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return W.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SN(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.Tr=new It(ft.Er),this.dr=new It(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Ue([])),r=new ft(n,e),i=new ft(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Ue([])),r=new ft(n,e),i=new ft(n,e+1);let s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(ft.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IN(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new ft(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Re);return n.forEach(i=>{const s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new ft(new ie(s),0);let l=new It(Re);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),W.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.Mr=e,this.docs=function(){return new Ke(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nr();const o=n.path,l=new ie(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BP(FP(f),r)<=0||(i.has(f.key)||Jc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ce()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ob(this)}getSize(e){return W.resolve(this.size)}}class ob extends JN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.persistence=e,this.Nr=new Ao(n=>tm(n),nm),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lm,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xp(0),this.Kr=!1,this.Kr=!0,this.$r=new rb,this.referenceDelegate=e(this),this.Ur=new ab(this),this.indexManager=new YN,this.remoteDocumentCache=function(i){return new sb(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GN(n),this.Gr=new tb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ib(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new ub(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ub extends $P{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Jr=new lm,this.Yr=null}static Zr(e){return new um(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tC()?8:WP(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cb;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ra()<=_e.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(ra()<=_e.DEBUG&&ee("QueryEngine","Query:",ks(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ra()<=_e.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):W.resolve())}Yi(e,n){if(kv(n))return W.resolve(null);let r=Xn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rf(n,null,"F"),r=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,Rf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return kv(n)||i.isEqual(de.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(ra()<=_e.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ks(n)),this.rs(e,o,n,UP(i,-1)).next(l=>l))})}ts(e,n){let r=new It(eT(e));return n.forEach((i,s)=>{Jc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ra()<=_e.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,wi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(Re),this._s=new Ao(s=>tm(s),nm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fb(t,e,n,r){return new hb(t,e,n,r)}async function ET(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ye();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function pb(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const p=c.batch,g=p.keys();let _=W.resolve();return g.forEach(T=>{_=_.next(()=>f.getEntry(u,T)).next(C=>{const P=c.docVersions.get(T);Pe(P!==null),C.version.compareTo(P)<0&&(p.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),f.addEntry(C)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ye();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TT(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mb(t,e){const n=he(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Rt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(C,P,S){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,_,f)&&l.push(n.Ur.updateTargetData(s,_))});let u=Nr(),c=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(gb(s,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(de.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return W.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function gb(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function yb(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vb(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ni(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Nf(t,e,n){const r=he(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!yl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Fv(t,e,n){const r=he(t);let i=de.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=he(u),g=p._s.get(f);return g!==void 0?W.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)}(r,o,Xn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:ye())).next(l=>(_b(r,lN(e),l),{documents:l,Ts:s})))}function _b(t,e,n){let r=t.us.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Bv{constructor(){this.activeTargetIds=pN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wb{constructor(){this.so=new Bv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function lh(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class Ib extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=lh(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ho("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Tb[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=lh();return new Promise((o,l)=>{const u=new jE;u.setWithCredentials(!0),u.listenOnce(VE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ru.NO_ERROR:const f=u.getResponseJson();ee(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ru.TIMEOUT:ee(Nt,`RPC '${e}' ${s} timed out`),l(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const p=u.getStatus();if(ee(Nt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const T=function(P){const S=P.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(S)>=0?S:z.UNKNOWN}(_.status);l(new Q(T,_.message))}else l(new Q(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(z.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{ee(Nt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(Nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=lh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FE(),l=UE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ee(Nt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,_=!1;const T=new xb({Io:P=>{_?ee(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(ee(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ee(Nt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},To:()=>p.close()}),C=(P,S,w)=>{P.listen(S,A=>{try{w(A)}catch(O){setTimeout(()=>{throw O},0)}})};return C(p,da.EventType.OPEN,()=>{_||(ee(Nt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),C(p,da.EventType.CLOSE,()=>{_||(_=!0,ee(Nt,`RPC '${e}' stream ${i} transport closed`),T.So())}),C(p,da.EventType.ERROR,P=>{_||(_=!0,ho(Nt,`RPC '${e}' stream ${i} transport errored:`,P),T.So(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),C(p,da.EventType.MESSAGE,P=>{var S;if(!_){const w=P.data[0];Pe(!!w);const A=w,O=A.error||((S=A[0])===null||S===void 0?void 0:S.error);if(O){ee(Nt,`RPC '${e}' stream ${i} received error:`,O);const M=O.status;let F=function(x){const I=et[x];if(I!==void 0)return dT(I)}(M),y=O.message;F===void 0&&(F=z.INTERNAL,y="Unknown error status: "+M+" with message "+O.message),_=!0,T.So(new Q(F,y)),p.close()}else ee(Nt,`RPC '${e}' stream ${i} received:`,w),T.bo(w)}}),C(l,ME.STAT_EVENT,P=>{P.stat===wf.PROXY?ee(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===wf.NOPROXY&&ee(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return new ON(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sb extends IT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VN(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Jn(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=If(u)?{documents:FN(s,u)}:{query:BN(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=pT(s,o.resumeToken);const c=Af(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=yc(s,o.snapshotVersion.toTimestamp());const c=Af(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=$N(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pf(this.serializer),n.removeTarget=e,this.a_(n)}}class Rb extends IT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UN(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Cf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Cf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Cb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ms(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=he(u);c.L_.add(4),await wl(c),c.q_.set("Unknown"),c.L_.delete(4),await rd(c)}(this))})}),this.q_=new Cb(r,i)}}async function rd(t){if(ms(t))for(const e of t.B_)await e(!0)}async function wl(t){for(const e of t.B_)await e(!1)}function ST(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pm(n)?fm(n):Co(n).r_()&&hm(n,e))}function dm(t,e){const n=he(t),r=Co(n);n.N_.delete(e),r.r_()&&RT(n,e),n.N_.size===0&&(r.r_()?r.o_():ms(n)&&n.q_.set("Unknown"))}function hm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).A_(e)}function RT(t,e){t.Q_.xe(e),Co(t).R_(e)}function fm(t){t.Q_=new PN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.q_.v_()}function pm(t){return ms(t)&&!Co(t).n_()&&t.N_.size>0}function ms(t){return he(t).L_.size===0}function AT(t){t.Q_=void 0}async function Pb(t){t.q_.set("Online")}async function Nb(t){t.N_.forEach((e,n)=>{hm(t,e)})}async function bb(t,e){AT(t),pm(t)?(t.q_.M_(e),fm(t)):t.q_.set("Unknown")}async function Db(t,e,n){if(t.q_.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vc(t,r)}else if(e instanceof ku?t.Q_.Ke(e):e instanceof hT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{const r=await TT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Rt.EMPTY_BYTE_STRING,f.snapshotVersion)),RT(s,u);const p=new ni(f.target,u,c,f.sequenceNumber);hm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await vc(t,r)}}async function vc(t,e,n){if(!yl(e))throw e;t.L_.add(1),await wl(t),t.q_.set("Offline"),n||(n=()=>TT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await rd(t)})}function CT(t,e){return e().catch(n=>vc(t,n,e))}async function id(t){const e=he(t),n=Ti(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ob(e);)try{const i=await yb(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Lb(e,i)}catch(i){await vc(e,i)}kT(e)&&PT(e)}function Ob(t){return ms(t)&&t.O_.length<10}function Lb(t,e){t.O_.push(e);const n=Ti(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kT(t){return ms(t)&&!Ti(t).n_()&&t.O_.length>0}function PT(t){Ti(t).start()}async function jb(t){Ti(t).p_()}async function Vb(t){const e=Ti(t);for(const n of t.O_)e.m_(n.mutations)}async function Mb(t,e,n){const r=t.O_.shift(),i=sm.from(r,e,n);await CT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await id(t)}async function Ub(t,e){e&&Ti(t).V_&&await async function(r,i){if(function(o){return AN(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Ti(r).s_(),await CT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await id(r)}}(t,e),kT(t)&&PT(t)}async function $v(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ms(n);n.L_.add(3),await wl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await rd(n)}async function Fb(t,e){const n=he(t);e?(n.L_.delete(2),await rd(n)):e||(n.L_.add(2),await wl(n),n.q_.set("Unknown"))}function Co(t){return t.K_||(t.K_=function(n,r,i){const s=he(n);return s.w_(),new Sb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Pb.bind(null,t),Ro:Nb.bind(null,t),mo:bb.bind(null,t),d_:Db.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pm(t)?fm(t):t.q_.set("Unknown")):(await t.K_.stop(),AT(t))})),t.K_}function Ti(t){return t.U_||(t.U_=function(n,r,i){const s=he(n);return s.w_(),new Rb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jb.bind(null,t),mo:Ub.bind(null,t),f_:Vb.bind(null,t),g_:Mb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await id(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new mm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gm(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),yl(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.W_=new Ke(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new yo(e,n,eo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zb{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=Hv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function Hv(){return new Ao(t=>ZE(t),Xc)}async function ym(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Bb,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=gm(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_m(n)}async function vm(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $b(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&_m(n)}function Wb(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var bf,qv;(qv=bf||(bf={})).ea="default",qv.Cache="cache";class wm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.key=e}}class bT{constructor(e){this.key=e}}class Hb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=eT(e),this.Ra=new eo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Wv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),_=Jc(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;g&&_?g.data.isEqual(_.data)?T!==C&&(r.track({type:3,doc:_}),P=!0):this.ga(g,_)||(r.track({type:2,doc:_}),P=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),P=!0):g&&!_&&(r.track({type:1,doc:g}),P=!0,(u||c)&&(l=!0)),P&&(_?(o=o.add(_),s=C?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,T){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return C(_)-C(T)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new yo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new bT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new NT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Kb{constructor(e){this.key=e,this.va=!1}}class Gb{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ao(l=>ZE(l),Xc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(ie.comparator),this.Na=new Map,this.La=new lm,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Qb(t,e,n=!0){const r=MT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await DT(r,e,n,!0),i}async function Yb(t,e){const n=MT(t);await DT(n,e,!0,!1)}async function DT(t,e,n,r){const i=await vb(t.localStore,Xn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await Xb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ST(t.remoteStore,i),l}async function Xb(t,e,n,r,i){t.Ka=(p,g,_)=>async function(C,P,S,w){let A=P.view.ma(S);A.ns&&(A=await Fv(C.localStore,P.query,!1).then(({documents:y})=>P.view.ma(y,A)));const O=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,F=P.view.applyChanges(A,C.isPrimaryClient,O,M);return Gv(C,P.targetId,F.wa),F.snapshot}(t,p,g,_);const s=await Fv(t.localStore,e,!0),o=new Hb(e,s.Ts),l=o.ma(s.documents),u=_l.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Gv(t,n,c.wa);const f=new qb(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Jb(t,e,n){const r=he(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Xc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dm(r.remoteStore,i.targetId),Df(r,i.targetId)}).catch(gl)):(Df(r,i.targetId),await Nf(r.localStore,i.targetId,!0))}async function Zb(t,e){const n=he(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dm(n.remoteStore,r.targetId))}async function eD(t,e,n){const r=aD(t);try{const i=await function(o,l){const u=he(o),c=dt.now(),f=l.reduce((_,T)=>_.add(T.key),ye());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=Nr(),C=ye();return u.cs.getEntries(_,f).next(P=>{T=P,T.forEach((S,w)=>{w.isValidDocument()||(C=C.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,T)).next(P=>{p=P;const S=[];for(const w of l){const A=TN(w,p.get(w.key).overlayedDocument);A!=null&&S.push(new ki(w.key,A,HE(A.value.mapValue),vn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,S,l)}).next(P=>{g=P;const S=P.applyToLocalDocumentSet(p,C);return u.documentOverlayCache.saveOverlays(_,P.batchId,S)})}).then(()=>({batchId:g.batchId,changes:nT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(Re)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await El(r,i.changes),await id(r.remoteStore)}catch(i){const s=gm(i,"Failed to persist write");n.reject(s)}}async function OT(t,e){const n=he(t);try{const r=await mb(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Pe(o.va):i.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await El(n,r,e)}catch(r){await gl(r)}}function Kv(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=he(o);u.onlineState=l;let c=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(c=!0)}),c&&_m(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tD(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(ie.comparator);o=o.insert(s,Lt.newNoDocument(s,de.min()));const l=ye().add(s),u=new td(de.min(),new Map,new Ke(Re),o,l);await OT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Em(r)}else await Nf(r.localStore,e,!1).then(()=>Df(r,e,n)).catch(gl)}async function nD(t,e){const n=he(t),r=e.batch.batchId;try{const i=await pb(n.localStore,e);jT(n,r,null),LT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await El(n,i)}catch(i){await gl(i)}}async function rD(t,e,n){const r=he(t);try{const i=await function(o,l){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(Pe(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);jT(r,e,n),LT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await El(r,i)}catch(i){await gl(i)}}function LT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jT(t,e,n){const r=he(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Df(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||VT(t,r)})}function VT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Em(t))}function Gv(t,e,n){for(const r of n)r instanceof NT?(t.La.addReference(r.key,e),iD(t,r)):r instanceof bT?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||VT(t,r.key)):ce()}function iD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),Em(t))}function Em(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Ue.fromString(e)),r=t.qa.next();t.Na.set(r,new Kb(n)),t.Oa=t.Oa.insert(n,r),ST(t.remoteStore,new ni(Xn(Yc(n.path)),r,"TargetPurposeLimboResolution",Xp.oe))}}async function El(t,e,n){const r=he(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=cm.Wi(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const f=he(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(c,g=>W.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>W.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!yl(p))throw p;ee("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const _=f.os.get(g),T=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(T);f.os=f.os.insert(g,C)}}}(r.localStore,s))}async function sD(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await ET(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await El(n,r.hs)}}function oD(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function MT(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tD.bind(null,e),e.Ca.d_=$b.bind(null,e.eventManager),e.Ca.$a=Wb.bind(null,e.eventManager),e}function aD(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rD.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fb(this.persistence,new db,e.initialUser,this.serializer)}Ga(e){return new lb(um.Zr,this.serializer)}Wa(e){return new wb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class Of{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sD.bind(null,this.syncEngine),await Fb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zb}()}createDatastore(e){const n=nd(e.databaseInfo.databaseId),r=function(s){return new Ib(s)}(e.databaseInfo);return function(s,o,l,u){return new Ab(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new kb(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Kv(this.syncEngine,n,0),function(){return zv.D()?new zv:new Eb}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const p=new Gb(i,s,o,l,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await wl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=zE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ET(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uD(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$v(e.remoteStore,i)),t._onlineComponents=e}async function uD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await ch(t,new _c)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new _c);return t._offlineComponents}async function UT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Qv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Qv(t,new Of))),t._onlineComponents}function cD(t){return UT(t).then(e=>e.syncEngine)}async function wc(t){const e=await UT(t),n=e.eventManager;return n.onListen=Qb.bind(null,e.syncEngine),n.onUnlisten=Jb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zb.bind(null,e.syncEngine),n}function dD(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Tm({next:g=>{f.Za(),o.enqueueAndForget(()=>vm(s,p));const _=g.docs.has(l);!_&&g.fromCache?c.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new wm(Yc(l.path),f,{includeMetadataChanges:!0,_a:!0});return ym(s,p)}(await wc(t),t.asyncQueue,e,n,r)),r.promise}function hD(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Tm({next:g=>{f.Za(),o.enqueueAndForget(()=>vm(s,p)),g.fromCache&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new wm(l,f,{includeMetadataChanges:!0,_a:!0});return ym(s,p)}(await wc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fD(t,e,n,r){if(e===!0&&r===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xv(t){if(!ie.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jv(t){if(ie.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function Jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sd(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PP;switch(r.type){case"firstParty":return new OP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yv.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Yv.delete(n),r.terminate())}(this),Promise.resolve()}}function pD(t,e,n,r={}){var i;const s=(t=Jt(t,od))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=bt.MOCK_USER;else{l=Yw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new bt(c)}t._authCredentials=new NP(new BE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class mi extends Pi{constructor(e,n,r){super(e,n,Yc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ie(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function st(t,e,...n){if(t=it(t),BT("collection","path",e),t instanceof od){const r=Ue.fromString(e,...n);return Jv(r),new mi(t,null,r)}{if(!(t instanceof jt||t instanceof mi))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Jv(r),new mi(t.firestore,null,r)}}function ir(t,e,...n){if(t=it(t),arguments.length===1&&(e=zE.newId()),BT("doc","path",e),t instanceof od){const r=Ue.fromString(e,...n);return Xv(r),new jt(t,null,new ie(r))}{if(!(t instanceof jt||t instanceof mi))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Xv(r),new jt(t.firestore,t instanceof mi?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xT(this,"async_queue_retry"),this.Vu=()=>{const r=uh();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=mm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function t_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class br extends od{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new e_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function mD(t,e){const n=typeof t=="object"?t:Fp(),r=typeof t=="string"?t:"(default)",i=Wc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Kw("firestore");s&&pD(i,...s)}return i}function ad(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gD(t),t._firestoreClient}function gD(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new KP(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,FT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new lD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Rt.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=/^__.*__$/;class vD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new vl(e,this.data,n,this.fieldTransforms)}}class zT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $T(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class Sm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ec(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($T(this.Cu)&&yD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _D{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nd(e)}Qu(e,n,r,i=!1){return new Sm({Cu:e,methodName:n,qu:r,path:Tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cd(t){const e=t._freezeSettings(),n=nd(t._databaseId);return new _D(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Am("Data must be an object, but it was:",o,r);const l=HT(r,o);let u,c;if(s.merge)u=new an(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=Lf(e,p,n);if(!o.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);KT(f,g)||f.push(g)}u=new an(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new vD(new Kt(l),u,c)}class dd extends ud{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}class Rm extends ud{_toFieldTransform(e){return new vN(e.path,new nl)}isEqual(e){return e instanceof Rm}}function wD(t,e,n,r){const i=t.Qu(1,e,n);Am("Data must be an object, but it was:",i,r);const s=[],o=Kt.empty();ps(r,(u,c)=>{const f=Cm(e,u,n);c=it(c);const p=i.Nu(f);if(c instanceof dd)s.push(f);else{const g=Tl(c,p);g!=null&&(s.push(f),o.set(f,g))}});const l=new an(s);return new zT(o,l,i.fieldTransforms)}function ED(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Lf(e,r,n)],u=[i];if(s.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Lf(e,s[g])),u.push(s[g+1]);const c=[],f=Kt.empty();for(let g=l.length-1;g>=0;--g)if(!KT(c,l[g])){const _=l[g];let T=u[g];T=it(T);const C=o.Nu(_);if(T instanceof dd)c.push(_);else{const P=Tl(T,C);P!=null&&(c.push(_),f.set(_,P))}}const p=new an(c);return new zT(f,p,o.fieldTransforms)}function TD(t,e,n,r=!1){return Tl(n,t.Qu(r?4:3,e))}function Tl(t,e){if(qT(t=it(t)))return Am("Unsupported field value:",e,t),HT(t,e);if(t instanceof ud)return function(r,i){if(!$T(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Tl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=dt.fromDate(r);return{timestampValue:yc(i.serializer,s)}}if(r instanceof dt){const s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yc(i.serializer,s)}}if(r instanceof xm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:pT(i.serializer,r._byteString)};if(r instanceof jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:am(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Im)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return rm(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sd(r)}`)}(t,e)}function HT(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(t,(r,i)=>{const s=Tl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof xm||t instanceof vo||t instanceof jt||t instanceof ud||t instanceof Im)}function Am(t,e,n){if(!qT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=sd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lf(t,e,n){if((e=it(e))instanceof ld)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw Ec("Field path arguments must be of type string or ",t,!1,void 0,n)}const xD=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(xD)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ld(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ec(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q(z.INVALID_ARGUMENT,l+t+u)}function KT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ID extends GT{data(){return super.data()}}function hd(t,e){return typeof e=="string"?Cm(t,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class km{}class YT extends km{}function jn(t,e,...n){let r=[];e instanceof km&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Nm).length,l=s.filter(u=>u instanceof fd).length;if(o>1||o>0&&l>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fd extends YT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fd(e,n,r)}_apply(e){const n=this._parse(e);return XT(e._query,n),new Pi(e.firestore,e.converter,Sf(e._query,n))}_parse(e){const n=cd(e.firestore);return function(s,o,l,u,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){r_(p,f);const _=[];for(const T of p)_.push(n_(u,s,T));g={arrayValue:{values:_}}}else g=n_(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||r_(p,f),g=TD(l,o,p,f==="in"||f==="not-in");return rt.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pm(t,e,n){const r=e,i=hd("where",t);return fd._create(i,r,n)}class Nm extends km{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)XT(o,u),o=Sf(o,u)}(e._query,n),new Pi(e.firestore,e.converter,Sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bm extends YT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(s,o)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ro(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function er(t,e="asc"){const n=e,r=hd("orderBy",t);return bm._create(r,n)}function n_(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&n.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!ie.isDocumentKey(r))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xv(t,new ie(r))}if(n instanceof jt)return xv(t,n._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(n)}.`)}function r_(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SD{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ps(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new Im(s)}convertGeoPoint(e){return new xm(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Pe(wT(r));const i=new Za(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||Pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZT extends GT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pu extends ZT{data(e={}){return super.data(e)}}class ex{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pu(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Pu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new pa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Pu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new pa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:RD(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){t=Jt(t,jt);const e=Jt(t.firestore,br);return dD(ad(e),t._key).then(n=>rx(e,t,n))}class Dm extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Ni(t){t=Jt(t,Pi);const e=Jt(t.firestore,br),n=ad(e),r=new Dm(e);return QT(t._query),hD(n,t._query).then(i=>new ex(e,r,t,i))}function AD(t,e,n){t=Jt(t,jt);const r=Jt(t.firestore,br),i=JT(t.converter,e,n);return pd(r,[WT(cd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vn.none())])}function ko(t,e,n,...r){t=Jt(t,jt);const i=Jt(t.firestore,br),s=cd(i);let o;return o=typeof(e=it(e))=="string"||e instanceof ld?ED(s,"updateDoc",t._key,e,n,r):wD(s,"updateDoc",t._key,e),pd(i,[o.toMutation(t._key,vn.exists(!0))])}function CD(t){return pd(Jt(t.firestore,br),[new im(t._key,vn.none())])}function bi(t,e){const n=Jt(t.firestore,br),r=ir(t),i=JT(t.converter,e);return pd(n,[WT(cd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vn.exists(!1))]).then(()=>r)}function nx(t,...e){var n,r,i;t=it(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||t_(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(t_(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,c,f;if(t instanceof jt)c=Jt(t.firestore,br),f=Yc(t._key.path),u={next:p=>{e[o]&&e[o](rx(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Jt(t,Pi);c=Jt(p.firestore,br),f=p._query;const g=new Dm(c);u={next:_=>{e[o]&&e[o](new ex(c,g,p,_))},error:e[o+1],complete:e[o+2]},QT(t._query)}return function(g,_,T,C){const P=new Tm(C),S=new wm(_,P,T);return g.asyncQueue.enqueueAndForget(async()=>ym(await wc(g),S)),()=>{P.Za(),g.asyncQueue.enqueueAndForget(async()=>vm(await wc(g),S))}}(ad(c),f,l,u)}function pd(t,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>eD(await cD(r),i,s)),s.promise}(ad(t),e)}function rx(t,e,n){const r=n.docs.get(e._key),i=new Dm(t);return new ZT(t,i,e._key,r,new pa(n.hasPendingWrites,n.fromCache),e.converter)}function Zt(){return new Rm("serverTimestamp")}(function(e,n=!0){(function(i){So=i})(hs),ss(new _i("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new br(new bP(r.getProvider("auth-internal")),new jP(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Gn(vv,"4.7.3",e),Gn(vv,"4.7.3","esm2017")})();var kD="firebase",PD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(kD,PD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebasestorage.googleapis.com",ND="storageBucket",bD=2*60*1e3,DD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends rr{constructor(e,n,r=0){super(dh(e),`Firebase Storage: ${n} (${dh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tr||(tr={}));function dh(t){return"storage/"+t}function OD(){const t="An unknown error occurred, please check the error payload for server response.";return new sr(tr.UNKNOWN,t)}function LD(){return new sr(tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jD(){return new sr(tr.CANCELED,"User canceled the upload/download.")}function VD(t){return new sr(tr.INVALID_URL,"Invalid URL '"+t+"'.")}function MD(t){return new sr(tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function i_(t){return new sr(tr.INVALID_ARGUMENT,t)}function sx(){return new sr(tr.APP_DELETED,"The Firebase app was deleted.")}function UD(t){return new sr(tr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pn.makeFromUrl(e,n)}catch{return new Pn(e,"")}if(r.path==="")return r;throw MD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),T={bucket:1,path:3},C=n===ix?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",S=new RegExp(`^https?://${C}/${i}/${P}`,"i"),A=[{regex:l,indices:u,postModify:s},{regex:_,indices:T,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<A.length;O++){const M=A[O],F=M.regex.exec(e);if(F){const y=F[M.indices.bucket];let v=F[M.indices.path];v||(v=""),r=new Pn(y,v),M.postModify(r);break}}if(r==null)throw VD(e);return r}}class FD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function f(...P){c||(c=!0,e.apply(null,P))}function p(P){i=setTimeout(()=>{i=null,t(_,u())},P)}function g(){s&&clearTimeout(s)}function _(P,...S){if(c){g();return}if(P){g(),f.call(null,P,...S);return}if(u()||o){g(),f.call(null,P,...S);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,p(A)}let T=!1;function C(P){T||(T=!0,g(),!c&&(i!==null?(P||(l=2),clearTimeout(i),p(0)):P||(l=1)))}return p(0),s=setTimeout(()=>{o=!0,C(!0)},n),C}function zD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){return t!==void 0}function s_(t,e,n,r){if(r<e)throw i_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i_(`Invalid value for '${t}'. Expected ${n} or less.`)}function WD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Tc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tc||(Tc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,r,i,s,o,l,u,c,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,T)=>{this.resolve_=_,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new lu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Tc.NO_ERROR,u=s.getStatus();if(!l||HD(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Tc.ABORT;r(!1,new lu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new lu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());$D(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=OD();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?sx():jD();o(u)}else{const u=LD();o(u)}};this.canceled_?n(!1,new lu(!1,null,!0)):this.backoffId_=BD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function XD(t,e,n,r,i,s,o=!0){const l=WD(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return QD(c,e),KD(c,n),GD(c,s),YD(c,r),new qD(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this._service=e,n instanceof Pn?this._location=n:this._location=Pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xc(e,n)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZD(this._location.path)}get storage(){return this._service}get parent(){const e=JD(this._location.path);if(e===null)return null;const n=new Pn(this._location.bucket,e);return new xc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UD(e)}}function o_(t,e){const n=e==null?void 0:e[ND];return n==null?null:Pn.makeFromBucketSpec(n,t)}function e2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Yw(i,t.app.options.projectId))}class t2{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ix,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bD,this._maxUploadRetryTime=DD,this._requests=new Set,i!=null?this._bucket=Pn.makeFromBucketSpec(i,this._host):this._bucket=o_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=o_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new FD(sx());{const o=XD(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const a_="@firebase/storage",l_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="storage";function n2(t=Fp(),e){t=it(t);const r=Wc(t,ox).getImmediate({identifier:e}),i=Kw("storage");return i&&r2(r,...i),r}function r2(t,e,n,r={}){e2(t,e,n,r)}function i2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new t2(n,r,i,e,hs)}function s2(){ss(new _i(ox,i2,"PUBLIC").setMultipleInstances(!0)),Gn(a_,l_,""),Gn(a_,l_,"esm2017")}s2();const o2={apiKey:"AIzaSyASf7lyaGhgEl0q_q1j1lQTho4_HjVAICA",authDomain:"customer-ops-portal.firebaseapp.com",projectId:"customer-ops-portal",storageBucket:"customer-ops-portal.firebasestorage.app",messagingSenderId:"96326522125",appId:"1:96326522125:web:077b1758f6095020430c44"},Om=Zw(o2),Lm=CP(Om),Ne=mD(Om);n2(Om);function a2(t){return t?t.toLowerCase():"customer"}function Vn(){const[t,e]=D.useState(null),[n,r]=D.useState(null),[i,s]=D.useState(!0);return D.useEffect(()=>{const o=gk(Lm,async l=>{if(e(l),r(null),!l){s(!1);return}try{const u=ir(Ne,"users",l.uid),c=await tx(u);if(c.exists()){const f=c.data();r({...f,role:a2(f.role),customerId:f.customerId||f.name||l.email})}else{const f={role:"customer",name:l.email,customerId:l.email};await AD(u,f,{merge:!0}),r(f)}}catch(u){console.error("Failed loading user profile:",u),r({role:"customer",name:l.email,customerId:l.email})}finally{s(!1)}});return()=>o()},[]),{user:t,profile:n,loading:i}}async function l2(t,e){return fk(Lm,t,e)}async function u2(){return yk(Lm)}async function c2(t){const e=await tx(ir(Ne,"orders",t));return e.exists()?{id:e.id,...e.data()}:null}async function ax(t=null){let e=jn(st(Ne,"orders"),er("createdAt","desc"));return t&&(e=jn(st(Ne,"orders"),Pm("customerId","==",t),er("createdAt","desc"))),(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))}function lx(t,e=null){let n=jn(st(Ne,"orders"),er("createdAt","desc"));return e&&(n=jn(st(Ne,"orders"),Pm("customerId","==",e),er("createdAt","desc"))),nx(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));t(i)},r=>{console.error("Orders subscription error:",r),t([])})}async function d2(t){const e=await bi(st(Ne,"orders"),{...t,status:"submitted",viewed:!1,createdAt:Zt(),updatedAt:Zt()});return await cx(e.id,{type:"created",message:"Order submitted",createdByUid:t.createdByUid,createdByName:t.createdByName||null}),await p2({type:"new_order",orderId:e.id,title:t.title,customerId:t.customerId,message:`New order "${t.title}" from ${t.customerId}`}),e.id}async function h2(t,e){await ko(ir(Ne,"orders",t),{...e,updatedAt:Zt()})}async function ux(t){await ko(ir(Ne,"orders",t),{viewed:!0})}async function f2(t){const e=jn(st(Ne,"orders",t,"updates"),er("createdAt","desc"));return(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))}async function cx(t,{type:e,message:n,createdByUid:r,createdByName:i}){await bi(st(Ne,"orders",t,"updates"),{type:e,message:n,createdByUid:r,createdByName:i||null,createdAt:Zt()})}async function p2(t){await bi(st(Ne,"notifications"),{...t,read:!1,createdAt:Zt()})}function m2(t){const e=jn(st(Ne,"notifications"),er("createdAt","desc"));return nx(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},()=>t([]))}async function g2(t){await ko(ir(Ne,"notifications",t),{read:!0})}async function y2(){const t=jn(st(Ne,"notifications"),Pm("read","==",!1)),n=(await Ni(t)).docs.map(r=>ko(ir(Ne,"notifications",r.id),{read:!0}));await Promise.all(n)}function v2(t){const e=["Date","Time","Type","Message","Order ID","Customer","Read"],n=t.map(l=>{var c;const u=(c=l.createdAt)!=null&&c.toDate?l.createdAt.toDate():new Date;return[u.toLocaleDateString(),u.toLocaleTimeString(),l.type||"",`"${(l.message||"").replace(/"/g,'""')}"`,l.orderId||"",l.customerId||"",l.read?"Yes":"No"]}),r=[e.join(","),...n.map(l=>l.join(","))].join(`
`),i=new Blob([r],{type:"text/csv"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`orbit-notifications-${new Date().toISOString().split("T")[0]}.csv`,o.click(),URL.revokeObjectURL(s)}function _2({isOpen:t,onClose:e,notifications:n,onExport:r}){if(!t)return null;const i=n.filter(s=>!s.read);return h.jsxs("div",{className:"fixed inset-0 z-50",children:[h.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:e}),h.jsxs("div",{className:"absolute right-4 top-20 w-96 max-w-[calc(100vw-2rem)] bg-white border border-neutral-200 shadow-xl animate-in",children:[h.jsxs("div",{className:"p-4 border-b border-neutral-100 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium",children:"Notifications"}),h.jsxs("p",{className:"text-xs text-neutral-400",children:[i.length," unread"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:r,className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Export CSV"}),h.jsx("button",{onClick:e,className:"text-neutral-400 hover:text-neutral-900",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]}),h.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?h.jsx("div",{className:"p-8 text-center",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No notifications"})}):h.jsx("div",{className:"divide-y divide-neutral-100",children:n.slice(0,20).map(s=>{var l;const o=(l=s.createdAt)!=null&&l.toDate?s.createdAt.toDate():new Date;return h.jsx("div",{className:`p-4 hover:bg-neutral-50 transition-colors ${s.read?"":"bg-blue-50/50"}`,onClick:()=>!s.read&&g2(s.id),children:h.jsxs("div",{className:"flex items-start gap-3",children:[!s.read&&h.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm text-neutral-900",children:s.message}),h.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:[o.toLocaleDateString(),"  ",o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})},s.id)})})}),n.length>0&&i.length>0&&h.jsx("div",{className:"p-3 border-t border-neutral-100",children:h.jsx("button",{onClick:()=>y2(),className:"text-xs text-neutral-500 hover:text-neutral-900 w-full text-center",children:"Mark all as read"})})]})]})}function w2({orders:t,onClose:e}){const n=t.filter(r=>!r.viewed);return n.length===0?null:h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),h.jsxs("div",{className:"relative bg-white w-full max-w-lg shadow-2xl animate-in",children:[h.jsx("div",{className:"p-6 border-b border-neutral-100",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-medium",children:"New Orders Received"}),h.jsxs("p",{className:"text-sm text-neutral-500",children:[n.length," new order",n.length>1?"s":""," since last visit"]})]})]})}),h.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-neutral-100",children:n.slice(0,5).map(r=>{var i,s;return h.jsx(sc,{to:`/orders/${r.id}`,onClick:e,className:"block p-4 hover:bg-neutral-50 transition-colors",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:r.title}),h.jsx("p",{className:"text-xs text-neutral-500",children:r.customerId})]}),h.jsx("span",{className:"text-xs text-neutral-400",children:(s=(i=r.createdAt)==null?void 0:i.toDate)==null?void 0:s.call(i).toLocaleDateString()})]})},r.id)})}),h.jsxs("div",{className:"p-4 border-t border-neutral-100 flex justify-between",children:[h.jsx(sc,{to:"/orders",onClick:e,className:"text-sm text-neutral-600 hover:text-neutral-900",children:"View all orders "}),h.jsx("button",{onClick:e,className:"btn-primary btn-sm",children:"Got it"})]})]})]})}function E2(){const{user:t,profile:e}=Vn(),n=Ai(),[r,i]=D.useState(!1),[s,o]=D.useState(!1),[l,u]=D.useState(!1),[c,f]=D.useState([]),[p,g]=D.useState([]),[_,T]=D.useState(!0),C=(e==null?void 0:e.role)||"customer",P=C==="admin"||C==="staff",S=p.filter(F=>!F.read).length,w=c.filter(F=>!F.viewed).length;D.useEffect(()=>{if(!P)return;const F=lx(y=>{f(y),_&&y.some(v=>!v.viewed)&&(u(!0),T(!1))});return()=>F()},[P,_]),D.useEffect(()=>{if(!P)return;const F=m2(g);return()=>F()},[P]);const A=async()=>{await u2(),n("/login")},O=()=>{v2(p)},M=({to:F,children:y,badge:v})=>h.jsxs(sc,{to:F,onClick:()=>i(!1),className:({isActive:x})=>`relative flex items-center gap-2 text-xs tracking-widest uppercase transition-colors ${x?"text-neutral-900":"text-neutral-400 hover:text-neutral-900"}`,children:[y,v>0&&h.jsx("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-2xs font-medium bg-red-500 text-white rounded-full",children:v})]});return h.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[h.jsxs("header",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm border-b border-neutral-100",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:h.jsxs("div",{className:"flex items-center justify-between h-20",children:[h.jsxs(sc,{to:"/",className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-neutral-900 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-sm font-semibold",children:"O"})}),h.jsx("span",{className:"text-xl font-light tracking-tight",children:"Orbit"})]}),h.jsx("nav",{className:"hidden lg:flex items-center gap-10",children:P?h.jsxs(h.Fragment,{children:[h.jsx(M,{to:"/orders",badge:w,children:"Orders"}),h.jsx(M,{to:"/products",children:"Products"}),h.jsx(M,{to:"/lookbook",children:"Lookbook"}),h.jsx(M,{to:"/production",children:"Production"}),h.jsx(M,{to:"/customers",children:"Customers"})]}):h.jsxs(h.Fragment,{children:[h.jsx(M,{to:"/dashboard",children:"Dashboard"}),h.jsx(M,{to:"/orders",children:"My Orders"}),h.jsx(M,{to:"/products",children:"Catalogue"}),h.jsx(M,{to:"/lookbook",children:"Updates"})]})}),h.jsxs("div",{className:"flex items-center gap-4",children:[P&&h.jsxs("button",{onClick:()=>o(!0),className:"relative p-2 text-neutral-400 hover:text-neutral-900 transition-colors",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),S>0&&h.jsx("span",{className:"notification-dot"})]}),h.jsxs("div",{className:"hidden sm:block text-right",children:[h.jsx("p",{className:"text-xs text-neutral-900",children:(e==null?void 0:e.name)||(t==null?void 0:t.email)}),h.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider",children:C})]}),h.jsx("button",{onClick:A,className:"text-xs tracking-widest uppercase text-neutral-400 hover:text-neutral-900 transition-colors",children:"Exit"}),h.jsx("button",{onClick:()=>i(!r),className:"lg:hidden p-2",children:h.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between",children:[h.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"rotate-45 translate-y-1.5":""}`}),h.jsx("span",{className:`h-px bg-neutral-900 transition-opacity ${r?"opacity-0":""}`}),h.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"-rotate-45 -translate-y-1.5":""}`})]})})]})]})}),r&&h.jsx("nav",{className:"lg:hidden border-t border-neutral-100 py-4 px-6 space-y-3 bg-white",children:P?h.jsxs(h.Fragment,{children:[h.jsx(M,{to:"/orders",badge:w,children:"Orders"}),h.jsx(M,{to:"/products",children:"Products"}),h.jsx(M,{to:"/lookbook",children:"Lookbook"}),h.jsx(M,{to:"/production",children:"Production"}),h.jsx(M,{to:"/customers",children:"Customers"})]}):h.jsxs(h.Fragment,{children:[h.jsx(M,{to:"/dashboard",children:"Dashboard"}),h.jsx(M,{to:"/orders",children:"My Orders"}),h.jsx(M,{to:"/products",children:"Catalogue"}),h.jsx(M,{to:"/lookbook",children:"Updates"})]})})]}),h.jsx(_2,{isOpen:s,onClose:()=>o(!1),notifications:p,onExport:O}),l&&P&&h.jsx(w2,{orders:c,onClose:()=>u(!1)}),h.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-6 lg:px-8 py-12",children:h.jsx(yA,{})}),h.jsx("footer",{className:"border-t border-neutral-100 py-6",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 flex items-center justify-between",children:[h.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:"Orbit B2B Platform"}),h.jsx("p",{className:"text-2xs text-neutral-300",children:" 2026"})]})})]})}function T2(){var _;const{user:t,loading:e}=Vn(),r=((_=Ri().state)==null?void 0:_.from)||"/",[i,s]=D.useState(""),[o,l]=D.useState(""),[u,c]=D.useState(!1),[f,p]=D.useState("");if(!e&&t)return h.jsx(lo,{to:r,replace:!0});const g=async T=>{if(T.preventDefault(),!(!i.trim()||!o)){c(!0),p("");try{await l2(i.trim(),o)}catch(C){p(C.code==="auth/invalid-credential"?"Invalid email or password":"Unable to sign in")}finally{c(!1)}}};return e?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"w-8 h-8 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin"})}):h.jsxs("div",{className:"min-h-screen bg-white flex",children:[h.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative overflow-hidden",children:[h.jsx("img",{src:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=1200&h=1600&fit=crop",alt:"Denim",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-16",children:[h.jsxs("h1",{className:"text-5xl font-extralight text-white tracking-tight leading-tight",children:["Premium Denim.",h.jsx("br",{}),"Elevated Process."]}),h.jsx("p",{className:"mt-6 text-sm text-white/70 max-w-md",children:"Orbit connects manufacturers with retailers through seamless B2B operations. Orders, production, and collaborationunified."})]})]}),h.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-16",children:h.jsxs("div",{className:"w-full max-w-sm animate-in",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-16",children:[h.jsx("div",{className:"w-12 h-12 bg-neutral-900 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-lg font-semibold",children:"O"})}),h.jsx("span",{className:"text-2xl font-light tracking-tight",children:"Orbit"})]}),h.jsx("h2",{className:"text-3xl font-extralight tracking-tight mb-3",children:"Welcome"}),h.jsx("p",{className:"text-sm text-neutral-500 mb-10",children:"Sign in to continue"}),h.jsxs("form",{onSubmit:g,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-2 block",children:"Email"}),h.jsx("input",{type:"email",value:i,onChange:T=>s(T.target.value),className:"input-field",placeholder:"you@company.com",disabled:u})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-2 block",children:"Password"}),h.jsx("input",{type:"password",value:o,onChange:T=>l(T.target.value),className:"input-field",placeholder:"",disabled:u})]}),f&&h.jsx("p",{className:"text-sm text-red-600",children:f}),h.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full",children:u?"Signing in...":"Continue"})]}),h.jsxs("div",{className:"mt-12 pt-8 border-t border-neutral-100",children:[h.jsx("p",{className:"section-label mb-3",children:"Demo Accounts"}),h.jsxs("div",{className:"space-y-1 text-xs text-neutral-500",children:[h.jsxs("p",{children:[h.jsx("span",{className:"text-neutral-900",children:"Admin:"})," mallikamin@gmail.com / admin123"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-neutral-900",children:"Staff:"})," staff@customerops.com / staff123"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-neutral-900",children:"Customer:"})," customer@customerops.com / customer123"]})]})]})]})})]})}const jm=[{id:"lb-001",type:"campaign",title:"Summer 2025 Campaign",subtitle:"The Endless Blue Collection",content:`Introducing our most ambitious seasonal collection yet. Shot on location in the Amalfi Coast, this campaign celebrates the timeless appeal of denim against Mediterranean landscapes.

Each piece tells a story of craftsmanship meeting adventure. From the rugged cliffs of Positano to the sun-drenched beaches of Capri, our Summer 2025 collection captures the essence of Italian summer style.

The Endless Blue Collection features lighter weights, breathable constructions, and washes inspired by the Tyrrhenian Sea. Pre-orders open February 1st.`,imageUrl:"https://images.unsplash.com/photo-1509631179647-0177331693ae?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1509631179647-0177331693ae?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1475178626620-a4d074967452?w=800&h=600&fit=crop"],date:"January 15, 2025",featured:!0},{id:"lb-002",type:"news",title:"Orbit Wins Sustainable Fashion Award",subtitle:"Recognition for our eco-initiatives",content:`We are honored to announce that Orbit has been awarded the 2024 Sustainable Fashion Innovation Award for our pioneering work in recycled denim technology.

This recognition validates our commitment to creating beautiful products while protecting our planet. Our recycled ocean plastic denim line, launching Spring 2025, represents the culmination of three years of R&D.

Thank you to our partners, suppliers, and customers who share our vision for a more sustainable fashion industry.`,imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&h=800&fit=crop",gallery:[],date:"January 10, 2025",featured:!1},{id:"lb-003",type:"photoshoot",title:"Behind The Scenes: Tokyo Shoot",subtitle:"Street style meets precision",content:`Take a look behind the curtain at our recent photoshoot in the streets of Shibuya and Harajuku.

Our creative team spent two weeks capturing the energy of Tokyo youth culture, resulting in some of our most dynamic imagery yet. The contrast between traditional Japanese aesthetics and contemporary street fashion created unexpected magic.

Special thanks to our local production team and the amazing street cast who brought authenticity to every frame.`,imageUrl:"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=800&h=600&fit=crop"],date:"January 5, 2025",featured:!1},{id:"lb-004",type:"update",title:"New Factory Partnership in Portugal",subtitle:"Expanding our European production",content:`We are excited to announce our new partnership with Textil Amorim, a family-owned factory in Porto with over 80 years of denim expertise.

This collaboration will enhance our production capacity while maintaining the artisanal quality you expect from Orbit. The Amorim family shares our commitment to ethical manufacturing and environmental responsibility.

Production begins March 2025. Existing orders will continue through our current facilities with no disruption.`,imageUrl:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&h=800&fit=crop",gallery:[],date:"December 28, 2024",featured:!1},{id:"lb-005",type:"catalogue",title:"Heritage Collection Lookbook",subtitle:"Timeless pieces, modern interpretation",content:`Our Heritage Collection pays homage to the golden era of American workwear. Each piece features authentic details that defined the original work pants of the 1950s.

Copper rivets, leather patches, hidden selvedge details, and reinforced stitching - these are jeans built to last generations. We've updated the fits for contemporary bodies while preserving the soul of the originals.

Available now in all partner stores.`,imageUrl:"https://images.unsplash.com/photo-1576995853123-5a10305d93c0?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1576995853123-5a10305d93c0?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1542272604-787c3835535d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1604176354204-9268737828e4?w=800&h=600&fit=crop"],date:"December 20, 2024",featured:!0},{id:"lb-006",type:"news",title:"Spring 2025 Orders Now Open",subtitle:"Secure your inventory early",content:`Spring 2025 ordering is now open for all partners. Early orders placed before February 15th will receive priority production slots and a 5% early-bird discount.

This season features expanded size ranges, new sustainable options, and several exciting collaborations we'll announce in the coming weeks.

Contact your account manager or place orders directly through the portal.`,imageUrl:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=1200&h=800&fit=crop",gallery:[],date:"December 15, 2024",featured:!1},{id:"lb-007",type:"photoshoot",title:"Performance Line: Mountain Test",subtitle:"Pushing limits in the Alps",content:`Our new Performance line was put to the ultimate test - a week of hiking, climbing, and camping in the Swiss Alps.

The Tech Stretch Pro and Mountain series performed flawlessly in conditions ranging from freezing rain to intense sun. The four-way stretch allowed full range of motion on technical climbs, while the moisture-wicking kept our team comfortable through 10-hour days.

Real performance tested in real conditions. Available now.`,imageUrl:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=800&h=600&fit=crop"],date:"December 10, 2024",featured:!1}];async function x2(t){return(await bi(st(Ne,"lookbook"),{...t,createdAt:Zt(),updatedAt:Zt()})).id}async function u_(t){try{const e=jn(st(Ne,"lookbook",t,"comments"),er("createdAt","asc"));return(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{return[]}}async function I2(t,{message:e,createdByUid:n,createdByName:r}){await bi(st(Ne,"lookbook",t,"comments"),{message:e,createdByUid:n,createdByName:r,createdAt:Zt()})}const c_={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400"};function S2(){var c;const{profile:t,loading:e}=Vn(),[n,r]=D.useState([]),[i,s]=D.useState(!0);D.useEffect(()=>{e||(t!=null&&t.customerId?ax(t==null?void 0:t.customerId).then(r).finally(()=>s(!1)):s(!1))},[t==null?void 0:t.customerId,e]);const o=n.slice(0,5),l=n.filter(f=>!["closed","cancelled"].includes(f.status)),u=jm[0];return e||i?h.jsx("div",{className:"py-16 text-center",children:h.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"mb-12",children:[h.jsx("p",{className:"section-label mb-3",children:"Dashboard"}),h.jsxs("h1",{className:"page-title",children:["Welcome back, ",((c=t==null?void 0:t.name)==null?void 0:c.split(" ")[0])||"there"]})]}),h.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{label:"Total Orders",value:n.length},{label:"Active",value:l.length},{label:"In Progress",value:n.filter(f=>f.status==="in_progress").length},{label:"Delivered",value:n.filter(f=>f.status==="delivered").length}].map((f,p)=>h.jsxs("div",{className:"p-6 border border-neutral-100",children:[h.jsx("p",{className:"text-3xl font-extralight",children:f.value}),h.jsx("p",{className:"section-label mt-2",children:f.label})]},p))}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("p",{className:"section-label",children:"Recent Orders"}),h.jsx(Ot,{to:"/orders",className:"text-xs text-neutral-500 hover:text-neutral-900",children:"View all "})]}),o.length===0?h.jsxs("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:[h.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"No orders yet"}),h.jsx(Ot,{to:"/orders/new",className:"btn-primary btn-sm",children:"Place First Order"})]}):h.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:o.map(f=>{var p,g,_;return h.jsx(Ot,{to:`/orders/${f.id}`,className:"block p-4 hover:bg-neutral-50 transition-colors",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium",children:f.title}),h.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:(g=(p=f.createdAt)==null?void 0:p.toDate)==null?void 0:g.call(p).toLocaleDateString()})]}),h.jsx("span",{className:`badge ${c_[f.status]||c_.submitted}`,children:(_=f.status)==null?void 0:_.replace(/_/g," ")})]})},f.id)})}),h.jsx("div",{className:"mt-4",children:h.jsx(Ot,{to:"/orders/new",className:"btn-secondary btn-sm",children:"New Order"})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("p",{className:"section-label",children:"Latest Update"}),h.jsx(Ot,{to:"/lookbook",className:"text-xs text-neutral-500 hover:text-neutral-900",children:"View all "})]}),u&&h.jsxs(Ot,{to:`/lookbook/${u.id}`,className:"block group",children:[h.jsx("div",{className:"aspect-video bg-neutral-100 overflow-hidden mb-3",children:h.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),h.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider mb-1",children:u.type}),h.jsx("p",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:u.title})]})]})]})]})}const R2={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600"},A2=["all","submitted","confirmed","in_progress","delivered","closed"];function C2(){const t=Ai(),{profile:e}=Vn(),n=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="staff",[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(""),[c,f]=D.useState("all");D.useEffect(()=>{const T=n?null:e==null?void 0:e.customerId,C=lx(P=>{i(P),o(!1)},T);return()=>C()},[e,n]);const p=D.useMemo(()=>{let T=r;if(c!=="all"&&(T=T.filter(C=>C.status===c)),l.trim()){const C=l.toLowerCase();T=T.filter(P=>{var S,w;return((S=P.title)==null?void 0:S.toLowerCase().includes(C))||((w=P.customerId)==null?void 0:w.toLowerCase().includes(C))})}return T},[r,l,c]),g=async T=>{n&&!T.viewed&&await ux(T.id),t(`/orders/${T.id}`)},_=r.filter(T=>!T.viewed).length;return h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:n?"All Orders":"My Orders"}),h.jsx("h1",{className:"page-title",children:"Orders"}),n&&_>0&&h.jsxs("p",{className:"text-sm text-emerald-600 mt-2",children:[_," new order",_>1?"s":""]})]}),h.jsx(Ot,{to:"/orders/new",className:"btn-primary",children:"New Order"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[h.jsx("input",{type:"text",value:l,onChange:T=>u(T.target.value),placeholder:"Search orders...",className:"input-field flex-1"}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:A2.map(T=>h.jsx("button",{onClick:()=>f(T),className:`px-3 py-2 text-2xs tracking-widest uppercase ${c===T?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:T==="all"?"All":T.replace(/_/g," ")},T))})]}),s?h.jsx("div",{className:"py-16 text-center",children:h.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):p.length===0?h.jsxs("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:[h.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"No orders found"}),!l&&c==="all"&&h.jsx(Ot,{to:"/orders/new",className:"btn-secondary btn-sm",children:"Create Order"})]}):h.jsx("div",{className:"space-y-2",children:p.map(T=>{var C,P,S;return h.jsx("div",{onClick:()=>g(T),className:`card p-5 cursor-pointer ${!T.viewed&&n?"border-l-4 border-l-emerald-500":""}`,children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[!T.viewed&&n&&h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-sm font-medium truncate",children:T.title}),n&&h.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:T.customerId})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:`badge ${R2[T.status]}`,children:(C=T.status)==null?void 0:C.replace(/_/g," ")}),h.jsx("span",{className:"text-xs text-neutral-400 hidden sm:block",children:(S=(P=T.createdAt)==null?void 0:P.toDate)==null?void 0:S.call(P).toLocaleDateString()}),h.jsx("span",{className:"text-neutral-300",children:""})]})]})},T.id)})})]})}async function k2(t){const e=jn(st(Ne,"orders",t,"tasks"),er("createdAt","asc"));return(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))}async function P2(t,e){return(await bi(st(Ne,"orders",t,"tasks"),{title:e.title,status:"todo",assigneeUid:e.assigneeUid||null,createdByUid:e.createdByUid,createdAt:Zt()})).id}async function N2(t,e,n){await ko(ir(Ne,"orders",t,"tasks",e),{...n,updatedAt:Zt()})}async function b2(t){const e=jn(st(Ne,"orders",t,"comments"),er("createdAt","asc"));return(await Ni(e)).docs.map(r=>({id:r.id,...r.data()}))}async function D2(t,{message:e,createdByUid:n,createdByName:r,parentId:i=null}){await bi(st(Ne,"orders",t,"comments"),{message:e,createdByUid:n,createdByName:r,parentId:i,createdAt:Zt()})}async function O2(){return(await Ni(st(Ne,"users"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const n=(e.role||"").toLowerCase();return n==="admin"||n==="staff"}).sort((e,n)=>(e.name||"").localeCompare(n.name||""))}const ri=[{id:"denim-001",name:"Selvage Raw Indigo",sku:"ORB-DN-001",price:189,category:"Premium Denim",imageUrl:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=600&h=800&fit=crop",description:"Japanese 14oz selvage denim with raw indigo dye. Signature red line selvage detail visible on cuff roll.",specs:{weight:"14oz",fit:"Slim Straight",rise:"Mid Rise",inseam:'32"',material:"100% Cotton Selvage",origin:"Japan",wash:"Raw / Unwashed"},active:!0},{id:"denim-002",name:"Vintage Wash Slim",sku:"ORB-DN-002",price:145,category:"Classic Denim",imageUrl:"https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=600&h=800&fit=crop",description:"Stone-washed slim fit with authentic vintage fade pattern. Comfort stretch for all-day wear.",specs:{weight:"11oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"98% Cotton, 2% Elastane",origin:"Italy",wash:"Stone Wash"},active:!0},{id:"denim-003",name:"Black Rinse Skinny",sku:"ORB-DN-003",price:135,category:"Modern Denim",imageUrl:"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&h=800&fit=crop",description:"Jet black rinse with skinny silhouette. Power stretch technology for ultimate comfort and movement.",specs:{weight:"10oz",fit:"Skinny",rise:"Low Rise",inseam:'30"',material:"92% Cotton, 6% Poly, 2% Elastane",origin:"Turkey",wash:"Rinse Black"},active:!0},{id:"denim-004",name:"Heritage Straight Leg",sku:"ORB-DN-004",price:165,category:"Heritage Collection",imageUrl:"https://images.unsplash.com/photo-1604176354204-9268737828e4?w=600&h=800&fit=crop",description:"Classic American straight leg cut inspired by 1950s workwear. Reinforced seams and copper rivets.",specs:{weight:"13oz",fit:"Straight",rise:"Regular",inseam:'34"',material:"100% Cotton",origin:"USA",wash:"One Wash"},active:!0},{id:"denim-005",name:"Distressed Boyfriend",sku:"ORB-DN-005",price:155,category:"Contemporary",imageUrl:"https://images.unsplash.com/photo-1598554747436-c9293d6a588f?w=600&h=800&fit=crop",description:"Relaxed boyfriend fit with artisanal hand-finished distressing. Each pair is unique.",specs:{weight:"11oz",fit:"Relaxed Boyfriend",rise:"Mid Rise",inseam:'28"',material:"100% Cotton",origin:"Portugal",wash:"Destroyed Vintage"},active:!0},{id:"denim-006",name:"Midnight Selvedge",sku:"ORB-DN-006",price:210,category:"Premium Denim",imageUrl:"https://images.unsplash.com/photo-1475178626620-a4d074967452?w=600&h=800&fit=crop",description:"Deep indigo overdyed selvage from limited edition shuttle loom fabric. Collectors piece.",specs:{weight:"15oz",fit:"Tapered",rise:"High Rise",inseam:'32"',material:"100% Japanese Selvage Cotton",origin:"Japan",wash:"Raw Overdye"},active:!0},{id:"denim-007",name:"Summer Light Wash",sku:"ORB-DN-007",price:125,category:"Seasonal",imageUrl:"https://images.unsplash.com/photo-1565084888279-aca607ecce0c?w=600&h=800&fit=crop",description:"Lightweight bleached denim perfect for warm weather. Breathable open weave construction.",specs:{weight:"8oz",fit:"Relaxed Straight",rise:"Mid Rise",inseam:'32"',material:"100% Cotton",origin:"Spain",wash:"Bleach Light"},active:!0},{id:"denim-008",name:"Grey Cast Slim",sku:"ORB-DN-008",price:145,category:"Modern Denim",imageUrl:"https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=600&h=800&fit=crop",description:"Sophisticated grey-cast indigo with modern slim profile. Clean minimal finish.",specs:{weight:"12oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"99% Cotton, 1% Elastane",origin:"Italy",wash:"Grey Cast"},active:!0},{id:"denim-009",name:"Wide Leg Vintage",sku:"ORB-DN-009",price:175,category:"Heritage Collection",imageUrl:"https://images.unsplash.com/photo-1551854838-212c50b4c184?w=600&h=800&fit=crop",description:"1970s inspired wide leg silhouette with authentic vintage wash. High waisted design.",specs:{weight:"12oz",fit:"Wide Leg",rise:"High Rise",inseam:'34"',material:"100% Cotton",origin:"USA",wash:"70s Vintage"},active:!0},{id:"denim-010",name:"Tech Stretch Pro",sku:"ORB-DN-010",price:165,category:"Performance",imageUrl:"https://images.unsplash.com/photo-1560243563-062bfc001d68?w=600&h=800&fit=crop",description:"Four-way stretch performance denim with moisture-wicking and quick-dry technology.",specs:{weight:"10oz",fit:"Athletic Slim",rise:"Mid Rise",inseam:'32"',material:"68% Cotton, 28% Poly, 4% Elastane",origin:"Vietnam",wash:"Tech Dark"},active:!0}],jf=[{id:"future-001",name:"Recycled Ocean Denim",sku:"ORB-FT-001",price:195,category:"Sustainability",imageUrl:"https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=600&h=800&fit=crop",description:"Revolutionary denim made from recycled ocean plastics. Launching Spring 2025.",specs:{weight:"11oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"60% Recycled Ocean Plastic, 40% Organic Cotton",origin:"Netherlands",wash:"Eco Process"},launchDate:"Spring 2025",isFuture:!0},{id:"future-002",name:"Hemp Blend Classic",sku:"ORB-FT-002",price:185,category:"Sustainability",imageUrl:"https://images.unsplash.com/photo-1588099768523-f4e6a5679d88?w=600&h=800&fit=crop",description:"Hemp-cotton blend for ultimate durability and eco-friendliness. Summer 2025.",specs:{weight:"13oz",fit:"Straight",rise:"Regular",inseam:'32"',material:"55% Hemp, 45% Organic Cotton",origin:"France",wash:"Natural"},launchDate:"Summer 2025",isFuture:!0},{id:"future-003",name:"Temperature Adaptive",sku:"ORB-FT-003",price:225,category:"Innovation",imageUrl:"https://images.unsplash.com/photo-1602293589930-45aad59ba3ab?w=600&h=800&fit=crop",description:"Smart fabric that adapts to body temperature. Patent pending technology. Fall 2025.",specs:{weight:"12oz",fit:"Slim Tapered",rise:"Mid Rise",inseam:'32"',material:"Proprietary Adaptive Blend",origin:"Japan",wash:"Climate Control"},launchDate:"Fall 2025",isFuture:!0}],L2=["submitted","confirmed","in_progress","delivered","closed","cancelled"],j2=["todo","doing","blocked","done"],d_={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600",todo:"bg-neutral-100 text-neutral-600",doing:"bg-blue-50 text-blue-700",blocked:"bg-red-50 text-red-600",done:"bg-emerald-50 text-emerald-700"};function V2(){var ht;const{orderId:t}=Vp(),e=Ai(),{user:n,profile:r}=Vn(),i=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff",[s,o]=D.useState(null),[l,u]=D.useState([]),[c,f]=D.useState([]),[p,g]=D.useState([]),[_,T]=D.useState([]),[C,P]=D.useState(!0),[S,w]=D.useState("products"),[A,O]=D.useState(""),[M,F]=D.useState(""),[y,v]=D.useState(!1),x=async()=>{const[q,B,re,se,Ie]=await Promise.all([c2(t),k2(t),b2(t),f2(t),i?O2():Promise.resolve([])]);o(q),u(B),f(re),g(se),T(Ie),P(!1),i&&q&&!q.viewed&&ux(t)};D.useEffect(()=>{x()},[t]);const I=D.useMemo(()=>s!=null&&s.products?s.products.map(q=>{const B=ri.find(re=>re.id===q.productId);return{...q,...B}}):[],[s==null?void 0:s.products]),b=async q=>{!i||q===s.status||(v(!0),await h2(t,{status:q}),await cx(t,{type:"status_change",message:`Status changed to ${q.replace(/_/g," ")}`,createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await x(),v(!1))},k=async()=>{A.trim()&&(v(!0),await P2(t,{title:A.trim(),createdByUid:n.uid}),O(""),await x(),v(!1))},R=async(q,B)=>{v(!0),await N2(t,q,{status:B}),await x(),v(!1)},oe=async()=>{M.trim()&&(v(!0),await D2(t,{message:M.trim(),createdByUid:n.uid,createdByName:r==null?void 0:r.name}),F(""),await x(),v(!1))};if(C)return h.jsx("div",{className:"py-16 text-center",children:h.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})});if(!s)return h.jsxs("div",{className:"py-16 text-center",children:[h.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Order not found"}),h.jsx("button",{onClick:()=>e("/orders"),className:"btn-secondary btn-sm",children:"Back to Orders"})]});const xe=I.reduce((q,B)=>q+(B.price||0)*(B.quantity||0),0);return h.jsxs("div",{className:"animate-in",children:[h.jsx("button",{onClick:()=>e("/orders"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to orders"}),h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4 mb-8 pb-8 border-b border-neutral-100",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:"Order"}),h.jsx("h1",{className:"text-2xl font-light mb-2",children:s.title}),s.summary&&h.jsx("p",{className:"text-sm text-neutral-500 max-w-lg",children:s.summary}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-4",children:[h.jsx("span",{className:`badge ${d_[s.status]}`,children:(ht=s.status)==null?void 0:ht.replace(/_/g," ")}),h.jsxs("span",{className:"text-xs text-neutral-400",children:["Customer: ",s.customerId]}),h.jsxs("span",{className:"text-xs text-neutral-400",children:["Total: $",xe.toFixed(2)]})]})]}),i&&h.jsx("select",{value:s.status,onChange:q=>b(q.target.value),disabled:y,className:"input-field w-auto",children:L2.map(q=>h.jsx("option",{value:q,children:q.replace(/_/g," ")},q))})]}),h.jsx("div",{className:"flex gap-6 mb-6 border-b border-neutral-100",children:["products","tasks","comments","activity"].map(q=>h.jsxs("button",{onClick:()=>w(q),className:`pb-3 text-xs tracking-widest uppercase ${S===q?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:[q," ",q==="products"&&`(${I.length})`,q==="tasks"&&`(${l.length})`,q==="comments"&&`(${c.length})`]},q))}),S==="products"&&h.jsx("div",{children:I.length===0?h.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No products in this order"})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map((q,B)=>h.jsxs("div",{className:"card p-4 flex gap-4",children:[h.jsx("div",{className:"w-20 h-24 bg-neutral-100 flex-shrink-0 overflow-hidden",children:q.imageUrl?h.jsx("img",{src:q.imageUrl,alt:q.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-300 text-xs",children:"No img"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium truncate",children:q.name||q.productId}),h.jsx("p",{className:"text-xs text-neutral-400",children:q.sku}),h.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:["Qty: ",q.quantity]}),h.jsxs("p",{className:"text-sm font-medium mt-1",children:["$",((q.price||0)*(q.quantity||0)).toFixed(2)]})]})]},B))})}),S==="tasks"&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"text",value:A,onChange:q=>O(q.target.value),onKeyDown:q=>q.key==="Enter"&&k(),placeholder:"Add task...",className:"input-field flex-1",disabled:y}),h.jsx("button",{onClick:k,disabled:y||!A.trim(),className:"btn-primary btn-sm",children:"Add"})]}),l.length===0?h.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No tasks"})}):h.jsx("div",{className:"space-y-2",children:l.map(q=>h.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[h.jsx("p",{className:"text-sm",children:q.title}),h.jsx("select",{value:q.status,onChange:B=>R(q.id,B.target.value),disabled:y,className:`badge cursor-pointer border-0 ${d_[q.status]}`,children:j2.map(B=>h.jsx("option",{value:B,children:B},B))})]},q.id))})]}),S==="comments"&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"text",value:M,onChange:q=>F(q.target.value),onKeyDown:q=>q.key==="Enter"&&oe(),placeholder:"Add comment...",className:"input-field flex-1",disabled:y}),h.jsx("button",{onClick:oe,disabled:y||!M.trim(),className:"btn-primary btn-sm",children:"Post"})]}),c.length===0?h.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No comments"})}):h.jsx("div",{className:"space-y-3",children:c.map(q=>h.jsxs("div",{className:`p-4 ${q.createdByUid===(n==null?void 0:n.uid)?"bg-neutral-900 text-white":"bg-neutral-50"}`,children:[h.jsx("p",{className:`text-xs mb-1 ${q.createdByUid===(n==null?void 0:n.uid)?"text-neutral-400":"text-neutral-500"}`,children:q.createdByName||"Unknown"}),h.jsx("p",{className:"text-sm",children:q.message})]},q.id))})]}),S==="activity"&&h.jsx("div",{children:p.length===0?h.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No activity"})}):h.jsx("div",{className:"space-y-3",children:p.map(q=>{var B,re;return h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300 mt-1.5 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm",children:q.message}),h.jsxs("p",{className:"text-xs text-neutral-400 mt-0.5",children:[q.createdByName||"System","  ",(re=(B=q.createdAt)==null?void 0:B.toDate)==null?void 0:re.call(B).toLocaleString()]})]})]},q.id)})})})]})}async function dx(){const t=jn(st(Ne,"customers"),er("name","asc"));return(await Ni(t)).docs.map(n=>({id:n.id,...n.data()}))}async function M2(t){return(await bi(st(Ne,"customers"),{...t,active:!0,createdAt:Zt(),updatedAt:Zt()})).id}async function U2(t,e){await ko(ir(Ne,"customers",t),{...e,updatedAt:Zt()})}async function F2(t){await CD(ir(Ne,"customers",t))}function B2(){const t=Ai(),{user:e,profile:n}=Vn(),r=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="staff",[i,s]=D.useState(""),[o,l]=D.useState(""),[u,c]=D.useState((n==null?void 0:n.customerId)||""),[f,p]=D.useState({}),[g,_]=D.useState(""),[T,C]=D.useState([]),[P,S]=D.useState(!1),[w,A]=D.useState(""),[O,M]=D.useState(1);D.useEffect(()=>{r&&dx().then(C)},[r]);const F=D.useMemo(()=>{if(!g.trim())return ri;const k=g.toLowerCase();return ri.filter(R=>R.name.toLowerCase().includes(k)||R.sku.toLowerCase().includes(k)||R.category.toLowerCase().includes(k))},[g]),y=(k,R)=>{const oe=parseInt(R)||0;p(xe=>{if(oe<=0){const{[k]:ht,...q}=xe;return q}return{...xe,[k]:oe}})},v=Object.keys(f).length,x=Object.values(f).reduce((k,R)=>k+R,0),I=Object.entries(f).reduce((k,[R,oe])=>{const xe=ri.find(ht=>ht.id===R);return k+((xe==null?void 0:xe.price)||0)*oe},0),b=async k=>{if(k.preventDefault(),A(""),v===0){A("Please select at least one product");return}if(!i.trim()){A("Please enter an order title");return}const R=r?u:(n==null?void 0:n.customerId)||(n==null?void 0:n.name)||(e==null?void 0:e.email);if(!R){A("Customer ID required");return}S(!0);try{const oe=Object.entries(f).map(([ht,q])=>({productId:ht,quantity:q})),xe=await d2({customerId:R,title:i.trim(),summary:o.trim(),products:oe,totalValue:I,createdByUid:e.uid,createdByName:n==null?void 0:n.name});t(`/orders/${xe}`)}catch(oe){A("Failed to create order"),console.error(oe)}finally{S(!1)}};return h.jsxs("div",{className:"animate-in pb-32",children:[h.jsx("button",{onClick:()=>t("/orders"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back"}),h.jsxs("div",{className:"mb-8",children:[h.jsx("p",{className:"section-label mb-2",children:"New Order"}),h.jsx("h1",{className:"page-title",children:"Create Order"})]}),h.jsxs("div",{className:"flex gap-4 mb-8",children:[h.jsxs("button",{onClick:()=>M(1),className:`flex items-center gap-2 text-xs tracking-widest uppercase ${O===1?"text-neutral-900":"text-neutral-400"}`,children:[h.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${O===1?"bg-neutral-900 text-white":"bg-neutral-200"}`,children:"1"}),"Select Products"]}),h.jsx("span",{className:"text-neutral-300",children:""}),h.jsxs("button",{onClick:()=>v>0&&M(2),className:`flex items-center gap-2 text-xs tracking-widest uppercase ${O===2?"text-neutral-900":"text-neutral-400"}`,children:[h.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${O===2?"bg-neutral-900 text-white":"bg-neutral-200"}`,children:"2"}),"Order Details"]})]}),O===1&&h.jsxs("div",{children:[h.jsx("div",{className:"mb-6",children:h.jsx("input",{type:"text",value:g,onChange:k=>_(k.target.value),placeholder:"Search products by name, SKU, or category...",className:"input-field max-w-md"})}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:F.map(k=>{const R=f[k.id]||0,oe=R>0;return h.jsxs("div",{className:`card p-4 ${oe?"ring-2 ring-neutral-900":""}`,children:[h.jsx("div",{className:"aspect-[3/4] bg-neutral-100 overflow-hidden mb-3",children:h.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-full object-cover"})}),h.jsx("p",{className:"text-2xs text-neutral-400 mb-1",children:k.sku}),h.jsx("p",{className:"text-sm font-medium mb-1",children:k.name}),h.jsxs("p",{className:"text-sm text-neutral-600 mb-2",children:["$",k.price.toFixed(2)]}),h.jsxs("div",{className:"text-xs text-neutral-500 space-y-0.5 mb-3",children:[h.jsxs("p",{children:["Weight: ",k.specs.weight]}),h.jsxs("p",{children:["Fit: ",k.specs.fit]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>y(k.id,R-1),disabled:R===0,className:"w-8 h-8 border border-neutral-200 flex items-center justify-center hover:bg-neutral-100 disabled:opacity-30",children:""}),h.jsx("input",{type:"number",min:"0",value:R,onChange:xe=>y(k.id,xe.target.value),className:"w-16 h-8 text-center border border-neutral-200 text-sm"}),h.jsx("button",{onClick:()=>y(k.id,R+1),className:"w-8 h-8 border border-neutral-200 flex items-center justify-center hover:bg-neutral-100",children:"+"})]}),oe&&h.jsxs("p",{className:"text-xs text-emerald-600 mt-2",children:["Subtotal: $",(k.price*R).toFixed(2)]})]},k.id)})})]}),O===2&&h.jsx("form",{onSubmit:b,children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-2 block",children:"Order Title *"}),h.jsx("input",{type:"text",value:i,onChange:k=>s(k.target.value),placeholder:"e.g., Spring 2025 Restock",className:"input-field",disabled:P})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-2 block",children:"Notes"}),h.jsx("textarea",{value:o,onChange:k=>l(k.target.value),placeholder:"Special instructions...",rows:3,className:"input-field resize-none",disabled:P})]}),r&&h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-2 block",children:"Customer *"}),h.jsxs("select",{value:u,onChange:k=>c(k.target.value),className:"input-field",disabled:P,children:[h.jsx("option",{value:"",children:"Select customer..."}),T.map(k=>h.jsx("option",{value:k.id,children:k.name},k.id))]})]}),w&&h.jsx("p",{className:"text-sm text-red-600",children:w}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>M(1),className:"btn-secondary btn-sm",children:" Back"}),h.jsx("button",{type:"submit",disabled:P,className:"btn-primary",children:P?"Submitting...":"Submit Order"})]})]}),h.jsxs("div",{className:"p-6 bg-neutral-50 border border-neutral-100",children:[h.jsx("p",{className:"section-label mb-4",children:"Order Summary"}),h.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:Object.entries(f).map(([k,R])=>{const oe=ri.find(xe=>xe.id===k);return oe?h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"w-12 h-14 bg-neutral-200 overflow-hidden flex-shrink-0",children:h.jsx("img",{src:oe.imageUrl,alt:"",className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm truncate",children:oe.name}),h.jsxs("p",{className:"text-xs text-neutral-500",children:["Qty: ",R,"  $",oe.price.toFixed(2)]})]}),h.jsxs("p",{className:"text-sm font-medium",children:["$",(oe.price*R).toFixed(2)]})]},k):null})}),h.jsx("div",{className:"pt-4 border-t border-neutral-200",children:h.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[h.jsx("span",{children:"Total"}),h.jsxs("span",{children:["$",I.toFixed(2)]})]})})]})]})}),O===1&&h.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 shadow-lg z-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[h.jsx("div",{children:v>0?h.jsxs(h.Fragment,{children:[h.jsxs("p",{className:"text-sm font-medium",children:[v," product",v>1?"s":""," selected"]}),h.jsxs("p",{className:"text-xs text-neutral-500",children:[x," units  $",I.toFixed(2)]})]}):h.jsx("p",{className:"text-sm text-neutral-400",children:"Select products to continue"})}),h.jsx("button",{onClick:()=>M(2),disabled:v===0,className:"btn-primary",children:"Continue "})]})})]})}function z2(){const{profile:t}=Vn(),e=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",[n,r]=D.useState(""),[i,s]=D.useState("current"),[o,l]=D.useState("all"),u=i==="future"?jf:ri,c=D.useMemo(()=>["all",...[...new Set(u.map(g=>g.category))].sort()],[u]),f=D.useMemo(()=>{let p=u;if(o!=="all"&&(p=p.filter(g=>g.category===o)),n.trim()){const g=n.toLowerCase();p=p.filter(_=>_.name.toLowerCase().includes(g)||_.sku.toLowerCase().includes(g)||_.category.toLowerCase().includes(g))}return p},[u,n,o]);return h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:e?"Product Management":"Catalogue"}),h.jsx("h1",{className:"page-title",children:"Products"})]}),!e&&h.jsx(Ot,{to:"/orders/new",className:"btn-primary",children:"Start Order"})]}),h.jsxs("div",{className:"flex gap-6 mb-6 border-b border-neutral-100",children:[h.jsxs("button",{onClick:()=>{s("current"),l("all")},className:`pb-3 text-xs tracking-widest uppercase ${i==="current"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:["Current Collection (",ri.length,")"]}),h.jsxs("button",{onClick:()=>{s("future"),l("all")},className:`pb-3 text-xs tracking-widest uppercase ${i==="future"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:["Coming Soon (",jf.length,")"]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[h.jsx("input",{type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Search products...",className:"input-field flex-1 max-w-md"}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:c.map(p=>h.jsx("button",{onClick:()=>l(p),className:`px-3 py-2 text-2xs tracking-widest uppercase ${o===p?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:p==="all"?"All":p},p))})]}),f.length===0?h.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No products found"})}):h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:f.map(p=>h.jsxs(Ot,{to:`/products/${p.id}`,className:"group",children:[h.jsxs("div",{className:"aspect-[3/4] bg-neutral-100 overflow-hidden mb-3 relative",children:[h.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),p.isFuture&&h.jsx("div",{className:"absolute top-2 left-2",children:h.jsx("span",{className:"badge bg-neutral-900 text-white text-2xs",children:p.launchDate})})]}),h.jsx("p",{className:"text-2xs text-neutral-400 mb-1",children:p.sku}),h.jsx("p",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:p.name}),h.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:["$",p.price.toFixed(2)]}),h.jsx("div",{className:"mt-2 text-xs text-neutral-400",children:h.jsxs("p",{children:[p.specs.weight,"  ",p.specs.fit]})})]},p.id))})]})}function $2(){const{productId:t}=Vp(),e=Ai(),n=[...ri,...jf].find(r=>r.id===t);return n?h.jsxs("div",{className:"animate-in",children:[h.jsx("button",{onClick:()=>e("/products"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to products"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[h.jsx("div",{children:h.jsx("div",{className:"aspect-[3/4] bg-neutral-100 overflow-hidden",children:h.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})})}),h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:n.category}),h.jsx("h1",{className:"text-3xl font-light mb-1",children:n.name}),h.jsx("p",{className:"text-xs text-neutral-400 mb-6",children:n.sku}),h.jsxs("p",{className:"text-2xl font-light mb-6",children:["$",n.price.toFixed(2)]}),n.isFuture&&h.jsxs("div",{className:"mb-6 p-4 bg-neutral-900 text-white",children:[h.jsx("p",{className:"text-xs tracking-widest uppercase mb-1",children:"Coming Soon"}),h.jsx("p",{className:"text-sm",children:n.launchDate})]}),h.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed mb-8",children:n.description}),h.jsxs("div",{className:"mb-8",children:[h.jsx("p",{className:"section-label mb-3",children:"Specifications"}),h.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:Object.entries(n.specs).map(([r,i])=>h.jsxs("div",{className:"flex justify-between py-3 px-4",children:[h.jsx("span",{className:"text-xs text-neutral-500 capitalize",children:r}),h.jsx("span",{className:"text-xs text-neutral-900",children:i})]},r))})]}),!n.isFuture&&h.jsx(Ot,{to:"/orders/new",className:"btn-primary",children:"Add to Order"})]})]})]}):h.jsxs("div",{className:"py-16 text-center animate-in",children:[h.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Product not found"}),h.jsx("button",{onClick:()=>e("/products"),className:"btn-secondary btn-sm",children:"Back to Products"})]})}function W2(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState(!1),[o,l]=D.useState(null),[u,c]=D.useState(!1),[f,p]=D.useState(""),[g,_]=D.useState(""),[T,C]=D.useState(""),[P,S]=D.useState("");D.useEffect(()=>{w()},[]);const w=async()=>{r(!0);const v=await dx();e(v),r(!1)},A=()=>{_(""),C(""),S(""),l(null),s(!1)},O=v=>{_(v.name||""),C(v.contactEmail||""),S(v.contactPhone||""),l(v),s(!0)},M=async v=>{v.preventDefault(),g.trim()&&(c(!0),o?await U2(o.id,{name:g.trim(),contactEmail:T,contactPhone:P}):await M2({name:g.trim(),contactEmail:T,contactPhone:P}),A(),await w(),c(!1))},F=async v=>{confirm("Delete this customer?")&&(c(!0),await F2(v),await w(),c(!1))},y=t.filter(v=>{var x,I;return((x=v.name)==null?void 0:x.toLowerCase().includes(f.toLowerCase()))||((I=v.contactEmail)==null?void 0:I.toLowerCase().includes(f.toLowerCase()))});return h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:"Management"}),h.jsx("h1",{className:"page-title",children:"Customers"})]}),h.jsx("button",{onClick:()=>{A(),s(!0)},className:"btn-primary",children:"Add Customer"})]}),i&&h.jsxs("div",{className:"mb-8 p-6 bg-neutral-50 border border-neutral-200",children:[h.jsx("p",{className:"section-label mb-4",children:o?"Edit Customer":"New Customer"}),h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Name *"}),h.jsx("input",{type:"text",value:g,onChange:v=>_(v.target.value),className:"input-field"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Email"}),h.jsx("input",{type:"email",value:T,onChange:v=>C(v.target.value),className:"input-field"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Phone"}),h.jsx("input",{type:"text",value:P,onChange:v=>S(v.target.value),className:"input-field"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{type:"submit",disabled:u,className:"btn-primary btn-sm",children:o?"Save":"Add"}),h.jsx("button",{type:"button",onClick:A,className:"btn-ghost",children:"Cancel"})]})]})]}),h.jsx("div",{className:"mb-6",children:h.jsx("input",{type:"text",value:f,onChange:v=>p(v.target.value),placeholder:"Search customers...",className:"input-field max-w-md"})}),n?h.jsx("div",{className:"py-16 text-center",children:h.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):y.length===0?h.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No customers found"})}):h.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:y.map(v=>h.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-neutral-50",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium",children:v.name}),h.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:v.contactEmail||""})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>O(v),className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Edit"}),h.jsx("button",{onClick:()=>F(v.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},v.id))})]})}const H2={submitted:"bg-orbit-200",confirmed:"bg-blue-200",in_progress:"bg-amber-200",delivered:"bg-emerald-200",closed:"bg-orbit-100"};function q2(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState({daily:500,utilized:0}),[o,l]=D.useState("pipeline");D.useEffect(()=>{ax().then(g=>{e(g),s(_=>({..._,utilized:Math.min(g.filter(T=>["confirmed","in_progress"].includes(T.status)).length*50,500)})),r(!1)})},[]);const u=D.useMemo(()=>({submitted:t.filter(g=>g.status==="submitted"),confirmed:t.filter(g=>g.status==="confirmed"),in_progress:t.filter(g=>g.status==="in_progress"),delivered:t.filter(g=>g.status==="delivered")}),[t]),c=new Date,f=D.useMemo(()=>{const g=[],_=new Date(c);_.setDate(_.getDate()-_.getDay());for(let T=0;T<4;T++){const C=[];for(let P=0;P<7;P++){const S=new Date(_);S.setDate(_.getDate()+T*7+P);const w=t.filter(A=>{var M;return A.deliveryDate?((M=A.deliveryDate)!=null&&M.toDate?A.deliveryDate.toDate():new Date(A.deliveryDate)).toDateString()===S.toDateString():!1});C.push({date:S,orders:w})}g.push(C)}return g},[t]),p=Math.min(i.utilized/i.daily*100,100);return h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-4",children:"Planning"}),h.jsx("h1",{className:"page-title",children:"Production"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>l("pipeline"),className:`px-4 py-2.5 text-2xs tracking-widest uppercase ${o==="pipeline"?"bg-orbit-900 text-white":"bg-orbit-100 text-orbit-500"}`,children:"Pipeline"}),h.jsx("button",{onClick:()=>l("calendar"),className:`px-4 py-2.5 text-2xs tracking-widest uppercase ${o==="calendar"?"bg-orbit-900 text-white":"bg-orbit-100 text-orbit-500"}`,children:"Calendar"})]})]}),h.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 mb-12 pb-12 border-b border-orbit-100",children:[{label:"Pending Review",value:u.submitted.length,color:"text-orbit-900"},{label:"Confirmed",value:u.confirmed.length,color:"text-blue-600"},{label:"In Production",value:u.in_progress.length,color:"text-amber-600"},{label:"Delivered",value:u.delivered.length,color:"text-emerald-600"}].map((g,_)=>h.jsxs("div",{children:[h.jsx("p",{className:`text-4xl font-extralight ${g.color}`,children:g.value}),h.jsx("p",{className:"section-label mt-3",children:g.label})]},_))}),h.jsxs("div",{className:"mb-12",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("p",{className:"section-label",children:"Capacity Utilization"}),h.jsxs("p",{className:"text-sm text-orbit-900 font-medium",children:[Math.round(p),"%"]})]}),h.jsx("div",{className:"h-2 bg-orbit-100 overflow-hidden",children:h.jsx("div",{className:`h-full transition-all duration-700 ${p>80?"bg-red-400":p>50?"bg-amber-400":"bg-emerald-400"}`,style:{width:`${p}%`}})}),h.jsxs("div",{className:"flex justify-between mt-2 text-xs text-orbit-400",children:[h.jsx("span",{children:"0 units"}),h.jsxs("span",{children:["Daily capacity: ",i.daily," units"]})]})]}),n?h.jsx("div",{className:"py-24 text-center",children:h.jsx("div",{className:"w-6 h-6 border border-orbit-900 border-t-transparent rounded-full animate-spin mx-auto"})}):o==="pipeline"?h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:["submitted","confirmed","in_progress","delivered"].map(g=>h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-orbit-100",children:[h.jsx("p",{className:"section-label",children:g.replace(/_/g," ")}),h.jsx("span",{className:"text-xs text-orbit-400",children:u[g].length})]}),h.jsxs("div",{className:"space-y-3",children:[u[g].map(_=>h.jsxs(Ot,{to:`/orders/${_.id}`,className:"block card-elite p-4",children:[h.jsx("p",{className:"text-sm font-medium text-orbit-900 truncate",children:_.title}),h.jsx("p",{className:"text-xs text-orbit-400 mt-1",children:_.customerId})]},_.id)),u[g].length===0&&h.jsx("div",{className:"border border-dashed border-orbit-200 p-4 text-center",children:h.jsx("p",{className:"text-xs text-orbit-400",children:"No orders"})})]})]},g))}):h.jsxs("div",{className:"grid grid-cols-7 gap-px bg-orbit-200 border border-orbit-200",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>h.jsx("div",{className:"bg-orbit-50 p-3 text-center",children:h.jsx("p",{className:"section-label",children:g})},g)),f.map((g,_)=>g.map((T,C)=>{const P=T.date.toDateString()===c.toDateString(),S=T.date<c&&!P;return h.jsxs("div",{className:`bg-white p-3 min-h-[100px] ${S?"opacity-50":""}`,children:[h.jsx("p",{className:`text-xs mb-2 ${P?"text-orbit-900 font-medium":"text-orbit-400"}`,children:T.date.getDate()}),h.jsxs("div",{className:"space-y-1",children:[T.orders.slice(0,3).map(w=>h.jsx(Ot,{to:`/orders/${w.id}`,className:`block p-1.5 text-2xs truncate ${H2[w.status]}`,children:w.title},w.id)),T.orders.length>3&&h.jsxs("p",{className:"text-2xs text-orbit-400",children:["+",T.orders.length-3," more"]})]})]},`${_}-${C}`)}))]})]})}const hh={campaign:"Campaign",news:"News",photoshoot:"Behind the Scenes",update:"Update",catalogue:"Catalogue"};function K2(){const{profile:t}=Vn(),e=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",[n,r]=D.useState("all"),[i,s]=D.useState(!1),[o,l]=D.useState(jm),[u,c]=D.useState(""),[f,p]=D.useState(""),[g,_]=D.useState("news"),[T,C]=D.useState(""),[P,S]=D.useState(""),[w,A]=D.useState(!1),O=D.useMemo(()=>n==="all"?o:o.filter(y=>y.type===n),[o,n]),M=o.filter(y=>y.featured).slice(0,2),F=async y=>{if(y.preventDefault(),!(!u.trim()||!T.trim())){A(!0);try{const v={id:`new-${Date.now()}`,type:g,title:u.trim(),subtitle:f.trim(),content:T.trim(),imageUrl:P.trim()||"https://images.unsplash.com/photo-1445205170230-053b83016050?w=1200&h=800&fit=crop",gallery:[],date:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),featured:!1};l([v,...o]);try{await x2(v)}catch{}c(""),p(""),C(""),S(""),s(!1)}finally{A(!1)}}};return h.jsxs("div",{className:"animate-in",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"section-label mb-2",children:"Updates & News"}),h.jsx("h1",{className:"page-title",children:"Lookbook"})]}),e&&h.jsx("button",{onClick:()=>s(!i),className:"btn-primary",children:i?"Cancel":"New Post"})]}),i&&e&&h.jsxs("div",{className:"mb-8 p-6 bg-neutral-50 border border-neutral-200",children:[h.jsx("p",{className:"section-label mb-4",children:"Create New Post"}),h.jsxs("form",{onSubmit:F,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Title *"}),h.jsx("input",{type:"text",value:u,onChange:y=>c(y.target.value),className:"input-field",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Subtitle"}),h.jsx("input",{type:"text",value:f,onChange:y=>p(y.target.value),className:"input-field"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Type"}),h.jsxs("select",{value:g,onChange:y=>_(y.target.value),className:"input-field",children:[h.jsx("option",{value:"news",children:"News"}),h.jsx("option",{value:"update",children:"Update"}),h.jsx("option",{value:"campaign",children:"Campaign"}),h.jsx("option",{value:"photoshoot",children:"Behind the Scenes"}),h.jsx("option",{value:"catalogue",children:"Catalogue"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Image URL"}),h.jsx("input",{type:"url",value:P,onChange:y=>S(y.target.value),className:"input-field",placeholder:"https://..."})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"section-label mb-1 block",children:"Content *"}),h.jsx("textarea",{value:T,onChange:y=>C(y.target.value),rows:4,className:"input-field resize-none",required:!0})]}),h.jsx("button",{type:"submit",disabled:w,className:"btn-primary btn-sm",children:w?"Publishing...":"Publish Post"})]})]}),M.length>0&&n==="all"&&h.jsxs("div",{className:"mb-10",children:[h.jsx("p",{className:"section-label mb-4",children:"Featured"}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:M.map(y=>h.jsx(Ot,{to:`/lookbook/${y.id}`,className:"group relative overflow-hidden",children:h.jsxs("div",{className:"aspect-video bg-neutral-100 overflow-hidden",children:[h.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[h.jsx("p",{className:"text-2xs tracking-widest uppercase opacity-70 mb-1",children:hh[y.type]}),h.jsx("h3",{className:"text-xl font-light",children:y.title}),y.subtitle&&h.jsx("p",{className:"text-sm opacity-70 mt-1",children:y.subtitle})]})]})},y.id))})]}),h.jsx("div",{className:"flex gap-4 mb-6 border-b border-neutral-100 overflow-x-auto",children:["all","news","update","campaign","photoshoot","catalogue"].map(y=>h.jsx("button",{onClick:()=>r(y),className:`pb-3 text-xs tracking-widest uppercase whitespace-nowrap ${n===y?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:y==="all"?"All":hh[y]},y))}),O.length===0?h.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"No posts found"})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(y=>h.jsxs(Ot,{to:`/lookbook/${y.id}`,className:"group",children:[h.jsx("div",{className:"aspect-video bg-neutral-100 overflow-hidden mb-3",children:h.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),h.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider mb-1",children:hh[y.type]}),h.jsx("h3",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:y.title}),h.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:y.date})]},y.id))})]})}const G2={campaign:"Campaign",news:"News",photoshoot:"Behind the Scenes",update:"Update",catalogue:"Catalogue"};function Q2(){const{postId:t}=Vp(),e=Ai(),{user:n,profile:r}=Vn(),[i,s]=D.useState(""),[o,l]=D.useState([]),[u,c]=D.useState(!1),f=jm.find(g=>g.id===t);D.useEffect(()=>{t&&u_(t).then(l).catch(()=>l([]))},[t]);const p=async g=>{if(g.preventDefault(),!!i.trim()){c(!0);try{await I2(t,{message:i.trim(),createdByUid:n==null?void 0:n.uid,createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous"});const _=await u_(t);l(_.length>0?_:[...o,{id:Date.now(),message:i.trim(),createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous",createdAt:{toDate:()=>new Date}}]),s("")}catch{l([...o,{id:Date.now(),message:i.trim(),createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous",createdAt:{toDate:()=>new Date}}]),s("")}finally{c(!1)}}};return f?h.jsxs("div",{className:"animate-in",children:[h.jsx("button",{onClick:()=>e("/lookbook"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to lookbook"}),h.jsx("div",{className:"aspect-video lg:aspect-[21/9] bg-neutral-100 overflow-hidden mb-8",children:h.jsx("img",{src:f.imageUrl,alt:f.title,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"max-w-3xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs("p",{className:"section-label mb-2",children:[G2[f.type],"  ",f.date]}),h.jsx("h1",{className:"text-3xl font-light mb-2",children:f.title}),f.subtitle&&h.jsx("p",{className:"text-lg text-neutral-500 font-light",children:f.subtitle})]}),h.jsx("div",{className:"mb-10",children:h.jsx("p",{className:"text-sm text-neutral-700 leading-relaxed whitespace-pre-line",children:f.content})}),f.gallery&&f.gallery.length>0&&h.jsxs("div",{className:"mb-10",children:[h.jsx("p",{className:"section-label mb-4",children:"Gallery"}),h.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:f.gallery.map((g,_)=>h.jsx("div",{className:"aspect-square bg-neutral-100 overflow-hidden",children:h.jsx("img",{src:g,alt:`${f.title} ${_+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})},_))})]}),h.jsxs("div",{className:"border-t border-neutral-100 pt-8",children:[h.jsxs("p",{className:"section-label mb-4",children:["Comments (",o.length,")"]}),h.jsx("form",{onSubmit:p,className:"mb-6",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Share your thoughts...",className:"input-field flex-1",disabled:u}),h.jsx("button",{type:"submit",disabled:u||!i.trim(),className:"btn-primary btn-sm",children:u?"...":"Post"})]})}),o.length===0?h.jsx("div",{className:"py-8 text-center border border-dashed border-neutral-200",children:h.jsx("p",{className:"text-sm text-neutral-400",children:"Be the first to comment"})}):h.jsx("div",{className:"space-y-4",children:o.map(g=>{var T;const _=(T=g.createdAt)!=null&&T.toDate?g.createdAt.toDate():new Date;return h.jsxs("div",{className:"pb-4 border-b border-neutral-100 last:border-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("p",{className:"text-sm font-medium",children:g.createdByName||"Anonymous"}),h.jsx("p",{className:"text-xs text-neutral-400",children:_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),h.jsx("p",{className:"text-sm text-neutral-600",children:g.message})]},g.id)})})]})]})]}):h.jsxs("div",{className:"py-16 text-center animate-in",children:[h.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Post not found"}),h.jsx("button",{onClick:()=>e("/lookbook"),className:"btn-secondary btn-sm",children:"Back to Lookbook"})]})}function fh({children:t,allowRoles:e}){const{user:n,profile:r,loading:i}=Vn(),s=Ri();if(i)return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"}),h.jsx("p",{className:"mt-4 text-xs tracking-widest text-neutral-400 uppercase",children:"Loading"})]})});if(!n)return h.jsx(lo,{to:"/login",state:{from:s.pathname},replace:!0});if(e&&e.length>0){const o=(r==null?void 0:r.role)||"customer";if(!e.includes(o))return h.jsx(lo,{to:"/",replace:!0})}return t}function Y2(){const{profile:t,loading:e}=Vn();if(e)return null;const n=(t==null?void 0:t.role)||"customer";return n==="admin"||n==="staff"?h.jsx(lo,{to:"/orders",replace:!0}):h.jsx(lo,{to:"/dashboard",replace:!0})}const X2=SA([{path:"/login",element:h.jsx(T2,{})},{path:"/",element:h.jsx(fh,{children:h.jsx(E2,{})}),children:[{index:!0,element:h.jsx(Y2,{})},{path:"dashboard",element:h.jsx(S2,{})},{path:"orders",element:h.jsx(C2,{})},{path:"orders/new",element:h.jsx(B2,{})},{path:"orders/:orderId",element:h.jsx(V2,{})},{path:"products",element:h.jsx(z2,{})},{path:"products/:productId",element:h.jsx($2,{})},{path:"lookbook",element:h.jsx(K2,{})},{path:"lookbook/:postId",element:h.jsx(Q2,{})},{path:"customers",element:h.jsx(fh,{allowRoles:["admin","staff"],children:h.jsx(W2,{})})},{path:"production",element:h.jsx(fh,{allowRoles:["admin","staff"],children:h.jsx(q2,{})})}]},{path:"*",element:h.jsx(lo,{to:"/",replace:!0})}]);ph.createRoot(document.getElementById("root")).render(h.jsx(I_.StrictMode,{children:h.jsx(DA,{router:X2})}));
