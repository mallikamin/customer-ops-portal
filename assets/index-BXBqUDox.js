function m_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function g_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y_={exports:{}},Cc={},v_={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),PT=Symbol.for("react.portal"),DT=Symbol.for("react.fragment"),OT=Symbol.for("react.strict_mode"),jT=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),MT=Symbol.for("react.forward_ref"),UT=Symbol.for("react.suspense"),FT=Symbol.for("react.memo"),BT=Symbol.for("react.lazy"),pg=Symbol.iterator;function zT(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var __={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,E_={};function No(t,e,n){this.props=t,this.context=e,this.refs=E_,this.updater=n||__}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x_(){}x_.prototype=No.prototype;function Uf(t,e,n){this.props=t,this.context=e,this.refs=E_,this.updater=n||__}var Ff=Uf.prototype=new x_;Ff.constructor=Uf;w_(Ff,No.prototype);Ff.isPureReactComponent=!0;var mg=Array.isArray,T_=Object.prototype.hasOwnProperty,Bf={current:null},I_={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)T_.call(e,r)&&!I_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:cl,type:t,key:s,ref:o,props:i,_owner:Bf.current}}function $T(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function WT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gg=/\/+/g;function Sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WT(""+t.key):e.toString(36)}function fu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case PT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Sd(o,0):r,mg(i)?(n="",t!=null&&(n=t.replace(gg,"$&/")+"/"),fu(i,e,n,"",function(c){return c})):i!=null&&(zf(i)&&(i=$T(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Sd(s,l);o+=fu(s,e,n,u,i)}else if(u=zT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Sd(s,l++),o+=fu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $l(t,e,n){if(t==null)return t;var r=[],i=0;return fu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},pu={transition:null},qT={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:pu,ReactCurrentOwner:Bf};function R_(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:$l,forEach:function(t,e,n){$l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $l(t,function(){e++}),e},toArray:function(t){return $l(t,function(e){return e})||[]},only:function(t){if(!zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=No;we.Fragment=DT;we.Profiler=jT;we.PureComponent=Uf;we.StrictMode=OT;we.Suspense=UT;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;we.act=R_;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=w_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Bf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)T_.call(e,u)&&!I_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:cl,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:VT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LT,_context:t},t.Consumer=t};we.createElement=S_;we.createFactory=function(t){var e=S_.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:MT,render:t}};we.isValidElement=zf;we.lazy=function(t){return{$$typeof:BT,_payload:{_status:-1,_result:t},_init:HT}};we.memo=function(t,e){return{$$typeof:FT,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=pu.transition;pu.transition={};try{t()}finally{pu.transition=e}};we.unstable_act=R_;we.useCallback=function(t,e){return Qt.current.useCallback(t,e)};we.useContext=function(t){return Qt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Qt.current.useEffect(t,e)};we.useId=function(){return Qt.current.useId()};we.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Qt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};we.useRef=function(t){return Qt.current.useRef(t)};we.useState=function(t){return Qt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Qt.current.useTransition()};we.version="18.3.1";v_.exports=we;var D=v_.exports;const A_=g_(D),KT=m_({__proto__:null,default:A_},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=D,QT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),XT=Object.prototype.hasOwnProperty,JT=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function C_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XT.call(e,r)&&!ZT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QT,type:t,key:s,ref:o,props:i,_owner:JT.current}}Cc.Fragment=YT;Cc.jsx=C_;Cc.jsxs=C_;y_.exports=Cc;var d=y_.exports,gh={},N_={exports:{}},_n={},k_={exports:{}},b_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ie){var ae=H.length;H.push(ie);e:for(;0<ae;){var ve=ae-1>>>1,he=H[ve];if(0<i(he,ie))H[ve]=ie,H[ae]=he,ae=ve;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ie=H[0],ae=H.pop();if(ae!==ie){H[0]=ae;e:for(var ve=0,he=H.length,_e=he>>>1;ve<_e;){var be=2*(ve+1)-1,ke=H[be],Ue=be+1,q=H[Ue];if(0>i(ke,ae))Ue<he&&0>i(q,ke)?(H[ve]=q,H[Ue]=ae,ve=Ue):(H[ve]=ke,H[be]=ae,ve=be);else if(Ue<he&&0>i(q,ae))H[ve]=q,H[Ue]=ae,ve=Ue;else break e}}return ie}function i(H,ie){var ae=H.sortIndex-ie.sortIndex;return ae!==0?ae:H.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,g=3,_=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=H)r(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function O(H){if(C=!1,A(H),!x)if(n(u)!==null)x=!0,st(V);else{var ie=n(c);ie!==null&&Me(O,ie.startTime-H)}}function V(H,ie){x=!1,C&&(C=!1,I(v),v=-1),_=!0;var ae=g;try{for(A(ie),m=n(u);m!==null&&(!(m.expirationTime>ie)||H&&!b());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,g=m.priorityLevel;var he=ve(m.expirationTime<=ie);ie=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(u)&&r(u),A(ie)}else r(u);m=n(u)}if(m!==null)var _e=!0;else{var be=n(c);be!==null&&Me(O,be.startTime-ie),_e=!1}return _e}finally{m=null,g=ae,_=!1}}var B=!1,y=null,v=-1,T=5,S=-1;function b(){return!(t.unstable_now()-S<T)}function N(){if(y!==null){var H=t.unstable_now();S=H;var ie=!0;try{ie=y(!0,H)}finally{ie?R():(B=!1,y=null)}}else B=!1}var R;if(typeof w=="function")R=function(){w(N)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ge=oe.port2;oe.port1.onmessage=N,R=function(){ge.postMessage(null)}}else R=function(){k(N,0)};function st(H){y=H,B||(B=!0,R())}function Me(H,ie){v=k(function(){H(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){x||_||(x=!0,st(V))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var ae=g;g=ie;try{return H()}finally{g=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=g;g=H;try{return ie()}finally{g=ae}},t.unstable_scheduleCallback=function(H,ie,ae){var ve=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ve+ae:ve):ae=ve,H){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ae+he,H={id:f++,callback:ie,priorityLevel:H,startTime:ae,expirationTime:he,sortIndex:-1},ae>ve?(H.sortIndex=ae,e(c,H),n(u)===null&&H===n(c)&&(C?(I(v),v=-1):C=!0,Me(O,ae-ve))):(H.sortIndex=he,e(u,H),x||_||(x=!0,st(V))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var ie=g;return function(){var ae=g;g=ie;try{return H.apply(this,arguments)}finally{g=ae}}}})(b_);k_.exports=b_;var eI=k_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI=D,vn=eI;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P_=new Set,Oa={};function Ts(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(Oa[t]=e,t=0;t<e.length;t++)P_.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yh=Object.prototype.hasOwnProperty,nI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},vg={};function rI(t){return yh.call(vg,t)?!0:yh.call(yg,t)?!1:nI.test(t)?vg[t]=!0:(yg[t]=!0,!1)}function iI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sI(t,e,n,r){if(e===null||typeof e>"u"||iI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $f=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($f,Wf);bt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($f,Wf);bt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($f,Wf);bt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hf(t,e,n,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sI(e,n,i,r)&&(n=null),r||i===null?rI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=tI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),Kf=Symbol.for("react.forward_ref"),_h=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),_g=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Rd;function ua(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Ad=!1;function Cd(t,e){if(!t||Ad)return"";Ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ua(t):""}function oI(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function Eh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case vh:return"Profiler";case qf:return"StrictMode";case _h:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O_:return(t.displayName||"Context")+".Consumer";case D_:return(t._context.displayName||"Context")+".Provider";case Kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:Eh(t.type)||"Memo";case oi:e=t._payload,t=t._init;try{return Eh(t(e))}catch{}}return null}function aI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eh(e);case 8:return e===qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lI(t){var e=L_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hl(t){t._valueTracker||(t._valueTracker=lI(t))}function V_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xh(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M_(t,e){e=e.checked,e!=null&&Hf(t,"checked",e,!1)}function Th(t,e){M_(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ih(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ih(t,e,n){(e!=="number"||ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ca=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(ca(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function U_(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function F_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?F_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ql,B_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uI=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){uI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function z_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function $_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cI=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(cI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nh=null;function Qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kh=null,no=null,ro=null;function Ig(t){if(t=fl(t)){if(typeof kh!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Dc(e),kh(t.stateNode,t.type,e))}}function W_(t){no?ro?ro.push(t):ro=[t]:no=t}function H_(){if(no){var t=no,e=ro;if(ro=no=null,Ig(t),e)for(t=0;t<e.length;t++)Ig(e[t])}}function q_(t,e){return t(e)}function K_(){}var Nd=!1;function G_(t,e,n){if(Nd)return t(e,n);Nd=!0;try{return q_(t,e,n)}finally{Nd=!1,(no!==null||ro!==null)&&(K_(),H_())}}function La(t,e){var n=t.stateNode;if(n===null)return null;var r=Dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var bh=!1;if(jr)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){bh=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{bh=!1}function dI(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Ea=!1,Lu=null,Vu=!1,Ph=null,hI={onError:function(t){Ea=!0,Lu=t}};function fI(t,e,n,r,i,s,o,l,u){Ea=!1,Lu=null,dI.apply(hI,arguments)}function pI(t,e,n,r,i,s,o,l,u){if(fI.apply(this,arguments),Ea){if(Ea){var c=Lu;Ea=!1,Lu=null}else throw Error(K(198));Vu||(Vu=!0,Ph=c)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sg(t){if(Is(t)!==t)throw Error(K(188))}function mI(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sg(i),t;if(s===r)return Sg(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Y_(t){return t=mI(t),t!==null?X_(t):null}function X_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=X_(t);if(e!==null)return e;t=t.sibling}return null}var J_=vn.unstable_scheduleCallback,Rg=vn.unstable_cancelCallback,gI=vn.unstable_shouldYield,yI=vn.unstable_requestPaint,lt=vn.unstable_now,vI=vn.unstable_getCurrentPriorityLevel,Yf=vn.unstable_ImmediatePriority,Z_=vn.unstable_UserBlockingPriority,Mu=vn.unstable_NormalPriority,_I=vn.unstable_LowPriority,e0=vn.unstable_IdlePriority,Nc=null,sr=null;function wI(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:TI,EI=Math.log,xI=Math.LN2;function TI(t){return t>>>=0,t===0?32:31-(EI(t)/xI|0)|0}var Kl=64,Gl=4194304;function da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=da(l):(s&=o,s!==0&&(r=da(s)))}else o=n&~i,o!==0?r=da(o):s!==0&&(r=da(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),i=1<<n,r|=t[n],e&=~i;return r}function II(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=II(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t0(){var t=Kl;return Kl<<=1,!(Kl&4194240)&&(Kl=64),t}function kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function RI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function n0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r0,Jf,i0,s0,o0,Oh=!1,Ql=[],vi=null,_i=null,wi=null,Va=new Map,Ma=new Map,li=[],AI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ag(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Zo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fl(e),e!==null&&Jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function CI(t,e,n,r,i){switch(e){case"focusin":return vi=Zo(vi,t,e,n,r,i),!0;case"dragenter":return _i=Zo(_i,t,e,n,r,i),!0;case"mouseover":return wi=Zo(wi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Va.set(s,Zo(Va.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ma.set(s,Zo(Ma.get(s)||null,t,e,n,r,i)),!0}return!1}function a0(t){var e=is(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=Q_(n),e!==null){t.blockedOn=e,o0(t.priority,function(){i0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nh=r,n.target.dispatchEvent(r),Nh=null}else return e=fl(n),e!==null&&Jf(e),t.blockedOn=n,!1;e.shift()}return!0}function Cg(t,e,n){mu(t)&&n.delete(e)}function NI(){Oh=!1,vi!==null&&mu(vi)&&(vi=null),_i!==null&&mu(_i)&&(_i=null),wi!==null&&mu(wi)&&(wi=null),Va.forEach(Cg),Ma.forEach(Cg)}function ea(t,e){t.blockedOn===e&&(t.blockedOn=null,Oh||(Oh=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,NI)))}function Ua(t){function e(i){return ea(i,t)}if(0<Ql.length){ea(Ql[0],t);for(var n=1;n<Ql.length;n++){var r=Ql[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&ea(vi,t),_i!==null&&ea(_i,t),wi!==null&&ea(wi,t),Va.forEach(e),Ma.forEach(e),n=0;n<li.length;n++)r=li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<li.length&&(n=li[0],n.blockedOn===null);)a0(n),n.blockedOn===null&&li.shift()}var io=Hr.ReactCurrentBatchConfig,Fu=!0;function kI(t,e,n,r){var i=Oe,s=io.transition;io.transition=null;try{Oe=1,Zf(t,e,n,r)}finally{Oe=i,io.transition=s}}function bI(t,e,n,r){var i=Oe,s=io.transition;io.transition=null;try{Oe=4,Zf(t,e,n,r)}finally{Oe=i,io.transition=s}}function Zf(t,e,n,r){if(Fu){var i=jh(t,e,n,r);if(i===null)Fd(t,e,r,Bu,n),Ag(t,r);else if(CI(i,t,e,n,r))r.stopPropagation();else if(Ag(t,r),e&4&&-1<AI.indexOf(t)){for(;i!==null;){var s=fl(i);if(s!==null&&r0(s),s=jh(t,e,n,r),s===null&&Fd(t,e,r,Bu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fd(t,e,r,null,n)}}var Bu=null;function jh(t,e,n,r){if(Bu=null,t=Qf(r),t=is(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bu=t,null}function l0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vI()){case Yf:return 1;case Z_:return 4;case Mu:case _I:return 16;case e0:return 536870912;default:return 16}default:return 16}}var pi=null,ep=null,gu=null;function u0(){if(gu)return gu;var t,e=ep,n=e.length,r,i="value"in pi?pi.value:pi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gu=i.slice(t,1<r?1-r:void 0)}function yu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yl(){return!0}function Ng(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yl:Ng,this.isPropagationStopped=Ng,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),e}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=wn(ko),hl=et({},ko,{view:0,detail:0}),PI=wn(hl),bd,Pd,ta,kc=et({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ta&&(ta&&t.type==="mousemove"?(bd=t.screenX-ta.screenX,Pd=t.screenY-ta.screenY):Pd=bd=0,ta=t),bd)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),kg=wn(kc),DI=et({},kc,{dataTransfer:0}),OI=wn(DI),jI=et({},hl,{relatedTarget:0}),Dd=wn(jI),LI=et({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),VI=wn(LI),MI=et({},ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UI=wn(MI),FI=et({},ko,{data:0}),bg=wn(FI),BI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$I={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$I[t])?!!e[t]:!1}function np(){return WI}var HI=et({},hl,{key:function(t){if(t.key){var e=BI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?yu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qI=wn(HI),KI=et({},kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pg=wn(KI),GI=et({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),QI=wn(GI),YI=et({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),XI=wn(YI),JI=et({},kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZI=wn(JI),eS=[9,13,27,32],rp=jr&&"CompositionEvent"in window,xa=null;jr&&"documentMode"in document&&(xa=document.documentMode);var tS=jr&&"TextEvent"in window&&!xa,c0=jr&&(!rp||xa&&8<xa&&11>=xa),Dg=" ",Og=!1;function d0(t,e){switch(t){case"keyup":return eS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function nS(t,e){switch(t){case"compositionend":return h0(e);case"keypress":return e.which!==32?null:(Og=!0,Dg);case"textInput":return t=e.data,t===Dg&&Og?null:t;default:return null}}function rS(t,e){if(Ws)return t==="compositionend"||!rp&&d0(t,e)?(t=u0(),gu=ep=pi=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return c0&&e.locale!=="ko"?null:e.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iS[t.type]:e==="textarea"}function f0(t,e,n,r){W_(r),e=zu(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ta=null,Fa=null;function sS(t){I0(t,0)}function bc(t){var e=Ks(t);if(V_(e))return t}function oS(t,e){if(t==="change")return e}var p0=!1;if(jr){var Od;if(jr){var jd="oninput"in document;if(!jd){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),jd=typeof Lg.oninput=="function"}Od=jd}else Od=!1;p0=Od&&(!document.documentMode||9<document.documentMode)}function Vg(){Ta&&(Ta.detachEvent("onpropertychange",m0),Fa=Ta=null)}function m0(t){if(t.propertyName==="value"&&bc(Fa)){var e=[];f0(e,Fa,t,Qf(t)),G_(sS,e)}}function aS(t,e,n){t==="focusin"?(Vg(),Ta=e,Fa=n,Ta.attachEvent("onpropertychange",m0)):t==="focusout"&&Vg()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(Fa)}function uS(t,e){if(t==="click")return bc(e)}function cS(t,e){if(t==="input"||t==="change")return bc(e)}function dS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:dS;function Ba(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yh.call(e,i)||!Kn(t[i],e[i]))return!1}return!0}function Mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var n=Mg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mg(n)}}function g0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y0(){for(var t=window,e=ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ju(t.document)}return e}function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hS(t){var e=y0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g0(n.ownerDocument.documentElement,n)){if(r!==null&&ip(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ug(n,s);var o=Ug(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=jr&&"documentMode"in document&&11>=document.documentMode,Hs=null,Lh=null,Ia=null,Vh=!1;function Fg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vh||Hs==null||Hs!==ju(r)||(r=Hs,"selectionStart"in r&&ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&Ba(Ia,r)||(Ia=r,r=zu(Lh,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Ld={},v0={};jr&&(v0=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Pc(t){if(Ld[t])return Ld[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v0)return Ld[t]=e[n];return t}var _0=Pc("animationend"),w0=Pc("animationiteration"),E0=Pc("animationstart"),x0=Pc("transitionend"),T0=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(t,e){T0.set(t,e),Ts(e,[t])}for(var Vd=0;Vd<Bg.length;Vd++){var Md=Bg[Vd],pS=Md.toLowerCase(),mS=Md[0].toUpperCase()+Md.slice(1);Vi(pS,"on"+mS)}Vi(_0,"onAnimationEnd");Vi(w0,"onAnimationIteration");Vi(E0,"onAnimationStart");Vi("dblclick","onDoubleClick");Vi("focusin","onFocus");Vi("focusout","onBlur");Vi(x0,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function zg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pI(r,e,void 0,t),t.currentTarget=null}function I0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}}}if(Vu)throw t=Ph,Vu=!1,Ph=null,t}function He(t,e){var n=e[zh];n===void 0&&(n=e[zh]=new Set);var r=t+"__bubble";n.has(r)||(S0(e,t,2,!1),n.add(r))}function Ud(t,e,n){var r=0;e&&(r|=4),S0(n,t,r,e)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function za(t){if(!t[Jl]){t[Jl]=!0,P_.forEach(function(n){n!=="selectionchange"&&(gS.has(n)||Ud(n,!1,t),Ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jl]||(e[Jl]=!0,Ud("selectionchange",!1,e))}}function S0(t,e,n,r){switch(l0(e)){case 1:var i=kI;break;case 4:i=bI;break;default:i=Zf}n=i.bind(null,e,n,t),i=void 0,!bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=is(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}G_(function(){var c=s,f=Qf(n),m=[];e:{var g=T0.get(t);if(g!==void 0){var _=tp,x=t;switch(t){case"keypress":if(yu(n)===0)break e;case"keydown":case"keyup":_=qI;break;case"focusin":x="focus",_=Dd;break;case"focusout":x="blur",_=Dd;break;case"beforeblur":case"afterblur":_=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=OI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=QI;break;case _0:case w0:case E0:_=VI;break;case x0:_=XI;break;case"scroll":_=PI;break;case"wheel":_=ZI;break;case"copy":case"cut":case"paste":_=UI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Pg}var C=(e&4)!==0,k=!C&&t==="scroll",I=C?g!==null?g+"Capture":null:g;C=[];for(var w=c,A;w!==null;){A=w;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,I!==null&&(O=La(w,I),O!=null&&C.push($a(w,O,A)))),k)break;w=w.return}0<C.length&&(g=new _(g,x,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Nh&&(x=n.relatedTarget||n.fromElement)&&(is(x)||x[Lr]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=c,x=x?is(x):null,x!==null&&(k=Is(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(_=null,x=c),_!==x)){if(C=kg,O="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=Pg,O="onPointerLeave",I="onPointerEnter",w="pointer"),k=_==null?g:Ks(_),A=x==null?g:Ks(x),g=new C(O,w+"leave",_,n,f),g.target=k,g.relatedTarget=A,O=null,is(f)===c&&(C=new C(I,w+"enter",x,n,f),C.target=A,C.relatedTarget=k,O=C),k=O,_&&x)t:{for(C=_,I=x,w=0,A=C;A;A=Vs(A))w++;for(A=0,O=I;O;O=Vs(O))A++;for(;0<w-A;)C=Vs(C),w--;for(;0<A-w;)I=Vs(I),A--;for(;w--;){if(C===I||I!==null&&C===I.alternate)break t;C=Vs(C),I=Vs(I)}C=null}else C=null;_!==null&&$g(m,g,_,C,!1),x!==null&&k!==null&&$g(m,k,x,C,!0)}}e:{if(g=c?Ks(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var V=oS;else if(jg(g))if(p0)V=cS;else{V=lS;var B=aS}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=uS);if(V&&(V=V(t,c))){f0(m,V,n,f);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Ih(g,"number",g.value)}switch(B=c?Ks(c):window,t){case"focusin":(jg(B)||B.contentEditable==="true")&&(Hs=B,Lh=c,Ia=null);break;case"focusout":Ia=Lh=Hs=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,Fg(m,n,f);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":Fg(m,n,f)}var y;if(rp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ws?d0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(c0&&n.locale!=="ko"&&(Ws||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ws&&(y=u0()):(pi=f,ep="value"in pi?pi.value:pi.textContent,Ws=!0)),B=zu(c,v),0<B.length&&(v=new bg(v,t,null,n,f),m.push({event:v,listeners:B}),y?v.data=y:(y=h0(n),y!==null&&(v.data=y)))),(y=tS?nS(t,n):rS(t,n))&&(c=zu(c,"onBeforeInput"),0<c.length&&(f=new bg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=y))}I0(m,e)})}function $a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=La(t,n),s!=null&&r.unshift($a(t,s,i)),s=La(t,e),s!=null&&r.push($a(t,s,i))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $g(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=La(n,s),u!=null&&o.unshift($a(n,u,l))):i||(u=La(n,s),u!=null&&o.push($a(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yS=/\r\n?/g,vS=/\u0000|\uFFFD/g;function Wg(t){return(typeof t=="string"?t:""+t).replace(yS,`
`).replace(vS,"")}function Zl(t,e,n){if(e=Wg(e),Wg(t)!==e&&n)throw Error(K(425))}function $u(){}var Mh=null,Uh=null;function Fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(t){return Hg.resolve(null).then(t).catch(ES)}:Bh;function ES(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ua(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),ir="__reactFiber$"+bo,Wa="__reactProps$"+bo,Lr="__reactContainer$"+bo,zh="__reactEvents$"+bo,xS="__reactListeners$"+bo,TS="__reactHandles$"+bo;function is(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qg(t);t!==null;){if(n=t[ir])return n;t=qg(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[ir]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Dc(t){return t[Wa]||null}var $h=[],Gs=-1;function Mi(t){return{current:t}}function Ke(t){0>Gs||(t.current=$h[Gs],$h[Gs]=null,Gs--)}function ze(t,e){Gs++,$h[Gs]=t.current,t.current=e}var bi={},Wt=Mi(bi),nn=Mi(!1),hs=bi;function fo(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rn(t){return t=t.childContextTypes,t!=null}function Wu(){Ke(nn),Ke(Wt)}function Kg(t,e,n){if(Wt.current!==bi)throw Error(K(168));ze(Wt,e),ze(nn,n)}function R0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,aI(t)||"Unknown",i));return et({},n,r)}function Hu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,hs=Wt.current,ze(Wt,t),ze(nn,nn.current),!0}function Gg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=R0(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,Ke(nn),Ke(Wt),ze(Wt,t)):Ke(nn),ze(nn,n)}var Sr=null,Oc=!1,zd=!1;function A0(t){Sr===null?Sr=[t]:Sr.push(t)}function IS(t){Oc=!0,A0(t)}function Ui(){if(!zd&&Sr!==null){zd=!0;var t=0,e=Oe;try{var n=Sr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sr=null,Oc=!1}catch(i){throw Sr!==null&&(Sr=Sr.slice(t+1)),J_(Yf,Ui),i}finally{Oe=e,zd=!1}}return null}var Qs=[],Ys=0,qu=null,Ku=0,Rn=[],An=0,fs=null,Rr=1,Ar="";function Zi(t,e){Qs[Ys++]=Ku,Qs[Ys++]=qu,qu=t,Ku=e}function C0(t,e,n){Rn[An++]=Rr,Rn[An++]=Ar,Rn[An++]=fs,fs=t;var r=Rr;t=Ar;var i=32-Hn(r)-1;r&=~(1<<i),n+=1;var s=32-Hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Hn(e)+i|n<<i|r,Ar=s+t}else Rr=1<<s|n<<i|r,Ar=t}function sp(t){t.return!==null&&(Zi(t,1),C0(t,1,0))}function op(t){for(;t===qu;)qu=Qs[--Ys],Qs[Ys]=null,Ku=Qs[--Ys],Qs[Ys]=null;for(;t===fs;)fs=Rn[--An],Rn[An]=null,Ar=Rn[--An],Rn[An]=null,Rr=Rn[--An],Rn[An]=null}var yn=null,mn=null,Ye=!1,zn=null;function N0(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,mn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Rr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,mn=null,!0):!1;default:return!1}}function Wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hh(t){if(Ye){var e=mn;if(e){var n=e;if(!Qg(t,e)){if(Wh(t))throw Error(K(418));e=Ei(n.nextSibling);var r=yn;e&&Qg(t,e)?N0(r,n):(t.flags=t.flags&-4097|2,Ye=!1,yn=t)}}else{if(Wh(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ye=!1,yn=t}}}function Yg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function eu(t){if(t!==yn)return!1;if(!Ye)return Yg(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fh(t.type,t.memoizedProps)),e&&(e=mn)){if(Wh(t))throw k0(),Error(K(418));for(;e;)N0(t,e),e=Ei(e.nextSibling)}if(Yg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=yn?Ei(t.stateNode.nextSibling):null;return!0}function k0(){for(var t=mn;t;)t=Ei(t.nextSibling)}function po(){mn=yn=null,Ye=!1}function ap(t){zn===null?zn=[t]:zn.push(t)}var SS=Hr.ReactCurrentBatchConfig;function na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function tu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xg(t){var e=t._init;return e(t._payload)}function b0(t){function e(I,w){if(t){var A=I.deletions;A===null?(I.deletions=[w],I.flags|=16):A.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=Si(I,w),I.index=0,I.sibling=null,I}function s(I,w,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<w?(I.flags|=2,w):A):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,A,O){return w===null||w.tag!==6?(w=Qd(A,I.mode,O),w.return=I,w):(w=i(w,A),w.return=I,w)}function u(I,w,A,O){var V=A.type;return V===$s?f(I,w,A.props.children,O,A.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===oi&&Xg(V)===w.type)?(O=i(w,A.props),O.ref=na(I,w,A),O.return=I,O):(O=Iu(A.type,A.key,A.props,null,I.mode,O),O.ref=na(I,w,A),O.return=I,O)}function c(I,w,A,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Yd(A,I.mode,O),w.return=I,w):(w=i(w,A.children||[]),w.return=I,w)}function f(I,w,A,O,V){return w===null||w.tag!==7?(w=cs(A,I.mode,O,V),w.return=I,w):(w=i(w,A),w.return=I,w)}function m(I,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qd(""+w,I.mode,A),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wl:return A=Iu(w.type,w.key,w.props,null,I.mode,A),A.ref=na(I,null,w),A.return=I,A;case zs:return w=Yd(w,I.mode,A),w.return=I,w;case oi:var O=w._init;return m(I,O(w._payload),A)}if(ca(w)||Xo(w))return w=cs(w,I.mode,A,null),w.return=I,w;tu(I,w)}return null}function g(I,w,A,O){var V=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return V!==null?null:l(I,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wl:return A.key===V?u(I,w,A,O):null;case zs:return A.key===V?c(I,w,A,O):null;case oi:return V=A._init,g(I,w,V(A._payload),O)}if(ca(A)||Xo(A))return V!==null?null:f(I,w,A,O,null);tu(I,A)}return null}function _(I,w,A,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return I=I.get(A)||null,l(w,I,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Wl:return I=I.get(O.key===null?A:O.key)||null,u(w,I,O,V);case zs:return I=I.get(O.key===null?A:O.key)||null,c(w,I,O,V);case oi:var B=O._init;return _(I,w,A,B(O._payload),V)}if(ca(O)||Xo(O))return I=I.get(A)||null,f(w,I,O,V,null);tu(w,O)}return null}function x(I,w,A,O){for(var V=null,B=null,y=w,v=w=0,T=null;y!==null&&v<A.length;v++){y.index>v?(T=y,y=null):T=y.sibling;var S=g(I,y,A[v],O);if(S===null){y===null&&(y=T);break}t&&y&&S.alternate===null&&e(I,y),w=s(S,w,v),B===null?V=S:B.sibling=S,B=S,y=T}if(v===A.length)return n(I,y),Ye&&Zi(I,v),V;if(y===null){for(;v<A.length;v++)y=m(I,A[v],O),y!==null&&(w=s(y,w,v),B===null?V=y:B.sibling=y,B=y);return Ye&&Zi(I,v),V}for(y=r(I,y);v<A.length;v++)T=_(y,I,v,A[v],O),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?v:T.key),w=s(T,w,v),B===null?V=T:B.sibling=T,B=T);return t&&y.forEach(function(b){return e(I,b)}),Ye&&Zi(I,v),V}function C(I,w,A,O){var V=Xo(A);if(typeof V!="function")throw Error(K(150));if(A=V.call(A),A==null)throw Error(K(151));for(var B=V=null,y=w,v=w=0,T=null,S=A.next();y!==null&&!S.done;v++,S=A.next()){y.index>v?(T=y,y=null):T=y.sibling;var b=g(I,y,S.value,O);if(b===null){y===null&&(y=T);break}t&&y&&b.alternate===null&&e(I,y),w=s(b,w,v),B===null?V=b:B.sibling=b,B=b,y=T}if(S.done)return n(I,y),Ye&&Zi(I,v),V;if(y===null){for(;!S.done;v++,S=A.next())S=m(I,S.value,O),S!==null&&(w=s(S,w,v),B===null?V=S:B.sibling=S,B=S);return Ye&&Zi(I,v),V}for(y=r(I,y);!S.done;v++,S=A.next())S=_(y,I,v,S.value,O),S!==null&&(t&&S.alternate!==null&&y.delete(S.key===null?v:S.key),w=s(S,w,v),B===null?V=S:B.sibling=S,B=S);return t&&y.forEach(function(N){return e(I,N)}),Ye&&Zi(I,v),V}function k(I,w,A,O){if(typeof A=="object"&&A!==null&&A.type===$s&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Wl:e:{for(var V=A.key,B=w;B!==null;){if(B.key===V){if(V=A.type,V===$s){if(B.tag===7){n(I,B.sibling),w=i(B,A.props.children),w.return=I,I=w;break e}}else if(B.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===oi&&Xg(V)===B.type){n(I,B.sibling),w=i(B,A.props),w.ref=na(I,B,A),w.return=I,I=w;break e}n(I,B);break}else e(I,B);B=B.sibling}A.type===$s?(w=cs(A.props.children,I.mode,O,A.key),w.return=I,I=w):(O=Iu(A.type,A.key,A.props,null,I.mode,O),O.ref=na(I,w,A),O.return=I,I=O)}return o(I);case zs:e:{for(B=A.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(I,w.sibling),w=i(w,A.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=Yd(A,I.mode,O),w.return=I,I=w}return o(I);case oi:return B=A._init,k(I,w,B(A._payload),O)}if(ca(A))return x(I,w,A,O);if(Xo(A))return C(I,w,A,O);tu(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(I,w.sibling),w=i(w,A),w.return=I,I=w):(n(I,w),w=Qd(A,I.mode,O),w.return=I,I=w),o(I)):n(I,w)}return k}var mo=b0(!0),P0=b0(!1),Gu=Mi(null),Qu=null,Xs=null,lp=null;function up(){lp=Xs=Qu=null}function cp(t){var e=Gu.current;Ke(Gu),t._currentValue=e}function qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){Qu=t,lp=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(Qu===null)throw Error(K(308));Xs=t,Qu.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var ss=null;function dp(t){ss===null?ss=[t]:ss.push(t)}function D0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vr(t,r)}function Vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ai=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vr(t,n)}return i=r.interleaved,i===null?(e.next=e,dp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vr(t,n)}function vu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}function Jg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yu(t,e,n,r){var i=t.updateQueue;ai=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,C=l;switch(g=e,_=n,C.tag){case 1:if(x=C.payload,typeof x=="function"){m=x.call(_,m,g);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=C.payload,g=typeof x=="function"?x.call(_,m,g):x,g==null)break e;m=et({},m,g);break e;case 2:ai=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=_,u=m):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=m}}function Zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var pl={},or=Mi(pl),Ha=Mi(pl),qa=Mi(pl);function os(t){if(t===pl)throw Error(K(174));return t}function fp(t,e){switch(ze(qa,e),ze(Ha,t),ze(or,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rh(e,t)}Ke(or),ze(or,e)}function go(){Ke(or),Ke(Ha),Ke(qa)}function j0(t){os(qa.current);var e=os(or.current),n=Rh(e,t.type);e!==n&&(ze(Ha,t),ze(or,n))}function pp(t){Ha.current===t&&(Ke(or),Ke(Ha))}var Je=Mi(0);function Xu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $d=[];function mp(){for(var t=0;t<$d.length;t++)$d[t]._workInProgressVersionPrimary=null;$d.length=0}var _u=Hr.ReactCurrentDispatcher,Wd=Hr.ReactCurrentBatchConfig,ps=0,Ze=null,vt=null,xt=null,Ju=!1,Sa=!1,Ka=0,RS=0;function Lt(){throw Error(K(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,i,s){if(ps=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_u.current=t===null||t.memoizedState===null?kS:bS,t=n(r,i),Sa){s=0;do{if(Sa=!1,Ka=0,25<=s)throw Error(K(301));s+=1,xt=vt=null,e.updateQueue=null,_u.current=PS,t=n(r,i)}while(Sa)}if(_u.current=Zu,e=vt!==null&&vt.next!==null,ps=0,xt=vt=Ze=null,Ju=!1,e)throw Error(K(300));return t}function vp(){var t=Ka!==0;return Ka=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ze.memoizedState=xt=t:xt=xt.next=t,xt}function Pn(){if(vt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=xt===null?Ze.memoizedState:xt.next;if(e!==null)xt=e,vt=t;else{if(t===null)throw Error(K(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},xt===null?Ze.memoizedState=xt=t:xt=xt.next=t}return xt}function Ga(t,e){return typeof e=="function"?e(t):e}function Hd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((ps&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ze.lanes|=f,ms|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Kn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ze.lanes|=s,ms|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Kn(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function L0(){}function V0(t,e){var n=Ze,r=Pn(),i=e(),s=!Kn(r.memoizedState,i);if(s&&(r.memoizedState=i,tn=!0),r=r.queue,_p(F0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Qa(9,U0.bind(null,n,r,i,e),void 0,null),Tt===null)throw Error(K(349));ps&30||M0(n,e,i)}return i}function M0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U0(t,e,n,r){e.value=n,e.getSnapshot=r,B0(e)&&z0(t)}function F0(t,e,n){return n(function(){B0(e)&&z0(t)})}function B0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function z0(t){var e=Vr(t,1);e!==null&&qn(e,t,1,-1)}function ey(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=NS.bind(null,Ze,t),[e.memoizedState,t]}function Qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $0(){return Pn().memoizedState}function wu(t,e,n,r){var i=rr();Ze.flags|=t,i.memoizedState=Qa(1|e,n,void 0,r===void 0?null:r)}function jc(t,e,n,r){var i=Pn();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&gp(r,o.deps)){i.memoizedState=Qa(e,n,s,r);return}}Ze.flags|=t,i.memoizedState=Qa(1|e,n,s,r)}function ty(t,e){return wu(8390656,8,t,e)}function _p(t,e){return jc(2048,8,t,e)}function W0(t,e){return jc(4,2,t,e)}function H0(t,e){return jc(4,4,t,e)}function q0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K0(t,e,n){return n=n!=null?n.concat([t]):null,jc(4,4,q0.bind(null,e,t),n)}function wp(){}function G0(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q0(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Y0(t,e,n){return ps&21?(Kn(n,e)||(n=t0(),Ze.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function AS(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Wd.transition;Wd.transition={};try{t(!1),e()}finally{Oe=n,Wd.transition=r}}function X0(){return Pn().memoizedState}function CS(t,e,n){var r=Ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J0(t))Z0(e,n);else if(n=D0(t,e,n,r),n!==null){var i=Gt();qn(n,t,r,i),ew(n,e,r)}}function NS(t,e,n){var r=Ii(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J0(t))Z0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Kn(l,o)){var u=e.interleaved;u===null?(i.next=i,dp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=D0(t,e,i,r),n!==null&&(i=Gt(),qn(n,t,r,i),ew(n,e,r))}}function J0(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function Z0(t,e){Sa=Ju=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ew(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}var Zu={readContext:bn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},kS={readContext:bn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wu(4194308,4,q0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wu(4194308,4,t,e)},useInsertionEffect:function(t,e){return wu(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CS.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:ey,useDebugValue:wp,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=ey(!1),e=t[0];return t=AS.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,i=rr();if(Ye){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Tt===null)throw Error(K(349));ps&30||M0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ty(F0.bind(null,r,s,t),[t]),r.flags|=2048,Qa(9,U0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rr(),e=Tt.identifierPrefix;if(Ye){var n=Ar,r=Rr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bS={readContext:bn,useCallback:G0,useContext:bn,useEffect:_p,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:H0,useMemo:Q0,useReducer:Hd,useRef:$0,useState:function(){return Hd(Ga)},useDebugValue:wp,useDeferredValue:function(t){var e=Pn();return Y0(e,vt.memoizedState,t)},useTransition:function(){var t=Hd(Ga)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:L0,useSyncExternalStore:V0,useId:X0,unstable_isNewReconciler:!1},PS={readContext:bn,useCallback:G0,useContext:bn,useEffect:_p,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:H0,useMemo:Q0,useReducer:qd,useRef:$0,useState:function(){return qd(Ga)},useDebugValue:wp,useDeferredValue:function(t){var e=Pn();return vt===null?e.memoizedState=t:Y0(e,vt.memoizedState,t)},useTransition:function(){var t=qd(Ga)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:L0,useSyncExternalStore:V0,useId:X0,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lc={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=Ii(t),s=Pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=xi(t,s,i),e!==null&&(qn(e,t,i,r),vu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gt(),i=Ii(t),s=Pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xi(t,s,i),e!==null&&(qn(e,t,i,r),vu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gt(),r=Ii(t),i=Pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=xi(t,i,r),e!==null&&(qn(e,t,r,n),vu(e,t,r))}};function ny(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ba(n,r)||!Ba(i,s):!0}function tw(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=rn(e)?hs:Wt.current,r=e.contextTypes,s=(r=r!=null)?fo(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ry(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lc.enqueueReplaceState(e,e.state,null)}function Gh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=rn(e)?hs:Wt.current,i.context=fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lc.enqueueReplaceState(i,i.state,null),Yu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e){try{var n="",r=e;do n+=oI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DS=typeof WeakMap=="function"?WeakMap:Map;function nw(t,e,n){n=Pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tc||(tc=!0,of=r),Qh(t,e)},n}function rw(t,e,n){n=Pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Qh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Qh(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KS.bind(null,t,e,n),e.then(t,t))}function sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pr(-1,1),e.tag=2,xi(n,e,1))),n.lanes|=1),t)}var OS=Hr.ReactCurrentOwner,tn=!1;function Kt(t,e,n,r){e.child=t===null?P0(e,null,n,r):mo(e,t.child,n,r)}function ay(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=yp(t,e,n,r,s,i),n=vp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Ye&&n&&sp(e),e.flags|=1,Kt(t,e,r,i),e.child)}function ly(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Cp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,iw(t,e,s,r,i)):(t=Iu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ba,n(o,r)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=Si(s,r),t.ref=e.ref,t.return=e,e.child=t}function iw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ba(s,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return Yh(t,e,n,r,i)}function sw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Zs,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Zs,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(Zs,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(Zs,fn),fn|=r;return Kt(t,e,i,n),e.child}function ow(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yh(t,e,n,r,i){var s=rn(n)?hs:Wt.current;return s=fo(e,s),so(e,i),n=yp(t,e,n,r,s,i),r=vp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Ye&&r&&sp(e),e.flags|=1,Kt(t,e,n,i),e.child)}function uy(t,e,n,r,i){if(rn(n)){var s=!0;Hu(e)}else s=!1;if(so(e,i),e.stateNode===null)Eu(t,e),tw(e,n,r),Gh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=bn(c):(c=rn(n)?hs:Wt.current,c=fo(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ry(e,o,r,c),ai=!1;var g=e.memoizedState;o.state=g,Yu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||nn.current||ai?(typeof f=="function"&&(Kh(e,n,f,r),u=e.memoizedState),(l=ai||ny(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,O0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Un(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bn(u):(u=rn(n)?hs:Wt.current,u=fo(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&ry(e,o,r,u),ai=!1,g=e.memoizedState,o.state=g,Yu(e,r,o,i);var x=e.memoizedState;l!==m||g!==x||nn.current||ai?(typeof _=="function"&&(Kh(e,n,_,r),x=e.memoizedState),(c=ai||ny(e,n,c,r,g,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Xh(t,e,n,r,s,i)}function Xh(t,e,n,r,i,s){ow(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Gg(e,n,!1),Mr(t,e,s);r=e.stateNode,OS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,s),e.child=mo(e,null,l,s)):Kt(t,e,l,s),e.memoizedState=r.state,i&&Gg(e,n,!0),e.child}function aw(t){var e=t.stateNode;e.pendingContext?Kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kg(t,e.context,!1),fp(t,e.containerInfo)}function cy(t,e,n,r,i){return po(),ap(i),e.flags|=256,Kt(t,e,n,r),e.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function Zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function lw(t,e,n){var r=e.pendingProps,i=Je.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(Je,i&1),t===null)return Hh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uc(o,r,0,null),t=cs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zh(n),e.memoizedState=Jh,t):Ep(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return jS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Si(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Si(l,s):(s=cs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jh,r}return s=t.child,t=s.sibling,r=Si(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ep(t,e){return e=Uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nu(t,e,n,r){return r!==null&&ap(r),mo(e,t.child,null,n),t=Ep(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(K(422))),nu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Uc({mode:"visible",children:r.children},i,0,null),s=cs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=Zh(o),e.memoizedState=Jh,s);if(!(e.mode&1))return nu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(K(419)),r=Kd(s,r,void 0),nu(t,e,o,r)}if(l=(o&t.childLanes)!==0,tn||l){if(r=Tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vr(t,i),qn(r,t,i,-1))}return Ap(),r=Kd(Error(K(421))),nu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=GS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mn=Ei(i.nextSibling),yn=e,Ye=!0,zn=null,t!==null&&(Rn[An++]=Rr,Rn[An++]=Ar,Rn[An++]=fs,Rr=t.id,Ar=t.overflow,fs=e),e=Ep(e,r.children),e.flags|=4096,e)}function dy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qh(t.return,e,n)}function Gd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dy(t,n,e);else if(t.tag===19)dy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(Je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gd(e,!0,n,null,s);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LS(t,e,n){switch(e.tag){case 3:aw(e),po();break;case 5:j0(e);break;case 1:rn(e.type)&&Hu(e);break;case 4:fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(Gu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?lw(t,e,n):(ze(Je,Je.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);ze(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,sw(t,e,n)}return Mr(t,e,n)}var cw,ef,dw,hw;cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ef=function(){};dw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,os(or.current);var s=null;switch(n){case"input":i=xh(t,i),r=xh(t,r),s=[];break;case"select":i=et({},i,{value:void 0}),r=et({},r,{value:void 0}),s=[];break;case"textarea":i=Sh(t,i),r=Sh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}Ah(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&He("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ra(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VS(t,e,n){var r=e.pendingProps;switch(op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return rn(e.type)&&Wu(),Vt(e),null;case 3:return r=e.stateNode,go(),Ke(nn),Ke(Wt),mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(uf(zn),zn=null))),ef(t,e),Vt(e),null;case 5:pp(e);var i=os(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)dw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Vt(e),null}if(t=os(or.current),eu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ir]=e,r[Wa]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<ha.length;i++)He(ha[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":wg(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":xg(r,s),He("invalid",r)}Ah(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Zl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Zl(r.textContent,l,t),i=["children",""+l]):Oa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":Hl(r),Eg(r,s,!0);break;case"textarea":Hl(r),Tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$u)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=F_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[Wa]=r,cw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ch(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<ha.length;i++)He(ha[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":wg(t,r),i=xh(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=et({},r,{value:void 0}),He("invalid",t);break;case"textarea":xg(t,r),i=Sh(t,r),He("invalid",t);break;default:i=r}Ah(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?$_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&B_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ja(t,u):typeof u=="number"&&ja(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&He("scroll",t):u!=null&&Hf(t,s,u,o))}switch(n){case"input":Hl(t),Eg(t,r,!1);break;case"textarea":Hl(t),Tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=os(qa.current),os(or.current),eu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(s=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Zl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Vt(e),null;case 13:if(Ke(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&mn!==null&&e.mode&1&&!(e.flags&128))k0(),po(),e.flags|=98560,s=!1;else if(s=eu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[ir]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else zn!==null&&(uf(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?_t===0&&(_t=3):Ap())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return go(),ef(t,e),t===null&&za(e.stateNode.containerInfo),Vt(e),null;case 10:return cp(e.type._context),Vt(e),null;case 17:return rn(e.type)&&Wu(),Vt(e),null;case 19:if(Ke(Je),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ra(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xu(t),o!==null){for(e.flags|=128,ra(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Je,Je.current&1|2),e.child}t=t.sibling}s.tail!==null&&lt()>vo&&(e.flags|=128,r=!0,ra(s,!1),e.lanes=4194304)}else{if(!r)if(t=Xu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ra(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Vt(e),null}else 2*lt()-s.renderingStartTime>vo&&n!==1073741824&&(e.flags|=128,r=!0,ra(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lt(),e.sibling=null,n=Je.current,ze(Je,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function MS(t,e){switch(op(e),e.tag){case 1:return rn(e.type)&&Wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),Ke(nn),Ke(Wt),mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(Ke(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Je),null;case 4:return go(),null;case 10:return cp(e.type._context),null;case 22:case 23:return Rp(),null;case 24:return null;default:return null}}var ru=!1,Ft=!1,US=typeof WeakSet=="function"?WeakSet:Set,J=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function tf(t,e,n){try{n()}catch(r){rt(t,e,r)}}var hy=!1;function FS(t,e){if(Mh=Fu,t=y0(),ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=t,g=null;t:for(;;){for(var _;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uh={focusedElem:t,selectionRange:n},Fu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var C=x.memoizedProps,k=x.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?C:Un(e.type,C),k);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(O){rt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return x=hy,hy=!1,x}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tf(e,n,s)}i=i.next}while(i!==r)}}function Vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fw(t){var e=t.alternate;e!==null&&(t.alternate=null,fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[Wa],delete e[zh],delete e[xS],delete e[TS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pw(t){return t.tag===5||t.tag===3||t.tag===4}function fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(rf(t,e,n),t=t.sibling;t!==null;)rf(t,e,n),t=t.sibling}function sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sf(t,e,n),t=t.sibling;t!==null;)sf(t,e,n),t=t.sibling}var Rt=null,Fn=!1;function ri(t,e,n){for(n=n.child;n!==null;)mw(t,e,n),n=n.sibling}function mw(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:Ft||Js(n,e);case 6:var r=Rt,i=Fn;Rt=null,ri(t,e,n),Rt=r,Fn=i,Rt!==null&&(Fn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Fn?(t=Rt,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),Ua(t)):Bd(Rt,n.stateNode));break;case 4:r=Rt,i=Fn,Rt=n.stateNode.containerInfo,Fn=!0,ri(t,e,n),Rt=r,Fn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tf(n,e,o),i=i.next}while(i!==r)}ri(t,e,n);break;case 1:if(!Ft&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rt(n,e,l)}ri(t,e,n);break;case 21:ri(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,ri(t,e,n),Ft=r):ri(t,e,n);break;default:ri(t,e,n)}}function py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new US),e.forEach(function(r){var i=QS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Rt=l.stateNode,Fn=!1;break e;case 3:Rt=l.stateNode.containerInfo,Fn=!0;break e;case 4:Rt=l.stateNode.containerInfo,Fn=!0;break e}l=l.return}if(Rt===null)throw Error(K(160));mw(s,o,i),Rt=null,Fn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){rt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gw(e,t),e=e.sibling}function gw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),nr(t),r&4){try{Ra(3,t,t.return),Vc(3,t)}catch(C){rt(t,t.return,C)}try{Ra(5,t,t.return)}catch(C){rt(t,t.return,C)}}break;case 1:Mn(e,t),nr(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Mn(e,t),nr(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var i=t.stateNode;try{ja(i,"")}catch(C){rt(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&M_(i,s),Ch(l,o);var c=Ch(l,s);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?$_(i,m):f==="dangerouslySetInnerHTML"?B_(i,m):f==="children"?ja(i,m):Hf(i,f,m,c)}switch(l){case"input":Th(i,s);break;case"textarea":U_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?to(i,!!s.multiple,_,!1):g!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wa]=s}catch(C){rt(t,t.return,C)}}break;case 6:if(Mn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){rt(t,t.return,C)}}break;case 3:if(Mn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ua(e.containerInfo)}catch(C){rt(t,t.return,C)}break;case 4:Mn(e,t),nr(t);break;case 13:Mn(e,t),nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ip=lt())),r&4&&py(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||f,Mn(e,t),Ft=c):Mn(e,t),nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(m=J=f;J!==null;){switch(g=J,_=g.child,g.tag){case 0:case 11:case 14:case 15:Ra(4,g,g.return);break;case 1:Js(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(C){rt(r,n,C)}}break;case 5:Js(g,g.return);break;case 22:if(g.memoizedState!==null){gy(m);continue}}_!==null?(_.return=g,J=_):gy(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=z_("display",o))}catch(C){rt(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(C){rt(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mn(e,t),nr(t),r&4&&py(t);break;case 21:break;default:Mn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pw(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ja(i,""),r.flags&=-33);var s=fy(t);sf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fy(t);rf(t,l,o);break;default:throw Error(K(161))}}catch(u){rt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BS(t,e,n){J=t,yw(t)}function yw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ru;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ft;l=ru;var c=Ft;if(ru=o,(Ft=u)&&!c)for(J=i;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?yy(i):u!==null?(u.return=o,J=u):yy(i);for(;s!==null;)J=s,yw(s),s=s.sibling;J=i,ru=l,Ft=c}my(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):my(t)}}function my(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ua(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ft||e.flags&512&&nf(e)}catch(g){rt(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function gy(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function yy(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vc(4,e)}catch(u){rt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){rt(e,i,u)}}var s=e.return;try{nf(e)}catch(u){rt(e,s,u)}break;case 5:var o=e.return;try{nf(e)}catch(u){rt(e,o,u)}}}catch(u){rt(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var zS=Math.ceil,ec=Hr.ReactCurrentDispatcher,xp=Hr.ReactCurrentOwner,Nn=Hr.ReactCurrentBatchConfig,Ae=0,Tt=null,ht=null,Nt=0,fn=0,Zs=Mi(0),_t=0,Ya=null,ms=0,Mc=0,Tp=0,Aa=null,Zt=null,Ip=0,vo=1/0,Ir=null,tc=!1,of=null,Ti=null,iu=!1,mi=null,nc=0,Ca=0,af=null,xu=-1,Tu=0;function Gt(){return Ae&6?lt():xu!==-1?xu:xu=lt()}function Ii(t){return t.mode&1?Ae&2&&Nt!==0?Nt&-Nt:SS.transition!==null?(Tu===0&&(Tu=t0()),Tu):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:l0(t.type)),t):1}function qn(t,e,n,r){if(50<Ca)throw Ca=0,af=null,Error(K(185));dl(t,n,r),(!(Ae&2)||t!==Tt)&&(t===Tt&&(!(Ae&2)&&(Mc|=n),_t===4&&ui(t,Nt)),sn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(vo=lt()+500,Oc&&Ui()))}function sn(t,e){var n=t.callbackNode;SI(t,e);var r=Uu(t,t===Tt?Nt:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rg(n),e===1)t.tag===0?IS(vy.bind(null,t)):A0(vy.bind(null,t)),wS(function(){!(Ae&6)&&Ui()}),n=null;else{switch(n0(r)){case 1:n=Yf;break;case 4:n=Z_;break;case 16:n=Mu;break;case 536870912:n=e0;break;default:n=Mu}n=Sw(n,vw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vw(t,e){if(xu=-1,Tu=0,Ae&6)throw Error(K(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Uu(t,t===Tt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rc(t,r);else{e=r;var i=Ae;Ae|=2;var s=ww();(Tt!==t||Nt!==e)&&(Ir=null,vo=lt()+500,us(t,e));do try{HS();break}catch(l){_w(t,l)}while(!0);up(),ec.current=s,Ae=i,ht!==null?e=0:(Tt=null,Nt=0,e=_t)}if(e!==0){if(e===2&&(i=Dh(t),i!==0&&(r=i,e=lf(t,i))),e===1)throw n=Ya,us(t,0),ui(t,r),sn(t,lt()),n;if(e===6)ui(t,r);else{if(i=t.current.alternate,!(r&30)&&!$S(i)&&(e=rc(t,r),e===2&&(s=Dh(t),s!==0&&(r=s,e=lf(t,s))),e===1))throw n=Ya,us(t,0),ui(t,r),sn(t,lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:es(t,Zt,Ir);break;case 3:if(ui(t,r),(r&130023424)===r&&(e=Ip+500-lt(),10<e)){if(Uu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bh(es.bind(null,t,Zt,Ir),e);break}es(t,Zt,Ir);break;case 4:if(ui(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zS(r/1960))-r,10<r){t.timeoutHandle=Bh(es.bind(null,t,Zt,Ir),r);break}es(t,Zt,Ir);break;case 5:es(t,Zt,Ir);break;default:throw Error(K(329))}}}return sn(t,lt()),t.callbackNode===n?vw.bind(null,t):null}function lf(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=rc(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&uf(e)),t}function uf(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ui(t,e){for(e&=~Tp,e&=~Mc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function vy(t){if(Ae&6)throw Error(K(327));oo();var e=Uu(t,0);if(!(e&1))return sn(t,lt()),null;var n=rc(t,e);if(t.tag!==0&&n===2){var r=Dh(t);r!==0&&(e=r,n=lf(t,r))}if(n===1)throw n=Ya,us(t,0),ui(t,e),sn(t,lt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Zt,Ir),sn(t,lt()),null}function Sp(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(vo=lt()+500,Oc&&Ui())}}function gs(t){mi!==null&&mi.tag===0&&!(Ae&6)&&oo();var e=Ae;Ae|=1;var n=Nn.transition,r=Oe;try{if(Nn.transition=null,Oe=1,t)return t()}finally{Oe=r,Nn.transition=n,Ae=e,!(Ae&6)&&Ui()}}function Rp(){fn=Zs.current,Ke(Zs)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_S(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wu();break;case 3:go(),Ke(nn),Ke(Wt),mp();break;case 5:pp(r);break;case 4:go();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:cp(r.type._context);break;case 22:case 23:Rp()}n=n.return}if(Tt=t,ht=t=Si(t.current,null),Nt=fn=e,_t=0,Ya=null,Tp=Mc=ms=0,Zt=Aa=null,ss!==null){for(e=0;e<ss.length;e++)if(n=ss[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ss=null}return t}function _w(t,e){do{var n=ht;try{if(up(),_u.current=Zu,Ju){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ju=!1}if(ps=0,xt=vt=Ze=null,Sa=!1,Ka=0,xp.current=null,n===null||n.return===null){_t=1,Ya=e,ht=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=sy(o);if(_!==null){_.flags&=-257,oy(_,o,l,s,e),_.mode&1&&iy(s,c,e),e=_,u=c;var x=e.updateQueue;if(x===null){var C=new Set;C.add(u),e.updateQueue=C}else x.add(u);break e}else{if(!(e&1)){iy(s,c,e),Ap();break e}u=Error(K(426))}}else if(Ye&&l.mode&1){var k=sy(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),oy(k,o,l,s,e),ap(yo(u,l));break e}}s=u=yo(u,l),_t!==4&&(_t=2),Aa===null?Aa=[s]:Aa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=nw(s,u,e);Jg(s,I);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ti===null||!Ti.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=rw(s,l,e);Jg(s,O);break e}}s=s.return}while(s!==null)}xw(n)}catch(V){e=V,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function ww(){var t=ec.current;return ec.current=Zu,t===null?Zu:t}function Ap(){(_t===0||_t===3||_t===2)&&(_t=4),Tt===null||!(ms&268435455)&&!(Mc&268435455)||ui(Tt,Nt)}function rc(t,e){var n=Ae;Ae|=2;var r=ww();(Tt!==t||Nt!==e)&&(Ir=null,us(t,e));do try{WS();break}catch(i){_w(t,i)}while(!0);if(up(),Ae=n,ec.current=r,ht!==null)throw Error(K(261));return Tt=null,Nt=0,_t}function WS(){for(;ht!==null;)Ew(ht)}function HS(){for(;ht!==null&&!gI();)Ew(ht)}function Ew(t){var e=Iw(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?xw(t):ht=e,xp.current=null}function xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MS(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,ht=null;return}}else if(n=VS(n,e,fn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);_t===0&&(_t=5)}function es(t,e,n){var r=Oe,i=Nn.transition;try{Nn.transition=null,Oe=1,qS(t,e,n,r)}finally{Nn.transition=i,Oe=r}return null}function qS(t,e,n,r){do oo();while(mi!==null);if(Ae&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RI(t,s),t===Tt&&(ht=Tt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iu||(iu=!0,Sw(Mu,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=Oe;Oe=1;var l=Ae;Ae|=4,xp.current=null,FS(t,n),gw(n,t),hS(Uh),Fu=!!Mh,Uh=Mh=null,t.current=n,BS(n),yI(),Ae=l,Oe=o,Nn.transition=s}else t.current=n;if(iu&&(iu=!1,mi=t,nc=i),s=t.pendingLanes,s===0&&(Ti=null),wI(n.stateNode),sn(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tc)throw tc=!1,t=of,of=null,t;return nc&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===af?Ca++:(Ca=0,af=t):Ca=0,Ui(),null}function oo(){if(mi!==null){var t=n0(nc),e=Nn.transition,n=Oe;try{if(Nn.transition=null,Oe=16>t?16:t,mi===null)var r=!1;else{if(t=mi,mi=null,nc=0,Ae&6)throw Error(K(331));var i=Ae;for(Ae|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(J=c;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Ra(8,f,s)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var g=f.sibling,_=f.return;if(fw(f),f===c){J=null;break}if(g!==null){g.return=_,J=g;break}J=_}}}var x=s.alternate;if(x!==null){var C=x.child;if(C!==null){x.child=null;do{var k=C.sibling;C.sibling=null,C=k}while(C!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,J=I;break e}J=s.return}}var w=t.current;for(J=w;J!==null;){o=J;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,J=A;else e:for(o=w;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vc(9,l)}}catch(V){rt(l,l.return,V)}if(l===o){J=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,J=O;break e}J=l.return}}if(Ae=i,Ui(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{Oe=n,Nn.transition=e}}return!1}function _y(t,e,n){e=yo(n,e),e=nw(t,e,1),t=xi(t,e,1),e=Gt(),t!==null&&(dl(t,1,e),sn(t,e))}function rt(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=yo(n,t),t=rw(e,t,1),e=xi(e,t,1),t=Gt(),e!==null&&(dl(e,1,t),sn(e,t));break}}e=e.return}}function KS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Nt&n)===n&&(_t===4||_t===3&&(Nt&130023424)===Nt&&500>lt()-Ip?us(t,0):Tp|=n),sn(t,e)}function Tw(t,e){e===0&&(t.mode&1?(e=Gl,Gl<<=1,!(Gl&130023424)&&(Gl=4194304)):e=1);var n=Gt();t=Vr(t,e),t!==null&&(dl(t,e,n),sn(t,n))}function GS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Tw(t,n)}function QS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),Tw(t,n)}var Iw;Iw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,LS(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ye&&e.flags&1048576&&C0(e,Ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Eu(t,e),t=e.pendingProps;var i=fo(e,Wt.current);so(e,n),i=yp(null,e,r,t,i,n);var s=vp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,Hu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hp(e),i.updater=Lc,e.stateNode=i,i._reactInternals=e,Gh(e,r,t,n),e=Xh(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&sp(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Eu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XS(r),t=Un(r,t),i){case 0:e=Yh(null,e,r,t,n);break e;case 1:e=uy(null,e,r,t,n);break e;case 11:e=ay(null,e,r,t,n);break e;case 14:e=ly(null,e,r,Un(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Yh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),uy(t,e,r,i,n);case 3:e:{if(aw(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,O0(t,e),Yu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=yo(Error(K(423)),e),e=cy(t,e,r,n,i);break e}else if(r!==i){i=yo(Error(K(424)),e),e=cy(t,e,r,n,i);break e}else for(mn=Ei(e.stateNode.containerInfo.firstChild),yn=e,Ye=!0,zn=null,n=P0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),r===i){e=Mr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return j0(e),t===null&&Hh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fh(r,i)?o=null:s!==null&&Fh(r,s)&&(e.flags|=32),ow(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Hh(e),null;case 13:return lw(t,e,n);case 4:return fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mo(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),ay(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(Gu,r._currentValue),r._currentValue=o,s!==null)if(Kn(s.value,o)){if(s.children===i.children&&!nn.current){e=Mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Pr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),qh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),qh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=bn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=Un(r,e.pendingProps),i=Un(r.type,i),ly(t,e,r,i,n);case 15:return iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Eu(t,e),e.tag=1,rn(r)?(t=!0,Hu(e)):t=!1,so(e,n),tw(e,r,i),Gh(e,r,i,n),Xh(null,e,r,!0,t,n);case 19:return uw(t,e,n);case 22:return sw(t,e,n)}throw Error(K(156,e.tag))};function Sw(t,e){return J_(t,e)}function YS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,r){return new YS(t,e,n,r)}function Cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XS(t){if(typeof t=="function")return Cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kf)return 11;if(t===Gf)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Cp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return cs(n.children,i,s,e);case qf:o=8,i|=8;break;case vh:return t=Cn(12,n,e,i|2),t.elementType=vh,t.lanes=s,t;case _h:return t=Cn(13,n,e,i),t.elementType=_h,t.lanes=s,t;case wh:return t=Cn(19,n,e,i),t.elementType=wh,t.lanes=s,t;case j_:return Uc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D_:o=10;break e;case O_:o=9;break e;case Kf:o=11;break e;case Gf:o=14;break e;case oi:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function cs(t,e,n,r){return t=Cn(7,t,r,e),t.lanes=n,t}function Uc(t,e,n,r){return t=Cn(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function Yd(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kd(0),this.expirationTimes=kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Np(t,e,n,r,i,s,o,l,u){return t=new JS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(s),t}function ZS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rw(t){if(!t)return bi;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(rn(n))return R0(t,n,e)}return e}function Aw(t,e,n,r,i,s,o,l,u){return t=Np(n,r,!0,t,i,s,o,l,u),t.context=Rw(null),n=t.current,r=Gt(),i=Ii(n),s=Pr(r,i),s.callback=e??null,xi(n,s,i),t.current.lanes=i,dl(t,i,r),sn(t,r),t}function Fc(t,e,n,r){var i=e.current,s=Gt(),o=Ii(i);return n=Rw(n),e.context===null?e.context=n:e.pendingContext=n,e=Pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xi(i,e,o),t!==null&&(qn(t,i,o,s),vu(t,i,o)),o}function ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kp(t,e){wy(t,e),(t=t.alternate)&&wy(t,e)}function eR(){return null}var Cw=typeof reportError=="function"?reportError:function(t){console.error(t)};function bp(t){this._internalRoot=t}Bc.prototype.render=bp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Fc(t,e,null,null)};Bc.prototype.unmount=bp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Fc(null,t,null,null)}),e[Lr]=null}};function Bc(t){this._internalRoot=t}Bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=s0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<li.length&&e!==0&&e<li[n].priority;n++);li.splice(n,0,t),n===0&&a0(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function tR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ic(o);s.call(c)}}var o=Aw(e,r,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=o,t[Lr]=o.current,za(t.nodeType===8?t.parentNode:t),gs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ic(u);l.call(c)}}var u=Np(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=u,t[Lr]=u.current,za(t.nodeType===8?t.parentNode:t),gs(function(){Fc(e,u,n,r)}),u}function $c(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=ic(o);l.call(u)}}Fc(e,o,t,i)}else o=tR(n,e,t,i,r);return ic(o)}r0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=da(e.pendingLanes);n!==0&&(Xf(e,n|1),sn(e,lt()),!(Ae&6)&&(vo=lt()+500,Ui()))}break;case 13:gs(function(){var r=Vr(t,1);if(r!==null){var i=Gt();qn(r,t,1,i)}}),kp(t,1)}};Jf=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var n=Gt();qn(e,t,134217728,n)}kp(t,134217728)}};i0=function(t){if(t.tag===13){var e=Ii(t),n=Vr(t,e);if(n!==null){var r=Gt();qn(n,t,e,r)}kp(t,e)}};s0=function(){return Oe};o0=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};kh=function(t,e,n){switch(e){case"input":if(Th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dc(r);if(!i)throw Error(K(90));V_(r),Th(r,i)}}}break;case"textarea":U_(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};q_=Sp;K_=gs;var nR={usingClientEntryPoint:!1,Events:[fl,Ks,Dc,W_,H_,Sp]},ia={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rR={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y_(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||eR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Nc=su.inject(rR),sr=su}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nR;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(K(200));return ZS(t,e,null,n)};_n.createRoot=function(t,e){if(!Pp(t))throw Error(K(299));var n=!1,r="",i=Cw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Np(t,1,!1,null,null,n,!1,r,i),t[Lr]=e.current,za(t.nodeType===8?t.parentNode:t),new bp(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Y_(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return gs(t)};_n.hydrate=function(t,e,n){if(!zc(e))throw Error(K(200));return $c(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Cw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Aw(e,null,t,1,n??null,i,!1,s,o),t[Lr]=e.current,za(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bc(e)};_n.render=function(t,e,n){if(!zc(e))throw Error(K(200));return $c(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!zc(t))throw Error(K(40));return t._reactRootContainer?(gs(function(){$c(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};_n.unstable_batchedUpdates=Sp;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return $c(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),N_.exports=_n;var Dp=N_.exports;const iR=g_(Dp),sR=m_({__proto__:null,default:iR},[Dp]);var xy=Dp;gh.createRoot=xy.createRoot,gh.hydrateRoot=xy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qe(){return Qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qe.apply(this,arguments)}var dt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dt||(dt={}));const Ty="popstate";function oR(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:u=""}=qr(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Xa("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof s=="string"?s:ys(s))}function r(i,s){Pi(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return lR(e,n,r,t)}function ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aR(){return Math.random().toString(36).substr(2,8)}function Iy(t,e){return{usr:t.state,key:t.key,idx:e}}function Xa(t,e,n,r){return n===void 0&&(n=null),Qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qr(e):e,{state:n,key:e&&e.key||r||aR()})}function ys(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=dt.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(Qe({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=dt.Pop;let k=f(),I=k==null?null:k-c;c=k,u&&u({action:l,location:C.location,delta:I})}function g(k,I){l=dt.Push;let w=Xa(C.location,k,I);n&&n(w,k),c=f()+1;let A=Iy(w,c),O=C.createHref(w);try{o.pushState(A,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(O)}s&&u&&u({action:l,location:C.location,delta:1})}function _(k,I){l=dt.Replace;let w=Xa(C.location,k,I);n&&n(w,k),c=f();let A=Iy(w,c),O=C.createHref(w);o.replaceState(A,"",O),s&&u&&u({action:l,location:C.location,delta:0})}function x(k){let I=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof k=="string"?k:ys(k);return w=w.replace(/ $/,"%20"),ye(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let C={get action(){return l},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ty,m),u=k,()=>{i.removeEventListener(Ty,m),u=null}},createHref(k){return e(i,k)},createURL:x,encodeLocation(k){let I=x(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:_,go(k){return o.go(k)}};return C}var De;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(De||(De={}));const uR=new Set(["lazy","caseSensitive","path","id","index","children"]);function cR(t){return t.index===!0}function sc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(ye(i.index!==!0||!i.children,"Cannot specify children on an index route"),ye(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),cR(i)){let u=Qe({},i,e(i),{id:l});return r[l]=u,u}else{let u=Qe({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=sc(i.children,e,o,r)),u}})}function ns(t,e,n){return n===void 0&&(n="/"),Su(t,e,n,!1)}function Su(t,e,n,r){let i=typeof e=="string"?qr(e):e,s=Ur(i.pathname||"/",n);if(s==null)return null;let o=kw(t);hR(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=TR(s);l=ER(o[u],c,r)}return l}function dR(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function kw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Dr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kw(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_R(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of bw(s.path))i(s,o,u)}),e}function bw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=bw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function hR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fR=/^:[\w-]+$/,pR=3,mR=2,gR=1,yR=10,vR=-2,Sy=t=>t==="*";function _R(t,e){let n=t.split("/"),r=n.length;return n.some(Sy)&&(r+=vR),e&&(r+=mR),n.filter(i=>!Sy(i)).reduce((i,s)=>i+(fR.test(s)?pR:s===""?gR:yR),r)}function wR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ER(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=oc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=oc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Dr([s,m.pathname]),pathnameBase:AR(Dr([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=Dr([s,m.pathnameBase]))}return o}function oc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,m)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let C=l[m]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const x=l[m];return _&&!x?c[g]=void 0:c[g]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function xR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Pi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function TR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ur(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const IR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SR=t=>IR.test(t);function RR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qr(t):t,s;if(n)if(SR(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Pi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Ry(n.substring(1),"/"):s=Ry(n,e)}else s=e;return{pathname:s,search:CR(r),hash:NR(i)}}function Ry(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wc(t,e){let n=Pw(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Hc(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qr(t):(i=Qe({},t),ye(!i.pathname||!i.pathname.includes("?"),Xd("?","pathname","search",i)),ye(!i.pathname||!i.pathname.includes("#"),Xd("#","pathname","hash",i)),ye(!i.search||!i.search.includes("#"),Xd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=RR(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Dr=t=>t.join("/").replace(/\/\/+/g,"/"),AR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ac{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ja(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dw=["post","put","patch","delete"],kR=new Set(Dw),bR=["get",...Dw],PR=new Set(bR),DR=new Set([301,302,303,307,308]),OR=new Set([307,308]),Jd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Op=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Ow="remix-router-transitions";function VR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ye(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let P=t.detectErrorBoundary;i=j=>({hasErrorBoundary:P(j)})}else i=LR;let s={},o=sc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||BR,f=t.patchRoutesOnNavigation,m=Qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,_=new Set,x=null,C=null,k=null,I=t.hydrationData!=null,w=ns(o,t.history.location,u),A=!1,O=null;if(w==null&&!f){let P=Jt(404,{pathname:t.history.location.pathname}),{matches:j,route:M}=Vy(o);w=j,O={[M.id]:P}}w&&!t.hydrationData&&Yi(w,o,t.history.location.pathname).active&&(w=null);let V;if(w)if(w.some(P=>P.route.lazy))V=!1;else if(!w.some(P=>P.route.loader))V=!0;else if(m.v7_partialHydration){let P=t.hydrationData?t.hydrationData.loaderData:null,j=t.hydrationData?t.hydrationData.errors:null;if(j){let M=w.findIndex($=>j[$.route.id]!==void 0);V=w.slice(0,M+1).every($=>!df($.route,P,j))}else V=w.every(M=>!df(M.route,P,j))}else V=t.hydrationData!=null;else if(V=!1,w=[],m.v7_partialHydration){let P=Yi(null,o,t.history.location.pathname);P.active&&P.matches&&(A=!0,w=P.matches)}let B,y={historyAction:t.history.action,location:t.history.location,matches:w,initialized:V,navigation:Jd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},v=dt.Pop,T=!1,S,b=!1,N=new Map,R=null,oe=!1,ge=!1,st=[],Me=new Set,H=new Map,ie=0,ae=-1,ve=new Map,he=new Set,_e=new Map,be=new Map,ke=new Set,Ue=new Map,q=new Map,Le;function xn(){if(g=t.history.listen(P=>{let{action:j,location:M,delta:$}=P;if(Le){Le(),Le=void 0;return}Pi(q.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=Bo({currentLocation:y.location,nextLocation:M,historyAction:j});if(Q&&$!=null){let ne=new Promise(le=>{Le=le});t.history.go($*-1),Ki(Q,{state:"blocked",location:M,proceed(){Ki(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),ne.then(()=>t.history.go($))},reset(){let le=new Map(y.blockers);le.set(Q,sa),ot({blockers:le})}});return}return ln(j,M)}),n){tA(e,N);let P=()=>nA(e,N);e.addEventListener("pagehide",P),R=()=>e.removeEventListener("pagehide",P)}return y.initialized||ln(dt.Pop,y.location,{initialHydration:!0}),B}function On(){g&&g(),R&&R(),_.clear(),S&&S.abort(),y.fetchers.forEach((P,j)=>ks(j)),y.blockers.forEach((P,j)=>Ps(j))}function Yr(P){return _.add(P),()=>_.delete(P)}function ot(P,j){j===void 0&&(j={}),y=Qe({},y,P);let M=[],$=[];m.v7_fetcherPersist&&y.fetchers.forEach((Q,ne)=>{Q.state==="idle"&&(ke.has(ne)?$.push(ne):M.push(ne))}),ke.forEach(Q=>{!y.fetchers.has(Q)&&!H.has(Q)&&$.push(Q)}),[..._].forEach(Q=>Q(y,{deletedFetchers:$,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),m.v7_fetcherPersist?(M.forEach(Q=>y.fetchers.delete(Q)),$.forEach(Q=>ks(Q))):$.forEach(Q=>ke.delete(Q))}function an(P,j,M){var $,Q;let{flushSync:ne}=M===void 0?{}:M,le=y.actionData!=null&&y.navigation.formMethod!=null&&Bn(y.navigation.formMethod)&&y.navigation.state==="loading"&&(($=P.state)==null?void 0:$._isRedirect)!==!0,ee;j.actionData?Object.keys(j.actionData).length>0?ee=j.actionData:ee=null:le?ee=y.actionData:ee=null;let Z=j.loaderData?jy(y.loaderData,j.loaderData,j.matches||[],j.errors):y.loaderData,X=y.blockers;X.size>0&&(X=new Map(X),X.forEach((me,ut)=>X.set(ut,sa)));let re=T===!0||y.navigation.formMethod!=null&&Bn(y.navigation.formMethod)&&((Q=P.state)==null?void 0:Q._isRedirect)!==!0;l&&(o=l,l=void 0),oe||v===dt.Pop||(v===dt.Push?t.history.push(P,P.state):v===dt.Replace&&t.history.replace(P,P.state));let ce;if(v===dt.Pop){let me=N.get(y.location.pathname);me&&me.has(P.pathname)?ce={currentLocation:y.location,nextLocation:P}:N.has(P.pathname)&&(ce={currentLocation:P,nextLocation:y.location})}else if(b){let me=N.get(y.location.pathname);me?me.add(P.pathname):(me=new Set([P.pathname]),N.set(y.location.pathname,me)),ce={currentLocation:y.location,nextLocation:P}}ot(Qe({},j,{actionData:ee,loaderData:Z,historyAction:v,location:P,initialized:!0,navigation:Jd,revalidation:"idle",restoreScrollPosition:Qi(P,j.matches||y.matches),preventScrollReset:re,blockers:X}),{viewTransitionOpts:ce,flushSync:ne===!0}),v=dt.Pop,T=!1,b=!1,oe=!1,ge=!1,st=[]}async function yr(P,j){if(typeof P=="number"){t.history.go(P);return}let M=cf(y.location,y.matches,u,m.v7_prependBasename,P,m.v7_relativeSplatPath,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:$,submission:Q,error:ne}=Ay(m.v7_normalizeFormMethod,!1,M,j),le=y.location,ee=Xa(y.location,$,j&&j.state);ee=Qe({},ee,t.history.encodeLocation(ee));let Z=j&&j.replace!=null?j.replace:void 0,X=dt.Push;Z===!0?X=dt.Replace:Z===!1||Q!=null&&Bn(Q.formMethod)&&Q.formAction===y.location.pathname+y.location.search&&(X=dt.Replace);let re=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,ce=(j&&j.flushSync)===!0,me=Bo({currentLocation:le,nextLocation:ee,historyAction:X});if(me){Ki(me,{state:"blocked",location:ee,proceed(){Ki(me,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),yr(P,j)},reset(){let ut=new Map(y.blockers);ut.set(me,sa),ot({blockers:ut})}});return}return await ln(X,ee,{submission:Q,pendingError:ne,preventScrollReset:re,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:ce})}function Hi(){if(yt(),ot({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){ln(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}ln(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:b===!0})}}async function ln(P,j,M){S&&S.abort(),S=null,v=P,oe=(M&&M.startUninterruptedRevalidation)===!0,Nl(y.location,y.matches),T=(M&&M.preventScrollReset)===!0,b=(M&&M.enableViewTransition)===!0;let $=l||o,Q=M&&M.overrideNavigation,ne=M!=null&&M.initialHydration&&y.matches&&y.matches.length>0&&!A?y.matches:ns($,j,u),le=(M&&M.flushSync)===!0;if(ne&&y.initialized&&!ge&&KR(y.location,j)&&!(M&&M.submission&&Bn(M.submission.formMethod))){an(j,{matches:ne},{flushSync:le});return}let ee=Yi(ne,$,j.pathname);if(ee.active&&ee.matches&&(ne=ee.matches),!ne){let{error:Pe,notFoundMatches:xe,route:Be}=vr(j.pathname);an(j,{matches:xe,loaderData:{},errors:{[Be.id]:Pe}},{flushSync:le});return}S=new AbortController;let Z=Ms(t.history,j,S.signal,M&&M.submission),X;if(M&&M.pendingError)X=[rs(ne).route.id,{type:De.error,error:M.pendingError}];else if(M&&M.submission&&Bn(M.submission.formMethod)){let Pe=await F(Z,j,M.submission,ne,ee.active,{replace:M.replace,flushSync:le});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[xe,Be]=Pe.pendingActionResult;if(pn(Be)&&Ja(Be.error)&&Be.error.status===404){S=null,an(j,{matches:Pe.matches,loaderData:{},errors:{[xe]:Be.error}});return}}ne=Pe.matches||ne,X=Pe.pendingActionResult,Q=Zd(j,M.submission),le=!1,ee.active=!1,Z=Ms(t.history,Z.url,Z.signal)}let{shortCircuited:re,matches:ce,loaderData:me,errors:ut}=await Fe(Z,j,ne,ee.active,Q,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,le,X);re||(S=null,an(j,Qe({matches:ce||ne},Ly(X),{loaderData:me,errors:ut})))}async function F(P,j,M,$,Q,ne){ne===void 0&&(ne={}),yt();let le=ZR(j,M);if(ot({navigation:le},{flushSync:ne.flushSync===!0}),Q){let X=await er($,j.pathname,P.signal);if(X.type==="aborted")return{shortCircuited:!0};if(X.type==="error"){let re=rs(X.partialMatches).route.id;return{matches:X.partialMatches,pendingActionResult:[re,{type:De.error,error:X.error}]}}else if(X.matches)$=X.matches;else{let{notFoundMatches:re,error:ce,route:me}=vr(j.pathname);return{matches:re,pendingActionResult:[me.id,{type:De.error,error:ce}]}}}let ee,Z=fa($,j);if(!Z.route.action&&!Z.route.lazy)ee={type:De.error,error:Jt(405,{method:P.method,pathname:j.pathname,routeId:Z.route.id})};else if(ee=(await Xr("action",y,P,[Z],$,null))[Z.route.id],P.signal.aborted)return{shortCircuited:!0};if(as(ee)){let X;return ne&&ne.replace!=null?X=ne.replace:X=Py(ee.response.headers.get("Location"),new URL(P.url),u,t.history)===y.location.pathname+y.location.search,await un(P,ee,!0,{submission:M,replace:X}),{shortCircuited:!0}}if(gi(ee))throw Jt(400,{type:"defer-action"});if(pn(ee)){let X=rs($,Z.route.id);return(ne&&ne.replace)!==!0&&(v=dt.Push),{matches:$,pendingActionResult:[X.route.id,ee]}}return{matches:$,pendingActionResult:[Z.route.id,ee]}}async function Fe(P,j,M,$,Q,ne,le,ee,Z,X,re){let ce=Q||Zd(j,ne),me=ne||le||Uy(ce),ut=!oe&&(!m.v7_partialHydration||!Z);if($){if(ut){let $e=mt(re);ot(Qe({navigation:ce},$e!==void 0?{actionData:$e}:{}),{flushSync:X})}let Ie=await er(M,j.pathname,P.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){let $e=rs(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,loaderData:{},errors:{[$e]:Ie.error}}}else if(Ie.matches)M=Ie.matches;else{let{error:$e,notFoundMatches:Er,route:ei}=vr(j.pathname);return{matches:Er,loaderData:{},errors:{[ei.id]:$e}}}}let Pe=l||o,[xe,Be]=Ny(t.history,y,M,me,j,m.v7_partialHydration&&Z===!0,m.v7_skipActionErrorRevalidation,ge,st,Me,ke,_e,he,Pe,u,re);if(Gi(Ie=>!(M&&M.some($e=>$e.route.id===Ie))||xe&&xe.some($e=>$e.route.id===Ie)),ae=++ie,xe.length===0&&Be.length===0){let Ie=bs();return an(j,Qe({matches:M,loaderData:{},errors:re&&pn(re[1])?{[re[0]]:re[1].error}:null},Ly(re),Ie?{fetchers:new Map(y.fetchers)}:{}),{flushSync:X}),{shortCircuited:!0}}if(ut){let Ie={};if(!$){Ie.navigation=ce;let $e=mt(re);$e!==void 0&&(Ie.actionData=$e)}Be.length>0&&(Ie.fetchers=Xt(Be)),ot(Ie,{flushSync:X})}Be.forEach(Ie=>{jn(Ie.key),Ie.controller&&H.set(Ie.key,Ie.controller)});let _r=()=>Be.forEach(Ie=>jn(Ie.key));S&&S.signal.addEventListener("abort",_r);let{loaderResults:Jr,fetcherResults:Ln}=await gt(y,M,xe,Be,P);if(P.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",_r),Be.forEach(Ie=>H.delete(Ie.key));let qt=ou(Jr);if(qt)return await un(P,qt.result,!0,{replace:ee}),{shortCircuited:!0};if(qt=ou(Ln),qt)return he.add(qt.key),await un(P,qt.result,!0,{replace:ee}),{shortCircuited:!0};let{loaderData:Ds,errors:wr}=Oy(y,M,Jr,re,Be,Ln,Ue);Ue.forEach((Ie,$e)=>{Ie.subscribe(Er=>{(Er||Ie.done)&&Ue.delete($e)})}),m.v7_partialHydration&&Z&&y.errors&&(wr=Qe({},y.errors,wr));let dn=bs(),Sn=Cl(ae),Zr=dn||Sn||Be.length>0;return Qe({matches:M,loaderData:Ds,errors:wr},Zr?{fetchers:new Map(y.fetchers)}:{})}function mt(P){if(P&&!pn(P[1]))return{[P[0]]:P[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Xt(P){return P.forEach(j=>{let M=y.fetchers.get(j.key),$=oa(void 0,M?M.data:void 0);y.fetchers.set(j.key,$)}),new Map(y.fetchers)}function Tn(P,j,M,$){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");jn(P);let Q=($&&$.flushSync)===!0,ne=l||o,le=cf(y.location,y.matches,u,m.v7_prependBasename,M,m.v7_relativeSplatPath,j,$==null?void 0:$.relative),ee=ns(ne,le,u),Z=Yi(ee,ne,le);if(Z.active&&Z.matches&&(ee=Z.matches),!ee){In(P,j,Jt(404,{pathname:le}),{flushSync:Q});return}let{path:X,submission:re,error:ce}=Ay(m.v7_normalizeFormMethod,!0,le,$);if(ce){In(P,j,ce,{flushSync:Q});return}let me=fa(ee,X),ut=($&&$.preventScrollReset)===!0;if(re&&Bn(re.formMethod)){Jn(P,j,X,me,ee,Z.active,Q,ut,re);return}_e.set(P,{routeId:j,path:X}),Xe(P,j,X,me,ee,Z.active,Q,ut,re)}async function Jn(P,j,M,$,Q,ne,le,ee,Z){yt(),_e.delete(P);function X(Ge){if(!Ge.route.action&&!Ge.route.lazy){let tr=Jt(405,{method:Z.formMethod,pathname:M,routeId:j});return In(P,j,tr,{flushSync:le}),!0}return!1}if(!ne&&X($))return;let re=y.fetchers.get(P);cn(P,eA(Z,re),{flushSync:le});let ce=new AbortController,me=Ms(t.history,M,ce.signal,Z);if(ne){let Ge=await er(Q,new URL(me.url).pathname,me.signal,P);if(Ge.type==="aborted")return;if(Ge.type==="error"){In(P,j,Ge.error,{flushSync:le});return}else if(Ge.matches){if(Q=Ge.matches,$=fa(Q,M),X($))return}else{In(P,j,Jt(404,{pathname:M}),{flushSync:le});return}}H.set(P,ce);let ut=ie,xe=(await Xr("action",y,me,[$],Q,P))[$.route.id];if(me.signal.aborted){H.get(P)===ce&&H.delete(P);return}if(m.v7_fetcherPersist&&ke.has(P)){if(as(xe)||pn(xe)){cn(P,si(void 0));return}}else{if(as(xe))if(H.delete(P),ae>ut){cn(P,si(void 0));return}else return he.add(P),cn(P,oa(Z)),un(me,xe,!1,{fetcherSubmission:Z,preventScrollReset:ee});if(pn(xe)){In(P,j,xe.error);return}}if(gi(xe))throw Jt(400,{type:"defer-action"});let Be=y.navigation.location||y.location,_r=Ms(t.history,Be,ce.signal),Jr=l||o,Ln=y.navigation.state!=="idle"?ns(Jr,y.navigation.location,u):y.matches;ye(Ln,"Didn't find any matches after fetcher action");let qt=++ie;ve.set(P,qt);let Ds=oa(Z,xe.data);y.fetchers.set(P,Ds);let[wr,dn]=Ny(t.history,y,Ln,Z,Be,!1,m.v7_skipActionErrorRevalidation,ge,st,Me,ke,_e,he,Jr,u,[$.route.id,xe]);dn.filter(Ge=>Ge.key!==P).forEach(Ge=>{let tr=Ge.key,$o=y.fetchers.get(tr),bl=oa(void 0,$o?$o.data:void 0);y.fetchers.set(tr,bl),jn(tr),Ge.controller&&H.set(tr,Ge.controller)}),ot({fetchers:new Map(y.fetchers)});let Sn=()=>dn.forEach(Ge=>jn(Ge.key));ce.signal.addEventListener("abort",Sn);let{loaderResults:Zr,fetcherResults:Ie}=await gt(y,Ln,wr,dn,_r);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",Sn),ve.delete(P),H.delete(P),dn.forEach(Ge=>H.delete(Ge.key));let $e=ou(Zr);if($e)return un(_r,$e.result,!1,{preventScrollReset:ee});if($e=ou(Ie),$e)return he.add($e.key),un(_r,$e.result,!1,{preventScrollReset:ee});let{loaderData:Er,errors:ei}=Oy(y,Ln,Zr,void 0,dn,Ie,Ue);if(y.fetchers.has(P)){let Ge=si(xe.data);y.fetchers.set(P,Ge)}Cl(qt),y.navigation.state==="loading"&&qt>ae?(ye(v,"Expected pending action"),S&&S.abort(),an(y.navigation.location,{matches:Ln,loaderData:Er,errors:ei,fetchers:new Map(y.fetchers)})):(ot({errors:ei,loaderData:jy(y.loaderData,Er,Ln,ei),fetchers:new Map(y.fetchers)}),ge=!1)}async function Xe(P,j,M,$,Q,ne,le,ee,Z){let X=y.fetchers.get(P);cn(P,oa(Z,X?X.data:void 0),{flushSync:le});let re=new AbortController,ce=Ms(t.history,M,re.signal);if(ne){let xe=await er(Q,new URL(ce.url).pathname,ce.signal,P);if(xe.type==="aborted")return;if(xe.type==="error"){In(P,j,xe.error,{flushSync:le});return}else if(xe.matches)Q=xe.matches,$=fa(Q,M);else{In(P,j,Jt(404,{pathname:M}),{flushSync:le});return}}H.set(P,re);let me=ie,Pe=(await Xr("loader",y,ce,[$],Q,P))[$.route.id];if(gi(Pe)&&(Pe=await jp(Pe,ce.signal,!0)||Pe),H.get(P)===re&&H.delete(P),!ce.signal.aborted){if(ke.has(P)){cn(P,si(void 0));return}if(as(Pe))if(ae>me){cn(P,si(void 0));return}else{he.add(P),await un(ce,Pe,!1,{preventScrollReset:ee});return}if(pn(Pe)){In(P,j,Pe.error);return}ye(!gi(Pe),"Unhandled fetcher deferred data"),cn(P,si(Pe.data))}}async function un(P,j,M,$){let{submission:Q,fetcherSubmission:ne,preventScrollReset:le,replace:ee}=$===void 0?{}:$;j.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let Z=j.response.headers.get("Location");ye(Z,"Expected a Location header on the redirect Response"),Z=Py(Z,new URL(P.url),u,t.history);let X=Xa(y.location,Z,{_isRedirect:!0});if(n){let xe=!1;if(j.response.headers.has("X-Remix-Reload-Document"))xe=!0;else if(Op.test(Z)){const Be=t.history.createURL(Z);xe=Be.origin!==e.location.origin||Ur(Be.pathname,u)==null}if(xe){ee?e.location.replace(Z):e.location.assign(Z);return}}S=null;let re=ee===!0||j.response.headers.has("X-Remix-Replace")?dt.Replace:dt.Push,{formMethod:ce,formAction:me,formEncType:ut}=y.navigation;!Q&&!ne&&ce&&me&&ut&&(Q=Uy(y.navigation));let Pe=Q||ne;if(OR.has(j.response.status)&&Pe&&Bn(Pe.formMethod))await ln(re,X,{submission:Qe({},Pe,{formAction:Z}),preventScrollReset:le||T,enableViewTransition:M?b:void 0});else{let xe=Zd(X,Q);await ln(re,X,{overrideNavigation:xe,fetcherSubmission:ne,preventScrollReset:le||T,enableViewTransition:M?b:void 0})}}async function Xr(P,j,M,$,Q,ne){let le,ee={};try{le=await zR(c,P,j,M,$,Q,ne,s,i)}catch(Z){return $.forEach(X=>{ee[X.route.id]={type:De.error,error:Z}}),ee}for(let[Z,X]of Object.entries(le))if(GR(X)){let re=X.result;ee[Z]={type:De.redirect,response:HR(re,M,Z,Q,u,m.v7_relativeSplatPath)}}else ee[Z]=await WR(X);return ee}async function gt(P,j,M,$,Q){let ne=P.matches,le=Xr("loader",P,Q,M,j,null),ee=Promise.all($.map(async re=>{if(re.matches&&re.match&&re.controller){let me=(await Xr("loader",P,Ms(t.history,re.path,re.controller.signal),[re.match],re.matches,re.key))[re.match.route.id];return{[re.key]:me}}else return Promise.resolve({[re.key]:{type:De.error,error:Jt(404,{pathname:re.path})}})})),Z=await le,X=(await ee).reduce((re,ce)=>Object.assign(re,ce),{});return await Promise.all([XR(j,Z,Q.signal,ne,P.loaderData),JR(j,X,$)]),{loaderResults:Z,fetcherResults:X}}function yt(){ge=!0,st.push(...Gi()),_e.forEach((P,j)=>{H.has(j)&&Me.add(j),jn(j)})}function cn(P,j,M){M===void 0&&(M={}),y.fetchers.set(P,j),ot({fetchers:new Map(y.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function In(P,j,M,$){$===void 0&&($={});let Q=rs(y.matches,j);ks(P),ot({errors:{[Q.route.id]:M},fetchers:new Map(y.fetchers)},{flushSync:($&&$.flushSync)===!0})}function Uo(P){return be.set(P,(be.get(P)||0)+1),ke.has(P)&&ke.delete(P),y.fetchers.get(P)||jR}function ks(P){let j=y.fetchers.get(P);H.has(P)&&!(j&&j.state==="loading"&&ve.has(P))&&jn(P),_e.delete(P),ve.delete(P),he.delete(P),m.v7_fetcherPersist&&ke.delete(P),Me.delete(P),y.fetchers.delete(P)}function qi(P){let j=(be.get(P)||0)-1;j<=0?(be.delete(P),ke.add(P),m.v7_fetcherPersist||ks(P)):be.set(P,j),ot({fetchers:new Map(y.fetchers)})}function jn(P){let j=H.get(P);j&&(j.abort(),H.delete(P))}function Fo(P){for(let j of P){let M=Uo(j),$=si(M.data);y.fetchers.set(j,$)}}function bs(){let P=[],j=!1;for(let M of he){let $=y.fetchers.get(M);ye($,"Expected fetcher: "+M),$.state==="loading"&&(he.delete(M),P.push(M),j=!0)}return Fo(P),j}function Cl(P){let j=[];for(let[M,$]of ve)if($<P){let Q=y.fetchers.get(M);ye(Q,"Expected fetcher: "+M),Q.state==="loading"&&(jn(M),ve.delete(M),j.push(M))}return Fo(j),j.length>0}function _d(P,j){let M=y.blockers.get(P)||sa;return q.get(P)!==j&&q.set(P,j),M}function Ps(P){y.blockers.delete(P),q.delete(P)}function Ki(P,j){let M=y.blockers.get(P)||sa;ye(M.state==="unblocked"&&j.state==="blocked"||M.state==="blocked"&&j.state==="blocked"||M.state==="blocked"&&j.state==="proceeding"||M.state==="blocked"&&j.state==="unblocked"||M.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+j.state);let $=new Map(y.blockers);$.set(P,j),ot({blockers:$})}function Bo(P){let{currentLocation:j,nextLocation:M,historyAction:$}=P;if(q.size===0)return;q.size>1&&Pi(!1,"A router only supports one blocker at a time");let Q=Array.from(q.entries()),[ne,le]=Q[Q.length-1],ee=y.blockers.get(ne);if(!(ee&&ee.state==="proceeding")&&le({currentLocation:j,nextLocation:M,historyAction:$}))return ne}function vr(P){let j=Jt(404,{pathname:P}),M=l||o,{matches:$,route:Q}=Vy(M);return Gi(),{notFoundMatches:$,route:Q,error:j}}function Gi(P){let j=[];return Ue.forEach((M,$)=>{(!P||P($))&&(M.cancel(),j.push($),Ue.delete($))}),j}function zo(P,j,M){if(x=P,k=j,C=M||null,!I&&y.navigation===Jd){I=!0;let $=Qi(y.location,y.matches);$!=null&&ot({restoreScrollPosition:$})}return()=>{x=null,k=null,C=null}}function Zn(P,j){return C&&C(P,j.map($=>dR($,y.loaderData)))||P.key}function Nl(P,j){if(x&&k){let M=Zn(P,j);x[M]=k()}}function Qi(P,j){if(x){let M=Zn(P,j),$=x[M];if(typeof $=="number")return $}return null}function Yi(P,j,M){if(f)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Su(j,M,u,!0)}}else return{active:!0,matches:Su(j,M,u,!0)||[]};return{active:!1,matches:null}}async function er(P,j,M,$){if(!f)return{type:"success",matches:P};let Q=P;for(;;){let ne=l==null,le=l||o,ee=s;try{await f({signal:M,path:j,matches:Q,fetcherKey:$,patch:(re,ce)=>{M.aborted||by(re,ce,le,ee,i)}})}catch(re){return{type:"error",error:re,partialMatches:Q}}finally{ne&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let Z=ns(le,j,u);if(Z)return{type:"success",matches:Z};let X=Su(le,j,u,!0);if(!X||Q.length===X.length&&Q.every((re,ce)=>re.route.id===X[ce].route.id))return{type:"success",matches:null};Q=X}}function kl(P){s={},l=sc(P,i,void 0,s)}function It(P,j){let M=l==null;by(P,j,l||o,s,i),M&&(o=[...o],ot({}))}return B={get basename(){return u},get future(){return m},get state(){return y},get routes(){return o},get window(){return e},initialize:xn,subscribe:Yr,enableScrollRestoration:zo,navigate:yr,fetch:Tn,revalidate:Hi,createHref:P=>t.history.createHref(P),encodeLocation:P=>t.history.encodeLocation(P),getFetcher:Uo,deleteFetcher:qi,dispose:On,getBlocker:_d,deleteBlocker:Ps,patchRoutes:It,_internalFetchControllers:H,_internalActiveDeferreds:Ue,_internalSetRoutes:kl},B}function MR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function cf(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){c=m;break}}else u=e,c=e[e.length-1];let f=Hc(i||".",Wc(u,s),Ur(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c){let m=Lp(f.search);if(c.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let g=new URLSearchParams(f.search),_=g.getAll("index");g.delete("index"),_.filter(C=>C).forEach(C=>g.append("index",C));let x=g.toString();f.search=x?"?"+x:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Dr([n,f.pathname])),ys(f)}function Ay(t,e,n,r){if(!r||!MR(r))return{path:n};if(r.formMethod&&!YR(r.formMethod))return{path:n,error:Jt(405,{method:r.formMethod})};let i=()=>({path:n,error:Jt(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=Vw(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Bn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,x)=>{let[C,k]=x;return""+_+C+"="+k+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Bn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}ye(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=hf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=hf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Dy(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Dy(u)}catch{return i()}let f={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Bn(f.formMethod))return{path:n,submission:f};let m=qr(n);return e&&m.search&&Lp(m.search)&&u.append("index",""),m.search="?"+u,{path:ys(m),submission:f}}function Cy(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Ny(t,e,n,r,i,s,o,l,u,c,f,m,g,_,x,C){let k=C?pn(C[1])?C[1].error:C[1].data:void 0,I=t.createURL(e.location),w=t.createURL(i),A=n;s&&e.errors?A=Cy(n,Object.keys(e.errors)[0],!0):C&&pn(C[1])&&(A=Cy(n,C[0]));let O=C?C[1].statusCode:void 0,V=o&&O&&O>=400,B=A.filter((v,T)=>{let{route:S}=v;if(S.lazy)return!0;if(S.loader==null)return!1;if(s)return df(S,e.loaderData,e.errors);if(UR(e.loaderData,e.matches[T],v)||u.some(R=>R===v.route.id))return!0;let b=e.matches[T],N=v;return ky(v,Qe({currentUrl:I,currentParams:b.params,nextUrl:w,nextParams:N.params},r,{actionResult:k,actionStatus:O,defaultShouldRevalidate:V?!1:l||I.pathname+I.search===w.pathname+w.search||I.search!==w.search||jw(b,N)}))}),y=[];return m.forEach((v,T)=>{if(s||!n.some(oe=>oe.route.id===v.routeId)||f.has(T))return;let S=ns(_,v.path,x);if(!S){y.push({key:T,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let b=e.fetchers.get(T),N=fa(S,v.path),R=!1;g.has(T)?R=!1:c.has(T)?(c.delete(T),R=!0):b&&b.state!=="idle"&&b.data===void 0?R=l:R=ky(N,Qe({currentUrl:I,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:k,actionStatus:O,defaultShouldRevalidate:V?!1:l})),R&&y.push({key:T,routeId:v.routeId,path:v.path,matches:S,match:N,controller:new AbortController})}),[B,y]}function df(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function UR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function jw(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function ky(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function by(t,e,n,r,i){var s;let o;if(t){let c=r[t];ye(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(f=>Lw(c,f))),u=sc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function Lw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>Lw(n,s))}):!1}async function FR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ye(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";Pi(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!uR.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Qe({},e(i),{lazy:void 0}))}async function BR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function zR(t,e,n,r,i,s,o,l,u,c){let f=s.map(_=>_.route.lazy?FR(_.route,u,l):void 0),m=s.map((_,x)=>{let C=f[x],k=i.some(w=>w.route.id===_.route.id);return Qe({},_,{shouldLoad:k,resolve:async w=>(w&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(k=!0),k?$R(e,r,_,C,w,c):Promise.resolve({type:De.data,result:void 0}))})}),g=await t({matches:m,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(f)}catch{}return g}async function $R(t,e,n,r,i,s){let o,l,u=c=>{let f,m=new Promise((x,C)=>f=C);l=()=>f(),e.signal.addEventListener("abort",l);let g=x=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...x!==void 0?[x]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(C=>g(C)):g())}}catch(x){return{type:"error",result:x}}})();return Promise.race([_,m])};try{let c=n.route[t];if(r)if(c){let f,[m]=await Promise.all([u(c).catch(g=>{f=g}),r]);if(f!==void 0)throw f;o=m}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let f=new URL(e.url),m=f.pathname+f.search;throw Jt(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:De.data,result:void 0};else if(c)o=await u(c);else{let f=new URL(e.url),m=f.pathname+f.search;throw Jt(404,{pathname:m})}ye(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:De.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function WR(t){let{result:e,type:n}=t;if(Mw(e)){let m;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(g){return{type:De.error,error:g}}return n===De.error?{type:De.error,error:new ac(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:De.data,data:m,statusCode:e.status,headers:e.headers}}if(n===De.error){if(My(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:De.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:De.error,error:new ac(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Ja(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:De.error,error:e,statusCode:Ja(e)?e.status:void 0}}if(QR(e)){var l,u;return{type:De.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(My(e)){var c,f;return{type:De.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:De.data,data:e}}function HR(t,e,n,r,i,s){let o=t.headers.get("Location");if(ye(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Op.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=cf(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function Py(t,e,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Op.test(t)){let s=t,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s);if(i.includes(o.protocol))throw new Error("Invalid redirect location");let l=Ur(o.pathname,n)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}try{let s=r.createURL(t);if(i.includes(s.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Ms(t,e,n,r){let i=t.createURL(Vw(e)).toString(),s={signal:n};if(r&&Bn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=hf(r.formData):s.body=r.formData}return new Request(i,s)}function hf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Dy(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function qR(t,e,n,r,i){let s={},o=null,l,u=!1,c={},f=n&&pn(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let g=m.route.id,_=e[g];if(ye(!as(_),"Cannot handle redirect results in processLoaderData"),pn(_)){let x=_.error;f!==void 0&&(x=f,f=void 0),o=o||{};{let C=rs(t,g);o[C.route.id]==null&&(o[C.route.id]=x)}s[g]=void 0,u||(u=!0,l=Ja(_.error)?_.error.status:500),_.headers&&(c[g]=_.headers)}else gi(_)?(r.set(g,_.deferredData),s[g]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!u&&(l=_.statusCode),_.headers&&(c[g]=_.headers)):(s[g]=_.data,_.statusCode&&_.statusCode!==200&&!u&&(l=_.statusCode),_.headers&&(c[g]=_.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function Oy(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=qR(e,n,r,o);return i.forEach(c=>{let{key:f,match:m,controller:g}=c,_=s[f];if(ye(_,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(pn(_)){let x=rs(t.matches,m==null?void 0:m.route.id);u&&u[x.route.id]||(u=Qe({},u,{[x.route.id]:_.error})),t.fetchers.delete(f)}else if(as(_))ye(!1,"Unhandled fetcher revalidation redirect");else if(gi(_))ye(!1,"Unhandled fetcher deferred data");else{let x=si(_.data);t.fetchers.set(f,x)}}),{loaderData:l,errors:u}}function jy(t,e,n,r){let i=Qe({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Ly(t){return t?pn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function rs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Vy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Jt(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new ac(t||500,l,new Error(u),!0)}function ou(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(as(i))return{key:r,result:i}}}function Vw(t){let e=typeof t=="string"?qr(t):t;return ys(Qe({},e,{hash:""}))}function KR(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function GR(t){return Mw(t.result)&&DR.has(t.result.status)}function gi(t){return t.type===De.deferred}function pn(t){return t.type===De.error}function as(t){return(t&&t.type)===De.redirect}function My(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function QR(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Mw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function YR(t){return PR.has(t.toLowerCase())}function Bn(t){return kR.has(t.toLowerCase())}async function XR(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=r.find(g=>g.route.id===c.route.id),m=f!=null&&!jw(f,c)&&(i&&i[c.route.id])!==void 0;gi(u)&&m&&await jp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function JR(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&gi(l)&&(ye(o,"Expected an AbortController for revalidating fetcher deferred result"),await jp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function jp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:De.data,data:t.deferredData.unwrappedData}}catch(i){return{type:De.error,error:i}}return{type:De.data,data:t.deferredData.data}}}function Lp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function fa(t,e){let n=typeof e=="string"?qr(e).search:e.search;if(t[t.length-1].route.index&&Lp(n||""))return t[t.length-1];let r=Pw(t);return r[r.length-1]}function Uy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Zd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ZR(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function oa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function eA(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function si(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function tA(t,e){try{let n=t.sessionStorage.getItem(Ow);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function nA(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Ow,JSON.stringify(n))}catch(r){Pi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lc.apply(this,arguments)}const ml=D.createContext(null),Vp=D.createContext(null),Kr=D.createContext(null),Mp=D.createContext(null),pr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Uw=D.createContext(null);function rA(t,e){let{relative:n}=e===void 0?{}:e;Po()||ye(!1);let{basename:r,navigator:i}=D.useContext(Kr),{hash:s,pathname:o,search:l}=qc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Dr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Po(){return D.useContext(Mp)!=null}function Fi(){return Po()||ye(!1),D.useContext(Mp).location}function Fw(t){D.useContext(Kr).static||D.useLayoutEffect(t)}function Bi(){let{isDataRoute:t}=D.useContext(pr);return t?yA():iA()}function iA(){Po()||ye(!1);let t=D.useContext(ml),{basename:e,future:n,navigator:r}=D.useContext(Kr),{matches:i}=D.useContext(pr),{pathname:s}=Fi(),o=JSON.stringify(Wc(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return Fw(()=>{l.current=!0}),D.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=Hc(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Dr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,t])}const sA=D.createContext(null);function oA(t){let e=D.useContext(pr).outlet;return e&&D.createElement(sA.Provider,{value:t},e)}function Up(){let{matches:t}=D.useContext(pr),e=t[t.length-1];return e?e.params:{}}function qc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Kr),{matches:i}=D.useContext(pr),{pathname:s}=Fi(),o=JSON.stringify(Wc(i,r.v7_relativeSplatPath));return D.useMemo(()=>Hc(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function aA(t,e,n,r){Po()||ye(!1);let{navigator:i}=D.useContext(Kr),{matches:s}=D.useContext(pr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Fi(),f;f=c;let m=f.pathname||"/",g=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=ns(t,{pathname:g});return hA(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Dr([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Dr([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r)}function lA(){let t=gA(),e=Ja(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const uA=D.createElement(lA,null);class cA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(pr.Provider,{value:this.props.routeContext},D.createElement(Uw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dA(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(ml);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(pr.Provider,{value:e},r)}function hA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||ye(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=f),m.route.id){let{loaderData:g,errors:_}=n,x=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||x){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let _,x=!1,C=null,k=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||uA,u&&(c<0&&g===0?(vA("route-fallback"),x=!0,k=null):c===g&&(x=!0,k=m.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,g+1)),w=()=>{let A;return _?A=C:x?A=k:m.route.Component?A=D.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=f,D.createElement(dA,{match:m,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(cA,{location:n.location,revalidation:n.revalidation,component:C,error:_,children:w(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):w()},null)}var Bw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bw||{}),zw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zw||{});function fA(t){let e=D.useContext(ml);return e||ye(!1),e}function pA(t){let e=D.useContext(Vp);return e||ye(!1),e}function mA(t){let e=D.useContext(pr);return e||ye(!1),e}function $w(t){let e=mA(),n=e.matches[e.matches.length-1];return n.route.id||ye(!1),n.route.id}function gA(){var t;let e=D.useContext(Uw),n=pA(zw.UseRouteError),r=$w();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yA(){let{router:t}=fA(Bw.UseNavigateStable),e=$w(),n=D.useRef(!1);return Fw(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lc({fromRouteId:e},s)))},[t,e])}const Fy={};function vA(t,e,n){Fy[t]||(Fy[t]=!0)}function _A(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function _o(t){let{to:e,replace:n,state:r,relative:i}=t;Po()||ye(!1);let{future:s,static:o}=D.useContext(Kr),{matches:l}=D.useContext(pr),{pathname:u}=Fi(),c=Bi(),f=Hc(e,Wc(l,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return D.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:i}),[c,m,i,n,r]),null}function wA(t){return oA(t.context)}function EA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dt.Pop,navigator:s,static:o=!1,future:l}=t;Po()&&ye(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:lc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=qr(r));let{pathname:f="/",search:m="",hash:g="",state:_=null,key:x="default"}=r,C=D.useMemo(()=>{let k=Ur(f,u);return k==null?null:{location:{pathname:k,search:m,hash:g,state:_,key:x},navigationType:i}},[u,f,m,g,_,x,i]);return C==null?null:D.createElement(Kr.Provider,{value:c},D.createElement(Mp.Provider,{children:n,value:C}))}new Promise(()=>{});function xA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wo.apply(this,arguments)}function Ww(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IA(t,e){return t.button===0&&(!e||e==="_self")&&!TA(t)}const SA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],AA="6";try{window.__reactRouterVersion=AA}catch{}function CA(t,e){return VR({basename:void 0,future:wo({},void 0,{v7_prependBasename:!0}),history:oR({window:void 0}),hydrationData:NA(),routes:t,mapRouteProperties:xA,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function NA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=wo({},e,{errors:kA(e.errors)})),e}function kA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ac(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const Hw=D.createContext({isTransitioning:!1}),bA=D.createContext(new Map),PA="startTransition",By=KT[PA],DA="flushSync",zy=sR[DA];function OA(t){By?By(t):t()}function aa(t){zy?zy(t):t()}let jA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function LA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,l]=D.useState(),[u,c]=D.useState({isTransitioning:!1}),[f,m]=D.useState(),[g,_]=D.useState(),[x,C]=D.useState(),k=D.useRef(new Map),{v7_startTransition:I}=r||{},w=D.useCallback(v=>{I?OA(v):v()},[I]),A=D.useCallback((v,T)=>{let{deletedFetchers:S,flushSync:b,viewTransitionOpts:N}=T;v.fetchers.forEach((oe,ge)=>{oe.data!==void 0&&k.current.set(ge,oe.data)}),S.forEach(oe=>k.current.delete(oe));let R=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||R){b?aa(()=>s(v)):w(()=>s(v));return}if(b){aa(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let oe=n.window.document.startViewTransition(()=>{aa(()=>s(v))});oe.finished.finally(()=>{aa(()=>{m(void 0),_(void 0),l(void 0),c({isTransitioning:!1})})}),aa(()=>_(oe));return}g?(f&&f.resolve(),g.skipTransition(),C({state:v,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,g,f,k,w]);D.useLayoutEffect(()=>n.subscribe(A),[n,A]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new jA)},[u]),D.useEffect(()=>{if(f&&o&&n.window){let v=o,T=f.promise,S=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await T});S.finished.finally(()=>{m(void 0),_(void 0),l(void 0),c({isTransitioning:!1})}),_(S)}},[w,o,f,n.window]),D.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,g,i.location,o]),D.useEffect(()=>{!u.isTransitioning&&x&&(l(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),C(void 0))},[u.isTransitioning,x]),D.useEffect(()=>{},[]);let O=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,T,S)=>n.navigate(v,{state:T,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(v,T,S)=>n.navigate(v,{replace:!0,state:T,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),V=n.basename||"/",B=D.useMemo(()=>({router:n,navigator:O,static:!1,basename:V}),[n,O,V]),y=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.useEffect(()=>_A(r,n.future),[r,n.future]),D.createElement(D.Fragment,null,D.createElement(ml.Provider,{value:B},D.createElement(Vp.Provider,{value:i},D.createElement(bA.Provider,{value:k.current},D.createElement(Hw.Provider,{value:u},D.createElement(EA,{basename:V,location:i.location,navigationType:i.historyAction,navigator:O,future:y},i.initialized||n.future.v7_partialHydration?D.createElement(VA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const VA=D.memo(MA);function MA(t){let{routes:e,future:n,state:r}=t;return aA(e,void 0,r,n)}const UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bt=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:m}=e,g=Ww(e,SA),{basename:_}=D.useContext(Kr),x,C=!1;if(typeof c=="string"&&FA.test(c)&&(x=c,UA))try{let A=new URL(window.location.href),O=c.startsWith("//")?new URL(A.protocol+c):new URL(c),V=Ur(O.pathname,_);O.origin===A.origin&&V!=null?c=V+O.search+O.hash:C=!0}catch{}let k=rA(c,{relative:i}),I=zA(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:m});function w(A){r&&r(A),A.defaultPrevented||I(A)}return D.createElement("a",wo({},g,{href:x||k,onClick:C||s?r:w,ref:n,target:u}))}),uc=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:f}=e,m=Ww(e,RA),g=qc(u,{relative:m.relative}),_=Fi(),x=D.useContext(Vp),{navigator:C,basename:k}=D.useContext(Kr),I=x!=null&&$A(g)&&c===!0,w=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,A=_.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(A=A.toLowerCase(),O=O?O.toLowerCase():null,w=w.toLowerCase()),O&&k&&(O=Ur(O,k)||O);const V=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let B=A===w||!o&&A.startsWith(w)&&A.charAt(V)==="/",y=O!=null&&(O===w||!o&&O.startsWith(w)&&O.charAt(w.length)==="/"),v={isActive:B,isPending:y,isTransitioning:I},T=B?r:void 0,S;typeof s=="function"?S=s(v):S=[s,B?"active":null,y?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let b=typeof l=="function"?l(v):l;return D.createElement(Bt,wo({},m,{"aria-current":T,className:S,ref:n,style:b,to:u,viewTransition:c}),typeof f=="function"?f(v):f)});var ff;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ff||(ff={}));var $y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($y||($y={}));function BA(t){let e=D.useContext(ml);return e||ye(!1),e}function zA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Bi(),c=Fi(),f=qc(t,{relative:o});return D.useCallback(m=>{if(IA(m,n)){m.preventDefault();let g=r!==void 0?r:ys(c)===ys(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,f,r,i,n,t,s,o,l])}function $A(t,e){e===void 0&&(e={});let n=D.useContext(Hw);n==null&&ye(!1);let{basename:r}=BA(ff.useViewTransitionState),i=qc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ur(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ur(n.nextLocation.pathname,r)||n.nextLocation.pathname;return oc(i.pathname,o)!=null||oc(i.pathname,s)!=null}var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,o||(g=64)),r.push(n[f],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new HA;const g=s<<2|l>>4;if(r.push(g),c!==64){const _=l<<4&240|c>>2;if(r.push(_),m!==64){const x=c<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qA=function(t){const e=qw(t);return Kw.encodeByteArray(e,!0)},cc=function(t){return qA(t).replace(/\./g,"")},Gw=function(t){try{return Kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=()=>KA().__FIREBASE_DEFAULTS__,QA=()=>{if(typeof process>"u"||typeof Wy>"u")return;const t=Wy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gw(t[1]);return e&&JSON.parse(e)},Kc=()=>{try{return GA()||QA()||YA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qw=t=>{var e,n;return(n=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yw=t=>{const e=Qw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xw=()=>{var t;return(t=Kc())===null||t===void 0?void 0:t.config},Jw=t=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cc(JSON.stringify(n)),cc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function ZA(){var t;const e=(t=Kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rC(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iC(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function oC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aC,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new mr(i,l,r)}}function lC(t,e){return t.replace(uC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uC=/\{\$([^}]+)}/g;function cC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Hy(s)&&Hy(o)){if(!dc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ma(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dC(t,e){const n=new hC(t,e);return n.subscribe.bind(n)}class hC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new XA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gC(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mC(t){return t===ts?void 0:t}function gC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const vC={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},_C=Te.INFO,wC={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},EC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=_C,this._logHandler=EC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const xC=(t,e)=>e.some(n=>t instanceof n);let qy,Ky;function TC(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IC(){return Ky||(Ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,pf=new WeakMap,tE=new WeakMap,th=new WeakMap,Bp=new WeakMap;function SC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,t)}).catch(()=>{}),Bp.set(e,t),e}function RC(t){if(pf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pf.set(t,e)}let mf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AC(t){mf=t(mf)}function CC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return tE.set(r,e.sort?e.sort():[e]),Ri(r)}:IC().includes(t)?function(...e){return t.apply(nh(this),e),Ri(eE.get(this))}:function(...e){return Ri(t.apply(nh(this),e))}}function NC(t){return typeof t=="function"?CC(t):(t instanceof IDBTransaction&&RC(t),xC(t,TC())?new Proxy(t,mf):t)}function Ri(t){if(t instanceof IDBRequest)return SC(t);if(th.has(t))return th.get(t);const e=NC(t);return e!==t&&(th.set(t,e),Bp.set(e,t)),e}const nh=t=>Bp.get(t);function kC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ri(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ri(o.result),u.oldVersion,u.newVersion,Ri(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const bC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],rh=new Map;function Gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bC.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return rh.set(e,s),s}AC(t=>({...t,get:(e,n,r)=>Gy(e,n)||t.get(e,n,r),has:(e,n)=>!!Gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gf="@firebase/app",Qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Fp("@firebase/app"),jC="@firebase/app-compat",LC="@firebase/analytics-compat",VC="@firebase/analytics",MC="@firebase/app-check-compat",UC="@firebase/app-check",FC="@firebase/auth",BC="@firebase/auth-compat",zC="@firebase/database",$C="@firebase/data-connect",WC="@firebase/database-compat",HC="@firebase/functions",qC="@firebase/functions-compat",KC="@firebase/installations",GC="@firebase/installations-compat",QC="@firebase/messaging",YC="@firebase/messaging-compat",XC="@firebase/performance",JC="@firebase/performance-compat",ZC="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",rN="@firebase/firestore",iN="@firebase/vertexai-preview",sN="@firebase/firestore-compat",oN="firebase",aN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="[DEFAULT]",lN={[gf]:"fire-core",[jC]:"fire-core-compat",[VC]:"fire-analytics",[LC]:"fire-analytics-compat",[UC]:"fire-app-check",[MC]:"fire-app-check-compat",[FC]:"fire-auth",[BC]:"fire-auth-compat",[zC]:"fire-rtdb",[$C]:"fire-data-connect",[WC]:"fire-rtdb-compat",[HC]:"fire-fn",[qC]:"fire-fn-compat",[KC]:"fire-iid",[GC]:"fire-iid-compat",[QC]:"fire-fcm",[YC]:"fire-fcm-compat",[XC]:"fire-perf",[JC]:"fire-perf-compat",[ZC]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[rN]:"fire-fst",[sN]:"fire-fst-compat",[iN]:"fire-vertex","fire-js":"fire-js",[oN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,uN=new Map,vf=new Map;function Yy(t,e){try{t.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vs(t){const e=t.name;if(vf.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;vf.set(e,t);for(const n of hc.values())Yy(n,t);for(const n of uN.values())Yy(n,t);return!0}function Gc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new gl("app","Firebase",cN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=aN;function nE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ai.create("bad-app-name",{appName:String(i)});if(n||(n=Xw()),!n)throw Ai.create("no-options");const s=hc.get(i);if(s){if(dc(n,s.options)&&dc(r,s.config))return s;throw Ai.create("duplicate-app",{appName:i})}const o=new yC(i);for(const u of vf.values())o.addComponent(u);const l=new dN(n,r,o);return hc.set(i,l),l}function zp(t=yf){const e=hc.get(t);if(!e&&t===yf&&Xw())return nE();if(!e)throw Ai.create("no-app",{appName:t});return e}function ar(t,e,n){var r;let i=(r=lN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(l.join(" "));return}vs(new Di(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebase-heartbeat-database",fN=1,Za="firebase-heartbeat-store";let ih=null;function rE(){return ih||(ih=kC(hN,fN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ai.create("idb-open",{originalErrorMessage:t.message})})),ih}async function pN(t){try{const n=(await rE()).transaction(Za),r=await n.objectStore(Za).get(iE(t));return await n.done,r}catch(e){if(e instanceof mr)Fr.warn(e.message);else{const n=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(n.message)}}}async function Xy(t,e){try{const r=(await rE()).transaction(Za,"readwrite");await r.objectStore(Za).put(e,iE(t)),await r.done}catch(n){if(n instanceof mr)Fr.warn(n.message);else{const r=Ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fr.warn(r.message)}}}function iE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1024,gN=30*24*60*60*1e3;class yN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _N(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=gN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:r,unsentEntries:i}=vN(this._heartbeatsCache.heartbeats),s=cc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fr.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function vN(t,e=mN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Zy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?oC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zy(t){return cc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){vs(new Di("platform-logger",e=>new DC(e),"PRIVATE")),vs(new Di("heartbeat",e=>new yN(e),"PRIVATE")),ar(gf,Qy,t),ar(gf,Qy,"esm2017"),ar("fire-js","")}wN("");function $p(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EN=sE,oE=new gl("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Fp("@firebase/auth");function xN(t,...e){fc.logLevel<=Te.WARN&&fc.warn(`Auth (${Ss}): ${t}`,...e)}function Ru(t,...e){fc.logLevel<=Te.ERROR&&fc.error(`Auth (${Ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,...e){throw Wp(t,...e)}function lr(t,...e){return Wp(t,...e)}function aE(t,e,n){const r=Object.assign(Object.assign({},EN()),{[e]:n});return new gl("auth","Firebase",r).create(e,{appName:t.name})}function Ci(t){return aE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oE.create(t,...e)}function ue(t,e,...n){if(!t)throw Wp(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ru(e),new Error(e)}function Br(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TN(){return ev()==="http:"||ev()==="https:"}function ev(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TN()||tC()||"connection"in navigator)?navigator.onLine:!0}function SN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=JA()||nC()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new vl(3e4,6e4);function Rs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zi(t,e,n,r,i={}){return uE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=yl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return eC()||(c.referrerPolicy="no-referrer"),lE.fetch()(cE(t,t.config.apiHost,n,l),c)})}async function uE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},RN),e);try{const i=new NN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw au(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw au(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw au(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw au(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw aE(t,f,c);Gn(t,f)}}catch(i){if(i instanceof mr)throw i;Gn(t,"network-request-failed",{message:String(i)})}}async function Qc(t,e,n,r,i={}){const s=await zi(t,e,n,r,i);return"mfaPendingCredential"in s&&Gn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hp(t.config,i):`${t.config.apiScheme}://${i}`}function CN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),AN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function au(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lr(t,e,r);return i.customData._tokenResponse=n,i}function tv(t){return t!==void 0&&t.enterprise!==void 0}class kN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bN(t,e){return zi(t,"GET","/v2/recaptchaConfig",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return zi(t,"POST","/v1/accounts:delete",e)}async function dE(t,e){return zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DN(t,e=!1){const n=pt(t),r=await n.getIdToken(e),i=qp(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Na(sh(i.auth_time)),issuedAtTime:Na(sh(i.iat)),expirationTime:Na(sh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function qp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gw(n);return i?JSON.parse(i):(Ru("Failed to decode base64 JWT payload"),null)}catch(i){return Ru("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nv(t){const e=qp(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&ON(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ON({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await el(t,dE(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hE(s.providerUserInfo):[],l=VN(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new wf(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function LN(t){const e=pt(t);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hE(t){return t.map(e=>{var{providerId:n}=e,r=$p(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){const n=await uE(t,{},async()=>{const r=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",lE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UN(t,e){return zi(t,"POST","/v2/accounts:revokeToken",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await MN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$p(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await el(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DN(this,e)}reload(){return LN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await el(this,PN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:O,isAnonymous:V,providerData:B,stsTokenManager:y}=n;ue(A&&y,e,"internal-error");const v=ao.fromJSON(this.name,y);ue(typeof A=="string",e,"internal-error"),ii(m,e.name),ii(g,e.name),ue(typeof O=="boolean",e,"internal-error"),ue(typeof V=="boolean",e,"internal-error"),ii(_,e.name),ii(x,e.name),ii(C,e.name),ii(k,e.name),ii(I,e.name),ii(w,e.name);const T=new kr({uid:A,auth:e,email:g,emailVerified:O,displayName:m,isAnonymous:V,photoURL:x,phoneNumber:_,tenantId:C,stsTokenManager:v,createdAt:I,lastLoginAt:w});return B&&Array.isArray(B)&&(T.providerData=B.map(S=>Object.assign({},S))),k&&(T._redirectEventId=k),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new kr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?hE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ao;l.updateFromIdToken(r);const u=new kr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;function br(t){Br(t instanceof Function,"Expected a class definition");let e=rv.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const iv=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,s),this.fullPersistenceKey=Au("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(br(iv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||br(iv);const o=Au(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const m=kr._fromJSON(e,f);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lo(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(wE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(vE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pE(t=Ht()){return/firefox\//i.test(t)}function mE(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(t=Ht()){return/crios\//i.test(t)}function yE(t=Ht()){return/iemobile/i.test(t)}function vE(t=Ht()){return/android/i.test(t)}function _E(t=Ht()){return/blackberry/i.test(t)}function wE(t=Ht()){return/webos/i.test(t)}function Kp(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FN(t=Ht()){var e;return Kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BN(){return rC()&&document.documentMode===10}function EE(t=Ht()){return Kp(t)||vE(t)||wE(t)||_E(t)||/windows phone/i.test(t)||yE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e=[]){let n;switch(t){case"Browser":n=sv(Ht());break;case"Worker":n=`${sv(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e={}){return zi(t,"GET","/v2/passwordPolicy",Rs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=6;class HN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ov(this),this.idTokenSubscription=new ov(this),this.beforeStateQueue=new zN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dE(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Ci(this));const n=e?pt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $N(this),n=new HN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Do(t){return pt(t)}class ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=dC(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KN(t){Yc=t}function TE(t){return Yc.loadJS(t)}function GN(){return Yc.recaptchaEnterpriseScript}function QN(){return Yc.gapiScript}function YN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const XN="recaptcha-enterprise",JN="NO_RECAPTCHA";class ZN{constructor(e){this.type=XN,this.auth=Do(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{bN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new kN(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;tv(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(JN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&tv(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=GN();u.length!==0&&(u+=l),TE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function av(t,e,n,r=!1){const i=new ZN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lv(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await av(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await av(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,e){const n=Gc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(dc(s,e??{}))return i;Gn(i,"already-initialized")}return n.initialize({options:e})}function tk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nk(t,e,n){const r=Do(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=IE(e),{host:o,port:l}=rk(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ik()}function IE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rk(t){const e=IE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uv(o)}}}function uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ik(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function sk(t,e){return zi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e){return Qc(t,"POST","/v1/accounts:signInWithPassword",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e){return Qc(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}async function lk(t,e){return Qc(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Gp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,n,"signInWithPassword",ok);case"emailLink":return ak(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,r,"signUpPassword",sk);case"emailLink":return lk(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return Qc(t,"POST","/v1/accounts:signInWithIdp",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="http://localhost";class _s extends Gp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$p(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _s(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:uk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dk(t){const e=pa(ma(t)).link,n=e?pa(ma(e)).deep_link_id:null,r=pa(ma(t)).deep_link_id;return(r?pa(ma(r)).link:null)||r||n||e||t}class Qp{constructor(e){var n,r,i,s,o,l;const u=pa(ma(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=ck((i=u.mode)!==null&&i!==void 0?i:null);ue(c&&f&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=dk(e);try{return new Qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return tl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qp.parseLink(n);return ue(r,"argument-error"),tl._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends SE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends _l{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return di.credential(n,r)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends _l{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends _l{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await kr._fromIdTokenResponse(e,r,i),o=cv(r);return new Eo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cv(r);return new Eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends mr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new mc(e,n,r,i)}}function RE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(t,s,e,r):s})}async function hk(t,e,n=!1){const r=await el(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e,n=!1){const{auth:r}=t;if(Cr(r.app))return Promise.reject(Ci(r));const i="reauthenticate";try{const s=await el(t,RE(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=qp(s.idToken);ue(o,r,"internal-error");const{sub:l}=o;return ue(t.uid===l,r,"user-mismatch"),Eo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(t,e,n=!1){if(Cr(t.app))return Promise.reject(Ci(t));const r="signIn",i=await RE(t,r,e),s=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function pk(t,e){return AE(Do(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t){const e=Do(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function gk(t,e,n){return Cr(t.app)?Promise.reject(Ci(t)):pk(pt(t),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mk(t),r})}function yk(t,e,n,r){return pt(t).onIdTokenChanged(e,n,r)}function vk(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function _k(t,e,n,r){return pt(t).onAuthStateChanged(e,n,r)}function wk(t){return pt(t).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=1e3,xk=10;class NE extends CE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);BN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xk):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const Tk=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends CE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kE.type="SESSION";const bE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await Ik(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Yp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function Rk(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function Ak(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ck(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Nk(){return PE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebaseLocalStorageDb",kk=1,yc="firebaseLocalStorage",OE="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(t,e){return t.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function bk(){const t=indexedDB.deleteDatabase(DE);return new wl(t).toPromise()}function Ef(){const t=indexedDB.open(DE,kk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yc,{keyPath:OE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yc)?e(r):(r.close(),await bk(),e(await Ef()))})})}async function dv(t,e,n){const r=Jc(t,!0).put({[OE]:e,value:n});return new wl(r).toPromise()}async function Pk(t,e){const n=Jc(t,!1).get(e),r=await new wl(n).toPromise();return r===void 0?null:r.value}function hv(t,e){const n=Jc(t,!0).delete(e);return new wl(n).toPromise()}const Dk=800,Ok=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ef(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ok)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(Nk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ak(),!this.activeServiceWorker)return;this.sender=new Sk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ck()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ef();return await dv(e,gc,"1"),await hv(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Pk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Jc(i,!1).getAll();return new wl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const jk=jE;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e){return e?br(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends Gp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vk(t){return AE(t.auth,new Xp(t),t.bypassAuthState)}function Mk(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),fk(n,new Xp(t),t.bypassAuthState)}async function Uk(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),hk(n,new Xp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vk;case"linkViaPopup":case"linkViaRedirect":return Uk;case"reauthViaPopup":case"reauthViaRedirect":return Mk;default:Gn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new vl(2e3,1e4);class eo extends LE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fk.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="pendingRedirect",Cu=new Map;class zk extends LE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await $k(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $k(t,e){const n=qk(e),r=Hk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Wk(t,e){Cu.set(t._key(),e)}function Hk(t){return br(t._redirectPersistence)}function qk(t){return Au(Bk,t.config.apiKey,t.name)}async function Kk(t,e,n=!1){if(Cr(t.app))return Promise.reject(Ci(t));const r=Do(t),i=Lk(r,e),o=await new zk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=10*60*1e3;class Qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(fv(e))}saveEventToCache(e){this.cachedEventUids.add(fv(e)),this.lastProcessedEventTime=Date.now()}}function fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Yk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,e={}){return zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zk=/^https?/;async function e1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xk(t);for(const n of e)try{if(t1(n))return}catch{}Gn(t,"unauthorized-domain")}function t1(t){const e=_f(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Zk.test(n))return!1;if(Jk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new vl(3e4,6e4);function pv(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r1(t){return new Promise((e,n)=>{var r,i,s;function o(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(lr(t,"network-request-failed"))},timeout:n1.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const l=YN("iframefcb");return ur()[l]=()=>{gapi.load?o():n(lr(t,"network-request-failed"))},TE(`${QN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function i1(t){return Nu=Nu||r1(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new vl(5e3,15e3),o1="__/auth/iframe",a1="emulator/auth/iframe",l1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c1(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hp(e,a1):`https://${t.config.authDomain}/${o1}`,r={apiKey:e.apiKey,appName:t.name,v:Ss},i=u1.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yl(r).slice(1)}`}async function d1(t){const e=await i1(t),n=ur().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:c1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l1,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=lr(t,"network-request-failed"),l=ur().setTimeout(()=>{s(o)},s1.get());function u(){ur().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f1=500,p1=600,m1="_blank",g1="http://localhost";class mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y1(t,e,n,r=f1,i=p1){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},h1),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ht().toLowerCase();n&&(l=gE(c)?m1:n),pE(c)&&(e=e||g1,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,x])=>`${g}${_}=${x},`,"");if(FN(c)&&l!=="_self")return v1(e||"",l),new mv(null);const m=window.open(e||"",l,f);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new mv(m)}function v1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__/auth/handler",w1="emulator/auth/handler",E1=encodeURIComponent("fac");async function gv(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ss,eventId:i};if(e instanceof SE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof _l){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${E1}=${encodeURIComponent(u)}`:"";return`${x1(t)}?${yl(l).slice(1)}${c}`}function x1({config:t}){return t.emulator?Hp(t,w1):`https://${t.authDomain}/${_1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="webStorageSupport";class T1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bE,this._completeRedirectFn=Kk,this._overrideRedirectResult=Wk}async _openPopup(e,n,r,i){var s;Br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gv(e,n,r,_f(),i);return y1(e,o,Yp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gv(e,n,r,_f(),i);return Rk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await d1(e),r=new Qk(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(oh,{type:oh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[oh];o!==void 0&&n(!!o),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||Kp()}}const I1=T1;var yv="@firebase/auth",vv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A1(t){vs(new Di("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(t)},c=new qN(r,i,s,u);return tk(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vs(new Di("auth-internal",e=>{const n=Do(e.getProvider("auth").getImmediate());return(r=>new S1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(yv,vv,R1(t)),ar(yv,vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=5*60,N1=Jw("authIdTokenMaxAge")||C1;let _v=null;const k1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>N1)return;const i=n==null?void 0:n.token;_v!==i&&(_v=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function b1(t=zp()){const e=Gc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ek(t,{popupRedirectResolver:I1,persistence:[jk,Tk,bE]}),r=Jw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=k1(s.toString());vk(n,o,()=>o(n.currentUser)),yk(n,l=>o(l))}}const i=Qw("auth");return i&&nk(n,`http://${i}`),n}function P1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=lr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",P1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A1("Browser");var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,ME;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function T(){}T.prototype=v.prototype,y.D=v.prototype,y.prototype=new T,y.prototype.constructor=y,y.C=function(S,b,N){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return v.prototype[b].apply(S,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,T){T||(T=0);var S=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)S[b]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(b=0;16>b;++b)S[b]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=y.g[0],T=y.g[1],b=y.g[2];var N=y.g[3],R=v+(N^T&(b^N))+S[0]+3614090360&4294967295;v=T+(R<<7&4294967295|R>>>25),R=N+(b^v&(T^b))+S[1]+3905402710&4294967295,N=v+(R<<12&4294967295|R>>>20),R=b+(T^N&(v^T))+S[2]+606105819&4294967295,b=N+(R<<17&4294967295|R>>>15),R=T+(v^b&(N^v))+S[3]+3250441966&4294967295,T=b+(R<<22&4294967295|R>>>10),R=v+(N^T&(b^N))+S[4]+4118548399&4294967295,v=T+(R<<7&4294967295|R>>>25),R=N+(b^v&(T^b))+S[5]+1200080426&4294967295,N=v+(R<<12&4294967295|R>>>20),R=b+(T^N&(v^T))+S[6]+2821735955&4294967295,b=N+(R<<17&4294967295|R>>>15),R=T+(v^b&(N^v))+S[7]+4249261313&4294967295,T=b+(R<<22&4294967295|R>>>10),R=v+(N^T&(b^N))+S[8]+1770035416&4294967295,v=T+(R<<7&4294967295|R>>>25),R=N+(b^v&(T^b))+S[9]+2336552879&4294967295,N=v+(R<<12&4294967295|R>>>20),R=b+(T^N&(v^T))+S[10]+4294925233&4294967295,b=N+(R<<17&4294967295|R>>>15),R=T+(v^b&(N^v))+S[11]+2304563134&4294967295,T=b+(R<<22&4294967295|R>>>10),R=v+(N^T&(b^N))+S[12]+1804603682&4294967295,v=T+(R<<7&4294967295|R>>>25),R=N+(b^v&(T^b))+S[13]+4254626195&4294967295,N=v+(R<<12&4294967295|R>>>20),R=b+(T^N&(v^T))+S[14]+2792965006&4294967295,b=N+(R<<17&4294967295|R>>>15),R=T+(v^b&(N^v))+S[15]+1236535329&4294967295,T=b+(R<<22&4294967295|R>>>10),R=v+(b^N&(T^b))+S[1]+4129170786&4294967295,v=T+(R<<5&4294967295|R>>>27),R=N+(T^b&(v^T))+S[6]+3225465664&4294967295,N=v+(R<<9&4294967295|R>>>23),R=b+(v^T&(N^v))+S[11]+643717713&4294967295,b=N+(R<<14&4294967295|R>>>18),R=T+(N^v&(b^N))+S[0]+3921069994&4294967295,T=b+(R<<20&4294967295|R>>>12),R=v+(b^N&(T^b))+S[5]+3593408605&4294967295,v=T+(R<<5&4294967295|R>>>27),R=N+(T^b&(v^T))+S[10]+38016083&4294967295,N=v+(R<<9&4294967295|R>>>23),R=b+(v^T&(N^v))+S[15]+3634488961&4294967295,b=N+(R<<14&4294967295|R>>>18),R=T+(N^v&(b^N))+S[4]+3889429448&4294967295,T=b+(R<<20&4294967295|R>>>12),R=v+(b^N&(T^b))+S[9]+568446438&4294967295,v=T+(R<<5&4294967295|R>>>27),R=N+(T^b&(v^T))+S[14]+3275163606&4294967295,N=v+(R<<9&4294967295|R>>>23),R=b+(v^T&(N^v))+S[3]+4107603335&4294967295,b=N+(R<<14&4294967295|R>>>18),R=T+(N^v&(b^N))+S[8]+1163531501&4294967295,T=b+(R<<20&4294967295|R>>>12),R=v+(b^N&(T^b))+S[13]+2850285829&4294967295,v=T+(R<<5&4294967295|R>>>27),R=N+(T^b&(v^T))+S[2]+4243563512&4294967295,N=v+(R<<9&4294967295|R>>>23),R=b+(v^T&(N^v))+S[7]+1735328473&4294967295,b=N+(R<<14&4294967295|R>>>18),R=T+(N^v&(b^N))+S[12]+2368359562&4294967295,T=b+(R<<20&4294967295|R>>>12),R=v+(T^b^N)+S[5]+4294588738&4294967295,v=T+(R<<4&4294967295|R>>>28),R=N+(v^T^b)+S[8]+2272392833&4294967295,N=v+(R<<11&4294967295|R>>>21),R=b+(N^v^T)+S[11]+1839030562&4294967295,b=N+(R<<16&4294967295|R>>>16),R=T+(b^N^v)+S[14]+4259657740&4294967295,T=b+(R<<23&4294967295|R>>>9),R=v+(T^b^N)+S[1]+2763975236&4294967295,v=T+(R<<4&4294967295|R>>>28),R=N+(v^T^b)+S[4]+1272893353&4294967295,N=v+(R<<11&4294967295|R>>>21),R=b+(N^v^T)+S[7]+4139469664&4294967295,b=N+(R<<16&4294967295|R>>>16),R=T+(b^N^v)+S[10]+3200236656&4294967295,T=b+(R<<23&4294967295|R>>>9),R=v+(T^b^N)+S[13]+681279174&4294967295,v=T+(R<<4&4294967295|R>>>28),R=N+(v^T^b)+S[0]+3936430074&4294967295,N=v+(R<<11&4294967295|R>>>21),R=b+(N^v^T)+S[3]+3572445317&4294967295,b=N+(R<<16&4294967295|R>>>16),R=T+(b^N^v)+S[6]+76029189&4294967295,T=b+(R<<23&4294967295|R>>>9),R=v+(T^b^N)+S[9]+3654602809&4294967295,v=T+(R<<4&4294967295|R>>>28),R=N+(v^T^b)+S[12]+3873151461&4294967295,N=v+(R<<11&4294967295|R>>>21),R=b+(N^v^T)+S[15]+530742520&4294967295,b=N+(R<<16&4294967295|R>>>16),R=T+(b^N^v)+S[2]+3299628645&4294967295,T=b+(R<<23&4294967295|R>>>9),R=v+(b^(T|~N))+S[0]+4096336452&4294967295,v=T+(R<<6&4294967295|R>>>26),R=N+(T^(v|~b))+S[7]+1126891415&4294967295,N=v+(R<<10&4294967295|R>>>22),R=b+(v^(N|~T))+S[14]+2878612391&4294967295,b=N+(R<<15&4294967295|R>>>17),R=T+(N^(b|~v))+S[5]+4237533241&4294967295,T=b+(R<<21&4294967295|R>>>11),R=v+(b^(T|~N))+S[12]+1700485571&4294967295,v=T+(R<<6&4294967295|R>>>26),R=N+(T^(v|~b))+S[3]+2399980690&4294967295,N=v+(R<<10&4294967295|R>>>22),R=b+(v^(N|~T))+S[10]+4293915773&4294967295,b=N+(R<<15&4294967295|R>>>17),R=T+(N^(b|~v))+S[1]+2240044497&4294967295,T=b+(R<<21&4294967295|R>>>11),R=v+(b^(T|~N))+S[8]+1873313359&4294967295,v=T+(R<<6&4294967295|R>>>26),R=N+(T^(v|~b))+S[15]+4264355552&4294967295,N=v+(R<<10&4294967295|R>>>22),R=b+(v^(N|~T))+S[6]+2734768916&4294967295,b=N+(R<<15&4294967295|R>>>17),R=T+(N^(b|~v))+S[13]+1309151649&4294967295,T=b+(R<<21&4294967295|R>>>11),R=v+(b^(T|~N))+S[4]+4149444226&4294967295,v=T+(R<<6&4294967295|R>>>26),R=N+(T^(v|~b))+S[11]+3174756917&4294967295,N=v+(R<<10&4294967295|R>>>22),R=b+(v^(N|~T))+S[2]+718787259&4294967295,b=N+(R<<15&4294967295|R>>>17),R=T+(N^(b|~v))+S[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,y.g[2]=y.g[2]+b&4294967295,y.g[3]=y.g[3]+N&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var T=v-this.blockSize,S=this.B,b=this.h,N=0;N<v;){if(b==0)for(;N<=T;)i(this,y,N),N+=this.blockSize;if(typeof y=="string"){for(;N<v;)if(S[b++]=y.charCodeAt(N++),b==this.blockSize){i(this,S),b=0;break}}else for(;N<v;)if(S[b++]=y[N++],b==this.blockSize){i(this,S),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var T=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=T&255,T/=256;for(this.u(y),y=Array(16),v=T=0;4>v;++v)for(var S=0;32>S;S+=8)y[T++]=this.g[v]>>>S&255;return y};function s(y,v){var T=l;return Object.prototype.hasOwnProperty.call(T,y)?T[y]:T[y]=v(y)}function o(y,v){this.h=v;for(var T=[],S=!0,b=y.length-1;0<=b;b--){var N=y[b]|0;S&&N==v||(T[b]=N,S=!1)}this.g=T}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return m;if(0>y)return k(c(-y));for(var v=[],T=1,S=0;y>=T;S++)v[S]=y/T|0,T*=4294967296;return new o(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return k(f(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),S=m,b=0;b<y.length;b+=8){var N=Math.min(8,y.length-b),R=parseInt(y.substring(b,b+N),v);8>N?(N=c(Math.pow(v,N)),S=S.j(N).add(c(R))):(S=S.j(T),S=S.add(c(R)))}return S}var m=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-k(this).m();for(var y=0,v=1,T=0;T<this.g.length;T++){var S=this.i(T);y+=(0<=S?S:4294967296+S)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x(this))return"0";if(C(this))return"-"+k(this).toString(y);for(var v=c(Math.pow(y,6)),T=this,S="";;){var b=O(T,v).g;T=I(T,b.j(v));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(y);if(T=b,x(T))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function x(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function C(y){return y.h==-1}t.l=function(y){return y=I(this,y),C(y)?-1:x(y)?0:1};function k(y){for(var v=y.g.length,T=[],S=0;S<v;S++)T[S]=~y.g[S];return new o(T,~y.h).add(g)}t.abs=function(){return C(this)?k(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],S=0,b=0;b<=v;b++){var N=S+(this.i(b)&65535)+(y.i(b)&65535),R=(N>>>16)+(this.i(b)>>>16)+(y.i(b)>>>16);S=R>>>16,N&=65535,R&=65535,T[b]=R<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function I(y,v){return y.add(k(v))}t.j=function(y){if(x(this)||x(y))return m;if(C(this))return C(y)?k(this).j(k(y)):k(k(this).j(y));if(C(y))return k(this.j(k(y)));if(0>this.l(_)&&0>y.l(_))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,T=[],S=0;S<2*v;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var b=0;b<y.g.length;b++){var N=this.i(S)>>>16,R=this.i(S)&65535,oe=y.i(b)>>>16,ge=y.i(b)&65535;T[2*S+2*b]+=R*ge,w(T,2*S+2*b),T[2*S+2*b+1]+=N*ge,w(T,2*S+2*b+1),T[2*S+2*b+1]+=R*oe,w(T,2*S+2*b+1),T[2*S+2*b+2]+=N*oe,w(T,2*S+2*b+2)}for(S=0;S<v;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=v;S<2*v;S++)T[S]=0;return new o(T,0)};function w(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function A(y,v){this.g=y,this.h=v}function O(y,v){if(x(v))throw Error("division by zero");if(x(y))return new A(m,m);if(C(y))return v=O(k(y),v),new A(k(v.g),k(v.h));if(C(v))return v=O(y,k(v)),new A(k(v.g),v.h);if(30<y.g.length){if(C(y)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,S=v;0>=S.l(y);)T=V(T),S=V(S);var b=B(T,1),N=B(S,1);for(S=B(S,2),T=B(T,2);!x(S);){var R=N.add(S);0>=R.l(y)&&(b=b.add(T),N=R),S=B(S,1),T=B(T,1)}return v=I(y,b.j(v)),new A(b,v)}for(b=m;0<=y.l(v);){for(T=Math.max(1,Math.floor(y.m()/v.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=c(T),R=N.j(v);C(R)||0<R.l(y);)T-=S,N=c(T),R=N.j(v);x(N)&&(N=g),b=b.add(N),y=I(y,R)}return new A(b,y)}t.A=function(y){return O(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)&y.i(S);return new o(T,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)|y.i(S);return new o(T,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)^y.i(S);return new o(T,this.h^y.h)};function V(y){for(var v=y.g.length+1,T=[],S=0;S<v;S++)T[S]=y.i(S)<<1|y.i(S-1)>>>31;return new o(T,y.h)}function B(y,v){var T=v>>5;v%=32;for(var S=y.g.length-T,b=[],N=0;N<S;N++)b[N]=0<v?y.i(N+T)>>>v|y.i(N+T+1)<<32-v:y.i(N+T);return new o(b,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ME=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,ds=o}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,ga,FE,ku,xf,BE,zE,$E;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof lu=="object"&&lu];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var L=a[E];if(!(L in p))break e;p=p[L]}a=a[a.length-1],E=p[a],h=h(E),h!=E&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,E=!1,L={next:function(){if(!E&&p<a.length){var U=p++;return{value:h(U,a[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),a.apply(h,L)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function _(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function x(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(E,L,U){for(var G=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)G[Ve-2]=arguments[Ve];return h.prototype[L].apply(E,G)}}function C(a){const h=a.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=a[E];return p}return[]}function k(a,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const L=a.length||0,U=E.length||0;a.length=L+U;for(let G=0;G<U;G++)a[L+G]=E[G]}else a.push(E)}}class I{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var V=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function B(a,h,p){for(const E in a)h.call(p,a[E],E,a)}function y(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function v(a){const h={};for(const p in a)h[p]=a[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let p,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(p in E)a[p]=E[p];for(let U=0;U<T.length;U++)p=T[U],Object.prototype.hasOwnProperty.call(E,p)&&(a[p]=E[p])}}function b(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function N(a){l.setTimeout(()=>{throw a},0)}function R(){var a=ie;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class oe{constructor(){this.h=this.g=null}add(h,p){const E=ge.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var ge=new I(()=>new st,a=>a.reset());class st{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,H=!1,ie=new oe,ae=()=>{const a=l.Promise.resolve(void 0);Me=()=>{a.then(ve)}};var ve=()=>{for(var a;a=R();){try{a.h.call(a.g)}catch(p){N(p)}var h=ge;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}H=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function ke(a,h){if(_e.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{O(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ue[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ke.aa.h.call(this)}}x(ke,_e);var Ue={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),Le=0;function xn(a,h,p,E,L){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=L,this.key=++Le,this.da=this.fa=!1}function On(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Yr(a){this.src=a,this.g={},this.h=0}Yr.prototype.add=function(a,h,p,E,L){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var G=an(a,h,E,L);return-1<G?(h=a[G],p||(h.fa=!1)):(h=new xn(h,this.src,U,!!E,L),h.fa=p,a.push(h)),h};function ot(a,h){var p=h.type;if(p in a.g){var E=a.g[p],L=Array.prototype.indexOf.call(E,h,void 0),U;(U=0<=L)&&Array.prototype.splice.call(E,L,1),U&&(On(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function an(a,h,p,E){for(var L=0;L<a.length;++L){var U=a[L];if(!U.da&&U.listener==h&&U.capture==!!p&&U.ha==E)return L}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),Hi={};function ln(a,h,p,E,L){if(Array.isArray(h)){for(var U=0;U<h.length;U++)ln(a,h[U],p,E,L);return null}return p=Xr(p),a&&a[q]?a.K(h,p,c(E)?!!E.capture:!1,L):F(a,h,p,!1,E,L)}function F(a,h,p,E,L,U){if(!h)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,Ve=Xe(a);if(Ve||(a[yr]=Ve=new Yr(a)),p=Ve.add(h,p,E,G,U),p.proxy)return p;if(E=Fe(),p.proxy=E,E.src=a,E.listener=p,a.addEventListener)be||(L=G),L===void 0&&(L=!1),a.addEventListener(h.toString(),E,L);else if(a.attachEvent)a.attachEvent(Tn(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Fe(){function a(p){return h.call(a.src,a.listener,p)}const h=Jn;return a}function mt(a,h,p,E,L){if(Array.isArray(h))for(var U=0;U<h.length;U++)mt(a,h[U],p,E,L);else E=c(E)?!!E.capture:!!E,p=Xr(p),a&&a[q]?(a=a.i,h=String(h).toString(),h in a.g&&(U=a.g[h],p=an(U,p,E,L),-1<p&&(On(U[p]),Array.prototype.splice.call(U,p,1),U.length==0&&(delete a.g[h],a.h--)))):a&&(a=Xe(a))&&(h=a.g[h.toString()],a=-1,h&&(a=an(h,p,E,L)),(p=-1<a?h[a]:null)&&Xt(p))}function Xt(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[q])ot(h.i,a);else{var p=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(p,E,a.capture):h.detachEvent?h.detachEvent(Tn(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Xe(h))?(ot(p,a),p.h==0&&(p.src=null,h[yr]=null)):On(a)}}}function Tn(a){return a in Hi?Hi[a]:Hi[a]="on"+a}function Jn(a,h){if(a.da)a=!0;else{h=new ke(h,this);var p=a.listener,E=a.ha||a.src;a.fa&&Xt(a),a=p.call(E,h)}return a}function Xe(a){return a=a[yr],a instanceof Yr?a:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(a){return typeof a=="function"?a:(a[un]||(a[un]=function(h){return a.handleEvent(h)}),a[un])}function gt(){he.call(this),this.i=new Yr(this),this.M=this,this.F=null}x(gt,he),gt.prototype[q]=!0,gt.prototype.removeEventListener=function(a,h,p,E){mt(this,a,h,p,E)};function yt(a,h){var p,E=a.F;if(E)for(p=[];E;E=E.F)p.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new _e(h,a);else if(h instanceof _e)h.target=h.target||a;else{var L=h;h=new _e(E,a),S(h,L)}if(L=!0,p)for(var U=p.length-1;0<=U;U--){var G=h.g=p[U];L=cn(G,E,!0,h)&&L}if(G=h.g=a,L=cn(G,E,!0,h)&&L,L=cn(G,E,!1,h)&&L,p)for(U=0;U<p.length;U++)G=h.g=p[U],L=cn(G,E,!1,h)&&L}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],E=0;E<p.length;E++)On(p[E]);delete a.g[h],a.h--}}this.F=null},gt.prototype.K=function(a,h,p,E){return this.i.add(String(a),h,!1,p,E)},gt.prototype.L=function(a,h,p,E){return this.i.add(String(a),h,!0,p,E)};function cn(a,h,p,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,U=0;U<h.length;++U){var G=h[U];if(G&&!G.da&&G.capture==p){var Ve=G.listener,St=G.ha||G.src;G.fa&&ot(a.i,G),L=Ve.call(St,E)!==!1&&L}}return L&&!E.defaultPrevented}function In(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Uo(a){a.g=In(()=>{a.g=null,a.i&&(a.i=!1,Uo(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ks extends he{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(a){he.call(this),this.h=a,this.g={}}x(qi,he);var jn=[];function Fo(a){B(a.g,function(h,p){this.g.hasOwnProperty(p)&&Xt(h)},a),a.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Fo(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=l.JSON.stringify,Cl=l.JSON.parse,_d=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ps(){}Ps.prototype.h=null;function Ki(a){return a.h||(a.h=a.i())}function Bo(){}var vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gi(){_e.call(this,"d")}x(Gi,_e);function zo(){_e.call(this,"c")}x(zo,_e);var Zn={},Nl=null;function Qi(){return Nl=Nl||new gt}Zn.La="serverreachability";function Yi(a){_e.call(this,Zn.La,a)}x(Yi,_e);function er(a){const h=Qi();yt(h,new Yi(h))}Zn.STAT_EVENT="statevent";function kl(a,h){_e.call(this,Zn.STAT_EVENT,a),this.stat=h}x(kl,_e);function It(a){const h=Qi();yt(h,new kl(h,a))}Zn.Ma="timingevent";function P(a,h){_e.call(this,Zn.Ma,a),this.size=h}x(P,_e);function j(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function $(a,h,p,E,L,U){a.info(function(){if(a.g)if(U)for(var G="",Ve=U.split("&"),St=0;St<Ve.length;St++){var Ce=Ve[St].split("=");if(1<Ce.length){var Ot=Ce[0];Ce=Ce[1];var jt=Ot.split("_");G=2<=jt.length&&jt[1]=="type"?G+(Ot+"="+Ce+"&"):G+(Ot+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+h+`
`+p+`
`+G})}function Q(a,h,p,E,L,U,G){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+h+`
`+p+`
`+U+" "+G})}function ne(a,h,p,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ee(a,p)+(E?" "+E:"")})}function le(a,h){a.info(function(){return"TIMEOUT: "+h})}M.prototype.info=function(){};function ee(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var E=p[a];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return bs(p)}catch{return h}}var Z={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},X={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},re;function ce(){}x(ce,Ps),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},re=new ce;function me(a,h,p,E){this.j=a,this.i=h,this.l=p,this.R=E||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var Pe={},xe={};function Be(a,h,p){a.L=1,a.v=Ol(xr(h)),a.m=p,a.P=!0,_r(a,null)}function _r(a,h){a.F=Date.now(),qt(a),a.A=xr(a.v);var p=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),qm(p.i,"t",E),a.C=0,p=a.j.J,a.h=new ut,a.g=cg(a.j,p?h:null,!a.m),0<a.O&&(a.M=new ks(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,E=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(jn[0]=L.toString()),L=jn);for(var U=0;U<L.length;U++){var G=ln(p,L[U],E||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),er(),$(a.i,a.u,a.A,a.l,a.R,a.m)}me.prototype.ca=function(a){a=a.target;const h=this.M;h&&Tr(a)==3?h.j():this.Y(a)},me.prototype.Y=function(a){try{if(a==this.g)e:{const jt=Tr(this.g);var h=this.g.Ba();const Ls=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Zm(this.g)))){this.J||jt!=4||h==7||(h==8||0>=Ls?er(3):er(2)),wr(this);var p=this.g.Z();this.X=p;t:if(Jr(this)){var E=Zm(this.g);a="";var L=E.length,U=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),dn(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,a+=this.h.i.decode(E[h],{stream:!(U&&h==L-1)});E.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,Q(this.i,this.u,this.A,this.l,this.R,jt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,St=this.g;if((Ve=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ve)){var Ce=Ve;break t}}Ce=null}if(p=Ce)ne(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,p);else{this.o=!1,this.s=3,It(12),Sn(this),dn(this);break e}}if(this.P){p=!0;let Vn;for(;!this.J&&this.C<G.length;)if(Vn=Ln(this,G),Vn==xe){jt==4&&(this.s=4,It(14),p=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Pe){this.s=4,It(15),ne(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else ne(this.i,this.l,Vn,null),Zr(this,Vn);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||G.length!=0||this.h.h||(this.s=1,It(16),p=!1),this.o=this.o&&p,!p)ne(this.i,this.l,G,"[Invalid Chunked Response]"),Sn(this),dn(this);else if(0<G.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Td(Ot),Ot.M=!0,It(11))}}else ne(this.i,this.l,G,null),Zr(this,G);jt==4&&Sn(this),this.o&&!this.J&&(jt==4?og(this.j,this):(this.o=!1,qt(this)))}else kT(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Sn(this),dn(this)}}}catch{}finally{}};function Jr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ln(a,h){var p=a.C,E=h.indexOf(`
`,p);return E==-1?xe:(p=Number(h.substring(p,E)),isNaN(p)?Pe:(E+=1,E+p>h.length?xe:(h=h.slice(E,E+p),a.C=E+p,h)))}me.prototype.cancel=function(){this.J=!0,Sn(this)};function qt(a){a.S=Date.now()+a.I,Ds(a,a.I)}function Ds(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=j(g(a.ba,a),h)}function wr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}me.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(le(this.i,this.A),this.L!=2&&(er(),It(17)),Sn(this),this.s=2,dn(this)):Ds(this,this.S-a)};function dn(a){a.j.G==0||a.J||og(a.j,a)}function Sn(a){wr(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Fo(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Zr(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Ge(p.h,a))){if(!a.K&&Ge(p.h,a)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Fl(p),Ml(p);else break e;xd(p),It(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=j(g(p.Za,p),6e3));if(1>=ei(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ji(p,11)}else if((a.K||p.g==a)&&Fl(p),!w(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let Ce=L[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];const Ot=Ce[3];Ot!=null&&(p.la=Ot,p.j.info("VER="+p.la));const jt=Ce[4];jt!=null&&(p.Aa=jt,p.j.info("SVER="+p.Aa));const Ls=Ce[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(E=1.5*Ls,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Vn=a.g;if(Vn){const zl=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var U=E.h;U.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(tr(U,U.h),U.h=null))}if(E.D){const Id=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(E.ya=Id,We(E.I,E.D,Id))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var G=a;if(E.qa=ug(E,E.J?E.ia:null,E.W),G.K){$o(E.h,G);var Ve=G,St=E.L;St&&(Ve.I=St),Ve.B&&(wr(Ve),qt(Ve)),E.g=G}else ig(E);0<p.i.length&&Ul(p)}else Ce[0]!="stop"&&Ce[0]!="close"||Ji(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Ji(p,7):Ed(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}er(4)}catch{}}var Ie=class{constructor(a,h){this.g=a,this.map=h}};function $e(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Er(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ei(a){return a.h?1:a.g?a.g.size:0}function Ge(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function tr(a,h){a.g?a.g.add(h):a.h=h}function $o(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}$e.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function bl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return C(a.i)}function mT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,E=0;E<p;E++)h.push(a[E]);return h}h=[],p=0;for(E in a)h[p++]=a[E];return h}function gT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const E in a)h[p++]=E;return h}}}function Fm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=gT(a),E=mT(a),L=E.length,U=0;U<L;U++)h.call(void 0,E[U],p&&p[U],a)}var Bm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var E=a[p].indexOf("="),L=null;if(0<=E){var U=a[p].substring(0,E);L=a[p].substring(E+1)}else U=a[p];h(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Xi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xi){this.h=a.h,Pl(this,a.j),this.o=a.o,this.g=a.g,Dl(this,a.s),this.l=a.l;var h=a.i,p=new qo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),zm(this,p),this.m=a.m}else a&&(h=String(a).match(Bm))?(this.h=!1,Pl(this,h[1]||"",!0),this.o=Wo(h[2]||""),this.g=Wo(h[3]||"",!0),Dl(this,h[4]),this.l=Wo(h[5]||"",!0),zm(this,h[6]||"",!0),this.m=Wo(h[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Xi.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ho(h,$m,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ho(h,$m,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ho(p,p.charAt(0)=="/"?wT:_T,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ho(p,xT)),a.join("")};function xr(a){return new Xi(a)}function Pl(a,h,p){a.j=p?Wo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Dl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function zm(a,h,p){h instanceof qo?(a.i=h,TT(a.i,a.h)):(p||(h=Ho(h,ET)),a.i=new qo(h,a.h))}function We(a,h,p){a.i.set(h,p)}function Ol(a){return We(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Wo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ho(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,vT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $m=/[#\/\?@]/g,_T=/[#\?:]/g,wT=/[#\?]/g,ET=/[#\?@]/g,xT=/#/g;function qo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function ti(a){a.g||(a.g=new Map,a.h=0,a.i&&yT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=qo.prototype,t.add=function(a,h){ti(this),this.i=null,a=Os(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Wm(a,h){ti(a),h=Os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Hm(a,h){return ti(a),h=Os(a,h),a.g.has(h)}t.forEach=function(a,h){ti(this),this.g.forEach(function(p,E){p.forEach(function(L){a.call(h,L,E,this)},this)},this)},t.na=function(){ti(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const L=a[E];for(let U=0;U<L.length;U++)p.push(h[E])}return p},t.V=function(a){ti(this);let h=[];if(typeof a=="string")Hm(this,a)&&(h=h.concat(this.g.get(Os(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return ti(this),this.i=null,a=Os(this,a),Hm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function qm(a,h,p){Wm(a,h),0<p.length&&(a.i=null,a.g.set(Os(a,h),C(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const U=encodeURIComponent(String(E)),G=this.V(E);for(E=0;E<G.length;E++){var L=U;G[E]!==""&&(L+="="+encodeURIComponent(String(G[E]))),a.push(L)}}return this.i=a.join("&")};function Os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function TT(a,h){h&&!a.j&&(ti(a),a.i=null,a.g.forEach(function(p,E){var L=E.toLowerCase();E!=L&&(Wm(this,E),qm(this,L,p))},a)),a.j=h}function IT(a,h){const p=new M;if(l.Image){const E=new Image;E.onload=_(ni,p,"TestLoadImage: loaded",!0,h,E),E.onerror=_(ni,p,"TestLoadImage: error",!1,h,E),E.onabort=_(ni,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=_(ni,p,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function ST(a,h){const p=new M,E=new AbortController,L=setTimeout(()=>{E.abort(),ni(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(U=>{clearTimeout(L),U.ok?ni(p,"TestPingServer: ok",!0,h):ni(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),ni(p,"TestPingServer: error",!1,h)})}function ni(a,h,p,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(p)}catch{}}function RT(){this.g=new _d}function AT(a,h,p){const E=p||"";try{Fm(a,function(L,U){let G=L;c(L)&&(G=bs(L)),h.push(E+U+"="+encodeURIComponent(G))})}catch(L){throw h.push(E+"type="+encodeURIComponent("_badmap")),L}}function jl(a){this.l=a.Ub||null,this.j=a.eb||!1}x(jl,Ps),jl.prototype.g=function(){return new Ll(this.l,this.j)},jl.prototype.i=function(a){return function(){return a}}({});function Ll(a,h){gt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ll,gt),t=Ll.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Go(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Km(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Km(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ko(this):Go(this),this.readyState==3&&Km(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ko(this))},t.Qa=function(a){this.g&&(this.response=a,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Go(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Go(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Gm(a){let h="";return B(a,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function wd(a,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Gm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):We(a,h,p))}function nt(a){gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(nt,gt);var CT=/^https?$/i,NT=["POST","PUT"];t=nt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():re.g(),this.v=this.o?Ki(this.o):Ki(re),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(U){Qm(this,U);return}if(a=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)p.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())p.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(U=>U.toLowerCase()=="content-type"),L=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(NT,h,void 0))||E||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of p)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jm(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){Qm(this,U)}};function Qm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Ym(a),Vl(a)}function Ym(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,yt(this,"complete"),yt(this,"abort"),Vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xm(this):this.bb())},t.bb=function(){Xm(this)};function Xm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tr(a)!=4||a.Z()!=2)){if(a.u&&Tr(a)==4)In(a.Ea,0,a);else if(yt(a,"readystatechange"),Tr(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=G===0){var L=String(a.D).match(Bm)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),E=!CT.test(L?L.toLowerCase():"")}p=E}if(p)yt(a,"complete"),yt(a,"success");else{a.m=6;try{var U=2<Tr(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",Ym(a)}}finally{Vl(a)}}}}function Vl(a,h){if(a.g){Jm(a);const p=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||yt(a,"ready");try{p.onreadystatechange=E}catch{}}}function Jm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Cl(h)}};function Zm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function kT(a){const h={};a=(a.g&&2<=Tr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(w(a[E]))continue;var p=b(a[E]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const U=h[L]||[];h[L]=U,U.push(p)}y(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function eg(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qo("baseRetryDelayMs",5e3,a),this.cb=Qo("retryDelaySeedMs",1e4,a),this.Wa=Qo("forwardChannelMaxRetries",2,a),this.wa=Qo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(a&&a.concurrentRequestLimit),this.Da=new RT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eg.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,E){It(0),this.W=a,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=ug(this,null,this.W),Ul(this)};function Ed(a){if(tg(a),a.G==3){var h=a.U++,p=xr(a.I);if(We(p,"SID",a.K),We(p,"RID",h),We(p,"TYPE","terminate"),Yo(a,p),h=new me(a,a.j,h),h.L=2,h.v=Ol(xr(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=cg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),qt(h)}lg(a)}function Ml(a){a.g&&(Td(a),a.g.cancel(),a.g=null)}function tg(a){Ml(a),a.u&&(l.clearTimeout(a.u),a.u=null),Fl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ul(a){if(!Er(a.h)&&!a.s){a.s=!0;var h=a.Ga;Me||ae(),H||(Me(),H=!0),ie.add(h,a),a.B=0}}function bT(a,h){return ei(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=j(g(a.Ga,a,h),ag(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new me(this,this.j,a);let U=this.o;if(this.S&&(U?(U=v(U),S(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=rg(this,L,h),p=xr(this.I),We(p,"RID",a),We(p,"CVER",22),this.D&&We(p,"X-HTTP-Session-Id",this.D),Yo(this,p),U&&(this.O?h="headers="+encodeURIComponent(String(Gm(U)))+"&"+h:this.m&&wd(p,this.m,U)),tr(this.h,L),this.Ua&&We(p,"TYPE","init"),this.P?(We(p,"$req",h),We(p,"SID","null"),L.T=!0,Be(L,p,null)):Be(L,p,h),this.G=2}}else this.G==3&&(a?ng(this,a):this.i.length==0||Er(this.h)||ng(this))};function ng(a,h){var p;h?p=h.l:p=a.U++;const E=xr(a.I);We(E,"SID",a.K),We(E,"RID",p),We(E,"AID",a.T),Yo(a,E),a.m&&a.o&&wd(E,a.m,a.o),p=new me(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=rg(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),tr(a.h,p),Be(p,E,h)}function Yo(a,h){a.H&&B(a.H,function(p,E){We(h,E,p)}),a.l&&Fm({},function(p,E){We(h,E,p)})}function rg(a,h,p){p=Math.min(a.i.length,p);var E=a.l?g(a.l.Na,a.l,a):null;e:{var L=a.i;let U=-1;for(;;){const G=["count="+p];U==-1?0<p?(U=L[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Ve=!0;for(let St=0;St<p;St++){let Ce=L[St].g;const Ot=L[St].map;if(Ce-=U,0>Ce)U=Math.max(0,L[St].g-100),Ve=!1;else try{AT(Ot,G,"req"+Ce+"_")}catch{E&&E(Ot)}}if(Ve){E=G.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,E}function ig(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Me||ae(),H||(Me(),H=!0),ie.add(h,a),a.v=0}}function xd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=j(g(a.Fa,a),ag(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=j(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ml(this),sg(this))};function Td(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function sg(a){a.g=new me(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=xr(a.qa);We(h,"RID","rpc"),We(h,"SID",a.K),We(h,"AID",a.T),We(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&We(h,"TO",a.ja),We(h,"TYPE","xmlhttp"),Yo(a,h),a.m&&a.o&&wd(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ol(xr(h)),p.m=null,p.P=!0,_r(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ml(this),xd(this),It(19))};function Fl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function og(a,h){var p=null;if(a.g==h){Fl(a),Td(a),a.g=null;var E=2}else if(Ge(a.h,h))p=h.D,$o(a.h,h),E=1;else return;if(a.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=a.B;E=Qi(),yt(E,new P(E,p)),Ul(a)}else ig(a);else if(L=h.s,L==3||L==0&&0<h.X||!(E==1&&bT(a,h)||E==2&&xd(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),L){case 1:Ji(a,5);break;case 4:Ji(a,10);break;case 3:Ji(a,6);break;default:Ji(a,2)}}}function ag(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Ji(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),E=a.Xa;const L=!E;E=new Xi(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Pl(E,"https"),Ol(E),L?IT(E.toString(),p):ST(E.toString(),p)}else It(2);a.G=0,a.l&&a.l.sa(h),lg(a),tg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function lg(a){if(a.G=0,a.ka=[],a.l){const h=bl(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function ug(a,h,p){var E=p instanceof Xi?xr(p):new Xi(p);if(E.g!="")h&&(E.g=h+"."+E.g),Dl(E,E.s);else{var L=l.location;E=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var U=new Xi(null);E&&Pl(U,E),h&&(U.g=h),L&&Dl(U,L),p&&(U.l=p),E=U}return p=a.D,h=a.ya,p&&h&&We(E,p,h),We(E,"VER",a.la),Yo(a,E),E}function cg(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new nt(new jl({eb:p})):new nt(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dg(){}t=dg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bl(){}Bl.prototype.g=function(a,h){return new hn(a,h)};function hn(a,h){gt.call(this),this.g=new eg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new js(this)}x(hn,gt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ed(this.g)},hn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=bs(a),a=p);h.i.push(new Ie(h.Ya++,a)),h.G==3&&Ul(h)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,hn.aa.N.call(this)};function hg(a){Gi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}x(hg,Gi);function fg(){zo.call(this),this.status=1}x(fg,zo);function js(a){this.g=a}x(js,dg),js.prototype.ua=function(){yt(this.g,"a")},js.prototype.ta=function(a){yt(this.g,new hg(a))},js.prototype.sa=function(a){yt(this.g,new fg)},js.prototype.ra=function(){yt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,$E=function(){return new Bl},zE=function(){return Qi()},BE=Zn,xf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Z.NO_ERROR=0,Z.TIMEOUT=8,Z.HTTP_ERROR=6,ku=Z,X.COMPLETE="complete",FE=X,Bo.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",gt.prototype.listen=gt.prototype.K,ga=Bo,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,UE=nt}).apply(typeof lu<"u"?lu:typeof self<"u"?self:typeof window<"u"?window:{});const Ev="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Fp("@firebase/firestore");function la(){return ws.logLevel}function te(t,...e){if(ws.logLevel<=Te.DEBUG){const n=e.map(Jp);ws.debug(`Firestore (${jo}): ${t}`,...n)}}function zr(t,...e){if(ws.logLevel<=Te.ERROR){const n=e.map(Jp);ws.error(`Firestore (${jo}): ${t}`,...n)}}function xo(t,...e){if(ws.logLevel<=Te.WARN){const n=e.map(Jp);ws.warn(`Firestore (${jo}): ${t}`,...n)}}function Jp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+t;throw zr(e),new Error(e)}function je(t,e){t||de()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class O1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Or,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new WE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new Ut(e)}}class L1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class V1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new L1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){je(this.o===void 0);const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new M1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=F1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function To(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new wt(0,0))}static max(){return new fe(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(),r===void 0?r=e.length-n:r>e.length-n&&de(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends nl{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const B1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends nl{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return B1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(qe.fromString(e))}static fromName(e){return new se(qe.fromString(e).popFirst(5))}static empty(){return new se(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new qe(e.slice()))}}function z1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Oi(i,se.empty(),e)}function $1(t){return new Oi(t.readTime,t.key,-1)}class Oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oi(fe.min(),se.empty(),-1)}static max(){return new Oi(fe.max(),se.empty(),-1)}}function W1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==H1)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function K1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zp.oe=-1;function Zc(t){return t==null}function vc(t){return t===0&&1/t==-1/0}function G1(t){return typeof t=="number"&&Number.isInteger(t)&&!vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=s??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new At(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,r,i,s){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new gn([])}unionWith(e){let n=new kt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KE("Invalid base64 string: "+s):s}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const Q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(je(!!t),typeof t=="string"){let e=0;const n=Q1.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tm(t){const e=t.mapValue.fields.__previous_value__;return em(e)?tm(e):e}function rl(t){const e=ji(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class il{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu={mapValue:{}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?em(t)?4:J1(t)?9007199254740991:X1(t)?10:11:de()}function hr(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ji(i.timestampValue),l=ji(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Es(i.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=at(i.doubleValue),l=at(s.doubleValue);return o===l?vc(o)===vc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(xv(o)!==xv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!hr(o[u],l[u])))return!1;return!0}(t,e);default:return de()}}function sl(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function Io(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=at(s.integerValue||s.doubleValue),u=at(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Iv(t.timestampValue,e.timestampValue);case 4:return Iv(rl(t),rl(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Es(s),u=Es(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=Ne(l[c],u[c]);if(f!==0)return f}return Ne(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ne(at(s.latitude),at(o.latitude));return l!==0?l:Ne(at(s.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,f;const m=s.fields||{},g=o.fields||{},_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=Ne(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Sv(_,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===cu.mapValue&&o===cu.mapValue)return 0;if(s===cu.mapValue)return 1;if(o===cu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Ne(u[m],f[m]);if(g!==0)return g;const _=Io(l[u[m]],c[f[m]]);if(_!==0)return _}return Ne(u.length,f.length)}(t.mapValue,e.mapValue);default:throw de()}}function Iv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=ji(t),r=ji(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function Sv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Io(n[i],r[i]);if(s)return s}return Ne(n.length,r.length)}function So(t){return Tf(t)}function Tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tf(n.fields[o])}`;return i+"}"}(t.mapValue):de()}function Rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function If(t){return!!t&&"integerValue"in t}function nm(t){return!!t&&"arrayValue"in t}function Av(t){return!!t&&"nullValue"in t}function Cv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bu(t){return!!t&&"mapValue"in t}function X1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function J1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ka(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){As(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new en(ka(this.value))}}function GE(t){const e=[];return As(t.fields,(n,r)=>{const i=new Ct([n]);if(bu(r)){const s=GE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new zt(e,0,fe.min(),fe.min(),fe.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new zt(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new zt(e,2,n,fe.min(),fe.min(),en.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,fe.min(),fe.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Io(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{}class ft extends QE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tb(e,n,r):n==="array-contains"?new ib(e,r):n==="in"?new sb(e,r):n==="not-in"?new ob(e,r):n==="array-contains-any"?new ab(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nb(e,r):new rb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Io(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends QE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qn(e,n)}matches(e){return YE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function YE(t){return t.op==="and"}function XE(t){return eb(t)&&YE(t)}function eb(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Sf(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+So(t.value);if(XE(t))return t.filters.map(e=>Sf(e)).join(",");{const e=t.filters.map(n=>Sf(n)).join(",");return`${t.op}(${e})`}}function JE(t,e){return t instanceof ft?function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(t,e):t instanceof Qn?function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&JE(o,i.filters[l]),!0):!1}(t,e):void de()}function ZE(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(ZE).join(" ,")+"}"}(t):"Filter"}class tb extends ft{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class nb extends ft{constructor(e,n){super(e,"in",n),this.keys=ex("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rb extends ft{constructor(e,n){super(e,"not-in",n),this.keys=ex("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ex(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class ib extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nm(n)&&sl(n.arrayValue,this.value)}}class sb extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class ob extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sl(this.value.arrayValue,n)}}class ab extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function bv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new lb(t,e,n,r,i,s,o)}function rm(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>So(r)).join(",")),e.ue=n}return e.ue}function im(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kv(t.startAt,e.startAt)&&kv(t.endAt,e.endAt)}function Rf(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ub(t,e,n,r,i,s,o,l){return new Lo(t,e,n,r,i,s,o,l)}function ed(t){return new Lo(t)}function Pv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tx(t){return t.collectionGroup!==null}function ba(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new kt(Ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ol(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new ol(Ct.keyField(),r))}return e.ce}function cr(t){const e=pe(t);return e.le||(e.le=cb(e,ba(t))),e.le}function cb(t,e){if(t.limitType==="F")return bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ol(i.field,s)});const n=t.endAt?new _c(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _c(t.startAt.position,t.startAt.inclusive):null;return bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Af(t,e){const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cf(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function td(t,e){return im(cr(t),cr(e))&&t.limitType===e.limitType}function nx(t){return`${rm(cr(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZE(i)).join(", ")}]`),Zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>So(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>So(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function nd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ba(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Nv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),i)||r.endAt&&!function(o,l,u){const c=Nv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),i))}(t,e)}function db(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rx(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const s=hb(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hb(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Io(u,c):de()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new tt(se.comparator);function $r(){return fb}const ix=new tt(se.comparator);function ya(...t){let e=ix;for(const n of t)e=e.insert(n.key,n);return e}function sx(t){let e=ix;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Pa()}function ox(){return Pa()}function Pa(){return new Vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const pb=new tt(se.comparator),mb=new kt(se.comparator);function Ee(...t){let e=mb;for(const n of t)e=e.add(n);return e}const gb=new kt(Ne);function yb(){return gb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function ax(t){return{integerValue:""+t}}function vb(t,e){return G1(e)?ax(e):sm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function _b(t,e,n){return t instanceof al?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&em(s)&&(s=tm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ll?ux(t,e):t instanceof ul?cx(t,e):function(i,s){const o=lx(i,s),l=Dv(o)+Dv(i.Pe);return If(o)&&If(i.Pe)?ax(l):sm(i.serializer,l)}(t,e)}function wb(t,e,n){return t instanceof ll?ux(t,e):t instanceof ul?cx(t,e):n}function lx(t,e){return t instanceof wc?function(r){return If(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class al extends rd{}class ll extends rd{constructor(e){super(),this.elements=e}}function ux(t,e){const n=dx(e);for(const r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ul extends rd{constructor(e){super(),this.elements=e}}function cx(t,e){let n=dx(e);for(const r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}class wc extends rd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dv(t){return at(t.integerValue||t.doubleValue)}function dx(t){return nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.field=e,this.transform=n}}function xb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ll&&i instanceof ll||r instanceof ul&&i instanceof ul?To(r.elements,i.elements,hr):r instanceof wc&&i instanceof wc?hr(r.Pe,i.Pe):r instanceof al&&i instanceof al}(t.transform,e.transform)}class Tb{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class id{}function hx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new om(t.key,kn.none()):new Tl(t.key,t.data,kn.none());{const n=t.data,r=en.empty();let i=new kt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(t.key,r,new gn(i.toArray()),kn.none())}}function Ib(t,e,n){t instanceof Tl?function(i,s,o){const l=i.value.clone(),u=jv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(i,s,o){if(!Pu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=jv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(fx(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof Tl?function(s,o,l,u){if(!Pu(s.precondition,o))return l;const c=s.value.clone(),f=Lv(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(s,o,l,u){if(!Pu(s.precondition,o))return l;const c=Lv(s.fieldTransforms,u,o),f=o.data;return f.setAll(fx(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Pu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Sb(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=lx(r.transform,i||null);s!=null&&(n===null&&(n=en.empty()),n.set(r.field,s))}return n||null}function Ov(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(s,o)=>xb(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends id{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $i extends id{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jv(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,wb(o,l,n[i]))}return r}function Lv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,_b(s,o,e))}return r}class om extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb extends id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ib(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ox();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=hx(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,r)=>Ov(n,r))&&To(this.baseMutations,e.baseMutations,(n,r)=>Ov(n,r))}}class am{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return pb}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new am(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Se;function kb(t){switch(t){default:return de();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function px(t){if(t===void 0)return zr("GRPC error has no .code"),z.UNKNOWN;switch(t){case ct.OK:return z.OK;case ct.CANCELLED:return z.CANCELLED;case ct.UNKNOWN:return z.UNKNOWN;case ct.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ct.INTERNAL:return z.INTERNAL;case ct.UNAVAILABLE:return z.UNAVAILABLE;case ct.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ct.NOT_FOUND:return z.NOT_FOUND;case ct.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ct.ABORTED:return z.ABORTED;case ct.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ct.DATA_LOSS:return z.DATA_LOSS;default:return de()}}(Se=ct||(ct={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new ds([4294967295,4294967295],0);function Vv(t){const e=bb().encode(t),n=new ME;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(r<0)throw new va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(Pb)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vv(e),[r,i]=Mv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Vv(e),[r,i]=Mv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sd(fe.min(),i,new tt(Ne),$r(),Ee())}}class Il{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class mx{constructor(e,n){this.targetId=e,this.me=n}}class gx{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Uv{constructor(){this.fe=0,this.ge=Bv(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:de()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Db{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=Fv(),this.Qe=new tt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Rf(s))if(r===0){const o=new se(s.path);this.Ue(n,o,zt.newNoDocument(o,fe.min()))}else je(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Es(r).toUint8Array()}catch(u){if(u instanceof KE)return xo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lm(o,i,s)}catch(u){return xo(u instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Rf(l.target)){const u=new se(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,zt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ee();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new sd(e,n,this.Qe,this.ke,r);return this.ke=$r(),this.qe=Fv(),this.Qe=new tt(Ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Uv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Fv(){return new tt(se.comparator)}function Bv(){return new tt(se.comparator)}const Ob={asc:"ASCENDING",desc:"DESCENDING"},jb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lb={and:"AND",or:"OR"};class Vb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function Ec(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Mb(t,e){return Ec(t,e.toTimestamp())}function dr(t){return je(!!t),fe.fromTimestamp(function(n){const r=ji(n);return new wt(r.seconds,r.nanos)}(t))}function um(t,e){return kf(t,e).canonicalString()}function kf(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vx(t){const e=qe.fromString(t);return je(Tx(e)),e}function bf(t,e){return um(t.databaseId,e.path)}function ah(t,e){const n=vx(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(wx(n))}function _x(t,e){return um(t.databaseId,e)}function Ub(t){const e=vx(t);return e.length===4?qe.emptyPath():wx(e)}function Pf(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wx(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zv(t,e,n){return{name:bf(t,e),fields:n.value.mapValue.fields}}function Fb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(je(f===void 0||typeof f=="string"),Pt.fromBase64String(f||"")):(je(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Pt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?z.UNKNOWN:px(c.code);return new Y(f,c.message||"")}(o);n=new gx(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):fe.min(),l=new en({mapValue:{fields:r.document.fields}}),u=zt.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Du(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),s=r.readTime?dr(r.readTime):fe.min(),o=zt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Du([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),s=r.removedTargetIds||[];n=new Du([],s,i,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Nb(i,s),l=r.targetId;n=new mx(l,o)}}return n}function Bb(t,e){let n;if(e instanceof Tl)n={update:zv(t,e.key,e.value)};else if(e instanceof om)n={delete:bf(t,e.key)};else if(e instanceof $i)n={update:zv(t,e.key,e.data),updateMask:Yb(e.fieldMask)};else{if(!(e instanceof Rb))return de();n={verify:bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw de()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Mb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de()}(t,e.precondition)),n}function zb(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dr(i.updateTime):dr(s);return o.isEqual(fe.min())&&(o=dr(s)),new Tb(o,i.transformResults||[])}(n,e))):[]}function $b(t,e){return{documents:[_x(t,e.path)]}}function Wb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_x(t,i);const s=function(c){if(c.length!==0)return xx(Qn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Fs(g.field),direction:Kb(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Nf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Hb(t){let e=Ub(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const g=Ex(m);return g instanceof Qn&&XE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(x){return new ol(Bs(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Zc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new _c(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,_=m.values||[];return new _c(_,g)}(n.endAt)),ub(e,i,o,s,l,"F",u,c)}function qb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ex(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bs(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bs(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bs(n.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bs(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Bs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>Ex(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function Kb(t){return Ob[t]}function Gb(t){return jb[t]}function Qb(t){return Lb[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function Bs(t){return Ct.fromServerFormat(t.fieldPath)}function xx(t){return t instanceof ft?function(n){if(n.op==="=="){if(Cv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(Av(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(Av(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:Gb(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const r=n.getFilters().map(i=>xx(i));return r.length===1?r[0]:{compositeFilter:{op:Qb(n.op),filters:r}}}(t):de()}function Yb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,i,s=fe.min(),o=fe.min(),l=Pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.ct=e}}function Jb(t){const e=Hb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.un=new eP}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Oi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class eP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ro(0)}static kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.changes=new Vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Da(r.mutation,i,gn.empty(),wt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=ls();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ya();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=$r();const o=Pa(),l=function(){return Pa()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof $i)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Da(f.mutation,c,f.mutation.getFieldMask(),wt.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new nP(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Pa();let i=new tt((o,l)=>o-l),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||gn.empty();f=l.applyToLocalView(c,f),r.set(u,f);const m=(i.get(l.batchId)||Ee()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=ox();f.forEach(g=>{if(!s.has(g)){const _=hx(n.get(g),r.get(g));_!==null&&m.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(ls());let l=-1,u=s;return o.next(c=>W.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?W.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ee())).next(f=>({batchId:l,changes:sx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ya();return this.indexManager.getCollectionParents(e,s).next(l=>W.forEach(l,u=>{const c=function(m,g){return new Lo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,zt.newInvalidDocument(f)))});let l=ya();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Da(f.mutation,c,gn.empty(),wt.now()),nd(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Jb(i.bundledQuery),readTime:dr(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.overlays=new tt(se.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=ls(),s=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new tt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=ls(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=ls(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return W.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cb(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.Tr=new kt(Et.Er),this.dr=new kt(Et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new qe([])),r=new Et(n,e),i=new Et(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new qe([])),r=new Et(n,e),i=new Et(n,e+1);let s=Ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(Et.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ab(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Et(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(Ne);return n.forEach(i=>{const s=new Et(i,0),o=new Et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new Et(new se(s),0);let l=new kt(Ne);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),W.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new Et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Et(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.Mr=e,this.docs=function(){return new tt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$r();const o=n.path,l=new se(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||W1($1(f),r)<=0||(i.has(f.key)||nd(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){de()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uP(this)}getSize(e){return W.resolve(this.size)}}class uP extends tP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.persistence=e,this.Nr=new Vo(n=>rm(n),im),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cm,this.targetCount=0,this.kr=Ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zp(0),this.Kr=!1,this.Kr=!0,this.$r=new oP,this.referenceDelegate=e(this),this.Ur=new cP(this),this.indexManager=new Zb,this.remoteDocumentCache=function(i){return new lP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Xb(n),this.Gr=new iP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new aP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new hP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hP extends q1{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.Jr=new cm,this.Yr=null}static Zr(e){return new dm(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=se.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iC()?8:K1(Ht())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fP;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(la()<=Te.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(la()<=Te.DEBUG&&te("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(la()<=Te.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):W.resolve())}Yi(e,n){if(Pv(n))return W.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cf(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,Cf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return Pv(n)||i.isEqual(fe.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(la()<=Te.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Us(n)),this.rs(e,o,n,z1(i,-1)).next(l=>l))})}ts(e,n){let r=new kt(rx(e));return n.forEach((i,s)=>{nd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return la()<=Te.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Ji.getDocumentsMatchingQuery(e,n,Oi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new tt(Ne),this._s=new Vo(s=>rm(s),im),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gP(t,e,n,r){return new mP(t,e,n,r)}async function Ix(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Ee();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function yP(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,g=m.keys();let _=W.resolve();return g.forEach(x=>{_=_.next(()=>f.getEntry(u,x)).next(C=>{const k=c.docVersions.get(x);je(k!==null),C.version.compareTo(k)<0&&(m.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),f.addEntry(C)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ee();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Sx(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vP(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=i.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,m)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(Pt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(m,_),function(C,k,I){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,_,f)&&l.push(n.Ur.updateTargetData(s,_))});let u=$r(),c=Ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(_P(s,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(fe.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return W.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function _P(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$r();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):te("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function wP(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EP(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new yi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Df(t,e,n){const r=pe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xl(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function $v(t,e,n){const r=pe(t);let i=fe.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=pe(u),g=m._s.get(f);return g!==void 0?W.resolve(m.os.get(g)):m.Ur.getTargetData(c,f)}(r,o,cr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:fe.min(),n?s:Ee())).next(l=>(xP(r,db(e),l),{documents:l,Ts:s})))}function xP(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Wv{constructor(){this.activeTargetIds=yb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TP{constructor(){this.so=new Wv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;function lh(){return du===null?du=function(){return 268435456+Math.round(2147483648*Math.random())}():du++,"0x"+du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class AP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=lh(),u=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(f=>(te("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw xo("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=SP[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=lh();return new Promise((o,l)=>{const u=new UE;u.setWithCredentials(!0),u.listenOnce(FE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ku.NO_ERROR:const f=u.getResponseJson();te(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ku.TIMEOUT:te(Mt,`RPC '${e}' ${s} timed out`),l(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const m=u.getStatus();if(te(Mt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const x=function(k){const I=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(I)>=0?I:z.UNKNOWN}(_.status);l(new Y(x,_.message))}else l(new Y(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(z.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{te(Mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);te(Mt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=lh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$E(),l=zE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");te(Mt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,_=!1;const x=new RP({Io:k=>{_?te(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(te(Mt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),te(Mt,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},To:()=>m.close()}),C=(k,I,w)=>{k.listen(I,A=>{try{w(A)}catch(O){setTimeout(()=>{throw O},0)}})};return C(m,ga.EventType.OPEN,()=>{_||(te(Mt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),C(m,ga.EventType.CLOSE,()=>{_||(_=!0,te(Mt,`RPC '${e}' stream ${i} transport closed`),x.So())}),C(m,ga.EventType.ERROR,k=>{_||(_=!0,xo(Mt,`RPC '${e}' stream ${i} transport errored:`,k),x.So(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),C(m,ga.EventType.MESSAGE,k=>{var I;if(!_){const w=k.data[0];je(!!w);const A=w,O=A.error||((I=A[0])===null||I===void 0?void 0:I.error);if(O){te(Mt,`RPC '${e}' stream ${i} received error:`,O);const V=O.status;let B=function(T){const S=ct[T];if(S!==void 0)return px(S)}(V),y=O.message;B===void 0&&(B=z.INTERNAL,y="Unknown error status: "+V+" with message "+O.message),_=!0,x.So(new Y(B,y)),m.close()}else te(Mt,`RPC '${e}' stream ${i} received:`,w),x.bo(w)}}),C(l,BE.STAT_EVENT,k=>{k.stat===xf.PROXY?te(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===xf.NOPROXY&&te(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return new Vb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CP extends Ax{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Fb(this.serializer,e),r=function(s){if(!("targetChange"in s))return fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?dr(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Rf(u)?{documents:$b(s,u)}:{query:Wb(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=yx(s,o.resumeToken);const c=Nf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){l.readTime=Ec(s,o.snapshotVersion.toTimestamp());const c=Nf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=qb(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pf(this.serializer),n.removeTarget=e,this.a_(n)}}class NP extends Ax{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=zb(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,kf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,kf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Cs(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=pe(u);c.L_.add(4),await Sl(c),c.q_.set("Unknown"),c.L_.delete(4),await ad(c)}(this))})}),this.q_=new bP(r,i)}}async function ad(t){if(Cs(t))for(const e of t.B_)await e(!0)}async function Sl(t){for(const e of t.B_)await e(!1)}function Cx(t,e){const n=pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?mm(n):Mo(n).r_()&&pm(n,e))}function fm(t,e){const n=pe(t),r=Mo(n);n.N_.delete(e),r.r_()&&Nx(n,e),n.N_.size===0&&(r.r_()?r.o_():Cs(n)&&n.q_.set("Unknown"))}function pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function Nx(t,e){t.Q_.xe(e),Mo(t).R_(e)}function mm(t){t.Q_=new Db({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function gm(t){return Cs(t)&&!Mo(t).n_()&&t.N_.size>0}function Cs(t){return pe(t).L_.size===0}function kx(t){t.Q_=void 0}async function DP(t){t.q_.set("Online")}async function OP(t){t.N_.forEach((e,n)=>{pm(t,e)})}async function jP(t,e){kx(t),gm(t)?(t.q_.M_(e),mm(t)):t.q_.set("Unknown")}async function LP(t,e,n){if(t.q_.set("Online"),e instanceof gx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(t,r)}else if(e instanceof Du?t.Q_.Ke(e):e instanceof mx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await Sx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Pt.EMPTY_BYTE_STRING,f.snapshotVersion)),Nx(s,u);const m=new yi(f.target,u,c,f.sequenceNumber);pm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await xc(t,r)}}async function xc(t,e,n){if(!xl(e))throw e;t.L_.add(1),await Sl(t),t.q_.set("Offline"),n||(n=()=>Sx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ad(t)})}function bx(t,e){return e().catch(n=>xc(t,n,e))}async function ld(t){const e=pe(t),n=Li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VP(e);)try{const i=await wP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,MP(e,i)}catch(i){await xc(e,i)}Px(e)&&Dx(e)}function VP(t){return Cs(t)&&t.O_.length<10}function MP(t,e){t.O_.push(e);const n=Li(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Px(t){return Cs(t)&&!Li(t).n_()&&t.O_.length>0}function Dx(t){Li(t).start()}async function UP(t){Li(t).p_()}async function FP(t){const e=Li(t);for(const n of t.O_)e.m_(n.mutations)}async function BP(t,e,n){const r=t.O_.shift(),i=am.from(r,e,n);await bx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ld(t)}async function zP(t,e){e&&Li(t).V_&&await async function(r,i){if(function(o){return kb(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Li(r).s_(),await bx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ld(r)}}(t,e),Px(t)&&Dx(t)}async function qv(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Cs(n);n.L_.add(3),await Sl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ad(n)}async function $P(t,e){const n=pe(t);e?(n.L_.delete(2),await ad(n)):e||(n.L_.add(2),await Sl(n),n.q_.set("Unknown"))}function Mo(t){return t.K_||(t.K_=function(n,r,i){const s=pe(n);return s.w_(),new CP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:DP.bind(null,t),Ro:OP.bind(null,t),mo:jP.bind(null,t),d_:LP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?mm(t):t.q_.set("Unknown")):(await t.K_.stop(),kx(t))})),t.K_}function Li(t){return t.U_||(t.U_=function(n,r,i){const s=pe(n);return s.w_(),new NP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UP.bind(null,t),mo:zP.bind(null,t),f_:FP.bind(null,t),g_:BP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ld(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new ym(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vm(t,e){if(zr("AsyncQueue",`${e}: ${t}`),xl(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=ya(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.W_=new tt(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ao(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HP{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=pe(n),s=i.queries;i.queries=Gv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function Gv(){return new Vo(t=>nx(t),td)}async function _m(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new WP,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=vm(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Em(n)}async function wm(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qP(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Em(n)}function KP(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Em(t){t.Y_.forEach(e=>{e.next()})}var Of,Qv;(Qv=Of||(Of={})).ea="default",Qv.Cache="cache";class xm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.key=e}}class jx{constructor(e){this.key=e}}class GP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=rx(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Kv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const g=i.get(f),_=nd(this.query,m)?m:null,x=!!g&&this.mutatedKeys.has(g.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;g&&_?g.data.isEqual(_.data)?x!==C&&(r.track({type:3,doc:_}),k=!0):this.ga(g,_)||(r.track({type:2,doc:_}),k=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),k=!0):g&&!_&&(r.track({type:1,doc:g}),k=!0,(u||c)&&(l=!0)),k&&(_?(o=o.add(_),s=C?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(_,x){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return C(_)-C(x)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ao(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new jx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ox(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YP{constructor(e){this.key=e,this.va=!1}}class XP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vo(l=>nx(l),td),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(se.comparator),this.Na=new Map,this.La=new cm,this.Ba={},this.ka=new Map,this.qa=Ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JP(t,e,n=!0){const r=Bx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Lx(r,e,n,!0),i}async function ZP(t,e){const n=Bx(t);await Lx(n,e,!0,!1)}async function Lx(t,e,n,r){const i=await EP(t.localStore,cr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await eD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cx(t.remoteStore,i),l}async function eD(t,e,n,r,i){t.Ka=(m,g,_)=>async function(C,k,I,w){let A=k.view.ma(I);A.ns&&(A=await $v(C.localStore,k.query,!1).then(({documents:y})=>k.view.ma(y,A)));const O=w&&w.targetChanges.get(k.targetId),V=w&&w.targetMismatches.get(k.targetId)!=null,B=k.view.applyChanges(A,C.isPrimaryClient,O,V);return Xv(C,k.targetId,B.wa),B.snapshot}(t,m,g,_);const s=await $v(t.localStore,e,!0),o=new GP(e,s.Ts),l=o.ma(s.documents),u=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Xv(t,n,c.wa);const f=new QP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function tD(t,e,n){const r=pe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!td(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Df(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fm(r.remoteStore,i.targetId),jf(r,i.targetId)}).catch(El)):(jf(r,i.targetId),await Df(r.localStore,i.targetId,!0))}async function nD(t,e){const n=pe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fm(n.remoteStore,r.targetId))}async function rD(t,e,n){const r=cD(t);try{const i=await function(o,l){const u=pe(o),c=wt.now(),f=l.reduce((_,x)=>_.add(x.key),Ee());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=$r(),C=Ee();return u.cs.getEntries(_,f).next(k=>{x=k,x.forEach((I,w)=>{w.isValidDocument()||(C=C.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(k=>{m=k;const I=[];for(const w of l){const A=Sb(w,m.get(w.key).overlayedDocument);A!=null&&I.push(new $i(w.key,A,GE(A.value.mapValue),kn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,I,l)}).next(k=>{g=k;const I=k.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(_,k.batchId,I)})}).then(()=>({batchId:g.batchId,changes:sx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new tt(Ne)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Rl(r,i.changes),await ld(r.remoteStore)}catch(i){const s=vm(i,"Failed to persist write");n.reject(s)}}async function Vx(t,e){const n=pe(t);try{const r=await vP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?je(o.va):i.removedDocuments.size>0&&(je(o.va),o.va=!1))}),await Rl(n,r,e)}catch(r){await El(r)}}function Yv(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=pe(o);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&Em(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iD(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new tt(se.comparator);o=o.insert(s,zt.newNoDocument(s,fe.min()));const l=Ee().add(s),u=new sd(fe.min(),new Map,new tt(Ne),o,l);await Vx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Tm(r)}else await Df(r.localStore,e,!1).then(()=>jf(r,e,n)).catch(El)}async function sD(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await yP(n.localStore,e);Ux(n,r,null),Mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,i)}catch(i){await El(i)}}async function oD(t,e,n){const r=pe(t);try{const i=await function(o,l){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(je(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);Ux(r,e,n),Mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,i)}catch(i){await El(i)}}function Mx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ux(t,e,n){const r=pe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Fx(t,r)})}function Fx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tm(t))}function Xv(t,e,n){for(const r of n)r instanceof Ox?(t.La.addReference(r.key,e),aD(t,r)):r instanceof jx?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Fx(t,r.key)):de()}function aD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),Tm(t))}function Tm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new YP(n)),t.Oa=t.Oa.insert(n,r),Cx(t.remoteStore,new yi(cr(ed(n.path)),r,"TargetPurposeLimboResolution",Zp.oe))}}async function Rl(t,e,n){const r=pe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=hm.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const f=pe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>W.forEach(c,g=>W.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>W.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!xl(m))throw m;te("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const _=f.os.get(g),x=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(g,C)}}}(r.localStore,s))}async function lD(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await Ix(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.hs)}}function uD(t,e){const n=pe(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let i=Ee();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function Bx(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iD.bind(null,e),e.Ca.d_=qP.bind(null,e.eventManager),e.Ca.$a=KP.bind(null,e.eventManager),e}function cD(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oD.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gP(this.persistence,new pP,e.initialUser,this.serializer)}Ga(e){return new dP(dm.Zr,this.serializer)}Wa(e){return new TP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class Lf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lD.bind(null,this.syncEngine),await $P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HP}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),r=function(s){return new AP(s)}(e.databaseInfo);return function(s,o,l,u){return new kP(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new PP(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Yv(this.syncEngine,n,0),function(){return Hv.D()?new Hv:new IP}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const m=new XP(i,s,o,l,u,c);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=pe(i);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Lf.provider={build:()=>new Lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=HE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ix(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hD(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qv(e.remoteStore,i)),t._onlineComponents=e}async function hD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await ch(t,new Tc)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new Tc);return t._offlineComponents}async function zx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Jv(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Jv(t,new Lf))),t._onlineComponents}function fD(t){return zx(t).then(e=>e.syncEngine)}async function Ic(t){const e=await zx(t),n=e.eventManager;return n.onListen=JP.bind(null,e.syncEngine),n.onUnlisten=tD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nD.bind(null,e.syncEngine),n}function pD(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Im({next:g=>{f.Za(),o.enqueueAndForget(()=>wm(s,m));const _=g.docs.has(l);!_&&g.fromCache?c.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new xm(ed(l.path),f,{includeMetadataChanges:!0,_a:!0});return _m(s,m)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}function mD(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Im({next:g=>{f.Za(),o.enqueueAndForget(()=>wm(s,m)),g.fromCache&&u.source==="server"?c.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new xm(l,f,{includeMetadataChanges:!0,_a:!0});return _m(s,m)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gD(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e_(t){if(!se.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t_(t){if(se.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ud(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function on(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ud(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$x((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D1;switch(r.type){case"firstParty":return new V1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zv.get(n);r&&(te("ComponentProvider","Removing Datastore"),Zv.delete(n),r.terminate())}(this),Promise.resolve()}}function yD(t,e,n,r={}){var i;const s=(t=on(t,cd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ut.MOCK_USER;else{l=Zw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ut(c)}t._authCredentials=new O1(new WE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class Ni extends Wi{constructor(e,n,r){super(e,n,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new se(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function it(t,e,...n){if(t=pt(t),Wx("collection","path",e),t instanceof cd){const r=qe.fromString(e,...n);return t_(r),new Ni(t,null,r)}{if(!(t instanceof $t||t instanceof Ni))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return t_(r),new Ni(t.firestore,null,r)}}function En(t,e,...n){if(t=pt(t),arguments.length===1&&(e=HE.newId()),Wx("doc","path",e),t instanceof cd){const r=qe.fromString(e,...n);return e_(r),new $t(t,null,new se(r))}{if(!(t instanceof $t||t instanceof Ni))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return e_(r),new $t(t.firestore,t instanceof Ni?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rx(this,"async_queue_retry"),this.Vu=()=>{const r=uh();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xl(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw zr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ym.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function i_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wr extends cd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new r_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function vD(t,e){const n=typeof t=="object"?t:zp(),r=typeof t=="string"?t:"(default)",i=Gc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Yw("firestore");s&&yD(i,...s)}return i}function dd(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_D(t),t._firestoreClient}function _D(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new Y1(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,$x(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new dD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Pt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Co(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=/^__.*__$/;class ED{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}class Hx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Am{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qx(this.Cu)&&wD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||od(e)}Qu(e,n,r,i=!1){return new Am({Cu:e,methodName:n,qu:r,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(t){const e=t._freezeSettings(),n=od(t._databaseId);return new xD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Nm("Data must be an object, but it was:",o,r);const l=Gx(r,o);let u,c;if(s.merge)u=new gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const g=Vf(e,m,n);if(!o.contains(g))throw new Y(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Yx(f,g)||f.push(g)}u=new gn(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new ED(new en(l),u,c)}class md extends fd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class Cm extends fd{_toFieldTransform(e){return new Eb(e.path,new al)}isEqual(e){return e instanceof Cm}}function TD(t,e,n,r){const i=t.Qu(1,e,n);Nm("Data must be an object, but it was:",i,r);const s=[],o=en.empty();As(r,(u,c)=>{const f=km(e,u,n);c=pt(c);const m=i.Nu(f);if(c instanceof md)s.push(f);else{const g=Al(c,m);g!=null&&(s.push(f),o.set(f,g))}});const l=new gn(s);return new Hx(o,l,i.fieldTransforms)}function ID(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Vf(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Vf(e,s[g])),u.push(s[g+1]);const c=[],f=en.empty();for(let g=l.length-1;g>=0;--g)if(!Yx(c,l[g])){const _=l[g];let x=u[g];x=pt(x);const C=o.Nu(_);if(x instanceof md)c.push(_);else{const k=Al(x,C);k!=null&&(c.push(_),f.set(_,k))}}const m=new gn(c);return new Hx(f,m,o.fieldTransforms)}function SD(t,e,n,r=!1){return Al(n,t.Qu(r?4:3,e))}function Al(t,e){if(Qx(t=pt(t)))return Nm("Unsupported field value:",e,t),Gx(t,e);if(t instanceof fd)return function(r,i){if(!qx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Al(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wt.fromDate(r);return{timestampValue:Ec(i.serializer,s)}}if(r instanceof wt){const s=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ec(i.serializer,s)}}if(r instanceof Sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:yx(i.serializer,r._byteString)};if(r instanceof $t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:um(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return sm(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ud(r)}`)}(t,e)}function Gx(t,e){const n={};return qE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,i)=>{const s=Al(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Sm||t instanceof Co||t instanceof $t||t instanceof fd||t instanceof Rm)}function Nm(t,e,n){if(!Qx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ud(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Vf(t,e,n){if((e=pt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return km(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const RD=new RegExp("[~\\*/\\[\\]]");function km(t,e,n){if(e.search(RD)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(z.INVALID_ARGUMENT,l+t+u)}function Yx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AD extends Xx{data(){return super.data()}}function gd(t,e){return typeof e=="string"?km(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class Zx extends bm{}function Dn(t,e,...n){let r=[];e instanceof bm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Dm).length,l=s.filter(u=>u instanceof yd).length;if(o>1||o>0&&l>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yd extends Zx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return eT(e._query,n),new Wi(e.firestore,e.converter,Af(e._query,n))}_parse(e){const n=pd(e.firestore);return function(s,o,l,u,c,f,m){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){o_(m,f);const _=[];for(const x of m)_.push(s_(u,s,x));g={arrayValue:{values:_}}}else g=s_(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||o_(m,f),g=SD(l,o,m,f==="in"||f==="not-in");return ft.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pm(t,e,n){const r=e,i=gd("where",t);return yd._create(i,r,n)}class Dm extends bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)eT(o,u),o=Af(o,u)}(e._query,n),new Wi(e.firestore,e.converter,Af(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Om extends Zx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Om(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(s,o)}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Yn(t,e="asc"){const n=e,r=gd("orderBy",t);return Om._create(r,n)}function s_(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tx(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!se.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rv(t,new se(r))}if(n instanceof $t)return Rv(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ud(n)}.`)}function o_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CD{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>at(o.doubleValue));return new Rm(s)}convertGeoPoint(e){return new Sm(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=ji(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);je(Tx(r));const i=new il(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||zr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nT extends Xx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ou extends nT{data(e={}){return super.data(e)}}class rT{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _a(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ou(this._firestore,this._userDataWriter,r.key,r,new _a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ou(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _a(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ou(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _a(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:ND(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ND(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){t=on(t,$t);const e=on(t.firestore,Wr);return pD(dd(e),t._key).then(n=>oT(e,t,n))}class jm extends CD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function Gr(t){t=on(t,Wi);const e=on(t.firestore,Wr),n=dd(e),r=new jm(e);return Jx(t._query),mD(n,t._query).then(i=>new rT(e,r,t,i))}function kD(t,e,n){t=on(t,$t);const r=on(t.firestore,Wr),i=tT(t.converter,e,n);return vd(r,[Kx(pd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kn.none())])}function Ns(t,e,n,...r){t=on(t,$t);const i=on(t.firestore,Wr),s=pd(i);let o;return o=typeof(e=pt(e))=="string"||e instanceof hd?ID(s,"updateDoc",t._key,e,n,r):TD(s,"updateDoc",t._key,e),vd(i,[o.toMutation(t._key,kn.exists(!0))])}function Lm(t){return vd(on(t.firestore,Wr),[new om(t._key,kn.none())])}function Qr(t,e){const n=on(t.firestore,Wr),r=En(t),i=tT(t.converter,e);return vd(n,[Kx(pd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function sT(t,...e){var n,r,i;t=pt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||i_(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(i_(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,c,f;if(t instanceof $t)c=on(t.firestore,Wr),f=ed(t._key.path),u={next:m=>{e[o]&&e[o](oT(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=on(t,Wi);c=on(m.firestore,Wr),f=m._query;const g=new jm(c);u={next:_=>{e[o]&&e[o](new rT(c,g,m,_))},error:e[o+1],complete:e[o+2]},Jx(t._query)}return function(g,_,x,C){const k=new Im(C),I=new xm(_,k,x);return g.asyncQueue.enqueueAndForget(async()=>_m(await Ic(g),I)),()=>{k.Za(),g.asyncQueue.enqueueAndForget(async()=>wm(await Ic(g),I))}}(dd(c),f,l,u)}function vd(t,e){return function(r,i){const s=new Or;return r.asyncQueue.enqueueAndForget(async()=>rD(await fD(r),i,s)),s.promise}(dd(t),e)}function oT(t,e,n){const r=n.docs.get(e._key),i=new jm(t);return new nT(t,i,e._key,r,new _a(n.hasPendingWrites,n.fromCache),e.converter)}function Dt(){return new Cm("serverTimestamp")}(function(e,n=!0){(function(i){jo=i})(Ss),vs(new Di("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Wr(new j1(r.getProvider("auth-internal")),new U1(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ar(Ev,"4.7.3",e),ar(Ev,"4.7.3","esm2017")})();var bD="firebase",PD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(bD,PD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebasestorage.googleapis.com",DD="storageBucket",OD=2*60*1e3,jD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends mr{constructor(e,n,r=0){super(dh(e),`Firebase Storage: ${n} (${dh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var fr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fr||(fr={}));function dh(t){return"storage/"+t}function LD(){const t="An unknown error occurred, please check the error payload for server response.";return new gr(fr.UNKNOWN,t)}function VD(){return new gr(fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MD(){return new gr(fr.CANCELED,"User canceled the upload/download.")}function UD(t){return new gr(fr.INVALID_URL,"Invalid URL '"+t+"'.")}function FD(t){return new gr(fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a_(t){return new gr(fr.INVALID_ARGUMENT,t)}function lT(){return new gr(fr.APP_DELETED,"The Firebase app was deleted.")}function BD(t){return new gr(fr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(r.path==="")return r;throw FD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${f}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},C=n===aT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",I=new RegExp(`^https?://${C}/${i}/${k}`,"i"),A=[{regex:l,indices:u,postModify:s},{regex:_,indices:x,postModify:c},{regex:I,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<A.length;O++){const V=A[O],B=V.regex.exec(e);if(B){const y=B[V.indices.bucket];let v=B[V.indices.path];v||(v=""),r=new $n(y,v),V.postModify(r);break}}if(r==null)throw UD(e);return r}}class zD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function f(...k){c||(c=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,t(_,u())},k)}function g(){s&&clearTimeout(s)}function _(k,...I){if(c){g();return}if(k){g(),f.call(null,k,...I);return}if(u()||o){g(),f.call(null,k,...I);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,m(A)}let x=!1;function C(k){x||(x=!0,g(),!c&&(i!==null?(k||(l=2),clearTimeout(i),m(0)):k||(l=1)))}return m(0),s=setTimeout(()=>{o=!0,C(!0)},n),C}function WD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){return t!==void 0}function l_(t,e,n,r){if(r<e)throw a_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw a_(`Invalid value for '${t}'. Expected ${n} or less.`)}function qD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Rc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rc||(Rc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,i,s,o,l,u,c,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,x)=>{this.resolve_=_,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Rc.NO_ERROR,u=s.getStatus();if(!l||KD(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Rc.ABORT;r(!1,new hu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new hu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());HD(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=LD();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?lT():MD();o(u)}else{const u=VD();o(u)}};this.canceled_?n(!1,new hu(!1,null,!0)):this.backoffId_=$D(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function QD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function YD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function XD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZD(t,e,n,r,i,s,o=!0){const l=qD(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return XD(c,e),QD(c,n),YD(c,s),JD(c,r),new GD(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function t2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ac(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t2(this._location.path)}get storage(){return this._service}get parent(){const e=e2(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new Ac(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BD(e)}}function u_(t,e){const n=e==null?void 0:e[DD];return n==null?null:$n.makeFromBucketSpec(n,t)}function n2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Zw(i,t.app.options.projectId))}class r2{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=aT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OD,this._maxUploadRetryTime=jD,this._requests=new Set,i!=null?this._bucket=$n.makeFromBucketSpec(i,this._host):this._bucket=u_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=u_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ac(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new zD(lT());{const o=ZD(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const c_="@firebase/storage",d_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="storage";function i2(t=zp(),e){t=pt(t);const r=Gc(t,uT).getImmediate({identifier:e}),i=Yw("storage");return i&&s2(r,...i),r}function s2(t,e,n,r={}){n2(t,e,n,r)}function o2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new r2(n,r,i,e,Ss)}function a2(){vs(new Di(uT,o2,"PUBLIC").setMultipleInstances(!0)),ar(c_,d_,""),ar(c_,d_,"esm2017")}a2();const l2={apiKey:"AIzaSyASf7lyaGhgEl0q_q1j1lQTho4_HjVAICA",authDomain:"customer-ops-portal.firebaseapp.com",projectId:"customer-ops-portal",storageBucket:"customer-ops-portal.firebasestorage.app",messagingSenderId:"96326522125",appId:"1:96326522125:web:077b1758f6095020430c44"},Vm=nE(l2),Mm=b1(Vm),Re=vD(Vm);i2(Vm);function u2(t){return t?t.toLowerCase():"customer"}function Xn(){const[t,e]=D.useState(null),[n,r]=D.useState(null),[i,s]=D.useState(!0);return D.useEffect(()=>{const o=_k(Mm,async l=>{if(e(l),r(null),!l){s(!1);return}try{const u=En(Re,"users",l.uid),c=await iT(u);if(c.exists()){const f=c.data();r({...f,role:u2(f.role),customerId:f.customerId||f.name||l.email})}else{const f={role:"customer",name:l.email,customerId:l.email};await kD(u,f,{merge:!0}),r(f)}}catch(u){console.error("Failed loading user profile:",u),r({role:"customer",name:l.email,customerId:l.email})}finally{s(!1)}});return()=>o()},[]),{user:t,profile:n,loading:i}}async function c2(t,e){return gk(Mm,t,e)}async function d2(){return wk(Mm)}async function h2(t){const e=await iT(En(Re,"orders",t));return e.exists()?{id:e.id,...e.data()}:null}async function cT(t=null){let e=Dn(it(Re,"orders"),Yn("createdAt","desc"));return t&&(e=Dn(it(Re,"orders"),Pm("customerId","==",t),Yn("createdAt","desc"))),(await Gr(e)).docs.map(r=>({id:r.id,...r.data()}))}function dT(t,e=null){let n=Dn(it(Re,"orders"),Yn("createdAt","desc"));return e&&(n=Dn(it(Re,"orders"),Pm("customerId","==",e),Yn("createdAt","desc"))),sT(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));t(i)},r=>{console.error("Orders subscription error:",r),t([])})}async function f2(t){const e=await Qr(it(Re,"orders"),{...t,status:"submitted",viewed:!1,createdAt:Dt(),updatedAt:Dt()});return await fT(e.id,{type:"created",message:"Order submitted",createdByUid:t.createdByUid,createdByName:t.createdByName||null}),await g2({type:"new_order",orderId:e.id,title:t.title,customerId:t.customerId,message:`New order "${t.title}" from ${t.customerId}`}),e.id}async function p2(t,e){await Ns(En(Re,"orders",t),{...e,updatedAt:Dt()})}async function hT(t){await Ns(En(Re,"orders",t),{viewed:!0})}async function m2(t){const e=Dn(it(Re,"orders",t,"updates"),Yn("createdAt","desc"));return(await Gr(e)).docs.map(r=>({id:r.id,...r.data()}))}async function fT(t,{type:e,message:n,createdByUid:r,createdByName:i}){await Qr(it(Re,"orders",t,"updates"),{type:e,message:n,createdByUid:r,createdByName:i||null,createdAt:Dt()})}async function g2(t){await Qr(it(Re,"notifications"),{...t,read:!1,createdAt:Dt()})}function y2(t){const e=Dn(it(Re,"notifications"),Yn("createdAt","desc"));return sT(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},()=>t([]))}async function v2(t){await Ns(En(Re,"notifications",t),{read:!0})}async function _2(){const t=Dn(it(Re,"notifications"),Pm("read","==",!1)),n=(await Gr(t)).docs.map(r=>Ns(En(Re,"notifications",r.id),{read:!0}));await Promise.all(n)}function w2(t){const e=["Date","Time","Type","Message","Order ID","Customer","Read"],n=t.map(l=>{var c;const u=(c=l.createdAt)!=null&&c.toDate?l.createdAt.toDate():new Date;return[u.toLocaleDateString(),u.toLocaleTimeString(),l.type||"",`"${(l.message||"").replace(/"/g,'""')}"`,l.orderId||"",l.customerId||"",l.read?"Yes":"No"]}),r=[e.join(","),...n.map(l=>l.join(","))].join(`
`),i=new Blob([r],{type:"text/csv"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`orbit-notifications-${new Date().toISOString().split("T")[0]}.csv`,o.click(),URL.revokeObjectURL(s)}function E2({isOpen:t,onClose:e,notifications:n,onExport:r}){if(!t)return null;const i=n.filter(s=>!s.read);return d.jsxs("div",{className:"fixed inset-0 z-50",children:[d.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:e}),d.jsxs("div",{className:"absolute right-4 top-20 w-96 max-w-[calc(100vw-2rem)] bg-white border border-neutral-200 shadow-xl animate-in",children:[d.jsxs("div",{className:"p-4 border-b border-neutral-100 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium",children:"Notifications"}),d.jsxs("p",{className:"text-xs text-neutral-400",children:[i.length," unread"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:r,className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Export CSV"}),d.jsx("button",{onClick:e,className:"text-neutral-400 hover:text-neutral-900",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?d.jsx("div",{className:"p-8 text-center",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No notifications"})}):d.jsx("div",{className:"divide-y divide-neutral-100",children:n.slice(0,20).map(s=>{var l;const o=(l=s.createdAt)!=null&&l.toDate?s.createdAt.toDate():new Date;return d.jsx("div",{className:`p-4 hover:bg-neutral-50 transition-colors ${s.read?"":"bg-blue-50/50"}`,onClick:()=>!s.read&&v2(s.id),children:d.jsxs("div",{className:"flex items-start gap-3",children:[!s.read&&d.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm text-neutral-900",children:s.message}),d.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:[o.toLocaleDateString(),"  ",o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})},s.id)})})}),n.length>0&&i.length>0&&d.jsx("div",{className:"p-3 border-t border-neutral-100",children:d.jsx("button",{onClick:()=>_2(),className:"text-xs text-neutral-500 hover:text-neutral-900 w-full text-center",children:"Mark all as read"})})]})]})}function x2({orders:t,onClose:e}){const n=t.filter(r=>!r.viewed);return n.length===0?null:d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg shadow-2xl animate-in",children:[d.jsx("div",{className:"p-6 border-b border-neutral-100",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium",children:"New Orders Received"}),d.jsxs("p",{className:"text-sm text-neutral-500",children:[n.length," new order",n.length>1?"s":""," since last visit"]})]})]})}),d.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-neutral-100",children:n.slice(0,5).map(r=>{var i,s;return d.jsx(uc,{to:`/orders/${r.id}`,onClick:e,className:"block p-4 hover:bg-neutral-50 transition-colors",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:r.title}),d.jsx("p",{className:"text-xs text-neutral-500",children:r.customerId})]}),d.jsx("span",{className:"text-xs text-neutral-400",children:(s=(i=r.createdAt)==null?void 0:i.toDate)==null?void 0:s.call(i).toLocaleDateString()})]})},r.id)})}),d.jsxs("div",{className:"p-4 border-t border-neutral-100 flex justify-between",children:[d.jsx(uc,{to:"/orders",onClick:e,className:"text-sm text-neutral-600 hover:text-neutral-900",children:"View all orders "}),d.jsx("button",{onClick:e,className:"btn-primary btn-sm",children:"Got it"})]})]})]})}function T2(){const{user:t,profile:e}=Xn(),n=Bi(),[r,i]=D.useState(!1),[s,o]=D.useState(!1),[l,u]=D.useState(!1),[c,f]=D.useState([]),[m,g]=D.useState([]),[_,x]=D.useState(!0),C=(e==null?void 0:e.role)||"customer",k=C==="admin"||C==="staff",I=m.filter(B=>!B.read).length,w=c.filter(B=>!B.viewed).length;D.useEffect(()=>{if(!k)return;const B=dT(y=>{f(y),_&&y.some(v=>!v.viewed)&&(u(!0),x(!1))});return()=>B()},[k,_]),D.useEffect(()=>{if(!k)return;const B=y2(g);return()=>B()},[k]);const A=async()=>{await d2(),n("/login")},O=()=>{w2(m)},V=({to:B,children:y,badge:v})=>d.jsxs(uc,{to:B,onClick:()=>i(!1),className:({isActive:T})=>`relative flex items-center gap-2 text-xs tracking-widest uppercase transition-colors ${T?"text-neutral-900":"text-neutral-400 hover:text-neutral-900"}`,children:[y,v>0&&d.jsx("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-2xs font-medium bg-red-500 text-white rounded-full",children:v})]});return d.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[d.jsxs("header",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm border-b border-neutral-100",children:[d.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between h-20",children:[d.jsxs(uc,{to:"/",className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-neutral-900 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white text-sm font-semibold",children:"O"})}),d.jsx("span",{className:"text-xl font-light tracking-tight",children:"Orbit"})]}),d.jsx("nav",{className:"hidden lg:flex items-center gap-10",children:k?d.jsxs(d.Fragment,{children:[d.jsx(V,{to:"/orders",badge:w,children:"Orders"}),d.jsx(V,{to:"/products",children:"Products"}),d.jsx(V,{to:"/lookbook",children:"Lookbook"}),d.jsx(V,{to:"/production",children:"Production"}),d.jsx(V,{to:"/customers",children:"Customers"})]}):d.jsxs(d.Fragment,{children:[d.jsx(V,{to:"/dashboard",children:"Dashboard"}),d.jsx(V,{to:"/orders",children:"My Orders"}),d.jsx(V,{to:"/products",children:"Catalogue"}),d.jsx(V,{to:"/lookbook",children:"Updates"})]})}),d.jsxs("div",{className:"flex items-center gap-4",children:[k&&d.jsxs("button",{onClick:()=>o(!0),className:"relative p-2 text-neutral-400 hover:text-neutral-900 transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),I>0&&d.jsx("span",{className:"notification-dot"})]}),d.jsxs("div",{className:"hidden sm:block text-right",children:[d.jsx("p",{className:"text-xs text-neutral-900",children:(e==null?void 0:e.name)||(t==null?void 0:t.email)}),d.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider",children:C})]}),d.jsx("button",{onClick:A,className:"text-xs tracking-widest uppercase text-neutral-400 hover:text-neutral-900 transition-colors",children:"Exit"}),d.jsx("button",{onClick:()=>i(!r),className:"lg:hidden p-2",children:d.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between",children:[d.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"rotate-45 translate-y-1.5":""}`}),d.jsx("span",{className:`h-px bg-neutral-900 transition-opacity ${r?"opacity-0":""}`}),d.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"-rotate-45 -translate-y-1.5":""}`})]})})]})]})}),r&&d.jsx("nav",{className:"lg:hidden border-t border-neutral-100 py-4 px-6 space-y-3 bg-white",children:k?d.jsxs(d.Fragment,{children:[d.jsx(V,{to:"/orders",badge:w,children:"Orders"}),d.jsx(V,{to:"/products",children:"Products"}),d.jsx(V,{to:"/lookbook",children:"Lookbook"}),d.jsx(V,{to:"/production",children:"Production"}),d.jsx(V,{to:"/customers",children:"Customers"})]}):d.jsxs(d.Fragment,{children:[d.jsx(V,{to:"/dashboard",children:"Dashboard"}),d.jsx(V,{to:"/orders",children:"My Orders"}),d.jsx(V,{to:"/products",children:"Catalogue"}),d.jsx(V,{to:"/lookbook",children:"Updates"})]})})]}),d.jsx(E2,{isOpen:s,onClose:()=>o(!1),notifications:m,onExport:O}),l&&k&&d.jsx(x2,{orders:c,onClose:()=>u(!1)}),d.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-6 lg:px-8 py-12",children:d.jsx(wA,{})}),d.jsx("footer",{className:"border-t border-neutral-100 py-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 flex items-center justify-between",children:[d.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:"Orbit B2B Platform"}),d.jsx("p",{className:"text-2xs text-neutral-300",children:" 2026"})]})})]})}function I2(){var _;const{user:t,loading:e}=Xn(),r=((_=Fi().state)==null?void 0:_.from)||"/",[i,s]=D.useState(""),[o,l]=D.useState(""),[u,c]=D.useState(!1),[f,m]=D.useState("");if(!e&&t)return d.jsx(_o,{to:r,replace:!0});const g=async x=>{if(x.preventDefault(),!(!i.trim()||!o)){c(!0),m("");try{await c2(i.trim(),o)}catch(C){m(C.code==="auth/invalid-credential"?"Invalid email or password":"Unable to sign in")}finally{c(!1)}}};return e?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"w-8 h-8 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin"})}):d.jsxs("div",{className:"min-h-screen bg-white flex",children:[d.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative overflow-hidden",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=1200&h=1600&fit=crop",alt:"Denim",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-16",children:[d.jsxs("h1",{className:"text-5xl font-extralight text-white tracking-tight leading-tight",children:["One ORBIT - ",d.jsx("br",{}),"Connecting Orders, Execution & Insight."]}),d.jsx("p",{className:"mt-6 text-sm text-white/70 max-w-md",children:"A Product of MK Sons"})]})]}),d.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-16",children:d.jsxs("div",{className:"w-full max-w-sm animate-in",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-16",children:[d.jsx("div",{className:"w-12 h-12 bg-neutral-900 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white text-lg font-semibold",children:"O"})}),d.jsx("span",{className:"text-2xl font-light tracking-tight",children:"Orbit"})]}),d.jsx("h2",{className:"text-3xl font-extralight tracking-tight mb-3",children:"Welcome"}),d.jsx("p",{className:"text-sm text-neutral-500 mb-10",children:"Sign in to continue"}),d.jsxs("form",{onSubmit:g,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-2 block",children:"Email"}),d.jsx("input",{type:"email",value:i,onChange:x=>s(x.target.value),className:"input-field",placeholder:"you@company.com",disabled:u})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-2 block",children:"Password"}),d.jsx("input",{type:"password",value:o,onChange:x=>l(x.target.value),className:"input-field",placeholder:"",disabled:u})]}),f&&d.jsx("p",{className:"text-sm text-red-600",children:f}),d.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full",children:u?"Signing in...":"Continue"})]}),d.jsxs("div",{className:"mt-12 pt-8 border-t border-neutral-100",children:[d.jsx("p",{className:"section-label mb-3",children:"Demo Accounts"}),d.jsxs("div",{className:"space-y-1 text-xs text-neutral-500",children:[d.jsxs("p",{children:[d.jsx("span",{className:"text-neutral-900",children:"Admin:"})," mallikamin@gmail.com / admin123"]}),d.jsxs("p",{children:[d.jsx("span",{className:"text-neutral-900",children:"Staff:"})," staff@customerops.com / staff123"]}),d.jsxs("p",{children:[d.jsx("span",{className:"text-neutral-900",children:"Customer:"})," customer@customerops.com / customer123"]})]})]})]})})]})}const Um=[{id:"lb-001",type:"campaign",title:"Summer 2025 Campaign",subtitle:"The Endless Blue Collection",content:`Introducing our most ambitious seasonal collection yet. Shot on location in the Amalfi Coast, this campaign celebrates the timeless appeal of denim against Mediterranean landscapes.

Each piece tells a story of craftsmanship meeting adventure. From the rugged cliffs of Positano to the sun-drenched beaches of Capri, our Summer 2025 collection captures the essence of Italian summer style.

The Endless Blue Collection features lighter weights, breathable constructions, and washes inspired by the Tyrrhenian Sea. Pre-orders open February 1st.`,imageUrl:"https://images.unsplash.com/photo-1509631179647-0177331693ae?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1509631179647-0177331693ae?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1475178626620-a4d074967452?w=800&h=600&fit=crop"],date:"January 15, 2025",featured:!0},{id:"lb-002",type:"news",title:"Orbit Wins Sustainable Fashion Award",subtitle:"Recognition for our eco-initiatives",content:`We are honored to announce that Orbit has been awarded the 2024 Sustainable Fashion Innovation Award for our pioneering work in recycled denim technology.

This recognition validates our commitment to creating beautiful products while protecting our planet. Our recycled ocean plastic denim line, launching Spring 2025, represents the culmination of three years of R&D.

Thank you to our partners, suppliers, and customers who share our vision for a more sustainable fashion industry.`,imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&h=800&fit=crop",gallery:[],date:"January 10, 2025",featured:!1},{id:"lb-003",type:"photoshoot",title:"Behind The Scenes: Tokyo Shoot",subtitle:"Street style meets precision",content:`Take a look behind the curtain at our recent photoshoot in the streets of Shibuya and Harajuku.

Our creative team spent two weeks capturing the energy of Tokyo youth culture, resulting in some of our most dynamic imagery yet. The contrast between traditional Japanese aesthetics and contemporary street fashion created unexpected magic.

Special thanks to our local production team and the amazing street cast who brought authenticity to every frame.`,imageUrl:"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=800&h=600&fit=crop"],date:"January 5, 2025",featured:!1},{id:"lb-004",type:"update",title:"New Factory Partnership in Portugal",subtitle:"Expanding our European production",content:`We are excited to announce our new partnership with Textil Amorim, a family-owned factory in Porto with over 80 years of denim expertise.

This collaboration will enhance our production capacity while maintaining the artisanal quality you expect from Orbit. The Amorim family shares our commitment to ethical manufacturing and environmental responsibility.

Production begins March 2025. Existing orders will continue through our current facilities with no disruption.`,imageUrl:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&h=800&fit=crop",gallery:[],date:"December 28, 2024",featured:!1},{id:"lb-005",type:"catalogue",title:"Heritage Collection Lookbook",subtitle:"Timeless pieces, modern interpretation",content:`Our Heritage Collection pays homage to the golden era of American workwear. Each piece features authentic details that defined the original work pants of the 1950s.

Copper rivets, leather patches, hidden selvedge details, and reinforced stitching - these are jeans built to last generations. We've updated the fits for contemporary bodies while preserving the soul of the originals.

Available now in all partner stores.`,imageUrl:"https://images.unsplash.com/photo-1576995853123-5a10305d93c0?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1576995853123-5a10305d93c0?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1542272604-787c3835535d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1604176354204-9268737828e4?w=800&h=600&fit=crop"],date:"December 20, 2024",featured:!0},{id:"lb-006",type:"news",title:"Spring 2025 Orders Now Open",subtitle:"Secure your inventory early",content:`Spring 2025 ordering is now open for all partners. Early orders placed before February 15th will receive priority production slots and a 5% early-bird discount.

This season features expanded size ranges, new sustainable options, and several exciting collaborations we'll announce in the coming weeks.

Contact your account manager or place orders directly through the portal.`,imageUrl:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=1200&h=800&fit=crop",gallery:[],date:"December 15, 2024",featured:!1},{id:"lb-007",type:"photoshoot",title:"Performance Line: Mountain Test",subtitle:"Pushing limits in the Alps",content:`Our new Performance line was put to the ultimate test - a week of hiking, climbing, and camping in the Swiss Alps.

The Tech Stretch Pro and Mountain series performed flawlessly in conditions ranging from freezing rain to intense sun. The four-way stretch allowed full range of motion on technical climbs, while the moisture-wicking kept our team comfortable through 10-hour days.

Real performance tested in real conditions. Available now.`,imageUrl:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=800&h=600&fit=crop"],date:"December 10, 2024",featured:!1}];async function S2(t){return(await Qr(it(Re,"lookbook"),{...t,createdAt:Dt(),updatedAt:Dt()})).id}async function h_(t){try{const e=Dn(it(Re,"lookbook",t,"comments"),Yn("createdAt","asc"));return(await Gr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{return[]}}async function R2(t,{message:e,createdByUid:n,createdByName:r}){await Qr(it(Re,"lookbook",t,"comments"),{message:e,createdByUid:n,createdByName:r,createdAt:Dt()})}const f_={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400"};function A2(){var c;const{profile:t,loading:e}=Xn(),[n,r]=D.useState([]),[i,s]=D.useState(!0);D.useEffect(()=>{e||!t||(t.customerId?cT(t.customerId).then(r).finally(()=>s(!1)):(r([]),s(!1)))},[t,e]);const o=n.slice(0,5),l=n.filter(f=>!["closed","cancelled"].includes(f.status)),u=Um[0];return e||i?d.jsx("div",{className:"py-16 text-center",children:d.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("p",{className:"section-label mb-3",children:"Dashboard"}),d.jsxs("h1",{className:"page-title",children:["Welcome back, ",((c=t==null?void 0:t.name)==null?void 0:c.split(" ")[0])||"there"]})]}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{label:"Total Orders",value:n.length},{label:"Active",value:l.length},{label:"In Progress",value:n.filter(f=>f.status==="in_progress").length},{label:"Delivered",value:n.filter(f=>f.status==="delivered").length}].map((f,m)=>d.jsxs("div",{className:"p-6 border border-neutral-100",children:[d.jsx("p",{className:"text-3xl font-extralight",children:f.value}),d.jsx("p",{className:"section-label mt-2",children:f.label})]},m))}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("p",{className:"section-label",children:"Recent Orders"}),d.jsx(Bt,{to:"/orders",className:"text-xs text-neutral-500 hover:text-neutral-900",children:"View all "})]}),o.length===0?d.jsxs("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"No orders yet"}),d.jsx(Bt,{to:"/orders/new",className:"btn-primary btn-sm",children:"Place First Order"})]}):d.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:o.map(f=>{var m,g,_;return d.jsx(Bt,{to:`/orders/${f.id}`,className:"block p-4 hover:bg-neutral-50 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:f.title}),d.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:(g=(m=f.createdAt)==null?void 0:m.toDate)==null?void 0:g.call(m).toLocaleDateString()})]}),d.jsx("span",{className:`badge ${f_[f.status]||f_.submitted}`,children:(_=f.status)==null?void 0:_.replace(/_/g," ")})]})},f.id)})}),d.jsx("div",{className:"mt-4",children:d.jsx(Bt,{to:"/orders/new",className:"btn-secondary btn-sm",children:"New Order"})})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("p",{className:"section-label",children:"Latest Update"}),d.jsx(Bt,{to:"/lookbook",className:"text-xs text-neutral-500 hover:text-neutral-900",children:"View all "})]}),u&&d.jsxs(Bt,{to:`/lookbook/${u.id}`,className:"block group",children:[d.jsx("div",{className:"aspect-video bg-neutral-100 overflow-hidden mb-3",children:d.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),d.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider mb-1",children:u.type}),d.jsx("p",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:u.title})]})]})]})]})}const C2={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600"},N2=["all","submitted","confirmed","in_progress","delivered","closed"];function k2(){const t=Bi(),{profile:e}=Xn(),n=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="staff",[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(""),[c,f]=D.useState("all");D.useEffect(()=>{if(!e)return;const x=n?null:e.customerId;if(!n&&!x){i([]),o(!1);return}const C=dT(k=>{i(k),o(!1)},x);return()=>C()},[e,n]);const m=D.useMemo(()=>{let x=r;if(c!=="all"&&(x=x.filter(C=>C.status===c)),l.trim()){const C=l.toLowerCase();x=x.filter(k=>{var I,w;return((I=k.title)==null?void 0:I.toLowerCase().includes(C))||((w=k.customerId)==null?void 0:w.toLowerCase().includes(C))})}return x},[r,l,c]),g=async x=>{n&&!x.viewed&&await hT(x.id),t(`/orders/${x.id}`)},_=r.filter(x=>!x.viewed).length;return d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:n?"All Orders":"My Orders"}),d.jsx("h1",{className:"page-title",children:"Orders"}),n&&_>0&&d.jsxs("p",{className:"text-sm text-emerald-600 mt-2",children:[_," new order",_>1?"s":""]})]}),d.jsx(Bt,{to:"/orders/new",className:"btn-primary",children:"New Order"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[d.jsx("input",{type:"text",value:l,onChange:x=>u(x.target.value),placeholder:"Search orders...",className:"input-field flex-1"}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:N2.map(x=>d.jsx("button",{onClick:()=>f(x),className:`px-3 py-2 text-2xs tracking-widest uppercase ${c===x?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:x==="all"?"All":x.replace(/_/g," ")},x))})]}),s?d.jsx("div",{className:"py-16 text-center",children:d.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):m.length===0?d.jsxs("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"No orders found"}),!l&&c==="all"&&d.jsx(Bt,{to:"/orders/new",className:"btn-secondary btn-sm",children:"Create Order"})]}):d.jsx("div",{className:"space-y-2",children:m.map(x=>{var C,k,I;return d.jsx("div",{onClick:()=>g(x),className:`card p-5 cursor-pointer ${!x.viewed&&n?"border-l-4 border-l-emerald-500":""}`,children:d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[!x.viewed&&n&&d.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full flex-shrink-0"}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"text-sm font-medium truncate",children:x.title}),n&&d.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:x.customerId})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:`badge ${C2[x.status]}`,children:(C=x.status)==null?void 0:C.replace(/_/g," ")}),d.jsx("span",{className:"text-xs text-neutral-400 hidden sm:block",children:(I=(k=x.createdAt)==null?void 0:k.toDate)==null?void 0:I.call(k).toLocaleDateString()}),d.jsx("span",{className:"text-neutral-300",children:""})]})]})},x.id)})})]})}async function b2(t){const e=Dn(it(Re,"orders",t,"tasks"),Yn("createdAt","asc"));return(await Gr(e)).docs.map(r=>({id:r.id,...r.data()}))}async function P2(t,e){return(await Qr(it(Re,"orders",t,"tasks"),{title:e.title,status:"todo",productId:e.productId||null,priority:e.priority||"medium",assigneeUid:e.assigneeUid||null,note:e.note||"",comments:[],createdByUid:e.createdByUid,createdByName:e.createdByName||null,createdAt:Dt()})).id}async function hh(t,e,n){await Ns(En(Re,"orders",t,"tasks",e),{...n,updatedAt:Dt()})}async function D2(t,e){await Lm(En(Re,"orders",t,"tasks",e))}async function O2(t){const e=Dn(it(Re,"orders",t,"comments"),Yn("createdAt","asc"));return(await Gr(e)).docs.map(r=>({id:r.id,...r.data()}))}async function j2(t,{message:e,createdByUid:n,createdByName:r,parentId:i=null}){await Qr(it(Re,"orders",t,"comments"),{message:e,createdByUid:n,createdByName:r,parentId:i,createdAt:Dt()})}async function L2(){return(await Gr(it(Re,"users"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const n=(e.role||"").toLowerCase();return n==="admin"||n==="staff"}).sort((e,n)=>(e.name||"").localeCompare(n.name||""))}const Wn=[{id:"denim-001",name:"Selvage Raw Indigo",sku:"ORB-DN-001",price:189,category:"Premium Denim",imageUrl:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=600&h=800&fit=crop",description:"Japanese 14oz selvage denim with raw indigo dye. Signature red line selvage detail visible on cuff roll.",specs:{weight:"14oz",fit:"Slim Straight",rise:"Mid Rise",inseam:'32"',material:"100% Cotton Selvage",origin:"Japan",wash:"Raw / Unwashed"},active:!0},{id:"denim-002",name:"Vintage Wash Slim",sku:"ORB-DN-002",price:145,category:"Classic Denim",imageUrl:"https://images.unsplash.com/photo-1582552938357-32b906df40cb?w=600&h=800&fit=crop",description:"Stone-washed slim fit with authentic vintage fade pattern. Comfort stretch for all-day wear.",specs:{weight:"11oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"98% Cotton, 2% Elastane",origin:"Italy",wash:"Stone Wash"},active:!0},{id:"denim-003",name:"Black Rinse Skinny",sku:"ORB-DN-003",price:135,category:"Modern Denim",imageUrl:"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&h=800&fit=crop",description:"Jet black rinse with skinny silhouette. Power stretch technology for ultimate comfort and movement.",specs:{weight:"10oz",fit:"Skinny",rise:"Low Rise",inseam:'30"',material:"92% Cotton, 6% Poly, 2% Elastane",origin:"Turkey",wash:"Rinse Black"},active:!0},{id:"denim-004",name:"Heritage Straight Leg",sku:"ORB-DN-004",price:165,category:"Heritage Collection",imageUrl:"https://images.unsplash.com/photo-1604176354204-9268737828e4?w=600&h=800&fit=crop",description:"Classic American straight leg cut inspired by 1950s workwear. Reinforced seams and copper rivets.",specs:{weight:"13oz",fit:"Straight",rise:"Regular",inseam:'34"',material:"100% Cotton",origin:"USA",wash:"One Wash"},active:!0},{id:"denim-005",name:"Distressed Boyfriend",sku:"ORB-DN-005",price:155,category:"Contemporary",imageUrl:"https://images.unsplash.com/photo-1598554747436-c9293d6a588f?w=600&h=800&fit=crop",description:"Relaxed boyfriend fit with artisanal hand-finished distressing. Each pair is unique.",specs:{weight:"11oz",fit:"Relaxed Boyfriend",rise:"Mid Rise",inseam:'28"',material:"100% Cotton",origin:"Portugal",wash:"Destroyed Vintage"},active:!0},{id:"denim-006",name:"Midnight Selvedge",sku:"ORB-DN-006",price:210,category:"Premium Denim",imageUrl:"https://images.unsplash.com/photo-1475178626620-a4d074967452?w=600&h=800&fit=crop",description:"Deep indigo overdyed selvage from limited edition shuttle loom fabric. Collectors piece.",specs:{weight:"15oz",fit:"Tapered",rise:"High Rise",inseam:'32"',material:"100% Japanese Selvage Cotton",origin:"Japan",wash:"Raw Overdye"},active:!0},{id:"denim-007",name:"Summer Light Wash",sku:"ORB-DN-007",price:125,category:"Seasonal",imageUrl:"https://images.unsplash.com/photo-1565084888279-aca607ecce0c?w=600&h=800&fit=crop",description:"Lightweight bleached denim perfect for warm weather. Breathable open weave construction.",specs:{weight:"8oz",fit:"Relaxed Straight",rise:"Mid Rise",inseam:'32"',material:"100% Cotton",origin:"Spain",wash:"Bleach Light"},active:!0},{id:"denim-008",name:"Grey Cast Slim",sku:"ORB-DN-008",price:145,category:"Modern Denim",imageUrl:"https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=600&h=800&fit=crop",description:"Sophisticated grey-cast indigo with modern slim profile. Clean minimal finish.",specs:{weight:"12oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"99% Cotton, 1% Elastane",origin:"Italy",wash:"Grey Cast"},active:!0},{id:"denim-009",name:"Wide Leg Vintage",sku:"ORB-DN-009",price:175,category:"Heritage Collection",imageUrl:"https://images.unsplash.com/photo-1551854838-212c50b4c184?w=600&h=800&fit=crop",description:"1970s inspired wide leg silhouette with authentic vintage wash. High waisted design.",specs:{weight:"12oz",fit:"Wide Leg",rise:"High Rise",inseam:'34"',material:"100% Cotton",origin:"USA",wash:"70s Vintage"},active:!0},{id:"denim-010",name:"Tech Stretch Pro",sku:"ORB-DN-010",price:165,category:"Performance",imageUrl:"https://images.unsplash.com/photo-1560243563-062bfc001d68?w=600&h=800&fit=crop",description:"Four-way stretch performance denim with moisture-wicking and quick-dry technology.",specs:{weight:"10oz",fit:"Athletic Slim",rise:"Mid Rise",inseam:'32"',material:"68% Cotton, 28% Poly, 4% Elastane",origin:"Vietnam",wash:"Tech Dark"},active:!0}],Mf=[{id:"future-001",name:"Recycled Ocean Denim",sku:"ORB-FT-001",price:195,category:"Sustainability",imageUrl:"https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=600&h=800&fit=crop",description:"Revolutionary denim made from recycled ocean plastics. Launching Spring 2025.",specs:{weight:"11oz",fit:"Slim",rise:"Mid Rise",inseam:'32"',material:"60% Recycled Ocean Plastic, 40% Organic Cotton",origin:"Netherlands",wash:"Eco Process"},launchDate:"Spring 2025",isFuture:!0},{id:"future-002",name:"Hemp Blend Classic",sku:"ORB-FT-002",price:185,category:"Sustainability",imageUrl:"https://images.unsplash.com/photo-1588099768523-f4e6a5679d88?w=600&h=800&fit=crop",description:"Hemp-cotton blend for ultimate durability and eco-friendliness. Summer 2025.",specs:{weight:"13oz",fit:"Straight",rise:"Regular",inseam:'32"',material:"55% Hemp, 45% Organic Cotton",origin:"France",wash:"Natural"},launchDate:"Summer 2025",isFuture:!0},{id:"future-003",name:"Temperature Adaptive",sku:"ORB-FT-003",price:225,category:"Innovation",imageUrl:"https://images.unsplash.com/photo-1602293589930-45aad59ba3ab?w=600&h=800&fit=crop",description:"Smart fabric that adapts to body temperature. Patent pending technology. Fall 2025.",specs:{weight:"12oz",fit:"Slim Tapered",rise:"Mid Rise",inseam:'32"',material:"Proprietary Adaptive Blend",origin:"Japan",wash:"Climate Control"},launchDate:"Fall 2025",isFuture:!0}];async function V2(t=!1){try{let n=(await Gr(Dn(it(Re,"products"),Yn("createdAt","desc")))).docs.map(r=>({id:r.id,...r.data()}));return n.length===0&&(n=[...Wn]),t&&(n=n.filter(r=>r.active!==!1)),n}catch{return[...Wn]}}async function M2(t){return(await Qr(it(Re,"products"),{...t,active:!0,createdAt:Dt(),updatedAt:Dt()})).id}async function p_(t,e){await Ns(En(Re,"products",t),{...e,updatedAt:Dt()})}async function U2(t){await Lm(En(Re,"products",t))}const F2=["submitted","confirmed","in_progress","delivered","closed","cancelled"],B2=["todo","in_progress","review","blocked","done"],z2=["low","medium","high","urgent"],fh={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600",todo:"bg-neutral-100 text-neutral-600",review:"bg-purple-50 text-purple-700",blocked:"bg-red-50 text-red-600",done:"bg-emerald-50 text-emerald-700",low:"bg-neutral-100 text-neutral-500",medium:"bg-blue-50 text-blue-600",high:"bg-amber-50 text-amber-600",urgent:"bg-red-50 text-red-600"};function $2(){var ln;const{orderId:t}=Up(),e=Bi(),{user:n,profile:r}=Xn(),i=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff",[s,o]=D.useState(null),[l,u]=D.useState([]),[c,f]=D.useState([]),[m,g]=D.useState([]),[_,x]=D.useState([]),[C,k]=D.useState(!0),[I,w]=D.useState("products"),[A,O]=D.useState(!1),[V,B]=D.useState(""),[y,v]=D.useState(""),[T,S]=D.useState("medium"),[b,N]=D.useState(""),[R,oe]=D.useState(""),[ge,st]=D.useState(null),[Me,H]=D.useState({}),[ie,ae]=D.useState(null),[ve,he]=D.useState(""),[_e,be]=D.useState(!1),ke=async()=>{const[F,Fe,mt,Xt,Tn]=await Promise.all([h2(t),b2(t),O2(t),m2(t),L2()]);o(F),u(Fe),f(mt),g(Xt),x(Tn),k(!1),i&&F&&!F.viewed&&hT(t)};D.useEffect(()=>{ke()},[t]);const Ue=D.useMemo(()=>s!=null&&s.products?s.products.map(F=>{const Fe=Wn.find(mt=>mt.id===F.productId);return{...F,...Fe}}):[],[s==null?void 0:s.products]),q=async F=>{!i||F===s.status||(be(!0),await p2(t,{status:F}),await fT(t,{type:"status_change",message:`Status changed to ${F.replace(/_/g," ")}`,createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await ke(),be(!1))},Le=()=>{B(""),v(""),S("medium"),N(""),oe(""),st(null),O(!1)},xn=F=>{B(F.title||""),v(F.productId||""),S(F.priority||"medium"),N(F.assigneeUid||""),oe(F.note||""),st(F),O(!0)},On=async()=>{if(!V.trim())return;be(!0);const F={title:V.trim(),productId:y||null,priority:T,assigneeUid:b||null,note:R.trim(),createdByUid:n.uid,createdByName:r==null?void 0:r.name};ge?await hh(t,ge.id,F):await P2(t,F),Le(),await ke(),be(!1)},Yr=async(F,Fe)=>{be(!0),await hh(t,F,{status:Fe}),await ke(),be(!1)},ot=async F=>{confirm("Delete this task?")&&(be(!0),await D2(t,F),await ke(),be(!1))},an=async F=>{var Tn;const Fe=(Tn=Me[F])==null?void 0:Tn.trim();if(!Fe)return;be(!0);const mt=l.find(Jn=>Jn.id===F),Xt=(mt==null?void 0:mt.comments)||[];Xt.push({id:Date.now(),text:Fe,createdByUid:n.uid,createdByName:r==null?void 0:r.name,createdAt:new Date().toISOString()}),await hh(t,F,{comments:Xt}),H(Jn=>({...Jn,[F]:""})),await ke(),be(!1)},yr=async()=>{ve.trim()&&(be(!0),await j2(t,{message:ve.trim(),createdByUid:n.uid,createdByName:r==null?void 0:r.name}),he(""),await ke(),be(!1))};if(C)return d.jsx("div",{className:"py-16 text-center",children:d.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})});if(!s)return d.jsxs("div",{className:"py-16 text-center",children:[d.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Order not found"}),d.jsx("button",{onClick:()=>e("/orders"),className:"btn-secondary btn-sm",children:"Back to Orders"})]});const Hi=Ue.reduce((F,Fe)=>F+(Fe.price||0)*(Fe.quantity||0),0);return d.jsxs("div",{className:"animate-in",children:[d.jsx("button",{onClick:()=>e("/orders"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to orders"}),d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4 mb-8 pb-8 border-b border-neutral-100",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:"Order"}),d.jsx("h1",{className:"text-2xl font-light mb-2",children:s.title}),s.summary&&d.jsx("p",{className:"text-sm text-neutral-500 max-w-lg",children:s.summary}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-4",children:[d.jsx("span",{className:`badge ${fh[s.status]}`,children:(ln=s.status)==null?void 0:ln.replace(/_/g," ")}),d.jsxs("span",{className:"text-xs text-neutral-400",children:["Customer: ",s.customerId]}),d.jsxs("span",{className:"text-xs text-neutral-400",children:["Total: $",Hi.toFixed(2)]})]})]}),i&&d.jsx("select",{value:s.status,onChange:F=>q(F.target.value),disabled:_e,className:"input-field w-auto",children:F2.map(F=>d.jsx("option",{value:F,children:F.replace(/_/g," ")},F))})]}),d.jsx("div",{className:"flex gap-6 mb-6 border-b border-neutral-100",children:["products","tasks","comments","activity"].map(F=>d.jsxs("button",{onClick:()=>w(F),className:`pb-3 text-xs tracking-widest uppercase ${I===F?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:[F," ",F==="products"&&`(${Ue.length})`,F==="tasks"&&`(${l.length})`,F==="comments"&&`(${c.length})`]},F))}),I==="products"&&d.jsx("div",{children:Ue.length===0?d.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No products in this order"})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ue.map((F,Fe)=>d.jsxs("div",{className:"card p-4 flex gap-4",children:[d.jsx("div",{className:"w-20 h-24 bg-neutral-100 flex-shrink-0 overflow-hidden",children:F.imageUrl?d.jsx("img",{src:F.imageUrl,alt:F.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-300 text-xs",children:"No img"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium truncate",children:F.name||F.productId}),d.jsx("p",{className:"text-xs text-neutral-400",children:F.sku}),d.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:["Qty: ",F.quantity]}),d.jsxs("p",{className:"text-sm font-medium mt-1",children:["$",((F.price||0)*(F.quantity||0)).toFixed(2)]})]})]},Fe))})}),I==="tasks"&&d.jsxs("div",{children:[d.jsx("div",{className:"mb-6",children:A?d.jsxs("div",{className:"p-4 bg-neutral-50 border border-neutral-200 space-y-4",children:[d.jsx("p",{className:"section-label",children:ge?"Edit Task":"New Task"}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Task Title *"}),d.jsx("input",{type:"text",value:V,onChange:F=>B(F.target.value),placeholder:"e.g., Check fabric quality",className:"input-field"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Link to Product"}),d.jsxs("select",{value:y,onChange:F=>v(F.target.value),className:"input-field",children:[d.jsx("option",{value:"",children:"None (General task)"}),Ue.map(F=>d.jsx("option",{value:F.productId,children:F.name||F.productId},F.productId))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Priority"}),d.jsx("select",{value:T,onChange:F=>S(F.target.value),className:"input-field",children:z2.map(F=>d.jsx("option",{value:F,children:F},F))})]})]}),i&&d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Assign To"}),d.jsxs("select",{value:b,onChange:F=>N(F.target.value),className:"input-field",children:[d.jsx("option",{value:"",children:"Unassigned"}),_.map(F=>d.jsx("option",{value:F.id,children:F.name},F.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Note"}),d.jsx("textarea",{value:R,onChange:F=>oe(F.target.value),placeholder:"Additional details...",rows:2,className:"input-field resize-none"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:On,disabled:_e||!V.trim(),className:"btn-primary btn-sm",children:ge?"Save":"Add Task"}),d.jsx("button",{onClick:Le,className:"btn-ghost",children:"Cancel"})]})]}):d.jsx("button",{onClick:()=>O(!0),className:"btn-primary btn-sm",children:"+ Add Task"})}),l.length===0?d.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No tasks yet"})}):d.jsx("div",{className:"space-y-3",children:l.map(F=>{var Tn,Jn;const Fe=Ue.find(Xe=>Xe.productId===F.productId),mt=_.find(Xe=>Xe.id===F.assigneeUid),Xt=ie===F.id;return d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("p",{className:"text-sm font-medium",children:F.title}),F.priority&&d.jsx("span",{className:`badge text-2xs ${fh[F.priority]}`,children:F.priority})]}),Fe&&d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx("div",{className:"w-8 h-10 bg-neutral-100 overflow-hidden",children:d.jsx("img",{src:Fe.imageUrl,alt:"",className:"w-full h-full object-cover"})}),d.jsx("span",{className:"text-xs text-neutral-500",children:Fe.name})]}),F.note&&d.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:F.note}),mt&&d.jsxs("p",{className:"text-xs text-neutral-400 mt-2",children:["Assigned to: ",mt.name]})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("select",{value:F.status,onChange:Xe=>Yr(F.id,Xe.target.value),disabled:_e,className:`badge cursor-pointer border-0 text-xs ${fh[F.status]}`,children:B2.map(Xe=>d.jsx("option",{value:Xe,children:Xe.replace(/_/g," ")},Xe))})})]}),d.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-neutral-100",children:[d.jsxs("button",{onClick:()=>ae(Xt?null:F.id),className:"text-xs text-neutral-500 hover:text-neutral-900",children:[((Tn=F.comments)==null?void 0:Tn.length)||0," comments ",Xt?"":""]}),d.jsx("button",{onClick:()=>xn(F),className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Edit"}),d.jsx("button",{onClick:()=>ot(F.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]}),Xt&&d.jsxs("div",{className:"px-4 pb-4 border-t border-neutral-100 bg-neutral-50",children:[d.jsx("div",{className:"pt-3 space-y-2",children:(F.comments||[]).map(Xe=>d.jsxs("div",{className:"text-xs p-2 bg-white border border-neutral-100",children:[d.jsxs("span",{className:"font-medium",children:[Xe.createdByName,":"]})," ",Xe.text]},Xe.id))}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx("input",{type:"text",value:Me[F.id]||"",onChange:Xe=>H(un=>({...un,[F.id]:Xe.target.value})),placeholder:"Add comment...",className:"input-field flex-1 text-xs",onKeyDown:Xe=>Xe.key==="Enter"&&an(F.id)}),d.jsx("button",{onClick:()=>an(F.id),disabled:_e||!((Jn=Me[F.id])!=null&&Jn.trim()),className:"btn-primary btn-sm text-xs",children:"Add"})]})]})]},F.id)})})]}),I==="comments"&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex gap-2 mb-4",children:[d.jsx("input",{type:"text",value:ve,onChange:F=>he(F.target.value),onKeyDown:F=>F.key==="Enter"&&yr(),placeholder:"Add comment...",className:"input-field flex-1",disabled:_e}),d.jsx("button",{onClick:yr,disabled:_e||!ve.trim(),className:"btn-primary btn-sm",children:"Post"})]}),c.length===0?d.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No comments"})}):d.jsx("div",{className:"space-y-3",children:c.map(F=>d.jsxs("div",{className:`p-4 ${F.createdByUid===(n==null?void 0:n.uid)?"bg-neutral-900 text-white":"bg-neutral-50"}`,children:[d.jsx("p",{className:`text-xs mb-1 ${F.createdByUid===(n==null?void 0:n.uid)?"text-neutral-400":"text-neutral-500"}`,children:F.createdByName||"Unknown"}),d.jsx("p",{className:"text-sm",children:F.message})]},F.id))})]}),I==="activity"&&d.jsx("div",{children:m.length===0?d.jsx("div",{className:"py-12 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No activity"})}):d.jsx("div",{className:"space-y-3",children:m.map(F=>{var Fe,mt;return d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300 mt-1.5 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm",children:F.message}),d.jsxs("p",{className:"text-xs text-neutral-400 mt-0.5",children:[F.createdByName||"System","  ",(mt=(Fe=F.createdAt)==null?void 0:Fe.toDate)==null?void 0:mt.call(Fe).toLocaleString()]})]})]},F.id)})})})]})}async function pT(){const t=Dn(it(Re,"customers"),Yn("name","asc"));return(await Gr(t)).docs.map(n=>({id:n.id,...n.data()}))}async function W2(t){return(await Qr(it(Re,"customers"),{...t,active:!0,createdAt:Dt(),updatedAt:Dt()})).id}async function H2(t,e){await Ns(En(Re,"customers",t),{...e,updatedAt:Dt()})}async function q2(t){await Lm(En(Re,"customers",t))}function K2(){const t=Bi(),{user:e,profile:n}=Xn(),r=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="staff",[i,s]=D.useState(""),[o,l]=D.useState(""),[u,c]=D.useState((n==null?void 0:n.customerId)||""),[f,m]=D.useState({}),[g,_]=D.useState(""),[x,C]=D.useState([]),[k,I]=D.useState(!1),[w,A]=D.useState(""),[O,V]=D.useState(1);D.useEffect(()=>{r&&pT().then(C)},[r]);const B=D.useMemo(()=>{if(!g.trim())return Wn;const N=g.toLowerCase();return Wn.filter(R=>R.name.toLowerCase().includes(N)||R.sku.toLowerCase().includes(N)||R.category.toLowerCase().includes(N))},[g]),y=(N,R)=>{const oe=parseInt(R)||0;m(ge=>{if(oe<=0){const{[N]:st,...Me}=ge;return Me}return{...ge,[N]:oe}})},v=Object.keys(f).length,T=Object.values(f).reduce((N,R)=>N+R,0),S=Object.entries(f).reduce((N,[R,oe])=>{const ge=Wn.find(st=>st.id===R);return N+((ge==null?void 0:ge.price)||0)*oe},0),b=async N=>{if(N.preventDefault(),A(""),v===0){A("Please select at least one product");return}if(!i.trim()){A("Please enter an order title");return}const R=r?u:n==null?void 0:n.customerId;if(!R){A("Customer ID required");return}I(!0);try{const oe=Object.entries(f).map(([st,Me])=>({productId:st,quantity:Me})),ge=await f2({customerId:R,title:i.trim(),summary:o.trim(),products:oe,totalValue:S,createdByUid:e.uid,createdByName:n==null?void 0:n.name});t(`/orders/${ge}`)}catch(oe){A("Failed to create order"),console.error(oe)}finally{I(!1)}};return d.jsxs("div",{className:"animate-in pb-32",children:[d.jsx("button",{onClick:()=>t("/orders"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back"}),d.jsxs("div",{className:"mb-8",children:[d.jsx("p",{className:"section-label mb-2",children:"New Order"}),d.jsx("h1",{className:"page-title",children:"Create Order"})]}),d.jsxs("div",{className:"flex gap-4 mb-8",children:[d.jsxs("button",{onClick:()=>V(1),className:`flex items-center gap-2 text-xs tracking-widest uppercase ${O===1?"text-neutral-900":"text-neutral-400"}`,children:[d.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${O===1?"bg-neutral-900 text-white":"bg-neutral-200"}`,children:"1"}),"Select Products"]}),d.jsx("span",{className:"text-neutral-300",children:""}),d.jsxs("button",{onClick:()=>v>0&&V(2),className:`flex items-center gap-2 text-xs tracking-widest uppercase ${O===2?"text-neutral-900":"text-neutral-400"}`,children:[d.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${O===2?"bg-neutral-900 text-white":"bg-neutral-200"}`,children:"2"}),"Order Details"]})]}),O===1&&d.jsxs("div",{children:[d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",value:g,onChange:N=>_(N.target.value),placeholder:"Search products by name, SKU, or category...",className:"input-field max-w-md"})}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:B.map(N=>{const R=f[N.id]||0,oe=R>0;return d.jsxs("div",{className:`card p-4 ${oe?"ring-2 ring-neutral-900":""}`,children:[d.jsx("div",{className:"aspect-[3/4] bg-neutral-100 overflow-hidden mb-3",children:d.jsx("img",{src:N.imageUrl,alt:N.name,className:"w-full h-full object-cover"})}),d.jsx("p",{className:"text-2xs text-neutral-400 mb-1",children:N.sku}),d.jsx("p",{className:"text-sm font-medium mb-1",children:N.name}),d.jsxs("p",{className:"text-sm text-neutral-600 mb-2",children:["$",N.price.toFixed(2)]}),d.jsxs("div",{className:"text-xs text-neutral-500 space-y-0.5 mb-3",children:[d.jsxs("p",{children:["Weight: ",N.specs.weight]}),d.jsxs("p",{children:["Fit: ",N.specs.fit]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>y(N.id,R-1),disabled:R===0,className:"w-8 h-8 border border-neutral-200 flex items-center justify-center hover:bg-neutral-100 disabled:opacity-30",children:""}),d.jsx("input",{type:"number",min:"0",value:R,onChange:ge=>y(N.id,ge.target.value),className:"w-16 h-8 text-center border border-neutral-200 text-sm"}),d.jsx("button",{onClick:()=>y(N.id,R+1),className:"w-8 h-8 border border-neutral-200 flex items-center justify-center hover:bg-neutral-100",children:"+"})]}),oe&&d.jsxs("p",{className:"text-xs text-emerald-600 mt-2",children:["Subtotal: $",(N.price*R).toFixed(2)]})]},N.id)})})]}),O===2&&d.jsx("form",{onSubmit:b,children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-2 block",children:"Order Title *"}),d.jsx("input",{type:"text",value:i,onChange:N=>s(N.target.value),placeholder:"e.g., Spring 2025 Restock",className:"input-field",disabled:k})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-2 block",children:"Notes"}),d.jsx("textarea",{value:o,onChange:N=>l(N.target.value),placeholder:"Special instructions...",rows:3,className:"input-field resize-none",disabled:k})]}),r&&d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-2 block",children:"Customer *"}),d.jsxs("select",{value:u,onChange:N=>c(N.target.value),className:"input-field",disabled:k,children:[d.jsx("option",{value:"",children:"Select customer..."}),x.map(N=>d.jsx("option",{value:N.id,children:N.name},N.id))]})]}),w&&d.jsx("p",{className:"text-sm text-red-600",children:w}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>V(1),className:"btn-secondary btn-sm",children:" Back"}),d.jsx("button",{type:"submit",disabled:k,className:"btn-primary",children:k?"Submitting...":"Submit Order"})]})]}),d.jsxs("div",{className:"p-6 bg-neutral-50 border border-neutral-100",children:[d.jsx("p",{className:"section-label mb-4",children:"Order Summary"}),d.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:Object.entries(f).map(([N,R])=>{const oe=Wn.find(ge=>ge.id===N);return oe?d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"w-12 h-14 bg-neutral-200 overflow-hidden flex-shrink-0",children:d.jsx("img",{src:oe.imageUrl,alt:"",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm truncate",children:oe.name}),d.jsxs("p",{className:"text-xs text-neutral-500",children:["Qty: ",R,"  $",oe.price.toFixed(2)]})]}),d.jsxs("p",{className:"text-sm font-medium",children:["$",(oe.price*R).toFixed(2)]})]},N):null})}),d.jsx("div",{className:"pt-4 border-t border-neutral-200",children:d.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:["$",S.toFixed(2)]})]})})]})]})}),O===1&&d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 shadow-lg z-50",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[d.jsx("div",{children:v>0?d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"text-sm font-medium",children:[v," product",v>1?"s":""," selected"]}),d.jsxs("p",{className:"text-xs text-neutral-500",children:[T," units  $",S.toFixed(2)]})]}):d.jsx("p",{className:"text-sm text-neutral-400",children:"Select products to continue"})}),d.jsx("button",{onClick:()=>V(2),disabled:v===0,className:"btn-primary",children:"Continue "})]})})]})}function G2(){const{profile:t}=Xn(),e=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",[n,r]=D.useState([...Wn]),[i,s]=D.useState(""),[o,l]=D.useState("current"),[u,c]=D.useState("all"),[f,m]=D.useState(!1),[g,_]=D.useState(null),[x,C]=D.useState(!1),[k,I]=D.useState(""),[w,A]=D.useState(""),[O,V]=D.useState(""),[B,y]=D.useState(""),[v,T]=D.useState(""),[S,b]=D.useState(""),[N,R]=D.useState(""),[oe,ge]=D.useState(""),[st,Me]=D.useState(!0);D.useEffect(()=>{H()},[]);const H=async()=>{try{const q=await V2(!1);r(q.length>0?q:[...Wn])}catch{r([...Wn])}},ie=o==="future"?Mf:n,ae=D.useMemo(()=>["all",...[...new Set(ie.map(Le=>Le.category))].sort()],[ie]),ve=D.useMemo(()=>{let q=e?ie:ie.filter(Le=>Le.active!==!1);if(u!=="all"&&(q=q.filter(Le=>Le.category===u)),i.trim()){const Le=i.toLowerCase();q=q.filter(xn=>xn.name.toLowerCase().includes(Le)||xn.sku.toLowerCase().includes(Le)||xn.category.toLowerCase().includes(Le))}return q},[ie,i,u,e]),he=()=>{I(""),A(""),V(""),y(""),T(""),b(""),R(""),ge(""),Me(!0),_(null),m(!1)},_e=q=>{var Le,xn,On;I(q.name||""),A(q.sku||""),V(((Le=q.price)==null?void 0:Le.toString())||""),y(q.category||""),T(q.imageUrl||""),b(q.description||""),R(((xn=q.specs)==null?void 0:xn.weight)||""),ge(((On=q.specs)==null?void 0:On.fit)||""),Me(q.active!==!1),_(q),m(!0)},be=async()=>{if(!k.trim())return;C(!0);const q={name:k.trim(),sku:w.trim(),price:parseFloat(O)||0,category:B.trim()||"General",imageUrl:v.trim(),description:S.trim(),specs:{weight:N.trim(),fit:oe.trim()},active:st};try{g&&!g.id.startsWith("denim-")&&!g.id.startsWith("future-")?await p_(g.id,q):await M2(q),he(),await H()}catch(Le){console.error("Error saving product:",Le)}finally{C(!1)}},ke=async q=>{q.id.startsWith("denim-")||q.id.startsWith("future-")||(C(!0),await p_(q.id,{active:!q.active}),await H(),C(!1))},Ue=async q=>{if(q.id.startsWith("denim-")||q.id.startsWith("future-")){alert("Cannot delete sample products");return}confirm("Delete this product?")&&(C(!0),await U2(q.id),await H(),C(!1))};return d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:e?"Product Management":"Catalogue"}),d.jsx("h1",{className:"page-title",children:"Products"})]}),e?d.jsx("button",{onClick:()=>{he(),m(!0)},className:"btn-primary",children:"Add Product"}):d.jsx(Bt,{to:"/orders/new",className:"btn-primary",children:"Start Order"})]}),f&&e&&d.jsxs("div",{className:"mb-8 p-6 bg-neutral-50 border border-neutral-200",children:[d.jsx("p",{className:"section-label mb-4",children:g?"Edit Product":"New Product"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Name *"}),d.jsx("input",{type:"text",value:k,onChange:q=>I(q.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"SKU"}),d.jsx("input",{type:"text",value:w,onChange:q=>A(q.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Price ($)"}),d.jsx("input",{type:"number",step:"0.01",value:O,onChange:q=>V(q.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Category"}),d.jsx("input",{type:"text",value:B,onChange:q=>y(q.target.value),className:"input-field",placeholder:"e.g., Premium Denim"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Weight"}),d.jsx("input",{type:"text",value:N,onChange:q=>R(q.target.value),className:"input-field",placeholder:"e.g., 12oz"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Fit"}),d.jsx("input",{type:"text",value:oe,onChange:q=>ge(q.target.value),className:"input-field",placeholder:"e.g., Slim"})]}),d.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Image URL"}),d.jsx("input",{type:"url",value:v,onChange:q=>T(q.target.value),className:"input-field",placeholder:"https://..."})]}),d.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[d.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Description"}),d.jsx("textarea",{value:S,onChange:q=>b(q.target.value),rows:2,className:"input-field resize-none"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"active",checked:st,onChange:q=>Me(q.target.checked),className:"w-4 h-4"}),d.jsx("label",{htmlFor:"active",className:"text-sm",children:"Active (visible to customers)"})]})]}),v&&d.jsxs("div",{className:"mt-4",children:[d.jsx("p",{className:"text-xs text-neutral-500 mb-2",children:"Preview:"}),d.jsx("div",{className:"w-24 h-32 bg-neutral-100 overflow-hidden",children:d.jsx("img",{src:v,alt:"Preview",className:"w-full h-full object-cover",onError:q=>q.target.style.display="none"})})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{onClick:be,disabled:x||!k.trim(),className:"btn-primary btn-sm",children:g?"Save":"Add Product"}),d.jsx("button",{onClick:he,className:"btn-ghost",children:"Cancel"})]})]}),d.jsxs("div",{className:"flex gap-6 mb-6 border-b border-neutral-100",children:[d.jsxs("button",{onClick:()=>{l("current"),c("all")},className:`pb-3 text-xs tracking-widest uppercase ${o==="current"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:["Current (",n.length,")"]}),d.jsxs("button",{onClick:()=>{l("future"),c("all")},className:`pb-3 text-xs tracking-widest uppercase ${o==="future"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:["Coming Soon (",Mf.length,")"]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[d.jsx("input",{type:"text",value:i,onChange:q=>s(q.target.value),placeholder:"Search products...",className:"input-field flex-1 max-w-md"}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:ae.map(q=>d.jsx("button",{onClick:()=>c(q),className:`px-3 py-2 text-2xs tracking-widest uppercase ${u===q?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:q==="all"?"All":q},q))})]}),ve.length===0?d.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No products found"})}):d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:ve.map(q=>{var Le;return d.jsxs("div",{className:"group relative",children:[d.jsxs(Bt,{to:`/products/${q.id}`,children:[d.jsxs("div",{className:`aspect-[3/4] bg-neutral-100 overflow-hidden mb-3 relative ${q.active===!1?"opacity-50":""}`,children:[d.jsx("img",{src:q.imageUrl,alt:q.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),q.isFuture&&d.jsx("div",{className:"absolute top-2 left-2",children:d.jsx("span",{className:"badge bg-neutral-900 text-white text-2xs",children:q.launchDate})}),q.active===!1&&d.jsx("div",{className:"absolute top-2 left-2",children:d.jsx("span",{className:"badge bg-red-100 text-red-600 text-2xs",children:"Hidden"})})]}),d.jsx("p",{className:"text-2xs text-neutral-400 mb-1",children:q.sku}),d.jsx("p",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:q.name}),d.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:["$",(Le=q.price)==null?void 0:Le.toFixed(2)]})]}),e&&d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx("button",{onClick:()=>_e(q),className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Edit"}),d.jsx("button",{onClick:()=>ke(q),className:"text-xs text-neutral-500 hover:text-neutral-900",children:q.active===!1?"Show":"Hide"}),d.jsx("button",{onClick:()=>Ue(q),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},q.id)})})]})}function Q2(){const{productId:t}=Up(),e=Bi(),n=[...Wn,...Mf].find(r=>r.id===t);return n?d.jsxs("div",{className:"animate-in",children:[d.jsx("button",{onClick:()=>e("/products"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to products"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[d.jsx("div",{children:d.jsx("div",{className:"aspect-[3/4] bg-neutral-100 overflow-hidden",children:d.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})})}),d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:n.category}),d.jsx("h1",{className:"text-3xl font-light mb-1",children:n.name}),d.jsx("p",{className:"text-xs text-neutral-400 mb-6",children:n.sku}),d.jsxs("p",{className:"text-2xl font-light mb-6",children:["$",n.price.toFixed(2)]}),n.isFuture&&d.jsxs("div",{className:"mb-6 p-4 bg-neutral-900 text-white",children:[d.jsx("p",{className:"text-xs tracking-widest uppercase mb-1",children:"Coming Soon"}),d.jsx("p",{className:"text-sm",children:n.launchDate})]}),d.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed mb-8",children:n.description}),d.jsxs("div",{className:"mb-8",children:[d.jsx("p",{className:"section-label mb-3",children:"Specifications"}),d.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:Object.entries(n.specs).map(([r,i])=>d.jsxs("div",{className:"flex justify-between py-3 px-4",children:[d.jsx("span",{className:"text-xs text-neutral-500 capitalize",children:r}),d.jsx("span",{className:"text-xs text-neutral-900",children:i})]},r))})]}),!n.isFuture&&d.jsx(Bt,{to:"/orders/new",className:"btn-primary",children:"Add to Order"})]})]})]}):d.jsxs("div",{className:"py-16 text-center animate-in",children:[d.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Product not found"}),d.jsx("button",{onClick:()=>e("/products"),className:"btn-secondary btn-sm",children:"Back to Products"})]})}function Y2(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState(!1),[o,l]=D.useState(null),[u,c]=D.useState(!1),[f,m]=D.useState(""),[g,_]=D.useState(""),[x,C]=D.useState(""),[k,I]=D.useState("");D.useEffect(()=>{w()},[]);const w=async()=>{r(!0);const v=await pT();e(v),r(!1)},A=()=>{_(""),C(""),I(""),l(null),s(!1)},O=v=>{_(v.name||""),C(v.contactEmail||""),I(v.contactPhone||""),l(v),s(!0)},V=async v=>{v.preventDefault(),g.trim()&&(c(!0),o?await H2(o.id,{name:g.trim(),contactEmail:x,contactPhone:k}):await W2({name:g.trim(),contactEmail:x,contactPhone:k}),A(),await w(),c(!1))},B=async v=>{confirm("Delete this customer?")&&(c(!0),await q2(v),await w(),c(!1))},y=t.filter(v=>{var T,S;return((T=v.name)==null?void 0:T.toLowerCase().includes(f.toLowerCase()))||((S=v.contactEmail)==null?void 0:S.toLowerCase().includes(f.toLowerCase()))});return d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:"Management"}),d.jsx("h1",{className:"page-title",children:"Customers"})]}),d.jsx("button",{onClick:()=>{A(),s(!0)},className:"btn-primary",children:"Add Customer"})]}),i&&d.jsxs("div",{className:"mb-8 p-6 bg-neutral-50 border border-neutral-200",children:[d.jsx("p",{className:"section-label mb-4",children:o?"Edit Customer":"New Customer"}),d.jsxs("form",{onSubmit:V,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Name *"}),d.jsx("input",{type:"text",value:g,onChange:v=>_(v.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Email"}),d.jsx("input",{type:"email",value:x,onChange:v=>C(v.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Phone"}),d.jsx("input",{type:"text",value:k,onChange:v=>I(v.target.value),className:"input-field"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"submit",disabled:u,className:"btn-primary btn-sm",children:o?"Save":"Add"}),d.jsx("button",{type:"button",onClick:A,className:"btn-ghost",children:"Cancel"})]})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",value:f,onChange:v=>m(v.target.value),placeholder:"Search customers...",className:"input-field max-w-md"})}),n?d.jsx("div",{className:"py-16 text-center",children:d.jsx("div",{className:"w-6 h-6 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"})}):y.length===0?d.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No customers found"})}):d.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:y.map(v=>d.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-neutral-50",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:v.name}),d.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:v.contactEmail||""})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>O(v),className:"text-xs text-neutral-500 hover:text-neutral-900",children:"Edit"}),d.jsx("button",{onClick:()=>B(v.id),className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},v.id))})]})}const X2={submitted:"bg-orbit-200",confirmed:"bg-blue-200",in_progress:"bg-amber-200",delivered:"bg-emerald-200",closed:"bg-orbit-100"};function J2(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState({daily:500,utilized:0}),[o,l]=D.useState("pipeline");D.useEffect(()=>{cT().then(g=>{e(g),s(_=>({..._,utilized:Math.min(g.filter(x=>["confirmed","in_progress"].includes(x.status)).length*50,500)})),r(!1)})},[]);const u=D.useMemo(()=>({submitted:t.filter(g=>g.status==="submitted"),confirmed:t.filter(g=>g.status==="confirmed"),in_progress:t.filter(g=>g.status==="in_progress"),delivered:t.filter(g=>g.status==="delivered")}),[t]),c=new Date,f=D.useMemo(()=>{const g=[],_=new Date(c);_.setDate(_.getDate()-_.getDay());for(let x=0;x<4;x++){const C=[];for(let k=0;k<7;k++){const I=new Date(_);I.setDate(_.getDate()+x*7+k);const w=t.filter(A=>{var V;return A.deliveryDate?((V=A.deliveryDate)!=null&&V.toDate?A.deliveryDate.toDate():new Date(A.deliveryDate)).toDateString()===I.toDateString():!1});C.push({date:I,orders:w})}g.push(C)}return g},[t]),m=Math.min(i.utilized/i.daily*100,100);return d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-4",children:"Planning"}),d.jsx("h1",{className:"page-title",children:"Production"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>l("pipeline"),className:`px-4 py-2.5 text-2xs tracking-widest uppercase ${o==="pipeline"?"bg-orbit-900 text-white":"bg-orbit-100 text-orbit-500"}`,children:"Pipeline"}),d.jsx("button",{onClick:()=>l("calendar"),className:`px-4 py-2.5 text-2xs tracking-widest uppercase ${o==="calendar"?"bg-orbit-900 text-white":"bg-orbit-100 text-orbit-500"}`,children:"Calendar"})]})]}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 mb-12 pb-12 border-b border-orbit-100",children:[{label:"Pending Review",value:u.submitted.length,color:"text-orbit-900"},{label:"Confirmed",value:u.confirmed.length,color:"text-blue-600"},{label:"In Production",value:u.in_progress.length,color:"text-amber-600"},{label:"Delivered",value:u.delivered.length,color:"text-emerald-600"}].map((g,_)=>d.jsxs("div",{children:[d.jsx("p",{className:`text-4xl font-extralight ${g.color}`,children:g.value}),d.jsx("p",{className:"section-label mt-3",children:g.label})]},_))}),d.jsxs("div",{className:"mb-12",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("p",{className:"section-label",children:"Capacity Utilization"}),d.jsxs("p",{className:"text-sm text-orbit-900 font-medium",children:[Math.round(m),"%"]})]}),d.jsx("div",{className:"h-2 bg-orbit-100 overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-700 ${m>80?"bg-red-400":m>50?"bg-amber-400":"bg-emerald-400"}`,style:{width:`${m}%`}})}),d.jsxs("div",{className:"flex justify-between mt-2 text-xs text-orbit-400",children:[d.jsx("span",{children:"0 units"}),d.jsxs("span",{children:["Daily capacity: ",i.daily," units"]})]})]}),n?d.jsx("div",{className:"py-24 text-center",children:d.jsx("div",{className:"w-6 h-6 border border-orbit-900 border-t-transparent rounded-full animate-spin mx-auto"})}):o==="pipeline"?d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:["submitted","confirmed","in_progress","delivered"].map(g=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-orbit-100",children:[d.jsx("p",{className:"section-label",children:g.replace(/_/g," ")}),d.jsx("span",{className:"text-xs text-orbit-400",children:u[g].length})]}),d.jsxs("div",{className:"space-y-3",children:[u[g].map(_=>d.jsxs(Bt,{to:`/orders/${_.id}`,className:"block card-elite p-4",children:[d.jsx("p",{className:"text-sm font-medium text-orbit-900 truncate",children:_.title}),d.jsx("p",{className:"text-xs text-orbit-400 mt-1",children:_.customerId})]},_.id)),u[g].length===0&&d.jsx("div",{className:"border border-dashed border-orbit-200 p-4 text-center",children:d.jsx("p",{className:"text-xs text-orbit-400",children:"No orders"})})]})]},g))}):d.jsxs("div",{className:"grid grid-cols-7 gap-px bg-orbit-200 border border-orbit-200",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>d.jsx("div",{className:"bg-orbit-50 p-3 text-center",children:d.jsx("p",{className:"section-label",children:g})},g)),f.map((g,_)=>g.map((x,C)=>{const k=x.date.toDateString()===c.toDateString(),I=x.date<c&&!k;return d.jsxs("div",{className:`bg-white p-3 min-h-[100px] ${I?"opacity-50":""}`,children:[d.jsx("p",{className:`text-xs mb-2 ${k?"text-orbit-900 font-medium":"text-orbit-400"}`,children:x.date.getDate()}),d.jsxs("div",{className:"space-y-1",children:[x.orders.slice(0,3).map(w=>d.jsx(Bt,{to:`/orders/${w.id}`,className:`block p-1.5 text-2xs truncate ${X2[w.status]}`,children:w.title},w.id)),x.orders.length>3&&d.jsxs("p",{className:"text-2xs text-orbit-400",children:["+",x.orders.length-3," more"]})]})]},`${_}-${C}`)}))]})]})}const ph={campaign:"Campaign",news:"News",photoshoot:"Behind the Scenes",update:"Update",catalogue:"Catalogue"};function Z2(){const{profile:t}=Xn(),e=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",[n,r]=D.useState("all"),[i,s]=D.useState(!1),[o,l]=D.useState(Um),[u,c]=D.useState(""),[f,m]=D.useState(""),[g,_]=D.useState("news"),[x,C]=D.useState(""),[k,I]=D.useState(""),[w,A]=D.useState(!1),O=D.useMemo(()=>n==="all"?o:o.filter(y=>y.type===n),[o,n]),V=o.filter(y=>y.featured).slice(0,2),B=async y=>{if(y.preventDefault(),!(!u.trim()||!x.trim())){A(!0);try{const v={id:`new-${Date.now()}`,type:g,title:u.trim(),subtitle:f.trim(),content:x.trim(),imageUrl:k.trim()||"https://images.unsplash.com/photo-1445205170230-053b83016050?w=1200&h=800&fit=crop",gallery:[],date:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),featured:!1};l([v,...o]);try{await S2(v)}catch{}c(""),m(""),C(""),I(""),s(!1)}finally{A(!1)}}};return d.jsxs("div",{className:"animate-in",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"section-label mb-2",children:"Updates & News"}),d.jsx("h1",{className:"page-title",children:"Lookbook"})]}),e&&d.jsx("button",{onClick:()=>s(!i),className:"btn-primary",children:i?"Cancel":"New Post"})]}),i&&e&&d.jsxs("div",{className:"mb-8 p-6 bg-neutral-50 border border-neutral-200",children:[d.jsx("p",{className:"section-label mb-4",children:"Create New Post"}),d.jsxs("form",{onSubmit:B,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Title *"}),d.jsx("input",{type:"text",value:u,onChange:y=>c(y.target.value),className:"input-field",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Subtitle"}),d.jsx("input",{type:"text",value:f,onChange:y=>m(y.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Type"}),d.jsxs("select",{value:g,onChange:y=>_(y.target.value),className:"input-field",children:[d.jsx("option",{value:"news",children:"News"}),d.jsx("option",{value:"update",children:"Update"}),d.jsx("option",{value:"campaign",children:"Campaign"}),d.jsx("option",{value:"photoshoot",children:"Behind the Scenes"}),d.jsx("option",{value:"catalogue",children:"Catalogue"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Image URL"}),d.jsx("input",{type:"url",value:k,onChange:y=>I(y.target.value),className:"input-field",placeholder:"https://..."})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"section-label mb-1 block",children:"Content *"}),d.jsx("textarea",{value:x,onChange:y=>C(y.target.value),rows:4,className:"input-field resize-none",required:!0})]}),d.jsx("button",{type:"submit",disabled:w,className:"btn-primary btn-sm",children:w?"Publishing...":"Publish Post"})]})]}),V.length>0&&n==="all"&&d.jsxs("div",{className:"mb-10",children:[d.jsx("p",{className:"section-label mb-4",children:"Featured"}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:V.map(y=>d.jsx(Bt,{to:`/lookbook/${y.id}`,className:"group relative overflow-hidden",children:d.jsxs("div",{className:"aspect-video bg-neutral-100 overflow-hidden",children:[d.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[d.jsx("p",{className:"text-2xs tracking-widest uppercase opacity-70 mb-1",children:ph[y.type]}),d.jsx("h3",{className:"text-xl font-light",children:y.title}),y.subtitle&&d.jsx("p",{className:"text-sm opacity-70 mt-1",children:y.subtitle})]})]})},y.id))})]}),d.jsx("div",{className:"flex gap-4 mb-6 border-b border-neutral-100 overflow-x-auto",children:["all","news","update","campaign","photoshoot","catalogue"].map(y=>d.jsx("button",{onClick:()=>r(y),className:`pb-3 text-xs tracking-widest uppercase whitespace-nowrap ${n===y?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:y==="all"?"All":ph[y]},y))}),O.length===0?d.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"No posts found"})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(y=>d.jsxs(Bt,{to:`/lookbook/${y.id}`,className:"group",children:[d.jsx("div",{className:"aspect-video bg-neutral-100 overflow-hidden mb-3",children:d.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),d.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider mb-1",children:ph[y.type]}),d.jsx("h3",{className:"text-sm font-medium group-hover:text-neutral-600 transition-colors",children:y.title}),d.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:y.date})]},y.id))})]})}const eO={campaign:"Campaign",news:"News",photoshoot:"Behind the Scenes",update:"Update",catalogue:"Catalogue"};function tO(){const{postId:t}=Up(),e=Bi(),{user:n,profile:r}=Xn(),[i,s]=D.useState(""),[o,l]=D.useState([]),[u,c]=D.useState(!1),f=Um.find(g=>g.id===t);D.useEffect(()=>{t&&h_(t).then(l).catch(()=>l([]))},[t]);const m=async g=>{if(g.preventDefault(),!!i.trim()){c(!0);try{await R2(t,{message:i.trim(),createdByUid:n==null?void 0:n.uid,createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous"});const _=await h_(t);l(_.length>0?_:[...o,{id:Date.now(),message:i.trim(),createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous",createdAt:{toDate:()=>new Date}}]),s("")}catch{l([...o,{id:Date.now(),message:i.trim(),createdByName:(r==null?void 0:r.name)||(n==null?void 0:n.email)||"Anonymous",createdAt:{toDate:()=>new Date}}]),s("")}finally{c(!1)}}};return f?d.jsxs("div",{className:"animate-in",children:[d.jsx("button",{onClick:()=>e("/lookbook"),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-6",children:" Back to lookbook"}),d.jsx("div",{className:"aspect-video lg:aspect-[21/9] bg-neutral-100 overflow-hidden mb-8",children:d.jsx("img",{src:f.imageUrl,alt:f.title,className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("p",{className:"section-label mb-2",children:[eO[f.type],"  ",f.date]}),d.jsx("h1",{className:"text-3xl font-light mb-2",children:f.title}),f.subtitle&&d.jsx("p",{className:"text-lg text-neutral-500 font-light",children:f.subtitle})]}),d.jsx("div",{className:"mb-10",children:d.jsx("p",{className:"text-sm text-neutral-700 leading-relaxed whitespace-pre-line",children:f.content})}),f.gallery&&f.gallery.length>0&&d.jsxs("div",{className:"mb-10",children:[d.jsx("p",{className:"section-label mb-4",children:"Gallery"}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:f.gallery.map((g,_)=>d.jsx("div",{className:"aspect-square bg-neutral-100 overflow-hidden",children:d.jsx("img",{src:g,alt:`${f.title} ${_+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})},_))})]}),d.jsxs("div",{className:"border-t border-neutral-100 pt-8",children:[d.jsxs("p",{className:"section-label mb-4",children:["Comments (",o.length,")"]}),d.jsx("form",{onSubmit:m,className:"mb-6",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Share your thoughts...",className:"input-field flex-1",disabled:u}),d.jsx("button",{type:"submit",disabled:u||!i.trim(),className:"btn-primary btn-sm",children:u?"...":"Post"})]})}),o.length===0?d.jsx("div",{className:"py-8 text-center border border-dashed border-neutral-200",children:d.jsx("p",{className:"text-sm text-neutral-400",children:"Be the first to comment"})}):d.jsx("div",{className:"space-y-4",children:o.map(g=>{var x;const _=(x=g.createdAt)!=null&&x.toDate?g.createdAt.toDate():new Date;return d.jsxs("div",{className:"pb-4 border-b border-neutral-100 last:border-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("p",{className:"text-sm font-medium",children:g.createdByName||"Anonymous"}),d.jsx("p",{className:"text-xs text-neutral-400",children:_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),d.jsx("p",{className:"text-sm text-neutral-600",children:g.message})]},g.id)})})]})]})]}):d.jsxs("div",{className:"py-16 text-center animate-in",children:[d.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Post not found"}),d.jsx("button",{onClick:()=>e("/lookbook"),className:"btn-secondary btn-sm",children:"Back to Lookbook"})]})}function mh({children:t,allowRoles:e}){const{user:n,profile:r,loading:i}=Xn(),s=Fi();if(i)return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-8 h-8 border-2 border-neutral-900 border-t-transparent rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"mt-4 text-xs tracking-widest text-neutral-400 uppercase",children:"Loading"})]})});if(!n)return d.jsx(_o,{to:"/login",state:{from:s.pathname},replace:!0});if(e&&e.length>0){const o=(r==null?void 0:r.role)||"customer";if(!e.includes(o))return d.jsx(_o,{to:"/",replace:!0})}return t}function nO(){const{profile:t,loading:e}=Xn();if(e)return null;const n=(t==null?void 0:t.role)||"customer";return n==="admin"||n==="staff"?d.jsx(_o,{to:"/orders",replace:!0}):d.jsx(_o,{to:"/dashboard",replace:!0})}const rO=CA([{path:"/login",element:d.jsx(I2,{})},{path:"/",element:d.jsx(mh,{children:d.jsx(T2,{})}),children:[{index:!0,element:d.jsx(nO,{})},{path:"dashboard",element:d.jsx(A2,{})},{path:"orders",element:d.jsx(k2,{})},{path:"orders/new",element:d.jsx(K2,{})},{path:"orders/:orderId",element:d.jsx($2,{})},{path:"products",element:d.jsx(G2,{})},{path:"products/:productId",element:d.jsx(Q2,{})},{path:"lookbook",element:d.jsx(Z2,{})},{path:"lookbook/:postId",element:d.jsx(tO,{})},{path:"customers",element:d.jsx(mh,{allowRoles:["admin","staff"],children:d.jsx(Y2,{})})},{path:"production",element:d.jsx(mh,{allowRoles:["admin","staff"],children:d.jsx(J2,{})})}]},{path:"*",element:d.jsx(_o,{to:"/",replace:!0})}]);gh.createRoot(document.getElementById("root")).render(d.jsx(A_.StrictMode,{children:d.jsx(LA,{router:rO})}));
