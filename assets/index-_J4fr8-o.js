function k_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function N_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D_={exports:{}},zc={},b_={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),sS=Symbol.for("react.portal"),oS=Symbol.for("react.fragment"),aS=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),cS=Symbol.for("react.context"),dS=Symbol.for("react.forward_ref"),hS=Symbol.for("react.suspense"),fS=Symbol.for("react.memo"),pS=Symbol.for("react.lazy"),wg=Symbol.iterator;function mS(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var O_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,L_={};function Po(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||O_}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M_(){}M_.prototype=Po.prototype;function Jf(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||O_}var Zf=Jf.prototype=new M_;Zf.constructor=Jf;V_(Zf,Po.prototype);Zf.isPureReactComponent=!0;var Eg=Array.isArray,j_=Object.prototype.hasOwnProperty,ep={current:null},F_={key:!0,ref:!0,__self:!0,__source:!0};function U_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)j_.call(e,r)&&!F_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:El,type:t,key:s,ref:o,props:i,_owner:ep.current}}function gS(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tp(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function yS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tg=/\/+/g;function zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yS(""+t.key):e.toString(36)}function Cu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case sS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zd(o,0):r,Eg(i)?(n="",t!=null&&(n=t.replace(Tg,"$&/")+"/"),Cu(i,e,n,"",function(c){return c})):i!=null&&(tp(i)&&(i=gS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Tg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Eg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+zd(s,l);o+=Cu(s,e,n,u,i)}else if(u=mS(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+zd(s,l++),o+=Cu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],i=0;return Cu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},xu={transition:null},_S={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:xu,ReactCurrentOwner:ep};function z_(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!tp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Po;ve.Fragment=oS;ve.Profiler=lS;ve.PureComponent=Jf;ve.StrictMode=aS;ve.Suspense=hS;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;ve.act=z_;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ep.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)j_.call(e,u)&&!F_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:El,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:cS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uS,_context:t},t.Consumer=t};ve.createElement=U_;ve.createFactory=function(t){var e=U_.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:dS,render:t}};ve.isValidElement=tp;ve.lazy=function(t){return{$$typeof:pS,_payload:{_status:-1,_result:t},_init:vS}};ve.memo=function(t,e){return{$$typeof:fS,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=xu.transition;xu.transition={};try{t()}finally{xu.transition=e}};ve.unstable_act=z_;ve.useCallback=function(t,e){return qt.current.useCallback(t,e)};ve.useContext=function(t){return qt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return qt.current.useEffect(t,e)};ve.useId=function(){return qt.current.useId()};ve.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return qt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};ve.useRef=function(t){return qt.current.useRef(t)};ve.useState=function(t){return qt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return qt.current.useTransition()};ve.version="18.3.1";b_.exports=ve;var O=b_.exports;const B_=N_(O),wS=k_({__proto__:null,default:B_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=O,TS=Symbol.for("react.element"),IS=Symbol.for("react.fragment"),SS=Object.prototype.hasOwnProperty,AS=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CS={key:!0,ref:!0,__self:!0,__source:!0};function $_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SS.call(e,r)&&!CS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:TS,type:t,key:s,ref:o,props:i,_owner:AS.current}}zc.Fragment=IS;zc.jsx=$_;zc.jsxs=$_;D_.exports=zc;var y=D_.exports,xh={},H_={exports:{}},fn={},W_={exports:{}},q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ie){var oe=$.length;$.push(ie);e:for(;0<oe;){var xe=oe-1>>>1,ye=$[xe];if(0<i(ye,ie))$[xe]=ie,$[oe]=ye,oe=xe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ie=$[0],oe=$.pop();if(oe!==ie){$[0]=oe;e:for(var xe=0,ye=$.length,De=ye>>>1;xe<De;){var Ut=2*(xe+1)-1,Je=$[Ut],wt=Ut+1,Et=$[wt];if(0>i(Je,oe))wt<ye&&0>i(Et,Je)?($[xe]=Et,$[wt]=oe,xe=wt):($[xe]=Je,$[Ut]=oe,xe=Ut);else if(wt<ye&&0>i(Et,oe))$[xe]=Et,$[wt]=oe,xe=wt;else break e}}return ie}function i($,ie){var oe=$.sortIndex-ie.sortIndex;return oe!==0?oe:$.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,m=3,T=!1,S=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=$)r(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function L($){if(R=!1,C($),!S)if(n(u)!==null)S=!0,Q(z);else{var ie=n(c);ie!==null&&Ce(L,ie.startTime-$)}}function z($,ie){S=!1,R&&(R=!1,A(v),v=-1),T=!0;var oe=m;try{for(C(ie),f=n(u);f!==null&&(!(f.expirationTime>ie)||$&&!P());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,m=f.priorityLevel;var ye=xe(f.expirationTime<=ie);ie=t.unstable_now(),typeof ye=="function"?f.callback=ye:f===n(u)&&r(u),C(ie)}else r(u);f=n(u)}if(f!==null)var De=!0;else{var Ut=n(c);Ut!==null&&Ce(L,Ut.startTime-ie),De=!1}return De}finally{f=null,m=oe,T=!1}}var F=!1,g=null,v=-1,E=5,I=-1;function P(){return!(t.unstable_now()-I<E)}function N(){if(g!==null){var $=t.unstable_now();I=$;var ie=!0;try{ie=g(!0,$)}finally{ie?x():(F=!1,g=null)}}else F=!1}var x;if(typeof w=="function")x=function(){w(N)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ge=G.port2;G.port1.onmessage=N,x=function(){ge.postMessage(null)}}else x=function(){b(N,0)};function Q($){g=$,F||(F=!0,x())}function Ce($,ie){v=b(function(){$(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,Q(z))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var oe=m;m=ie;try{return $()}finally{m=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ie){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=m;m=$;try{return ie()}finally{m=oe}},t.unstable_scheduleCallback=function($,ie,oe){var xe=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?xe+oe:xe):oe=xe,$){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=oe+ye,$={id:h++,callback:ie,priorityLevel:$,startTime:oe,expirationTime:ye,sortIndex:-1},oe>xe?($.sortIndex=oe,e(c,$),n(u)===null&&$===n(c)&&(R?(A(v),v=-1):R=!0,Ce(L,oe-xe))):($.sortIndex=ye,e(u,$),S||T||(S=!0,Q(z))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var ie=m;return function(){var oe=m;m=ie;try{return $.apply(this,arguments)}finally{m=oe}}}})(q_);W_.exports=q_;var xS=W_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=O,hn=xS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K_=new Set,$a={};function ys(t,e){fo(t,e),fo(t+"Capture",e)}function fo(t,e){for($a[t]=e,t=0;t<e.length;t++)K_.add(e[t])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=Object.prototype.hasOwnProperty,PS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ig={},Sg={};function kS(t){return Rh.call(Sg,t)?!0:Rh.call(Ig,t)?!1:PS.test(t)?Sg[t]=!0:(Ig[t]=!0,!1)}function NS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DS(t,e,n,r){if(e===null||typeof e>"u"||NS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var np=/[\-:]([a-z])/g;function rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(np,rp);Rt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(np,rp);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(np,rp);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ip(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DS(e,n,i,r)&&(n=null),r||i===null?kS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dr=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),sp=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),G_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Nh=Symbol.for("react.suspense_list"),ap=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),Y_=Symbol.for("react.offscreen"),Ag=Symbol.iterator;function sa(t){return t===null||typeof t!="object"?null:(t=Ag&&t[Ag]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Bd;function ga(t){if(Bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bd=e&&e[1]||""}return`
`+Bd+t}var $d=!1;function Hd(t,e){if(!t||$d)return"";$d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{$d=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ga(t):""}function bS(t){switch(t.tag){case 5:return ga(t.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 2:case 15:return t=Hd(t.type,!1),t;case 11:return t=Hd(t.type.render,!1),t;case 1:return t=Hd(t.type,!0),t;default:return""}}function Dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Bs:return"Portal";case Ph:return"Profiler";case sp:return"StrictMode";case kh:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q_:return(t.displayName||"Context")+".Consumer";case G_:return(t._context.displayName||"Context")+".Provider";case op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ap:return e=t.displayName||null,e!==null?e:Dh(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return Dh(t(e))}catch{}}return null}function OS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dh(e);case 8:return e===sp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VS(t){var e=X_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=VS(t))}function J_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=X_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bh(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Z_(t,e){e=e.checked,e!=null&&ip(t,"checked",e,!1)}function Oh(t,e){Z_(t,e);var n=vi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vh(t,e.type,vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vh(t,e,n){(e!=="number"||Qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ya=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ya(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vi(n)}}function e0(t,e){var n=vi(e.value),r=vi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iu,n0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iu=iu||document.createElement("div"),iu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LS=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){LS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function r0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function i0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=r0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MS=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jh(t,e){if(e){if(MS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zh=null,no=null,ro=null;function kg(t){if(t=Sl(t)){if(typeof zh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=qc(e),zh(t.stateNode,t.type,e))}}function s0(t){no?ro?ro.push(t):ro=[t]:no=t}function o0(){if(no){var t=no,e=ro;if(ro=no=null,kg(t),e)for(t=0;t<e.length;t++)kg(e[t])}}function a0(t,e){return t(e)}function l0(){}var Wd=!1;function u0(t,e,n){if(Wd)return t(e,n);Wd=!0;try{return a0(t,e,n)}finally{Wd=!1,(no!==null||ro!==null)&&(l0(),o0())}}function Wa(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Bh=!1;if(Ir)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Bh=!1}function jS(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ra=!1,Yu=null,Xu=!1,$h=null,FS={onError:function(t){Ra=!0,Yu=t}};function US(t,e,n,r,i,s,o,l,u){Ra=!1,Yu=null,jS.apply(FS,arguments)}function zS(t,e,n,r,i,s,o,l,u){if(US.apply(this,arguments),Ra){if(Ra){var c=Yu;Ra=!1,Yu=null}else throw Error(W(198));Xu||(Xu=!0,$h=c)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ng(t){if(vs(t)!==t)throw Error(W(188))}function BS(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ng(i),t;if(s===r)return Ng(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function d0(t){return t=BS(t),t!==null?h0(t):null}function h0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h0(t);if(e!==null)return e;t=t.sibling}return null}var f0=hn.unstable_scheduleCallback,Dg=hn.unstable_cancelCallback,$S=hn.unstable_shouldYield,HS=hn.unstable_requestPaint,et=hn.unstable_now,WS=hn.unstable_getCurrentPriorityLevel,up=hn.unstable_ImmediatePriority,p0=hn.unstable_UserBlockingPriority,Ju=hn.unstable_NormalPriority,qS=hn.unstable_LowPriority,m0=hn.unstable_IdlePriority,Bc=null,Xn=null;function KS(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Bc,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:YS,GS=Math.log,QS=Math.LN2;function YS(t){return t>>>=0,t===0?32:31-(GS(t)/QS|0)|0}var su=64,ou=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=va(l):(s&=o,s!==0&&(r=va(s)))}else o=n&~i,o!==0?r=va(o):s!==0&&(r=va(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),i=1<<n,r|=t[n],e&=~i;return r}function XS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ln(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=XS(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Hh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g0(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function qd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function ZS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ln(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var v0,dp,_0,w0,E0,Wh=!1,au=[],ii=null,si=null,oi=null,qa=new Map,Ka=new Map,Gr=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(t,e){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":qa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(e.pointerId)}}function aa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sl(e),e!==null&&dp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t1(t,e,n,r,i){switch(e){case"focusin":return ii=aa(ii,t,e,n,r,i),!0;case"dragenter":return si=aa(si,t,e,n,r,i),!0;case"mouseover":return oi=aa(oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qa.set(s,aa(qa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ka.set(s,aa(Ka.get(s)||null,t,e,n,r,i)),!0}return!1}function T0(t){var e=Ji(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=c0(n),e!==null){t.blockedOn=e,E0(t.priority,function(){_0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uh=r,n.target.dispatchEvent(r),Uh=null}else return e=Sl(n),e!==null&&dp(e),t.blockedOn=n,!1;e.shift()}return!0}function Og(t,e,n){Ru(t)&&n.delete(e)}function n1(){Wh=!1,ii!==null&&Ru(ii)&&(ii=null),si!==null&&Ru(si)&&(si=null),oi!==null&&Ru(oi)&&(oi=null),qa.forEach(Og),Ka.forEach(Og)}function la(t,e){t.blockedOn===e&&(t.blockedOn=null,Wh||(Wh=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,n1)))}function Ga(t){function e(i){return la(i,t)}if(0<au.length){la(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ii!==null&&la(ii,t),si!==null&&la(si,t),oi!==null&&la(oi,t),qa.forEach(e),Ka.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)T0(n),n.blockedOn===null&&Gr.shift()}var io=Dr.ReactCurrentBatchConfig,ec=!0;function r1(t,e,n,r){var i=Ne,s=io.transition;io.transition=null;try{Ne=1,hp(t,e,n,r)}finally{Ne=i,io.transition=s}}function i1(t,e,n,r){var i=Ne,s=io.transition;io.transition=null;try{Ne=4,hp(t,e,n,r)}finally{Ne=i,io.transition=s}}function hp(t,e,n,r){if(ec){var i=qh(t,e,n,r);if(i===null)nh(t,e,r,tc,n),bg(t,r);else if(t1(i,t,e,n,r))r.stopPropagation();else if(bg(t,r),e&4&&-1<e1.indexOf(t)){for(;i!==null;){var s=Sl(i);if(s!==null&&v0(s),s=qh(t,e,n,r),s===null&&nh(t,e,r,tc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nh(t,e,r,null,n)}}var tc=null;function qh(t,e,n,r){if(tc=null,t=lp(r),t=Ji(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tc=t,null}function I0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WS()){case up:return 1;case p0:return 4;case Ju:case qS:return 16;case m0:return 536870912;default:return 16}default:return 16}}var ei=null,fp=null,Pu=null;function S0(){if(Pu)return Pu;var t,e=fp,n=e.length,r,i="value"in ei?ei.value:ei.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Pu=i.slice(t,1<r?1-r:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function Vg(){return!1}function pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lu:Vg,this.isPropagationStopped=Vg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pp=pn(ko),Il=Ge({},ko,{view:0,detail:0}),s1=pn(Il),Kd,Gd,ua,$c=Ge({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ua&&(ua&&t.type==="mousemove"?(Kd=t.screenX-ua.screenX,Gd=t.screenY-ua.screenY):Gd=Kd=0,ua=t),Kd)},movementY:function(t){return"movementY"in t?t.movementY:Gd}}),Lg=pn($c),o1=Ge({},$c,{dataTransfer:0}),a1=pn(o1),l1=Ge({},Il,{relatedTarget:0}),Qd=pn(l1),u1=Ge({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),c1=pn(u1),d1=Ge({},ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h1=pn(d1),f1=Ge({},ko,{data:0}),Mg=pn(f1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g1[t])?!!e[t]:!1}function mp(){return y1}var v1=Ge({},Il,{key:function(t){if(t.key){var e=p1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_1=pn(v1),w1=Ge({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jg=pn(w1),E1=Ge({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),T1=pn(E1),I1=Ge({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),S1=pn(I1),A1=Ge({},$c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C1=pn(A1),x1=[9,13,27,32],gp=Ir&&"CompositionEvent"in window,Pa=null;Ir&&"documentMode"in document&&(Pa=document.documentMode);var R1=Ir&&"TextEvent"in window&&!Pa,A0=Ir&&(!gp||Pa&&8<Pa&&11>=Pa),Fg=" ",Ug=!1;function C0(t,e){switch(t){case"keyup":return x1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function P1(t,e){switch(t){case"compositionend":return x0(e);case"keypress":return e.which!==32?null:(Ug=!0,Fg);case"textInput":return t=e.data,t===Fg&&Ug?null:t;default:return null}}function k1(t,e){if(Hs)return t==="compositionend"||!gp&&C0(t,e)?(t=S0(),Pu=fp=ei=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A0&&e.locale!=="ko"?null:e.data;default:return null}}var N1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!N1[t.type]:e==="textarea"}function R0(t,e,n,r){s0(r),e=nc(e,"onChange"),0<e.length&&(n=new pp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ka=null,Qa=null;function D1(t){F0(t,0)}function Hc(t){var e=Ks(t);if(J_(e))return t}function b1(t,e){if(t==="change")return e}var P0=!1;if(Ir){var Yd;if(Ir){var Xd="oninput"in document;if(!Xd){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Xd=typeof Bg.oninput=="function"}Yd=Xd}else Yd=!1;P0=Yd&&(!document.documentMode||9<document.documentMode)}function $g(){ka&&(ka.detachEvent("onpropertychange",k0),Qa=ka=null)}function k0(t){if(t.propertyName==="value"&&Hc(Qa)){var e=[];R0(e,Qa,t,lp(t)),u0(D1,e)}}function O1(t,e,n){t==="focusin"?($g(),ka=e,Qa=n,ka.attachEvent("onpropertychange",k0)):t==="focusout"&&$g()}function V1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hc(Qa)}function L1(t,e){if(t==="click")return Hc(e)}function M1(t,e){if(t==="input"||t==="change")return Hc(e)}function j1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:j1;function Ya(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rh.call(e,i)||!jn(t[i],e[i]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,e){var n=Hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hg(n)}}function N0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function D0(){for(var t=window,e=Qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qu(t.document)}return e}function yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F1(t){var e=D0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N0(n.ownerDocument.documentElement,n)){if(r!==null&&yp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wg(n,s);var o=Wg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var U1=Ir&&"documentMode"in document&&11>=document.documentMode,Ws=null,Kh=null,Na=null,Gh=!1;function qg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||Ws==null||Ws!==Qu(r)||(r=Ws,"selectionStart"in r&&yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Na&&Ya(Na,r)||(Na=r,r=nc(Kh,"onSelect"),0<r.length&&(e=new pp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ws)))}function uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Jd={},b0={};Ir&&(b0=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Wc(t){if(Jd[t])return Jd[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b0)return Jd[t]=e[n];return t}var O0=Wc("animationend"),V0=Wc("animationiteration"),L0=Wc("animationstart"),M0=Wc("transitionend"),j0=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){j0.set(t,e),ys(e,[t])}for(var Zd=0;Zd<Kg.length;Zd++){var eh=Kg[Zd],z1=eh.toLowerCase(),B1=eh[0].toUpperCase()+eh.slice(1);Ni(z1,"on"+B1)}Ni(O0,"onAnimationEnd");Ni(V0,"onAnimationIteration");Ni(L0,"onAnimationStart");Ni("dblclick","onDoubleClick");Ni("focusin","onFocus");Ni("focusout","onBlur");Ni(M0,"onTransitionEnd");fo("onMouseEnter",["mouseout","mouseover"]);fo("onMouseLeave",["mouseout","mouseover"]);fo("onPointerEnter",["pointerout","pointerover"]);fo("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zS(r,e,void 0,t),t.currentTarget=null}function F0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Gg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Gg(i,l,c),s=u}}}if(Xu)throw t=$h,Xu=!1,$h=null,t}function Fe(t,e){var n=e[Zh];n===void 0&&(n=e[Zh]=new Set);var r=t+"__bubble";n.has(r)||(U0(e,t,2,!1),n.add(r))}function th(t,e,n){var r=0;e&&(r|=4),U0(n,t,r,e)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Xa(t){if(!t[cu]){t[cu]=!0,K_.forEach(function(n){n!=="selectionchange"&&($1.has(n)||th(n,!1,t),th(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cu]||(e[cu]=!0,th("selectionchange",!1,e))}}function U0(t,e,n,r){switch(I0(e)){case 1:var i=r1;break;case 4:i=i1;break;default:i=hp}n=i.bind(null,e,n,t),i=void 0,!Bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ji(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}u0(function(){var c=s,h=lp(n),f=[];e:{var m=j0.get(t);if(m!==void 0){var T=pp,S=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":T=_1;break;case"focusin":S="focus",T=Qd;break;case"focusout":S="blur",T=Qd;break;case"beforeblur":case"afterblur":T=Qd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=T1;break;case O0:case V0:case L0:T=c1;break;case M0:T=S1;break;case"scroll":T=s1;break;case"wheel":T=C1;break;case"copy":case"cut":case"paste":T=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=jg}var R=(e&4)!==0,b=!R&&t==="scroll",A=R?m!==null?m+"Capture":null:m;R=[];for(var w=c,C;w!==null;){C=w;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,A!==null&&(L=Wa(w,A),L!=null&&R.push(Ja(w,L,C)))),b)break;w=w.return}0<R.length&&(m=new T(m,S,null,n,h),f.push({event:m,listeners:R}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&n!==Uh&&(S=n.relatedTarget||n.fromElement)&&(Ji(S)||S[Sr]))break e;if((T||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=c,S=S?Ji(S):null,S!==null&&(b=vs(S),S!==b||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=c),T!==S)){if(R=Lg,L="onMouseLeave",A="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=jg,L="onPointerLeave",A="onPointerEnter",w="pointer"),b=T==null?m:Ks(T),C=S==null?m:Ks(S),m=new R(L,w+"leave",T,n,h),m.target=b,m.relatedTarget=C,L=null,Ji(h)===c&&(R=new R(A,w+"enter",S,n,h),R.target=C,R.relatedTarget=b,L=R),b=L,T&&S)t:{for(R=T,A=S,w=0,C=R;C;C=Ls(C))w++;for(C=0,L=A;L;L=Ls(L))C++;for(;0<w-C;)R=Ls(R),w--;for(;0<C-w;)A=Ls(A),C--;for(;w--;){if(R===A||A!==null&&R===A.alternate)break t;R=Ls(R),A=Ls(A)}R=null}else R=null;T!==null&&Qg(f,m,T,R,!1),S!==null&&b!==null&&Qg(f,b,S,R,!0)}}e:{if(m=c?Ks(c):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var z=b1;else if(zg(m))if(P0)z=M1;else{z=V1;var F=O1}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(z=L1);if(z&&(z=z(t,c))){R0(f,z,n,h);break e}F&&F(t,m,c),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&Vh(m,"number",m.value)}switch(F=c?Ks(c):window,t){case"focusin":(zg(F)||F.contentEditable==="true")&&(Ws=F,Kh=c,Na=null);break;case"focusout":Na=Kh=Ws=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,qg(f,n,h);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":qg(f,n,h)}var g;if(gp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hs?C0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(A0&&n.locale!=="ko"&&(Hs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Hs&&(g=S0()):(ei=h,fp="value"in ei?ei.value:ei.textContent,Hs=!0)),F=nc(c,v),0<F.length&&(v=new Mg(v,t,null,n,h),f.push({event:v,listeners:F}),g?v.data=g:(g=x0(n),g!==null&&(v.data=g)))),(g=R1?P1(t,n):k1(t,n))&&(c=nc(c,"onBeforeInput"),0<c.length&&(h=new Mg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=g))}F0(f,e)})}function Ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wa(t,n),s!=null&&r.unshift(Ja(t,s,i)),s=Wa(t,e),s!=null&&r.push(Ja(t,s,i))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Wa(n,s),u!=null&&o.unshift(Ja(n,u,l))):i||(u=Wa(n,s),u!=null&&o.push(Ja(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var H1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(H1,`
`).replace(W1,"")}function du(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error(W(425))}function rc(){}var Qh=null,Yh=null;function Xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,K1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(t){return Xg.resolve(null).then(t).catch(G1)}:Jh;function G1(t){setTimeout(function(){throw t})}function rh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ga(e)}function ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),Yn="__reactFiber$"+No,Za="__reactProps$"+No,Sr="__reactContainer$"+No,Zh="__reactEvents$"+No,Q1="__reactListeners$"+No,Y1="__reactHandles$"+No;function Ji(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sr]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jg(t);t!==null;){if(n=t[Yn])return n;t=Jg(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[Yn]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function qc(t){return t[Za]||null}var ef=[],Gs=-1;function Di(t){return{current:t}}function ze(t){0>Gs||(t.current=ef[Gs],ef[Gs]=null,Gs--)}function Le(t,e){Gs++,ef[Gs]=t.current,t.current=e}var _i={},jt=Di(_i),en=Di(!1),os=_i;function po(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tn(t){return t=t.childContextTypes,t!=null}function ic(){ze(en),ze(jt)}function Zg(t,e,n){if(jt.current!==_i)throw Error(W(168));Le(jt,e),Le(en,n)}function z0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,OS(t)||"Unknown",i));return Ge({},n,r)}function sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,os=jt.current,Le(jt,t),Le(en,en.current),!0}function ey(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=z0(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,ze(en),ze(jt),Le(jt,t)):ze(en),Le(en,n)}var mr=null,Kc=!1,ih=!1;function B0(t){mr===null?mr=[t]:mr.push(t)}function X1(t){Kc=!0,B0(t)}function bi(){if(!ih&&mr!==null){ih=!0;var t=0,e=Ne;try{var n=mr;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mr=null,Kc=!1}catch(i){throw mr!==null&&(mr=mr.slice(t+1)),f0(up,bi),i}finally{Ne=e,ih=!1}}return null}var Qs=[],Ys=0,oc=null,ac=0,yn=[],vn=0,as=null,gr=1,yr="";function Ki(t,e){Qs[Ys++]=ac,Qs[Ys++]=oc,oc=t,ac=e}function $0(t,e,n){yn[vn++]=gr,yn[vn++]=yr,yn[vn++]=as,as=t;var r=gr;t=yr;var i=32-Ln(r)-1;r&=~(1<<i),n+=1;var s=32-Ln(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gr=1<<32-Ln(e)+i|n<<i|r,yr=s+t}else gr=1<<s|n<<i|r,yr=t}function vp(t){t.return!==null&&(Ki(t,1),$0(t,1,0))}function _p(t){for(;t===oc;)oc=Qs[--Ys],Qs[Ys]=null,ac=Qs[--Ys],Qs[Ys]=null;for(;t===as;)as=yn[--vn],yn[vn]=null,yr=yn[--vn],yn[vn]=null,gr=yn[--vn],yn[vn]=null}var dn=null,un=null,He=!1,bn=null;function H0(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ty(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,un=null,!0):!1;default:return!1}}function tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nf(t){if(He){var e=un;if(e){var n=e;if(!ty(t,e)){if(tf(t))throw Error(W(418));e=ai(n.nextSibling);var r=dn;e&&ty(t,e)?H0(r,n):(t.flags=t.flags&-4097|2,He=!1,dn=t)}}else{if(tf(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,dn=t}}}function ny(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function hu(t){if(t!==dn)return!1;if(!He)return ny(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xh(t.type,t.memoizedProps)),e&&(e=un)){if(tf(t))throw W0(),Error(W(418));for(;e;)H0(t,e),e=ai(e.nextSibling)}if(ny(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?ai(t.stateNode.nextSibling):null;return!0}function W0(){for(var t=un;t;)t=ai(t.nextSibling)}function mo(){un=dn=null,He=!1}function wp(t){bn===null?bn=[t]:bn.push(t)}var J1=Dr.ReactCurrentBatchConfig;function ca(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ry(t){var e=t._init;return e(t._payload)}function q0(t){function e(A,w){if(t){var C=A.deletions;C===null?(A.deletions=[w],A.flags|=16):C.push(w)}}function n(A,w){if(!t)return null;for(;w!==null;)e(A,w),w=w.sibling;return null}function r(A,w){for(A=new Map;w!==null;)w.key!==null?A.set(w.key,w):A.set(w.index,w),w=w.sibling;return A}function i(A,w){return A=di(A,w),A.index=0,A.sibling=null,A}function s(A,w,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<w?(A.flags|=2,w):C):(A.flags|=2,w)):(A.flags|=1048576,w)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,w,C,L){return w===null||w.tag!==6?(w=dh(C,A.mode,L),w.return=A,w):(w=i(w,C),w.return=A,w)}function u(A,w,C,L){var z=C.type;return z===$s?h(A,w,C.props.children,L,C.key):w!==null&&(w.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===qr&&ry(z)===w.type)?(L=i(w,C.props),L.ref=ca(A,w,C),L.return=A,L):(L=Mu(C.type,C.key,C.props,null,A.mode,L),L.ref=ca(A,w,C),L.return=A,L)}function c(A,w,C,L){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=hh(C,A.mode,L),w.return=A,w):(w=i(w,C.children||[]),w.return=A,w)}function h(A,w,C,L,z){return w===null||w.tag!==7?(w=is(C,A.mode,L,z),w.return=A,w):(w=i(w,C),w.return=A,w)}function f(A,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=dh(""+w,A.mode,C),w.return=A,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nu:return C=Mu(w.type,w.key,w.props,null,A.mode,C),C.ref=ca(A,null,w),C.return=A,C;case Bs:return w=hh(w,A.mode,C),w.return=A,w;case qr:var L=w._init;return f(A,L(w._payload),C)}if(ya(w)||sa(w))return w=is(w,A.mode,C,null),w.return=A,w;fu(A,w)}return null}function m(A,w,C,L){var z=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return z!==null?null:l(A,w,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nu:return C.key===z?u(A,w,C,L):null;case Bs:return C.key===z?c(A,w,C,L):null;case qr:return z=C._init,m(A,w,z(C._payload),L)}if(ya(C)||sa(C))return z!==null?null:h(A,w,C,L,null);fu(A,C)}return null}function T(A,w,C,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return A=A.get(C)||null,l(w,A,""+L,z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case nu:return A=A.get(L.key===null?C:L.key)||null,u(w,A,L,z);case Bs:return A=A.get(L.key===null?C:L.key)||null,c(w,A,L,z);case qr:var F=L._init;return T(A,w,C,F(L._payload),z)}if(ya(L)||sa(L))return A=A.get(C)||null,h(w,A,L,z,null);fu(w,L)}return null}function S(A,w,C,L){for(var z=null,F=null,g=w,v=w=0,E=null;g!==null&&v<C.length;v++){g.index>v?(E=g,g=null):E=g.sibling;var I=m(A,g,C[v],L);if(I===null){g===null&&(g=E);break}t&&g&&I.alternate===null&&e(A,g),w=s(I,w,v),F===null?z=I:F.sibling=I,F=I,g=E}if(v===C.length)return n(A,g),He&&Ki(A,v),z;if(g===null){for(;v<C.length;v++)g=f(A,C[v],L),g!==null&&(w=s(g,w,v),F===null?z=g:F.sibling=g,F=g);return He&&Ki(A,v),z}for(g=r(A,g);v<C.length;v++)E=T(g,A,v,C[v],L),E!==null&&(t&&E.alternate!==null&&g.delete(E.key===null?v:E.key),w=s(E,w,v),F===null?z=E:F.sibling=E,F=E);return t&&g.forEach(function(P){return e(A,P)}),He&&Ki(A,v),z}function R(A,w,C,L){var z=sa(C);if(typeof z!="function")throw Error(W(150));if(C=z.call(C),C==null)throw Error(W(151));for(var F=z=null,g=w,v=w=0,E=null,I=C.next();g!==null&&!I.done;v++,I=C.next()){g.index>v?(E=g,g=null):E=g.sibling;var P=m(A,g,I.value,L);if(P===null){g===null&&(g=E);break}t&&g&&P.alternate===null&&e(A,g),w=s(P,w,v),F===null?z=P:F.sibling=P,F=P,g=E}if(I.done)return n(A,g),He&&Ki(A,v),z;if(g===null){for(;!I.done;v++,I=C.next())I=f(A,I.value,L),I!==null&&(w=s(I,w,v),F===null?z=I:F.sibling=I,F=I);return He&&Ki(A,v),z}for(g=r(A,g);!I.done;v++,I=C.next())I=T(g,A,v,I.value,L),I!==null&&(t&&I.alternate!==null&&g.delete(I.key===null?v:I.key),w=s(I,w,v),F===null?z=I:F.sibling=I,F=I);return t&&g.forEach(function(N){return e(A,N)}),He&&Ki(A,v),z}function b(A,w,C,L){if(typeof C=="object"&&C!==null&&C.type===$s&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case nu:e:{for(var z=C.key,F=w;F!==null;){if(F.key===z){if(z=C.type,z===$s){if(F.tag===7){n(A,F.sibling),w=i(F,C.props.children),w.return=A,A=w;break e}}else if(F.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===qr&&ry(z)===F.type){n(A,F.sibling),w=i(F,C.props),w.ref=ca(A,F,C),w.return=A,A=w;break e}n(A,F);break}else e(A,F);F=F.sibling}C.type===$s?(w=is(C.props.children,A.mode,L,C.key),w.return=A,A=w):(L=Mu(C.type,C.key,C.props,null,A.mode,L),L.ref=ca(A,w,C),L.return=A,A=L)}return o(A);case Bs:e:{for(F=C.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(A,w.sibling),w=i(w,C.children||[]),w.return=A,A=w;break e}else{n(A,w);break}else e(A,w);w=w.sibling}w=hh(C,A.mode,L),w.return=A,A=w}return o(A);case qr:return F=C._init,b(A,w,F(C._payload),L)}if(ya(C))return S(A,w,C,L);if(sa(C))return R(A,w,C,L);fu(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(A,w.sibling),w=i(w,C),w.return=A,A=w):(n(A,w),w=dh(C,A.mode,L),w.return=A,A=w),o(A)):n(A,w)}return b}var go=q0(!0),K0=q0(!1),lc=Di(null),uc=null,Xs=null,Ep=null;function Tp(){Ep=Xs=uc=null}function Ip(t){var e=lc.current;ze(lc),t._currentValue=e}function rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){uc=t,Ep=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(Ep!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(uc===null)throw Error(W(308));Xs=t,uc.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var Zi=null;function Sp(t){Zi===null?Zi=[t]:Zi.push(t)}function G0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ar(t,r)}function Ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ar(t,n)}return i=r.interleaved,i===null?(e.next=e,Sp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ar(t,n)}function Nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}function iy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cc(t,e,n,r){var i=t.updateQueue;Kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,l=s;do{var m=l.lane,T=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,R=l;switch(m=e,T=n,R.tag){case 1:if(S=R.payload,typeof S=="function"){f=S.call(T,f,m);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=R.payload,m=typeof S=="function"?S.call(T,f,m):S,m==null)break e;f=Ge({},f,m);break e;case 2:Kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else T={eventTime:T,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=T,u=f):h=h.next=T,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=f}}function sy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Al={},Jn=Di(Al),el=Di(Al),tl=Di(Al);function es(t){if(t===Al)throw Error(W(174));return t}function Cp(t,e){switch(Le(tl,e),Le(el,t),Le(Jn,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mh(e,t)}ze(Jn),Le(Jn,e)}function yo(){ze(Jn),ze(el),ze(tl)}function Y0(t){es(tl.current);var e=es(Jn.current),n=Mh(e,t.type);e!==n&&(Le(el,t),Le(Jn,n))}function xp(t){el.current===t&&(ze(Jn),ze(el))}var qe=Di(0);function dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sh=[];function Rp(){for(var t=0;t<sh.length;t++)sh[t]._workInProgressVersionPrimary=null;sh.length=0}var Du=Dr.ReactCurrentDispatcher,oh=Dr.ReactCurrentBatchConfig,ls=0,Ke=null,dt=null,gt=null,hc=!1,Da=!1,nl=0,Z1=0;function Dt(){throw Error(W(321))}function Pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function kp(t,e,n,r,i,s){if(ls=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?rA:iA,t=n(r,i),Da){s=0;do{if(Da=!1,nl=0,25<=s)throw Error(W(301));s+=1,gt=dt=null,e.updateQueue=null,Du.current=sA,t=n(r,i)}while(Da)}if(Du.current=fc,e=dt!==null&&dt.next!==null,ls=0,gt=dt=Ke=null,hc=!1,e)throw Error(W(300));return t}function Np(){var t=nl!==0;return nl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ke.memoizedState=gt=t:gt=gt.next=t,gt}function Sn(){if(dt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?Ke.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(W(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?Ke.memoizedState=gt=t:gt=gt.next=t}return gt}function rl(t,e){return typeof e=="function"?e(t):e}function ah(t){var e=Sn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((ls&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=r):u=u.next=f,Ke.lanes|=h,us|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,jn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,us|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function X0(){}function J0(t,e){var n=Ke,r=Sn(),i=e(),s=!jn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,Dp(tw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,il(9,ew.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(W(349));ls&30||Z0(n,e,i)}return i}function Z0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ew(t,e,n,r){e.value=n,e.getSnapshot=r,nw(e)&&rw(t)}function tw(t,e,n){return n(function(){nw(e)&&rw(t)})}function nw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function rw(t){var e=Ar(t,1);e!==null&&Mn(e,t,1,-1)}function oy(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:t},e.queue=t,t=t.dispatch=nA.bind(null,Ke,t),[e.memoizedState,t]}function il(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iw(){return Sn().memoizedState}function bu(t,e,n,r){var i=Gn();Ke.flags|=t,i.memoizedState=il(1|e,n,void 0,r===void 0?null:r)}function Gc(t,e,n,r){var i=Sn();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&Pp(r,o.deps)){i.memoizedState=il(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=il(1|e,n,s,r)}function ay(t,e){return bu(8390656,8,t,e)}function Dp(t,e){return Gc(2048,8,t,e)}function sw(t,e){return Gc(4,2,t,e)}function ow(t,e){return Gc(4,4,t,e)}function aw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lw(t,e,n){return n=n!=null?n.concat([t]):null,Gc(4,4,aw.bind(null,e,t),n)}function bp(){}function uw(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cw(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dw(t,e,n){return ls&21?(jn(n,e)||(n=g0(),Ke.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function eA(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=oh.transition;oh.transition={};try{t(!1),e()}finally{Ne=n,oh.transition=r}}function hw(){return Sn().memoizedState}function tA(t,e,n){var r=ci(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fw(t))pw(e,n);else if(n=G0(t,e,n,r),n!==null){var i=$t();Mn(n,t,r,i),mw(n,e,r)}}function nA(t,e,n){var r=ci(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fw(t))pw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,jn(l,o)){var u=e.interleaved;u===null?(i.next=i,Sp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=G0(t,e,i,r),n!==null&&(i=$t(),Mn(n,t,r,i),mw(n,e,r))}}function fw(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function pw(t,e){Da=hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}var fc={readContext:In,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},rA={readContext:In,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:ay,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bu(4194308,4,aw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return bu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tA.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:oy,useDebugValue:bp,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=oy(!1),e=t[0];return t=eA.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=Gn();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),vt===null)throw Error(W(349));ls&30||Z0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ay(tw.bind(null,r,s,t),[t]),r.flags|=2048,il(9,ew.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gn(),e=vt.identifierPrefix;if(He){var n=yr,r=gr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iA={readContext:In,useCallback:uw,useContext:In,useEffect:Dp,useImperativeHandle:lw,useInsertionEffect:sw,useLayoutEffect:ow,useMemo:cw,useReducer:ah,useRef:iw,useState:function(){return ah(rl)},useDebugValue:bp,useDeferredValue:function(t){var e=Sn();return dw(e,dt.memoizedState,t)},useTransition:function(){var t=ah(rl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:J0,useId:hw,unstable_isNewReconciler:!1},sA={readContext:In,useCallback:uw,useContext:In,useEffect:Dp,useImperativeHandle:lw,useInsertionEffect:sw,useLayoutEffect:ow,useMemo:cw,useReducer:lh,useRef:iw,useState:function(){return lh(rl)},useDebugValue:bp,useDeferredValue:function(t){var e=Sn();return dt===null?e.memoizedState=t:dw(e,dt.memoizedState,t)},useTransition:function(){var t=lh(rl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:J0,useId:hw,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qc={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=ci(t),s=wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(Mn(e,t,i,r),Nu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=ci(t),s=wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=li(t,s,i),e!==null&&(Mn(e,t,i,r),Nu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=ci(t),i=wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=li(t,i,r),e!==null&&(Mn(e,t,r,n),Nu(e,t,r))}};function ly(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ya(n,r)||!Ya(i,s):!0}function gw(t,e,n){var r=!1,i=_i,s=e.contextType;return typeof s=="object"&&s!==null?s=In(s):(i=tn(e)?os:jt.current,r=e.contextTypes,s=(r=r!=null)?po(t,i):_i),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function uy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qc.enqueueReplaceState(e,e.state,null)}function of(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ap(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=In(s):(s=tn(e)?os:jt.current,i.context=po(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qc.enqueueReplaceState(i,i.state,null),cc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,e){try{var n="",r=e;do n+=bS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function uh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oA=typeof WeakMap=="function"?WeakMap:Map;function yw(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mc||(mc=!0,yf=r),af(t,e)},n}function vw(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){af(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){af(t,e),typeof r!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=wA.bind(null,t,e,n),e.then(t,t))}function dy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,li(n,e,1))),n.lanes|=1),t)}var aA=Dr.ReactCurrentOwner,Zt=!1;function Bt(t,e,n,r){e.child=t===null?K0(e,null,n,r):go(e,t.child,n,r)}function fy(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=kp(t,e,n,r,s,i),n=Np(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(He&&n&&vp(e),e.flags|=1,Bt(t,e,r,i),e.child)}function py(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_w(t,e,s,r,i)):(t=Mu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ya,n(o,r)&&t.ref===e.ref)return Cr(t,e,i)}return e.flags|=1,t=di(s,r),t.ref=e.ref,t.return=e,e.child=t}function _w(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ya(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Cr(t,e,i)}return lf(t,e,n,r,i)}function ww(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Zs,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Zs,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Zs,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Zs,an),an|=r;return Bt(t,e,i,n),e.child}function Ew(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lf(t,e,n,r,i){var s=tn(n)?os:jt.current;return s=po(e,s),so(e,i),n=kp(t,e,n,r,s,i),r=Np(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(He&&r&&vp(e),e.flags|=1,Bt(t,e,n,i),e.child)}function my(t,e,n,r,i){if(tn(n)){var s=!0;sc(e)}else s=!1;if(so(e,i),e.stateNode===null)Ou(t,e),gw(e,n,r),of(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=tn(n)?os:jt.current,c=po(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&uy(e,o,r,c),Kr=!1;var m=e.memoizedState;o.state=m,cc(e,r,o,i),u=e.memoizedState,l!==r||m!==u||en.current||Kr?(typeof h=="function"&&(sf(e,n,h,r),u=e.memoizedState),(l=Kr||ly(e,n,l,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Q0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:kn(e.type,l),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=In(u):(u=tn(n)?os:jt.current,u=po(e,u));var T=n.getDerivedStateFromProps;(h=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==u)&&uy(e,o,r,u),Kr=!1,m=e.memoizedState,o.state=m,cc(e,r,o,i);var S=e.memoizedState;l!==f||m!==S||en.current||Kr?(typeof T=="function"&&(sf(e,n,T,r),S=e.memoizedState),(c=Kr||ly(e,n,c,r,m,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return uf(t,e,n,r,s,i)}function uf(t,e,n,r,i,s){Ew(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ey(e,n,!1),Cr(t,e,s);r=e.stateNode,aA.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=go(e,t.child,null,s),e.child=go(e,null,l,s)):Bt(t,e,l,s),e.memoizedState=r.state,i&&ey(e,n,!0),e.child}function Tw(t){var e=t.stateNode;e.pendingContext?Zg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zg(t,e.context,!1),Cp(t,e.containerInfo)}function gy(t,e,n,r,i){return mo(),wp(i),e.flags|=256,Bt(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function df(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iw(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(qe,i&1),t===null)return nf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jc(o,r,0,null),t=is(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=df(n),e.memoizedState=cf,t):Op(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lA(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=di(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=di(l,s):(s=is(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?df(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return s=t.child,t=s.sibling,r=di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Op(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&wp(r),go(e,t.child,null,n),t=Op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uh(Error(W(422))),pu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jc({mode:"visible",children:r.children},i,0,null),s=is(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&go(e,t.child,null,o),e.child.memoizedState=df(o),e.memoizedState=cf,s);if(!(e.mode&1))return pu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=uh(s,r,void 0),pu(t,e,o,r)}if(l=(o&t.childLanes)!==0,Zt||l){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ar(t,i),Mn(r,t,i,-1))}return Up(),r=uh(Error(W(421))),pu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,un=ai(i.nextSibling),dn=e,He=!0,bn=null,t!==null&&(yn[vn++]=gr,yn[vn++]=yr,yn[vn++]=as,gr=t.id,yr=t.overflow,as=e),e=Op(e,r.children),e.flags|=4096,e)}function yy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rf(t.return,e,n)}function ch(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yy(t,n,e);else if(t.tag===19)yy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ch(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ch(e,!0,n,null,s);break;case"together":ch(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uA(t,e,n){switch(e.tag){case 3:Tw(e),mo();break;case 5:Y0(e);break;case 1:tn(e.type)&&sc(e);break;case 4:Cp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(lc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?Iw(t,e,n):(Le(qe,qe.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);Le(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,ww(t,e,n)}return Cr(t,e,n)}var Aw,hf,Cw,xw;Aw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};Cw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,es(Jn.current);var s=null;switch(n){case"input":i=bh(t,i),r=bh(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Lh(t,i),r=Lh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rc)}jh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($a.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Fe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xw=function(t,e,n,r){n!==r&&(e.flags|=4)};function da(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cA(t,e,n){var r=e.pendingProps;switch(_p(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return tn(e.type)&&ic(),bt(e),null;case 3:return r=e.stateNode,yo(),ze(en),ze(jt),Rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(wf(bn),bn=null))),hf(t,e),bt(e),null;case 5:xp(e);var i=es(tl.current);if(n=e.type,t!==null&&e.stateNode!=null)Cw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return bt(e),null}if(t=es(Jn.current),hu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yn]=e,r[Za]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<_a.length;i++)Fe(_a[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Cg(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":Rg(r,s),Fe("invalid",r)}jh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&du(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&du(r.textContent,l,t),i=["children",""+l]):$a.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":ru(r),xg(r,s,!0);break;case"textarea":ru(r),Pg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yn]=e,t[Za]=r,Aw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fh(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<_a.length;i++)Fe(_a[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":Cg(t,r),i=bh(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":Rg(t,r),i=Lh(t,r),Fe("invalid",t);break;default:i=r}jh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?i0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&n0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ha(t,u):typeof u=="number"&&Ha(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($a.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Fe("scroll",t):u!=null&&ip(t,s,u,o))}switch(n){case"input":ru(t),xg(t,r,!1);break;case"textarea":ru(t),Pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)xw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=es(tl.current),es(Jn.current),hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yn]=e,(s=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&du(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yn]=e,e.stateNode=r}return bt(e),null;case 13:if(ze(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&un!==null&&e.mode&1&&!(e.flags&128))W0(),mo(),e.flags|=98560,s=!1;else if(s=hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Yn]=e}else mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else bn!==null&&(wf(bn),bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ht===0&&(ht=3):Up())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return yo(),hf(t,e),t===null&&Xa(e.stateNode.containerInfo),bt(e),null;case 10:return Ip(e.type._context),bt(e),null;case 17:return tn(e.type)&&ic(),bt(e),null;case 19:if(ze(qe),s=e.memoizedState,s===null)return bt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)da(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dc(t),o!==null){for(e.flags|=128,da(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>_o&&(e.flags|=128,r=!0,da(s,!1),e.lanes=4194304)}else{if(!r)if(t=dc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),da(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return bt(e),null}else 2*et()-s.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,r=!0,da(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=qe.current,Le(qe,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Fp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function dA(t,e){switch(_p(e),e.tag){case 1:return tn(e.type)&&ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),ze(en),ze(jt),Rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xp(e),null;case 13:if(ze(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(qe),null;case 4:return yo(),null;case 10:return Ip(e.type._context),null;case 22:case 23:return Fp(),null;case 24:return null;default:return null}}var mu=!1,Lt=!1,hA=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function ff(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var vy=!1;function fA(t,e){if(Qh=ec,t=D0(),yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var T;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(T=f.firstChild)!==null;)m=f,f=T;for(;;){if(f===t)break t;if(m===n&&++c===i&&(l=o),m===s&&++h===r&&(u=o),(T=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yh={focusedElem:t,selectionRange:n},ec=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var R=S.memoizedProps,b=S.memoizedState,A=e.stateNode,w=A.getSnapshotBeforeUpdate(e.elementType===e.type?R:kn(e.type,R),b);A.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(L){Xe(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return S=vy,vy=!1,S}function ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ff(e,n,s)}i=i.next}while(i!==r)}}function Yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rw(t){var e=t.alternate;e!==null&&(t.alternate=null,Rw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[Za],delete e[Zh],delete e[Q1],delete e[Y1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pw(t){return t.tag===5||t.tag===3||t.tag===4}function _y(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rc));else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}var St=null,Nn=!1;function $r(t,e,n){for(n=n.child;n!==null;)kw(t,e,n),n=n.sibling}function kw(t,e,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Bc,n)}catch{}switch(n.tag){case 5:Lt||Js(n,e);case 6:var r=St,i=Nn;St=null,$r(t,e,n),St=r,Nn=i,St!==null&&(Nn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Nn?(t=St,n=n.stateNode,t.nodeType===8?rh(t.parentNode,n):t.nodeType===1&&rh(t,n),Ga(t)):rh(St,n.stateNode));break;case 4:r=St,i=Nn,St=n.stateNode.containerInfo,Nn=!0,$r(t,e,n),St=r,Nn=i;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ff(n,e,o),i=i.next}while(i!==r)}$r(t,e,n);break;case 1:if(!Lt&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Xe(n,e,l)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,$r(t,e,n),Lt=r):$r(t,e,n);break;default:$r(t,e,n)}}function wy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hA),e.forEach(function(r){var i=TA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:St=l.stateNode,Nn=!1;break e;case 3:St=l.stateNode.containerInfo,Nn=!0;break e;case 4:St=l.stateNode.containerInfo,Nn=!0;break e}l=l.return}if(St===null)throw Error(W(160));kw(s,o,i),St=null,Nn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nw(e,t),e=e.sibling}function Nw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),Kn(t),r&4){try{ba(3,t,t.return),Yc(3,t)}catch(R){Xe(t,t.return,R)}try{ba(5,t,t.return)}catch(R){Xe(t,t.return,R)}}break;case 1:Pn(e,t),Kn(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Pn(e,t),Kn(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var i=t.stateNode;try{Ha(i,"")}catch(R){Xe(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Z_(i,s),Fh(l,o);var c=Fh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?i0(i,f):h==="dangerouslySetInnerHTML"?n0(i,f):h==="children"?Ha(i,f):ip(i,h,f,c)}switch(l){case"input":Oh(i,s);break;case"textarea":e0(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?to(i,!!s.multiple,T,!1):m!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[Za]=s}catch(R){Xe(t,t.return,R)}}break;case 6:if(Pn(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Xe(t,t.return,R)}}break;case 3:if(Pn(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(e.containerInfo)}catch(R){Xe(t,t.return,R)}break;case 4:Pn(e,t),Kn(t);break;case 13:Pn(e,t),Kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mp=et())),r&4&&wy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||h,Pn(e,t),Lt=c):Pn(e,t),Kn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(m=Z,T=m.child,m.tag){case 0:case 11:case 14:case 15:ba(4,m,m.return);break;case 1:Js(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(R){Xe(r,n,R)}}break;case 5:Js(m,m.return);break;case 22:if(m.memoizedState!==null){Ty(f);continue}}T!==null?(T.return=m,Z=T):Ty(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=r0("display",o))}catch(R){Xe(t,t.return,R)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(R){Xe(t,t.return,R)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pn(e,t),Kn(t),r&4&&wy(t);break;case 21:break;default:Pn(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pw(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ha(i,""),r.flags&=-33);var s=_y(t);gf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=_y(t);mf(t,l,o);break;default:throw Error(W(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pA(t,e,n){Z=t,Dw(t)}function Dw(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Lt;l=mu;var c=Lt;if(mu=o,(Lt=u)&&!c)for(Z=i;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Iy(i):u!==null?(u.return=o,Z=u):Iy(i);for(;s!==null;)Z=s,Dw(s),s=s.sibling;Z=i,mu=l,Lt=c}Ey(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):Ey(t)}}function Ey(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ga(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Lt||e.flags&512&&pf(e)}catch(m){Xe(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Ty(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Iy(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yc(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Xe(e,i,u)}}var s=e.return;try{pf(e)}catch(u){Xe(e,s,u)}break;case 5:var o=e.return;try{pf(e)}catch(u){Xe(e,o,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var mA=Math.ceil,pc=Dr.ReactCurrentDispatcher,Vp=Dr.ReactCurrentOwner,En=Dr.ReactCurrentBatchConfig,Se=0,vt=null,st=null,xt=0,an=0,Zs=Di(0),ht=0,sl=null,us=0,Xc=0,Lp=0,Oa=null,Yt=null,Mp=0,_o=1/0,pr=null,mc=!1,yf=null,ui=null,gu=!1,ti=null,gc=0,Va=0,vf=null,Vu=-1,Lu=0;function $t(){return Se&6?et():Vu!==-1?Vu:Vu=et()}function ci(t){return t.mode&1?Se&2&&xt!==0?xt&-xt:J1.transition!==null?(Lu===0&&(Lu=g0()),Lu):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:I0(t.type)),t):1}function Mn(t,e,n,r){if(50<Va)throw Va=0,vf=null,Error(W(185));Tl(t,n,r),(!(Se&2)||t!==vt)&&(t===vt&&(!(Se&2)&&(Xc|=n),ht===4&&Qr(t,xt)),nn(t,r),n===1&&Se===0&&!(e.mode&1)&&(_o=et()+500,Kc&&bi()))}function nn(t,e){var n=t.callbackNode;JS(t,e);var r=Zu(t,t===vt?xt:0);if(r===0)n!==null&&Dg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dg(n),e===1)t.tag===0?X1(Sy.bind(null,t)):B0(Sy.bind(null,t)),K1(function(){!(Se&6)&&bi()}),n=null;else{switch(y0(r)){case 1:n=up;break;case 4:n=p0;break;case 16:n=Ju;break;case 536870912:n=m0;break;default:n=Ju}n=Uw(n,bw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bw(t,e){if(Vu=-1,Lu=0,Se&6)throw Error(W(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Zu(t,t===vt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yc(t,r);else{e=r;var i=Se;Se|=2;var s=Vw();(vt!==t||xt!==e)&&(pr=null,_o=et()+500,rs(t,e));do try{vA();break}catch(l){Ow(t,l)}while(!0);Tp(),pc.current=s,Se=i,st!==null?e=0:(vt=null,xt=0,e=ht)}if(e!==0){if(e===2&&(i=Hh(t),i!==0&&(r=i,e=_f(t,i))),e===1)throw n=sl,rs(t,0),Qr(t,r),nn(t,et()),n;if(e===6)Qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!gA(i)&&(e=yc(t,r),e===2&&(s=Hh(t),s!==0&&(r=s,e=_f(t,s))),e===1))throw n=sl,rs(t,0),Qr(t,r),nn(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Gi(t,Yt,pr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=Mp+500-et(),10<e)){if(Zu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jh(Gi.bind(null,t,Yt,pr),e);break}Gi(t,Yt,pr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ln(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mA(r/1960))-r,10<r){t.timeoutHandle=Jh(Gi.bind(null,t,Yt,pr),r);break}Gi(t,Yt,pr);break;case 5:Gi(t,Yt,pr);break;default:throw Error(W(329))}}}return nn(t,et()),t.callbackNode===n?bw.bind(null,t):null}function _f(t,e){var n=Oa;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=yc(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&wf(e)),t}function wf(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function gA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Lp,e&=~Xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function Sy(t){if(Se&6)throw Error(W(327));oo();var e=Zu(t,0);if(!(e&1))return nn(t,et()),null;var n=yc(t,e);if(t.tag!==0&&n===2){var r=Hh(t);r!==0&&(e=r,n=_f(t,r))}if(n===1)throw n=sl,rs(t,0),Qr(t,e),nn(t,et()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gi(t,Yt,pr),nn(t,et()),null}function jp(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(_o=et()+500,Kc&&bi())}}function cs(t){ti!==null&&ti.tag===0&&!(Se&6)&&oo();var e=Se;Se|=1;var n=En.transition,r=Ne;try{if(En.transition=null,Ne=1,t)return t()}finally{Ne=r,En.transition=n,Se=e,!(Se&6)&&bi()}}function Fp(){an=Zs.current,ze(Zs)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q1(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(_p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ic();break;case 3:yo(),ze(en),ze(jt),Rp();break;case 5:xp(r);break;case 4:yo();break;case 13:ze(qe);break;case 19:ze(qe);break;case 10:Ip(r.type._context);break;case 22:case 23:Fp()}n=n.return}if(vt=t,st=t=di(t.current,null),xt=an=e,ht=0,sl=null,Lp=Xc=us=0,Yt=Oa=null,Zi!==null){for(e=0;e<Zi.length;e++)if(n=Zi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zi=null}return t}function Ow(t,e){do{var n=st;try{if(Tp(),Du.current=fc,hc){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hc=!1}if(ls=0,gt=dt=Ke=null,Da=!1,nl=0,Vp.current=null,n===null||n.return===null){ht=1,sl=e,st=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=xt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=dy(o);if(T!==null){T.flags&=-257,hy(T,o,l,s,e),T.mode&1&&cy(s,c,e),e=T,u=c;var S=e.updateQueue;if(S===null){var R=new Set;R.add(u),e.updateQueue=R}else S.add(u);break e}else{if(!(e&1)){cy(s,c,e),Up();break e}u=Error(W(426))}}else if(He&&l.mode&1){var b=dy(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hy(b,o,l,s,e),wp(vo(u,l));break e}}s=u=vo(u,l),ht!==4&&(ht=2),Oa===null?Oa=[s]:Oa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=yw(s,u,e);iy(s,A);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ui===null||!ui.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=vw(s,l,e);iy(s,L);break e}}s=s.return}while(s!==null)}Mw(n)}catch(z){e=z,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function Vw(){var t=pc.current;return pc.current=fc,t===null?fc:t}function Up(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||!(us&268435455)&&!(Xc&268435455)||Qr(vt,xt)}function yc(t,e){var n=Se;Se|=2;var r=Vw();(vt!==t||xt!==e)&&(pr=null,rs(t,e));do try{yA();break}catch(i){Ow(t,i)}while(!0);if(Tp(),Se=n,pc.current=r,st!==null)throw Error(W(261));return vt=null,xt=0,ht}function yA(){for(;st!==null;)Lw(st)}function vA(){for(;st!==null&&!$S();)Lw(st)}function Lw(t){var e=Fw(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?Mw(t):st=e,Vp.current=null}function Mw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dA(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,st=null;return}}else if(n=cA(n,e,an),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ht===0&&(ht=5)}function Gi(t,e,n){var r=Ne,i=En.transition;try{En.transition=null,Ne=1,_A(t,e,n,r)}finally{En.transition=i,Ne=r}return null}function _A(t,e,n,r){do oo();while(ti!==null);if(Se&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZS(t,s),t===vt&&(st=vt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,Uw(Ju,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=En.transition,En.transition=null;var o=Ne;Ne=1;var l=Se;Se|=4,Vp.current=null,fA(t,n),Nw(n,t),F1(Yh),ec=!!Qh,Yh=Qh=null,t.current=n,pA(n),HS(),Se=l,Ne=o,En.transition=s}else t.current=n;if(gu&&(gu=!1,ti=t,gc=i),s=t.pendingLanes,s===0&&(ui=null),KS(n.stateNode),nn(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mc)throw mc=!1,t=yf,yf=null,t;return gc&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===vf?Va++:(Va=0,vf=t):Va=0,bi(),null}function oo(){if(ti!==null){var t=y0(gc),e=En.transition,n=Ne;try{if(En.transition=null,Ne=16>t?16:t,ti===null)var r=!1;else{if(t=ti,ti=null,gc=0,Se&6)throw Error(W(331));var i=Se;for(Se|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Z=c;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:ba(8,h,s)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var m=h.sibling,T=h.return;if(Rw(h),h===c){Z=null;break}if(m!==null){m.return=T,Z=m;break}Z=T}}}var S=s.alternate;if(S!==null){var R=S.child;if(R!==null){S.child=null;do{var b=R.sibling;R.sibling=null,R=b}while(R!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ba(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,Z=A;break e}Z=s.return}}var w=t.current;for(Z=w;Z!==null;){o=Z;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Z=C;else e:for(o=w;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yc(9,l)}}catch(z){Xe(l,l.return,z)}if(l===o){Z=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,Z=L;break e}Z=l.return}}if(Se=i,bi(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Bc,t)}catch{}r=!0}return r}finally{Ne=n,En.transition=e}}return!1}function Ay(t,e,n){e=vo(n,e),e=yw(t,e,1),t=li(t,e,1),e=$t(),t!==null&&(Tl(t,1,e),nn(t,e))}function Xe(t,e,n){if(t.tag===3)Ay(t,t,n);else for(;e!==null;){if(e.tag===3){Ay(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ui===null||!ui.has(r))){t=vo(n,t),t=vw(e,t,1),e=li(e,t,1),t=$t(),e!==null&&(Tl(e,1,t),nn(e,t));break}}e=e.return}}function wA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(xt&n)===n&&(ht===4||ht===3&&(xt&130023424)===xt&&500>et()-Mp?rs(t,0):Lp|=n),nn(t,e)}function jw(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=$t();t=Ar(t,e),t!==null&&(Tl(t,e,n),nn(t,n))}function EA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jw(t,n)}function TA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),jw(t,n)}var Fw;Fw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,uA(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,He&&e.flags&1048576&&$0(e,ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ou(t,e),t=e.pendingProps;var i=po(e,jt.current);so(e,n),i=kp(null,e,r,t,i,n);var s=Np();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(s=!0,sc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ap(e),i.updater=Qc,e.stateNode=i,i._reactInternals=e,of(e,r,t,n),e=uf(null,e,r,!0,s,n)):(e.tag=0,He&&s&&vp(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SA(r),t=kn(r,t),i){case 0:e=lf(null,e,r,t,n);break e;case 1:e=my(null,e,r,t,n);break e;case 11:e=fy(null,e,r,t,n);break e;case 14:e=py(null,e,r,kn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),lf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),my(t,e,r,i,n);case 3:e:{if(Tw(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Q0(t,e),cc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vo(Error(W(423)),e),e=gy(t,e,r,n,i);break e}else if(r!==i){i=vo(Error(W(424)),e),e=gy(t,e,r,n,i);break e}else for(un=ai(e.stateNode.containerInfo.firstChild),dn=e,He=!0,bn=null,n=K0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mo(),r===i){e=Cr(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return Y0(e),t===null&&nf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xh(r,i)?o=null:s!==null&&Xh(r,s)&&(e.flags|=32),Ew(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&nf(e),null;case 13:return Iw(t,e,n);case 4:return Cp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=go(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),fy(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(lc,r._currentValue),r._currentValue=o,s!==null)if(jn(s.value,o)){if(s.children===i.children&&!en.current){e=Cr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),rf(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=In(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=kn(r,e.pendingProps),i=kn(r.type,i),py(t,e,r,i,n);case 15:return _w(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),Ou(t,e),e.tag=1,tn(r)?(t=!0,sc(e)):t=!1,so(e,n),gw(e,r,i),of(e,r,i,n),uf(null,e,r,!0,t,n);case 19:return Sw(t,e,n);case 22:return ww(t,e,n)}throw Error(W(156,e.tag))};function Uw(t,e){return f0(t,e)}function IA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new IA(t,e,n,r)}function zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SA(t){if(typeof t=="function")return zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===op)return 11;if(t===ap)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return is(n.children,i,s,e);case sp:o=8,i|=8;break;case Ph:return t=wn(12,n,e,i|2),t.elementType=Ph,t.lanes=s,t;case kh:return t=wn(13,n,e,i),t.elementType=kh,t.lanes=s,t;case Nh:return t=wn(19,n,e,i),t.elementType=Nh,t.lanes=s,t;case Y_:return Jc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G_:o=10;break e;case Q_:o=9;break e;case op:o=11;break e;case ap:o=14;break e;case qr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function is(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Jc(t,e,n,r){return t=wn(22,t,r,e),t.elementType=Y_,t.lanes=n,t.stateNode={isHidden:!1},t}function dh(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function hh(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qd(0),this.expirationTimes=qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bp(t,e,n,r,i,s,o,l,u){return t=new AA(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(s),t}function CA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zw(t){if(!t)return _i;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(tn(n))return z0(t,n,e)}return e}function Bw(t,e,n,r,i,s,o,l,u){return t=Bp(n,r,!0,t,i,s,o,l,u),t.context=zw(null),n=t.current,r=$t(),i=ci(n),s=wr(r,i),s.callback=e??null,li(n,s,i),t.current.lanes=i,Tl(t,i,r),nn(t,r),t}function Zc(t,e,n,r){var i=e.current,s=$t(),o=ci(i);return n=zw(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=li(i,e,o),t!==null&&(Mn(t,i,o,s),Nu(t,i,o)),o}function vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $p(t,e){Cy(t,e),(t=t.alternate)&&Cy(t,e)}function xA(){return null}var $w=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hp(t){this._internalRoot=t}ed.prototype.render=Hp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Zc(t,e,null,null)};ed.prototype.unmount=Hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){Zc(null,t,null,null)}),e[Sr]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var e=w0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&T0(t)}};function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function RA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=vc(o);s.call(c)}}var o=Bw(e,r,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[Sr]=o.current,Xa(t.nodeType===8?t.parentNode:t),cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=vc(u);l.call(c)}}var u=Bp(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=u,t[Sr]=u.current,Xa(t.nodeType===8?t.parentNode:t),cs(function(){Zc(e,u,n,r)}),u}function nd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=vc(o);l.call(u)}}Zc(e,o,t,i)}else o=RA(n,e,t,i,r);return vc(o)}v0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=va(e.pendingLanes);n!==0&&(cp(e,n|1),nn(e,et()),!(Se&6)&&(_o=et()+500,bi()))}break;case 13:cs(function(){var r=Ar(t,1);if(r!==null){var i=$t();Mn(r,t,1,i)}}),$p(t,1)}};dp=function(t){if(t.tag===13){var e=Ar(t,134217728);if(e!==null){var n=$t();Mn(e,t,134217728,n)}$p(t,134217728)}};_0=function(t){if(t.tag===13){var e=ci(t),n=Ar(t,e);if(n!==null){var r=$t();Mn(n,t,e,r)}$p(t,e)}};w0=function(){return Ne};E0=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};zh=function(t,e,n){switch(e){case"input":if(Oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qc(r);if(!i)throw Error(W(90));J_(r),Oh(r,i)}}}break;case"textarea":e0(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};a0=jp;l0=cs;var PA={usingClientEntryPoint:!1,Events:[Sl,Ks,qc,s0,o0,jp]},ha={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kA={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d0(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||xA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Bc=yu.inject(kA),Xn=yu}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PA;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(e))throw Error(W(200));return CA(t,e,null,n)};fn.createRoot=function(t,e){if(!Wp(t))throw Error(W(299));var n=!1,r="",i=$w;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bp(t,1,!1,null,null,n,!1,r,i),t[Sr]=e.current,Xa(t.nodeType===8?t.parentNode:t),new Hp(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=d0(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return cs(t)};fn.hydrate=function(t,e,n){if(!td(e))throw Error(W(200));return nd(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Wp(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$w;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bw(e,null,t,1,n??null,i,!1,s,o),t[Sr]=e.current,Xa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ed(e)};fn.render=function(t,e,n){if(!td(e))throw Error(W(200));return nd(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!td(t))throw Error(W(40));return t._reactRootContainer?(cs(function(){nd(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};fn.unstable_batchedUpdates=jp;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!td(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return nd(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function Hw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hw)}catch(t){console.error(t)}}Hw(),H_.exports=fn;var qp=H_.exports;const NA=N_(qp),DA=k_({__proto__:null,default:NA},[qp]);var Ry=qp;xh.createRoot=Ry.createRoot,xh.hydrateRoot=Ry.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$e.apply(this,arguments)}var it;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(it||(it={}));const Py="popstate";function bA(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:u=""}=br(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ol("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof s=="string"?s:ds(s))}function r(i,s){wi(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return VA(e,n,r,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OA(){return Math.random().toString(36).substr(2,8)}function ky(t,e){return{usr:t.state,key:t.key,idx:e}}function ol(t,e,n,r){return n===void 0&&(n=null),$e({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?br(e):e,{state:n,key:e&&e.key||r||OA()})}function ds(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function br(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function VA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=it.Pop,u=null,c=h();c==null&&(c=0,o.replaceState($e({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=it.Pop;let b=h(),A=b==null?null:b-c;c=b,u&&u({action:l,location:R.location,delta:A})}function m(b,A){l=it.Push;let w=ol(R.location,b,A);n&&n(w,b),c=h()+1;let C=ky(w,c),L=R.createHref(w);try{o.pushState(C,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(L)}s&&u&&u({action:l,location:R.location,delta:1})}function T(b,A){l=it.Replace;let w=ol(R.location,b,A);n&&n(w,b),c=h();let C=ky(w,c),L=R.createHref(w);o.replaceState(C,"",L),s&&u&&u({action:l,location:R.location,delta:0})}function S(b){let A=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:ds(b);return w=w.replace(/ $/,"%20"),pe(A,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,A)}let R={get action(){return l},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Py,f),u=b,()=>{i.removeEventListener(Py,f),u=null}},createHref(b){return e(i,b)},createURL:S,encodeLocation(b){let A=S(b);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:T,go(b){return o.go(b)}};return R}var ke;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ke||(ke={}));const LA=new Set(["lazy","caseSensitive","path","id","index","children"]);function MA(t){return t.index===!0}function _c(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),pe(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),MA(i)){let u=$e({},i,e(i),{id:l});return r[l]=u,u}else{let u=$e({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=_c(i.children,e,o,r)),u}})}function Yi(t,e,n){return n===void 0&&(n="/"),ju(t,e,n,!1)}function ju(t,e,n,r){let i=typeof e=="string"?br(e):e,s=xr(i.pathname||"/",n);if(s==null)return null;let o=Ww(t);FA(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=YA(s);l=GA(o[u],c,r)}return l}function jA(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Ww(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Er([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Ww(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:qA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of qw(s.path))i(s,o,u)}),e}function qw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=qw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function FA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UA=/^:[\w-]+$/,zA=3,BA=2,$A=1,HA=10,WA=-2,Ny=t=>t==="*";function qA(t,e){let n=t.split("/"),r=n.length;return n.some(Ny)&&(r+=WA),e&&(r+=BA),n.filter(i=>!Ny(i)).reduce((i,s)=>i+(UA.test(s)?zA:s===""?$A:HA),r)}function KA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function GA(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Er([s,f.pathname]),pathnameBase:eC(Er([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Er([s,f.pathnameBase]))}return o}function wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=QA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:T}=h;if(m==="*"){let R=l[f]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const S=l[f];return T&&!S?c[m]=void 0:c[m]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function QA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const XA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JA=t=>XA.test(t);function ZA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?br(t):t,s;if(n)if(JA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),wi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Dy(n.substring(1),"/"):s=Dy(n,e)}else s=e;return{pathname:s,search:tC(r),hash:nC(i)}}function Dy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rd(t,e){let n=Kw(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function id(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=br(t):(i=$e({},t),pe(!i.pathname||!i.pathname.includes("?"),fh("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),fh("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),fh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let u=ZA(i,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),eC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ec{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function al(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gw=["post","put","patch","delete"],rC=new Set(Gw),iC=["get",...Gw],sC=new Set(iC),oC=new Set([301,302,303,307,308]),aC=new Set([307,308]),ph={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uC=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Qw="remix-router-transitions";function cC(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let k=t.detectErrorBoundary;i=D=>({hasErrorBoundary:k(D)})}else i=uC;let s={},o=_c(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||pC,h=t.patchRoutesOnNavigation,f=$e({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,T=new Set,S=null,R=null,b=null,A=t.hydrationData!=null,w=Yi(o,t.history.location,u),C=!1,L=null;if(w==null&&!h){let k=Gt(404,{pathname:t.history.location.pathname}),{matches:D,route:M}=$y(o);w=D,L={[M.id]:k}}w&&!t.hydrationData&&$i(w,o,t.history.location.pathname).active&&(w=null);let z;if(w)if(w.some(k=>k.route.lazy))z=!1;else if(!w.some(k=>k.route.loader))z=!0;else if(f.v7_partialHydration){let k=t.hydrationData?t.hydrationData.loaderData:null,D=t.hydrationData?t.hydrationData.errors:null;if(D){let M=w.findIndex(H=>D[H.route.id]!==void 0);z=w.slice(0,M+1).every(H=>!Tf(H.route,k,D))}else z=w.every(M=>!Tf(M.route,k,D))}else z=t.hydrationData!=null;else if(z=!1,w=[],f.v7_partialHydration){let k=$i(null,o,t.history.location.pathname);k.active&&k.matches&&(C=!0,w=k.matches)}let F,g={historyAction:t.history.action,location:t.history.location,matches:w,initialized:z,navigation:ph,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||L,fetchers:new Map,blockers:new Map},v=it.Pop,E=!1,I,P=!1,N=new Map,x=null,G=!1,ge=!1,Q=[],Ce=new Set,$=new Map,ie=0,oe=-1,xe=new Map,ye=new Set,De=new Map,Ut=new Map,Je=new Set,wt=new Map,Et=new Map,As;function Nd(){if(m=t.history.listen(k=>{let{action:D,location:M,delta:H}=k;if(As){As(),As=void 0;return}wi(Et.size===0||H!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=Qo({currentLocation:g.location,nextLocation:M,historyAction:D});if(K&&H!=null){let ne=new Promise(ue=>{As=ue});t.history.go(H*-1),Ui(K,{state:"blocked",location:M,proceed(){Ui(K,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),ne.then(()=>t.history.go(H))},reset(){let ue=new Map(g.blockers);ue.set(K,fa),lt({blockers:ue})}});return}return $n(D,M)}),n){RC(e,N);let k=()=>PC(e,N);e.addEventListener("pagehide",k),x=()=>e.removeEventListener("pagehide",k)}return g.initialized||$n(it.Pop,g.location,{initialHydration:!0}),F}function Cs(){m&&m(),x&&x(),T.clear(),I&&I.abort(),g.fetchers.forEach((k,D)=>Ps(D)),g.blockers.forEach((k,D)=>Ns(D))}function xs(k){return T.add(k),()=>T.delete(k)}function lt(k,D){D===void 0&&(D={}),g=$e({},g,k);let M=[],H=[];f.v7_fetcherPersist&&g.fetchers.forEach((K,ne)=>{K.state==="idle"&&(Je.has(ne)?H.push(ne):M.push(ne))}),Je.forEach(K=>{!g.fetchers.has(K)&&!$.has(K)&&H.push(K)}),[...T].forEach(K=>K(g,{deletedFetchers:H,viewTransitionOpts:D.viewTransitionOpts,flushSync:D.flushSync===!0})),f.v7_fetcherPersist?(M.forEach(K=>g.fetchers.delete(K)),H.forEach(K=>Ps(K))):H.forEach(K=>Je.delete(K))}function Bn(k,D,M){var H,K;let{flushSync:ne}=M===void 0?{}:M,ue=g.actionData!=null&&g.navigation.formMethod!=null&&Dn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((H=k.state)==null?void 0:H._isRedirect)!==!0,te;D.actionData?Object.keys(D.actionData).length>0?te=D.actionData:te=null:ue?te=g.actionData:te=null;let ee=D.loaderData?zy(g.loaderData,D.loaderData,D.matches||[],D.errors):g.loaderData,J=g.blockers;J.size>0&&(J=new Map(J),J.forEach((fe,nt)=>J.set(nt,fa)));let re=E===!0||g.navigation.formMethod!=null&&Dn(g.navigation.formMethod)&&((K=k.state)==null?void 0:K._isRedirect)!==!0;l&&(o=l,l=void 0),G||v===it.Pop||(v===it.Push?t.history.push(k,k.state):v===it.Replace&&t.history.replace(k,k.state));let ce;if(v===it.Pop){let fe=N.get(g.location.pathname);fe&&fe.has(k.pathname)?ce={currentLocation:g.location,nextLocation:k}:N.has(k.pathname)&&(ce={currentLocation:k,nextLocation:g.location})}else if(P){let fe=N.get(g.location.pathname);fe?fe.add(k.pathname):(fe=new Set([k.pathname]),N.set(g.location.pathname,fe)),ce={currentLocation:g.location,nextLocation:k}}lt($e({},D,{actionData:te,loaderData:ee,historyAction:v,location:k,initialized:!0,navigation:ph,revalidation:"idle",restoreScrollPosition:Bi(k,D.matches||g.matches),preventScrollReset:re,blockers:J}),{viewTransitionOpts:ce,flushSync:ne===!0}),v=it.Pop,E=!1,P=!1,G=!1,ge=!1,Q=[]}async function Rs(k,D){if(typeof k=="number"){t.history.go(k);return}let M=Ef(g.location,g.matches,u,f.v7_prependBasename,k,f.v7_relativeSplatPath,D==null?void 0:D.fromRouteId,D==null?void 0:D.relative),{path:H,submission:K,error:ne}=by(f.v7_normalizeFormMethod,!1,M,D),ue=g.location,te=ol(g.location,H,D&&D.state);te=$e({},te,t.history.encodeLocation(te));let ee=D&&D.replace!=null?D.replace:void 0,J=it.Push;ee===!0?J=it.Replace:ee===!1||K!=null&&Dn(K.formMethod)&&K.formAction===g.location.pathname+g.location.search&&(J=it.Replace);let re=D&&"preventScrollReset"in D?D.preventScrollReset===!0:void 0,ce=(D&&D.flushSync)===!0,fe=Qo({currentLocation:ue,nextLocation:te,historyAction:J});if(fe){Ui(fe,{state:"blocked",location:te,proceed(){Ui(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:te}),Rs(k,D)},reset(){let nt=new Map(g.blockers);nt.set(fe,fa),lt({blockers:nt})}});return}return await $n(J,te,{submission:K,pendingError:ne,preventScrollReset:re,replace:D&&D.replace,enableViewTransition:D&&D.viewTransition,flushSync:ce})}function $o(){if(ct(),lt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){$n(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}$n(v||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation,enableViewTransition:P===!0})}}async function $n(k,D,M){I&&I.abort(),I=null,v=k,G=(M&&M.startUninterruptedRevalidation)===!0,zl(g.location,g.matches),E=(M&&M.preventScrollReset)===!0,P=(M&&M.enableViewTransition)===!0;let H=l||o,K=M&&M.overrideNavigation,ne=M!=null&&M.initialHydration&&g.matches&&g.matches.length>0&&!C?g.matches:Yi(H,D,u),ue=(M&&M.flushSync)===!0;if(ne&&g.initialized&&!ge&&wC(g.location,D)&&!(M&&M.submission&&Dn(M.submission.formMethod))){Bn(D,{matches:ne},{flushSync:ue});return}let te=$i(ne,H,D.pathname);if(te.active&&te.matches&&(ne=te.matches),!ne){let{error:Pe,notFoundMatches:Ee,route:Oe}=lr(D.pathname);Bn(D,{matches:Ee,loaderData:{},errors:{[Oe.id]:Pe}},{flushSync:ue});return}I=new AbortController;let ee=Ms(t.history,D,I.signal,M&&M.submission),J;if(M&&M.pendingError)J=[Xi(ne).route.id,{type:ke.error,error:M.pendingError}];else if(M&&M.submission&&Dn(M.submission.formMethod)){let Pe=await Dd(ee,D,M.submission,ne,te.active,{replace:M.replace,flushSync:ue});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[Ee,Oe]=Pe.pendingActionResult;if(ln(Oe)&&al(Oe.error)&&Oe.error.status===404){I=null,Bn(D,{matches:Pe.matches,loaderData:{},errors:{[Ee]:Oe.error}});return}}ne=Pe.matches||ne,J=Pe.pendingActionResult,K=mh(D,M.submission),ue=!1,te.active=!1,ee=Ms(t.history,ee.url,ee.signal)}let{shortCircuited:re,matches:ce,loaderData:fe,errors:nt}=await bd(ee,D,ne,te.active,K,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,ue,J);re||(I=null,Bn(D,$e({matches:ce||ne},By(J),{loaderData:fe,errors:nt})))}async function Dd(k,D,M,H,K,ne){ne===void 0&&(ne={}),ct();let ue=CC(D,M);if(lt({navigation:ue},{flushSync:ne.flushSync===!0}),K){let J=await Wn(H,D.pathname,k.signal);if(J.type==="aborted")return{shortCircuited:!0};if(J.type==="error"){let re=Xi(J.partialMatches).route.id;return{matches:J.partialMatches,pendingActionResult:[re,{type:ke.error,error:J.error}]}}else if(J.matches)H=J.matches;else{let{notFoundMatches:re,error:ce,route:fe}=lr(D.pathname);return{matches:re,pendingActionResult:[fe.id,{type:ke.error,error:ce}]}}}let te,ee=wa(H,D);if(!ee.route.action&&!ee.route.lazy)te={type:ke.error,error:Gt(405,{method:k.method,pathname:D.pathname,routeId:ee.route.id})};else if(te=(await Mr("action",g,k,[ee],H,null))[ee.route.id],k.signal.aborted)return{shortCircuited:!0};if(ts(te)){let J;return ne&&ne.replace!=null?J=ne.replace:J=jy(te.response.headers.get("Location"),new URL(k.url),u,t.history)===g.location.pathname+g.location.search,await An(k,te,!0,{submission:M,replace:J}),{shortCircuited:!0}}if(ni(te))throw Gt(400,{type:"defer-action"});if(ln(te)){let J=Xi(H,ee.route.id);return(ne&&ne.replace)!==!0&&(v=it.Push),{matches:H,pendingActionResult:[J.route.id,te]}}return{matches:H,pendingActionResult:[ee.route.id,te]}}async function bd(k,D,M,H,K,ne,ue,te,ee,J,re){let ce=K||mh(D,ne),fe=ne||ue||Wy(ce),nt=!G&&(!f.v7_partialHydration||!ee);if(H){if(nt){let Me=Ho(re);lt($e({navigation:ce},Me!==void 0?{actionData:Me}:{}),{flushSync:J})}let Te=await Wn(M,D.pathname,k.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Me=Xi(Te.partialMatches).route.id;return{matches:Te.partialMatches,loaderData:{},errors:{[Me]:Te.error}}}else if(Te.matches)M=Te.matches;else{let{error:Me,notFoundMatches:dr,route:Ur}=lr(D.pathname);return{matches:dr,loaderData:{},errors:{[Ur.id]:Me}}}}let Pe=l||o,[Ee,Oe]=Vy(t.history,g,M,fe,D,f.v7_partialHydration&&ee===!0,f.v7_skipActionErrorRevalidation,ge,Q,Ce,Je,De,ye,Pe,u,re);if(zi(Te=>!(M&&M.some(Me=>Me.route.id===Te))||Ee&&Ee.some(Me=>Me.route.id===Te)),oe=++ie,Ee.length===0&&Oe.length===0){let Te=ks();return Bn(D,$e({matches:M,loaderData:{},errors:re&&ln(re[1])?{[re[0]]:re[1].error}:null},By(re),Te?{fetchers:new Map(g.fetchers)}:{}),{flushSync:J}),{shortCircuited:!0}}if(nt){let Te={};if(!H){Te.navigation=ce;let Me=Ho(re);Me!==void 0&&(Te.actionData=Me)}Oe.length>0&&(Te.fetchers=Wo(Oe)),lt(Te,{flushSync:J})}Oe.forEach(Te=>{Cn(Te.key),Te.controller&&$.set(Te.key,Te.controller)});let ur=()=>Oe.forEach(Te=>Cn(Te.key));I&&I.signal.addEventListener("abort",ur);let{loaderResults:jr,fetcherResults:xn}=await ut(g,M,Ee,Oe,k);if(k.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",ur),Oe.forEach(Te=>$.delete(Te.key));let zt=vu(jr);if(zt)return await An(k,zt.result,!0,{replace:te}),{shortCircuited:!0};if(zt=vu(xn),zt)return ye.add(zt.key),await An(k,zt.result,!0,{replace:te}),{shortCircuited:!0};let{loaderData:Ds,errors:cr}=Uy(g,M,jr,re,Oe,xn,wt);wt.forEach((Te,Me)=>{Te.subscribe(dr=>{(dr||Te.done)&&wt.delete(Me)})}),f.v7_partialHydration&&ee&&g.errors&&(cr=$e({},g.errors,cr));let sn=ks(),gn=Ul(oe),Fr=sn||gn||Oe.length>0;return $e({matches:M,loaderData:Ds,errors:cr},Fr?{fetchers:new Map(g.fetchers)}:{})}function Ho(k){if(k&&!ln(k[1]))return{[k[0]]:k[1].data};if(g.actionData)return Object.keys(g.actionData).length===0?null:g.actionData}function Wo(k){return k.forEach(D=>{let M=g.fetchers.get(D.key),H=pa(void 0,M?M.data:void 0);g.fetchers.set(D.key,H)}),new Map(g.fetchers)}function Fl(k,D,M,H){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Cn(k);let K=(H&&H.flushSync)===!0,ne=l||o,ue=Ef(g.location,g.matches,u,f.v7_prependBasename,M,f.v7_relativeSplatPath,D,H==null?void 0:H.relative),te=Yi(ne,ue,u),ee=$i(te,ne,ue);if(ee.active&&ee.matches&&(te=ee.matches),!te){mn(k,D,Gt(404,{pathname:ue}),{flushSync:K});return}let{path:J,submission:re,error:ce}=by(f.v7_normalizeFormMethod,!0,ue,H);if(ce){mn(k,D,ce,{flushSync:K});return}let fe=wa(te,J),nt=(H&&H.preventScrollReset)===!0;if(re&&Dn(re.formMethod)){Od(k,D,J,fe,te,ee.active,K,nt,re);return}De.set(k,{routeId:D,path:J}),qo(k,D,J,fe,te,ee.active,K,nt,re)}async function Od(k,D,M,H,K,ne,ue,te,ee){ct(),De.delete(k);function J(Be){if(!Be.route.action&&!Be.route.lazy){let qn=Gt(405,{method:ee.formMethod,pathname:M,routeId:D});return mn(k,D,qn,{flushSync:ue}),!0}return!1}if(!ne&&J(H))return;let re=g.fetchers.get(k);rn(k,xC(ee,re),{flushSync:ue});let ce=new AbortController,fe=Ms(t.history,M,ce.signal,ee);if(ne){let Be=await Wn(K,new URL(fe.url).pathname,fe.signal,k);if(Be.type==="aborted")return;if(Be.type==="error"){mn(k,D,Be.error,{flushSync:ue});return}else if(Be.matches){if(K=Be.matches,H=wa(K,M),J(H))return}else{mn(k,D,Gt(404,{pathname:M}),{flushSync:ue});return}}$.set(k,ce);let nt=ie,Ee=(await Mr("action",g,fe,[H],K,k))[H.route.id];if(fe.signal.aborted){$.get(k)===ce&&$.delete(k);return}if(f.v7_fetcherPersist&&Je.has(k)){if(ts(Ee)||ln(Ee)){rn(k,Wr(void 0));return}}else{if(ts(Ee))if($.delete(k),oe>nt){rn(k,Wr(void 0));return}else return ye.add(k),rn(k,pa(ee)),An(fe,Ee,!1,{fetcherSubmission:ee,preventScrollReset:te});if(ln(Ee)){mn(k,D,Ee.error);return}}if(ni(Ee))throw Gt(400,{type:"defer-action"});let Oe=g.navigation.location||g.location,ur=Ms(t.history,Oe,ce.signal),jr=l||o,xn=g.navigation.state!=="idle"?Yi(jr,g.navigation.location,u):g.matches;pe(xn,"Didn't find any matches after fetcher action");let zt=++ie;xe.set(k,zt);let Ds=pa(ee,Ee.data);g.fetchers.set(k,Ds);let[cr,sn]=Vy(t.history,g,xn,ee,Oe,!1,f.v7_skipActionErrorRevalidation,ge,Q,Ce,Je,De,ye,jr,u,[H.route.id,Ee]);sn.filter(Be=>Be.key!==k).forEach(Be=>{let qn=Be.key,Xo=g.fetchers.get(qn),$l=pa(void 0,Xo?Xo.data:void 0);g.fetchers.set(qn,$l),Cn(qn),Be.controller&&$.set(qn,Be.controller)}),lt({fetchers:new Map(g.fetchers)});let gn=()=>sn.forEach(Be=>Cn(Be.key));ce.signal.addEventListener("abort",gn);let{loaderResults:Fr,fetcherResults:Te}=await ut(g,xn,cr,sn,ur);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",gn),xe.delete(k),$.delete(k),sn.forEach(Be=>$.delete(Be.key));let Me=vu(Fr);if(Me)return An(ur,Me.result,!1,{preventScrollReset:te});if(Me=vu(Te),Me)return ye.add(Me.key),An(ur,Me.result,!1,{preventScrollReset:te});let{loaderData:dr,errors:Ur}=Uy(g,xn,Fr,void 0,sn,Te,wt);if(g.fetchers.has(k)){let Be=Wr(Ee.data);g.fetchers.set(k,Be)}Ul(zt),g.navigation.state==="loading"&&zt>oe?(pe(v,"Expected pending action"),I&&I.abort(),Bn(g.navigation.location,{matches:xn,loaderData:dr,errors:Ur,fetchers:new Map(g.fetchers)})):(lt({errors:Ur,loaderData:zy(g.loaderData,dr,xn,Ur),fetchers:new Map(g.fetchers)}),ge=!1)}async function qo(k,D,M,H,K,ne,ue,te,ee){let J=g.fetchers.get(k);rn(k,pa(ee,J?J.data:void 0),{flushSync:ue});let re=new AbortController,ce=Ms(t.history,M,re.signal);if(ne){let Ee=await Wn(K,new URL(ce.url).pathname,ce.signal,k);if(Ee.type==="aborted")return;if(Ee.type==="error"){mn(k,D,Ee.error,{flushSync:ue});return}else if(Ee.matches)K=Ee.matches,H=wa(K,M);else{mn(k,D,Gt(404,{pathname:M}),{flushSync:ue});return}}$.set(k,re);let fe=ie,Pe=(await Mr("loader",g,ce,[H],K,k))[H.route.id];if(ni(Pe)&&(Pe=await Gp(Pe,ce.signal,!0)||Pe),$.get(k)===re&&$.delete(k),!ce.signal.aborted){if(Je.has(k)){rn(k,Wr(void 0));return}if(ts(Pe))if(oe>fe){rn(k,Wr(void 0));return}else{ye.add(k),await An(ce,Pe,!1,{preventScrollReset:te});return}if(ln(Pe)){mn(k,D,Pe.error);return}pe(!ni(Pe),"Unhandled fetcher deferred data"),rn(k,Wr(Pe.data))}}async function An(k,D,M,H){let{submission:K,fetcherSubmission:ne,preventScrollReset:ue,replace:te}=H===void 0?{}:H;D.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let ee=D.response.headers.get("Location");pe(ee,"Expected a Location header on the redirect Response"),ee=jy(ee,new URL(k.url),u,t.history);let J=ol(g.location,ee,{_isRedirect:!0});if(n){let Ee=!1;if(D.response.headers.has("X-Remix-Reload-Document"))Ee=!0;else if(Kp.test(ee)){const Oe=t.history.createURL(ee);Ee=Oe.origin!==e.location.origin||xr(Oe.pathname,u)==null}if(Ee){te?e.location.replace(ee):e.location.assign(ee);return}}I=null;let re=te===!0||D.response.headers.has("X-Remix-Replace")?it.Replace:it.Push,{formMethod:ce,formAction:fe,formEncType:nt}=g.navigation;!K&&!ne&&ce&&fe&&nt&&(K=Wy(g.navigation));let Pe=K||ne;if(aC.has(D.response.status)&&Pe&&Dn(Pe.formMethod))await $n(re,J,{submission:$e({},Pe,{formAction:ee}),preventScrollReset:ue||E,enableViewTransition:M?P:void 0});else{let Ee=mh(J,K);await $n(re,J,{overrideNavigation:Ee,fetcherSubmission:ne,preventScrollReset:ue||E,enableViewTransition:M?P:void 0})}}async function Mr(k,D,M,H,K,ne){let ue,te={};try{ue=await mC(c,k,D,M,H,K,ne,s,i)}catch(ee){return H.forEach(J=>{te[J.route.id]={type:ke.error,error:ee}}),te}for(let[ee,J]of Object.entries(ue))if(EC(J)){let re=J.result;te[ee]={type:ke.redirect,response:vC(re,M,ee,K,u,f.v7_relativeSplatPath)}}else te[ee]=await yC(J);return te}async function ut(k,D,M,H,K){let ne=k.matches,ue=Mr("loader",k,K,M,D,null),te=Promise.all(H.map(async re=>{if(re.matches&&re.match&&re.controller){let fe=(await Mr("loader",k,Ms(t.history,re.path,re.controller.signal),[re.match],re.matches,re.key))[re.match.route.id];return{[re.key]:fe}}else return Promise.resolve({[re.key]:{type:ke.error,error:Gt(404,{pathname:re.path})}})})),ee=await ue,J=(await te).reduce((re,ce)=>Object.assign(re,ce),{});return await Promise.all([SC(D,ee,K.signal,ne,k.loaderData),AC(D,J,H)]),{loaderResults:ee,fetcherResults:J}}function ct(){ge=!0,Q.push(...zi()),De.forEach((k,D)=>{$.has(D)&&Ce.add(D),Cn(D)})}function rn(k,D,M){M===void 0&&(M={}),g.fetchers.set(k,D),lt({fetchers:new Map(g.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function mn(k,D,M,H){H===void 0&&(H={});let K=Xi(g.matches,D);Ps(k),lt({errors:{[K.route.id]:M},fetchers:new Map(g.fetchers)},{flushSync:(H&&H.flushSync)===!0})}function Ko(k){return Ut.set(k,(Ut.get(k)||0)+1),Je.has(k)&&Je.delete(k),g.fetchers.get(k)||lC}function Ps(k){let D=g.fetchers.get(k);$.has(k)&&!(D&&D.state==="loading"&&xe.has(k))&&Cn(k),De.delete(k),xe.delete(k),ye.delete(k),f.v7_fetcherPersist&&Je.delete(k),Ce.delete(k),g.fetchers.delete(k)}function Fi(k){let D=(Ut.get(k)||0)-1;D<=0?(Ut.delete(k),Je.add(k),f.v7_fetcherPersist||Ps(k)):Ut.set(k,D),lt({fetchers:new Map(g.fetchers)})}function Cn(k){let D=$.get(k);D&&(D.abort(),$.delete(k))}function Go(k){for(let D of k){let M=Ko(D),H=Wr(M.data);g.fetchers.set(D,H)}}function ks(){let k=[],D=!1;for(let M of ye){let H=g.fetchers.get(M);pe(H,"Expected fetcher: "+M),H.state==="loading"&&(ye.delete(M),k.push(M),D=!0)}return Go(k),D}function Ul(k){let D=[];for(let[M,H]of xe)if(H<k){let K=g.fetchers.get(M);pe(K,"Expected fetcher: "+M),K.state==="loading"&&(Cn(M),xe.delete(M),D.push(M))}return Go(D),D.length>0}function Vd(k,D){let M=g.blockers.get(k)||fa;return Et.get(k)!==D&&Et.set(k,D),M}function Ns(k){g.blockers.delete(k),Et.delete(k)}function Ui(k,D){let M=g.blockers.get(k)||fa;pe(M.state==="unblocked"&&D.state==="blocked"||M.state==="blocked"&&D.state==="blocked"||M.state==="blocked"&&D.state==="proceeding"||M.state==="blocked"&&D.state==="unblocked"||M.state==="proceeding"&&D.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+D.state);let H=new Map(g.blockers);H.set(k,D),lt({blockers:H})}function Qo(k){let{currentLocation:D,nextLocation:M,historyAction:H}=k;if(Et.size===0)return;Et.size>1&&wi(!1,"A router only supports one blocker at a time");let K=Array.from(Et.entries()),[ne,ue]=K[K.length-1],te=g.blockers.get(ne);if(!(te&&te.state==="proceeding")&&ue({currentLocation:D,nextLocation:M,historyAction:H}))return ne}function lr(k){let D=Gt(404,{pathname:k}),M=l||o,{matches:H,route:K}=$y(M);return zi(),{notFoundMatches:H,route:K,error:D}}function zi(k){let D=[];return wt.forEach((M,H)=>{(!k||k(H))&&(M.cancel(),D.push(H),wt.delete(H))}),D}function Yo(k,D,M){if(S=k,b=D,R=M||null,!A&&g.navigation===ph){A=!0;let H=Bi(g.location,g.matches);H!=null&&lt({restoreScrollPosition:H})}return()=>{S=null,b=null,R=null}}function Hn(k,D){return R&&R(k,D.map(H=>jA(H,g.loaderData)))||k.key}function zl(k,D){if(S&&b){let M=Hn(k,D);S[M]=b()}}function Bi(k,D){if(S){let M=Hn(k,D),H=S[M];if(typeof H=="number")return H}return null}function $i(k,D,M){if(h)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:ju(D,M,u,!0)}}else return{active:!0,matches:ju(D,M,u,!0)||[]};return{active:!1,matches:null}}async function Wn(k,D,M,H){if(!h)return{type:"success",matches:k};let K=k;for(;;){let ne=l==null,ue=l||o,te=s;try{await h({signal:M,path:D,matches:K,fetcherKey:H,patch:(re,ce)=>{M.aborted||My(re,ce,ue,te,i)}})}catch(re){return{type:"error",error:re,partialMatches:K}}finally{ne&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let ee=Yi(ue,D,u);if(ee)return{type:"success",matches:ee};let J=ju(ue,D,u,!0);if(!J||K.length===J.length&&K.every((re,ce)=>re.route.id===J[ce].route.id))return{type:"success",matches:null};K=J}}function Bl(k){s={},l=_c(k,i,void 0,s)}function Tt(k,D){let M=l==null;My(k,D,l||o,s,i),M&&(o=[...o],lt({}))}return F={get basename(){return u},get future(){return f},get state(){return g},get routes(){return o},get window(){return e},initialize:Nd,subscribe:xs,enableScrollRestoration:Yo,navigate:Rs,fetch:Fl,revalidate:$o,createHref:k=>t.history.createHref(k),encodeLocation:k=>t.history.encodeLocation(k),getFetcher:Ko,deleteFetcher:Fi,dispose:Cs,getBlocker:Vd,deleteBlocker:Ns,patchRoutes:Tt,_internalFetchControllers:$,_internalActiveDeferreds:wt,_internalSetRoutes:Bl},F}function dC(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Ef(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let f of e)if(u.push(f),f.route.id===o){c=f;break}}else u=e,c=e[e.length-1];let h=id(i||".",rd(u,s),xr(t.pathname,n)||t.pathname,l==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c){let f=Qp(h.search);if(c.route.index&&!f)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&f){let m=new URLSearchParams(h.search),T=m.getAll("index");m.delete("index"),T.filter(R=>R).forEach(R=>m.append("index",R));let S=m.toString();h.search=S?"?"+S:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Er([n,h.pathname])),ds(h)}function by(t,e,n,r){if(!r||!dC(r))return{path:n};if(r.formMethod&&!IC(r.formMethod))return{path:n,error:Gt(405,{method:r.formMethod})};let i=()=>({path:n,error:Gt(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=Jw(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Dn(o))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,S)=>{let[R,b]=S;return""+T+R+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!Dn(o))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}pe(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=If(r.formData),c=r.formData;else if(r.body instanceof FormData)u=If(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Fy(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Fy(u)}catch{return i()}let h={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Dn(h.formMethod))return{path:n,submission:h};let f=br(n);return e&&f.search&&Qp(f.search)&&u.append("index",""),f.search="?"+u,{path:ds(f),submission:h}}function Oy(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Vy(t,e,n,r,i,s,o,l,u,c,h,f,m,T,S,R){let b=R?ln(R[1])?R[1].error:R[1].data:void 0,A=t.createURL(e.location),w=t.createURL(i),C=n;s&&e.errors?C=Oy(n,Object.keys(e.errors)[0],!0):R&&ln(R[1])&&(C=Oy(n,R[0]));let L=R?R[1].statusCode:void 0,z=o&&L&&L>=400,F=C.filter((v,E)=>{let{route:I}=v;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return Tf(I,e.loaderData,e.errors);if(hC(e.loaderData,e.matches[E],v)||u.some(x=>x===v.route.id))return!0;let P=e.matches[E],N=v;return Ly(v,$e({currentUrl:A,currentParams:P.params,nextUrl:w,nextParams:N.params},r,{actionResult:b,actionStatus:L,defaultShouldRevalidate:z?!1:l||A.pathname+A.search===w.pathname+w.search||A.search!==w.search||Yw(P,N)}))}),g=[];return f.forEach((v,E)=>{if(s||!n.some(G=>G.route.id===v.routeId)||h.has(E))return;let I=Yi(T,v.path,S);if(!I){g.push({key:E,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(E),N=wa(I,v.path),x=!1;m.has(E)?x=!1:c.has(E)?(c.delete(E),x=!0):P&&P.state!=="idle"&&P.data===void 0?x=l:x=Ly(N,$e({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:L,defaultShouldRevalidate:z?!1:l})),x&&g.push({key:E,routeId:v.routeId,path:v.path,matches:I,match:N,controller:new AbortController})}),[F,g]}function Tf(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function hC(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Yw(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Ly(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function My(t,e,n,r,i){var s;let o;if(t){let c=r[t];pe(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(h=>Xw(c,h))),u=_c(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function Xw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>Xw(n,s))}):!1}async function fC(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];pe(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";wi(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!LA.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,$e({},e(i),{lazy:void 0}))}async function pC(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function mC(t,e,n,r,i,s,o,l,u,c){let h=s.map(T=>T.route.lazy?fC(T.route,u,l):void 0),f=s.map((T,S)=>{let R=h[S],b=i.some(w=>w.route.id===T.route.id);return $e({},T,{shouldLoad:b,resolve:async w=>(w&&r.method==="GET"&&(T.route.lazy||T.route.loader)&&(b=!0),b?gC(e,r,T,R,w,c):Promise.resolve({type:ke.data,result:void 0}))})}),m=await t({matches:f,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return m}async function gC(t,e,n,r,i,s){let o,l,u=c=>{let h,f=new Promise((S,R)=>h=R);l=()=>h(),e.signal.addEventListener("abort",l);let m=S=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...S!==void 0?[S]:[]),T=(async()=>{try{return{type:"data",result:await(i?i(R=>m(R)):m())}}catch(S){return{type:"error",result:S}}})();return Promise.race([T,f])};try{let c=n.route[t];if(r)if(c){let h,[f]=await Promise.all([u(c).catch(m=>{h=m}),r]);if(h!==void 0)throw h;o=f}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let h=new URL(e.url),f=h.pathname+h.search;throw Gt(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:ke.data,result:void 0};else if(c)o=await u(c);else{let h=new URL(e.url),f=h.pathname+h.search;throw Gt(404,{pathname:f})}pe(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ke.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function yC(t){let{result:e,type:n}=t;if(Zw(e)){let f;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(m){return{type:ke.error,error:m}}return n===ke.error?{type:ke.error,error:new Ec(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:ke.data,data:f,statusCode:e.status,headers:e.headers}}if(n===ke.error){if(Hy(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:ke.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:new Ec(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:al(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:e,statusCode:al(e)?e.status:void 0}}if(TC(e)){var l,u;return{type:ke.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(Hy(e)){var c,h;return{type:ke.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:ke.data,data:e}}function vC(t,e,n,r,i,s){let o=t.headers.get("Location");if(pe(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=Ef(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function jy(t,e,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Kp.test(t)){let s=t,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s);if(i.includes(o.protocol))throw new Error("Invalid redirect location");let l=xr(o.pathname,n)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}try{let s=r.createURL(t);if(i.includes(s.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Ms(t,e,n,r){let i=t.createURL(Jw(e)).toString(),s={signal:n};if(r&&Dn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=If(r.formData):s.body=r.formData}return new Request(i,s)}function If(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Fy(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function _C(t,e,n,r,i){let s={},o=null,l,u=!1,c={},h=n&&ln(n[1])?n[1].error:void 0;return t.forEach(f=>{if(!(f.route.id in e))return;let m=f.route.id,T=e[m];if(pe(!ts(T),"Cannot handle redirect results in processLoaderData"),ln(T)){let S=T.error;h!==void 0&&(S=h,h=void 0),o=o||{};{let R=Xi(t,m);o[R.route.id]==null&&(o[R.route.id]=S)}s[m]=void 0,u||(u=!0,l=al(T.error)?T.error.status:500),T.headers&&(c[m]=T.headers)}else ni(T)?(r.set(m,T.deferredData),s[m]=T.deferredData.data,T.statusCode!=null&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(c[m]=T.headers)):(s[m]=T.data,T.statusCode&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(c[m]=T.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function Uy(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=_C(e,n,r,o);return i.forEach(c=>{let{key:h,match:f,controller:m}=c,T=s[h];if(pe(T,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(ln(T)){let S=Xi(t.matches,f==null?void 0:f.route.id);u&&u[S.route.id]||(u=$e({},u,{[S.route.id]:T.error})),t.fetchers.delete(h)}else if(ts(T))pe(!1,"Unhandled fetcher revalidation redirect");else if(ni(T))pe(!1,"Unhandled fetcher deferred data");else{let S=Wr(T.data);t.fetchers.set(h,S)}}),{loaderData:l,errors:u}}function zy(t,e,n,r){let i=$e({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function By(t){return t?ln(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Xi(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function $y(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Gt(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new Ec(t||500,l,new Error(u),!0)}function vu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ts(i))return{key:r,result:i}}}function Jw(t){let e=typeof t=="string"?br(t):t;return ds($e({},e,{hash:""}))}function wC(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function EC(t){return Zw(t.result)&&oC.has(t.result.status)}function ni(t){return t.type===ke.deferred}function ln(t){return t.type===ke.error}function ts(t){return(t&&t.type)===ke.redirect}function Hy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function TC(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Zw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function IC(t){return sC.has(t.toLowerCase())}function Dn(t){return rC.has(t.toLowerCase())}async function SC(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(m=>(m==null?void 0:m.route.id)===l);if(!c)continue;let h=r.find(m=>m.route.id===c.route.id),f=h!=null&&!Yw(h,c)&&(i&&i[c.route.id])!==void 0;ni(u)&&f&&await Gp(u,n,!1).then(m=>{m&&(e[l]=m)})}}async function AC(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&ni(l)&&(pe(o,"Expected an AbortController for revalidating fetcher deferred result"),await Gp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function Gp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ke.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ke.error,error:i}}return{type:ke.data,data:t.deferredData.data}}}function Qp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function wa(t,e){let n=typeof e=="string"?br(e).search:e.search;if(t[t.length-1].route.index&&Qp(n||""))return t[t.length-1];let r=Kw(t);return r[r.length-1]}function Wy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function mh(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function CC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function pa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function xC(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Wr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function RC(t,e){try{let n=t.sessionStorage.getItem(Qw);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function PC(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Qw,JSON.stringify(n))}catch(r){wi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}const Cl=O.createContext(null),Yp=O.createContext(null),Or=O.createContext(null),Xp=O.createContext(null),or=O.createContext({outlet:null,matches:[],isDataRoute:!1}),eE=O.createContext(null);function kC(t,e){let{relative:n}=e===void 0?{}:e;Do()||pe(!1);let{basename:r,navigator:i}=O.useContext(Or),{hash:s,pathname:o,search:l}=sd(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Er([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Do(){return O.useContext(Xp)!=null}function Oi(){return Do()||pe(!1),O.useContext(Xp).location}function tE(t){O.useContext(Or).static||O.useLayoutEffect(t)}function _s(){let{isDataRoute:t}=O.useContext(or);return t?WC():NC()}function NC(){Do()||pe(!1);let t=O.useContext(Cl),{basename:e,future:n,navigator:r}=O.useContext(Or),{matches:i}=O.useContext(or),{pathname:s}=Oi(),o=JSON.stringify(rd(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return tE(()=>{l.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let f=id(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Er([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const DC=O.createContext(null);function bC(t){let e=O.useContext(or).outlet;return e&&O.createElement(DC.Provider,{value:t},e)}function OC(){let{matches:t}=O.useContext(or),e=t[t.length-1];return e?e.params:{}}function sd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Or),{matches:i}=O.useContext(or),{pathname:s}=Oi(),o=JSON.stringify(rd(i,r.v7_relativeSplatPath));return O.useMemo(()=>id(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function VC(t,e,n,r){Do()||pe(!1);let{navigator:i}=O.useContext(Or),{matches:s}=O.useContext(or),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Oi(),h;h=c;let f=h.pathname||"/",m=f;if(u!=="/"){let R=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=Yi(t,{pathname:m});return UC(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Er([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Er([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r)}function LC(){let t=HC(),e=al(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const MC=O.createElement(LC,null);class jC extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(or.Provider,{value:this.props.routeContext},O.createElement(eE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FC(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Cl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(or.Provider,{value:e},r)}function UC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:T}=n,S=f.route.loader&&m[f.route.id]===void 0&&(!T||T[f.route.id]===void 0);if(f.route.lazy||S){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let T,S=!1,R=null,b=null;n&&(T=l&&f.route.id?l[f.route.id]:void 0,R=f.route.errorElement||MC,u&&(c<0&&m===0?(qC("route-fallback"),S=!0,b=null):c===m&&(S=!0,b=f.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,m+1)),w=()=>{let C;return T?C=R:S?C=b:f.route.Component?C=O.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,O.createElement(FC,{match:f,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?O.createElement(jC,{location:n.location,revalidation:n.revalidation,component:R,error:T,children:w(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):w()},null)}var nE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nE||{}),rE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rE||{});function zC(t){let e=O.useContext(Cl);return e||pe(!1),e}function BC(t){let e=O.useContext(Yp);return e||pe(!1),e}function $C(t){let e=O.useContext(or);return e||pe(!1),e}function iE(t){let e=$C(),n=e.matches[e.matches.length-1];return n.route.id||pe(!1),n.route.id}function HC(){var t;let e=O.useContext(eE),n=BC(rE.UseRouteError),r=iE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WC(){let{router:t}=zC(nE.UseNavigateStable),e=iE(),n=O.useRef(!1);return tE(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Tc({fromRouteId:e},s)))},[t,e])}const qy={};function qC(t,e,n){qy[t]||(qy[t]=!0)}function KC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ll(t){let{to:e,replace:n,state:r,relative:i}=t;Do()||pe(!1);let{future:s,static:o}=O.useContext(Or),{matches:l}=O.useContext(or),{pathname:u}=Oi(),c=_s(),h=id(e,rd(l,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function GC(t){return bC(t.context)}function QC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=it.Pop,navigator:s,static:o=!1,future:l}=t;Do()&&pe(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:s,static:o,future:Tc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=br(r));let{pathname:h="/",search:f="",hash:m="",state:T=null,key:S="default"}=r,R=O.useMemo(()=>{let b=xr(h,u);return b==null?null:{location:{pathname:b,search:f,hash:m,state:T,key:S},navigationType:i}},[u,h,f,m,T,S,i]);return R==null?null:O.createElement(Or.Provider,{value:c},O.createElement(Xp.Provider,{children:n,value:R}))}new Promise(()=>{});function YC(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wo.apply(this,arguments)}function sE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JC(t,e){return t.button===0&&(!e||e==="_self")&&!XC(t)}const ZC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ex=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tx="6";try{window.__reactRouterVersion=tx}catch{}function nx(t,e){return cC({basename:void 0,future:wo({},void 0,{v7_prependBasename:!0}),history:bA({window:void 0}),hydrationData:rx(),routes:t,mapRouteProperties:YC,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function rx(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=wo({},e,{errors:ix(e.errors)})),e}function ix(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ec(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const oE=O.createContext({isTransitioning:!1}),sx=O.createContext(new Map),ox="startTransition",Ky=wS[ox],ax="flushSync",Gy=DA[ax];function lx(t){Ky?Ky(t):t()}function ma(t){Gy?Gy(t):t()}let ux=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function cx(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=O.useState(n.state),[o,l]=O.useState(),[u,c]=O.useState({isTransitioning:!1}),[h,f]=O.useState(),[m,T]=O.useState(),[S,R]=O.useState(),b=O.useRef(new Map),{v7_startTransition:A}=r||{},w=O.useCallback(v=>{A?lx(v):v()},[A]),C=O.useCallback((v,E)=>{let{deletedFetchers:I,flushSync:P,viewTransitionOpts:N}=E;v.fetchers.forEach((G,ge)=>{G.data!==void 0&&b.current.set(ge,G.data)}),I.forEach(G=>b.current.delete(G));let x=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||x){P?ma(()=>s(v)):w(()=>s(v));return}if(P){ma(()=>{m&&(h&&h.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let G=n.window.document.startViewTransition(()=>{ma(()=>s(v))});G.finished.finally(()=>{ma(()=>{f(void 0),T(void 0),l(void 0),c({isTransitioning:!1})})}),ma(()=>T(G));return}m?(h&&h.resolve(),m.skipTransition(),R({state:v,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,m,h,b,w]);O.useLayoutEffect(()=>n.subscribe(C),[n,C]),O.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new ux)},[u]),O.useEffect(()=>{if(h&&o&&n.window){let v=o,E=h.promise,I=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await E});I.finished.finally(()=>{f(void 0),T(void 0),l(void 0),c({isTransitioning:!1})}),T(I)}},[w,o,h,n.window]),O.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,m,i.location,o]),O.useEffect(()=>{!u.isTransitioning&&S&&(l(S.state),c({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),R(void 0))},[u.isTransitioning,S]),O.useEffect(()=>{},[]);let L=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,E,I)=>n.navigate(v,{state:E,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(v,E,I)=>n.navigate(v,{replace:!0,state:E,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),z=n.basename||"/",F=O.useMemo(()=>({router:n,navigator:L,static:!1,basename:z}),[n,L,z]),g=O.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return O.useEffect(()=>KC(r,n.future),[r,n.future]),O.createElement(O.Fragment,null,O.createElement(Cl.Provider,{value:F},O.createElement(Yp.Provider,{value:i},O.createElement(sx.Provider,{value:b.current},O.createElement(oE.Provider,{value:u},O.createElement(QC,{basename:z,location:i.location,navigationType:i.historyAction,navigator:L,future:g},i.initialized||n.future.v7_partialHydration?O.createElement(dx,{routes:n.routes,future:n.future,state:i}):e))))),null)}const dx=O.memo(hx);function hx(t){let{routes:e,future:n,state:r}=t;return VC(e,void 0,r,n)}const fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mx=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,m=sE(e,ZC),{basename:T}=O.useContext(Or),S,R=!1;if(typeof c=="string"&&px.test(c)&&(S=c,fx))try{let C=new URL(window.location.href),L=c.startsWith("//")?new URL(C.protocol+c):new URL(c),z=xr(L.pathname,T);L.origin===C.origin&&z!=null?c=z+L.search+L.hash:R=!0}catch{}let b=kC(c,{relative:i}),A=vx(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:f});function w(C){r&&r(C),C.defaultPrevented||A(C)}return O.createElement("a",wo({},m,{href:S||b,onClick:R||s?r:w,ref:n,target:u}))}),gx=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:h}=e,f=sE(e,ex),m=sd(u,{relative:f.relative}),T=Oi(),S=O.useContext(Yp),{navigator:R,basename:b}=O.useContext(Or),A=S!=null&&_x(m)&&c===!0,w=R.encodeLocation?R.encodeLocation(m).pathname:m.pathname,C=T.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(C=C.toLowerCase(),L=L?L.toLowerCase():null,w=w.toLowerCase()),L&&b&&(L=xr(L,b)||L);const z=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=C===w||!o&&C.startsWith(w)&&C.charAt(z)==="/",g=L!=null&&(L===w||!o&&L.startsWith(w)&&L.charAt(w.length)==="/"),v={isActive:F,isPending:g,isTransitioning:A},E=F?r:void 0,I;typeof s=="function"?I=s(v):I=[s,F?"active":null,g?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(v):l;return O.createElement(mx,wo({},f,{"aria-current":E,className:I,ref:n,style:P,to:u,viewTransition:c}),typeof h=="function"?h(v):h)});var Sf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Sf||(Sf={}));var Qy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qy||(Qy={}));function yx(t){let e=O.useContext(Cl);return e||pe(!1),e}function vx(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=_s(),c=Oi(),h=sd(t,{relative:o});return O.useCallback(f=>{if(JC(f,n)){f.preventDefault();let m=r!==void 0?r:ds(c)===ds(h);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,r,i,n,t,s,o,l])}function _x(t,e){e===void 0&&(e={});let n=O.useContext(oE);n==null&&pe(!1);let{basename:r}=yx(Sf.useViewTransitionState),i=sd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=xr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=xr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wc(i.pathname,o)!=null||wc(i.pathname,s)!=null}const wx=()=>{};var Yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ex=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,T=c&63;u||(T=64,o||(m=64)),r.push(n[h],n[f],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ex(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||f==null)throw new Tx;const m=s<<2|l>>4;if(r.push(m),c!==64){const T=l<<4&240|c>>2;if(r.push(T),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Tx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ix=function(t){const e=aE(t);return lE.encodeByteArray(e,!0)},Ic=function(t){return Ix(t).replace(/\./g,"")},uE=function(t){try{return lE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=()=>Sx().__FIREBASE_DEFAULTS__,Cx=()=>{if(typeof process>"u"||typeof Yy>"u")return;const t=Yy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uE(t[1]);return e&&JSON.parse(e)},od=()=>{try{return wx()||Ax()||Cx()||xx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cE=t=>{var e,n;return(n=(e=od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rx=t=>{const e=cE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dE=()=>{var t;return(t=od())===null||t===void 0?void 0:t.config},hE=t=>{var e;return(e=od())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ic(JSON.stringify(n)),Ic(JSON.stringify(o)),""].join(".")}const La={};function Nx(){const t={prod:[],emulator:[]};for(const e of Object.keys(La))La[e]?t.emulator.push(e):t.prod.push(e);return t}function Dx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xy=!1;function pE(t,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||La[t]===e||La[t]||Xy)return;La[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=Nx().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Xy=!0,o()},m}function h(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=Dx(r),T=n("text"),S=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),b=document.getElementById(R)||document.createElement("a"),A=n("preprendIcon"),w=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(b,R);const L=c();u(w,A),C.append(w,S,b,L),document.body.appendChild(C)}s?(S.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Ox(){var t;const e=(t=od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Mx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jx(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fx(){return!Ox()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ux(){try{return typeof indexedDB=="object"}catch{return!1}}function zx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="FirebaseError";class Vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Bx,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$x(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Vr(i,l,r)}}function $x(t,e){return t.replace(Hx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Hx=/\{\$([^}]+)}/g;function Wx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Jy(s)&&Jy(o)){if(!hs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ta(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qx(t,e){const n=new Kx(t,e);return n.subscribe.bind(n)}class Kx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Gx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gh),i.error===void 0&&(i.error=gh),i.complete===void 0&&(i.complete=gh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Px;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xx(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yx(t){return t===Qi?void 0:t}function Xx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Zx={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},eR=_e.INFO,tR={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},nR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jp{constructor(e){this.name=e,this._logLevel=eR,this._logHandler=nR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const rR=(t,e)=>e.some(n=>t instanceof n);let Zy,ev;function iR(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sR(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,Af=new WeakMap,gE=new WeakMap,yh=new WeakMap,Zp=new WeakMap;function oR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mE.set(n,t)}).catch(()=>{}),Zp.set(e,t),e}function aR(t){if(Af.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Af.set(t,e)}let Cf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lR(t){Cf=t(Cf)}function uR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vh(this),e,...n);return gE.set(r,e.sort?e.sort():[e]),hi(r)}:sR().includes(t)?function(...e){return t.apply(vh(this),e),hi(mE.get(this))}:function(...e){return hi(t.apply(vh(this),e))}}function cR(t){return typeof t=="function"?uR(t):(t instanceof IDBTransaction&&aR(t),rR(t,iR())?new Proxy(t,Cf):t)}function hi(t){if(t instanceof IDBRequest)return oR(t);if(yh.has(t))return yh.get(t);const e=cR(t);return e!==t&&(yh.set(t,e),Zp.set(e,t)),e}const vh=t=>Zp.get(t);function dR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=hi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(hi(o.result),u.oldVersion,u.newVersion,hi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const hR=["get","getKey","getAll","getAllKeys","count"],fR=["put","add","delete","clear"],_h=new Map;function tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_h.get(e))return _h.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hR.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return _h.set(e,s),s}lR(t=>({...t,get:(e,n,r)=>tv(e,n)||t.get(e,n,r),has:(e,n)=>!!tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",nv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Jp("@firebase/app"),gR="@firebase/app-compat",yR="@firebase/analytics-compat",vR="@firebase/analytics",_R="@firebase/app-check-compat",wR="@firebase/app-check",ER="@firebase/auth",TR="@firebase/auth-compat",IR="@firebase/database",SR="@firebase/data-connect",AR="@firebase/database-compat",CR="@firebase/functions",xR="@firebase/functions-compat",RR="@firebase/installations",PR="@firebase/installations-compat",kR="@firebase/messaging",NR="@firebase/messaging-compat",DR="@firebase/performance",bR="@firebase/performance-compat",OR="@firebase/remote-config",VR="@firebase/remote-config-compat",LR="@firebase/storage",MR="@firebase/storage-compat",jR="@firebase/firestore",FR="@firebase/ai",UR="@firebase/firestore-compat",zR="firebase",BR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="[DEFAULT]",$R={[xf]:"fire-core",[gR]:"fire-core-compat",[vR]:"fire-analytics",[yR]:"fire-analytics-compat",[wR]:"fire-app-check",[_R]:"fire-app-check-compat",[ER]:"fire-auth",[TR]:"fire-auth-compat",[IR]:"fire-rtdb",[SR]:"fire-data-connect",[AR]:"fire-rtdb-compat",[CR]:"fire-fn",[xR]:"fire-fn-compat",[RR]:"fire-iid",[PR]:"fire-iid-compat",[kR]:"fire-fcm",[NR]:"fire-fcm-compat",[DR]:"fire-perf",[bR]:"fire-perf-compat",[OR]:"fire-rc",[VR]:"fire-rc-compat",[LR]:"fire-gcs",[MR]:"fire-gcs-compat",[jR]:"fire-fst",[UR]:"fire-fst-compat",[FR]:"fire-vertex","fire-js":"fire-js",[zR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,HR=new Map,Pf=new Map;function rv(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(Pf.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,t);for(const n of Sc.values())rv(n,t);for(const n of HR.values())rv(n,t);return!0}function em(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new xl("app","Firebase",WR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=BR;function yE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=dE()),!n)throw fi.create("no-options");const s=Sc.get(i);if(s){if(hs(n,s.options)&&hs(r,s.config))return s;throw fi.create("duplicate-app",{appName:i})}const o=new Jx(i);for(const u of Pf.values())o.addComponent(u);const l=new qR(n,r,o);return Sc.set(i,l),l}function vE(t=Rf){const e=Sc.get(t);if(!e&&t===Rf&&dE())return yE();if(!e)throw fi.create("no-app",{appName:t});return e}function pi(t,e,n){var r;let i=(r=$R[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(l.join(" "));return}Eo(new fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebase-heartbeat-database",GR=1,ul="firebase-heartbeat-store";let wh=null;function _E(){return wh||(wh=dR(KR,GR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),wh}async function QR(t){try{const n=(await _E()).transaction(ul),r=await n.objectStore(ul).get(wE(t));return await n.done,r}catch(e){if(e instanceof Vr)Rr.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function iv(t,e){try{const r=(await _E()).transaction(ul,"readwrite");await r.objectStore(ul).put(e,wE(t)),await r.done}catch(n){if(n instanceof Vr)Rr.warn(n.message);else{const r=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(r.message)}}}function wE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=1024,XR=30;class JR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>XR){const o=tP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sv(),{heartbeatsToSend:r,unsentEntries:i}=ZR(this._heartbeatsCache.heartbeats),s=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Rr.warn(n),""}}}function sv(){return new Date().toISOString().substring(0,10)}function ZR(t,e=YR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ov(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ov(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ux()?zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ov(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}function tP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){Eo(new fs("platform-logger",e=>new pR(e),"PRIVATE")),Eo(new fs("heartbeat",e=>new JR(e),"PRIVATE")),pi(xf,nv,t),pi(xf,nv,"esm2017"),pi("fire-js","")}nP("");function tm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function EE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rP=EE,TE=new xl("auth","Firebase",EE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Jp("@firebase/auth");function iP(t,...e){Ac.logLevel<=_e.WARN&&Ac.warn(`Auth (${Oo}): ${t}`,...e)}function Fu(t,...e){Ac.logLevel<=_e.ERROR&&Ac.error(`Auth (${Oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw nm(t,...e)}function Zn(t,...e){return nm(t,...e)}function IE(t,e,n){const r=Object.assign(Object.assign({},rP()),{[e]:n});return new xl("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return IE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TE.create(t,...e)}function ae(t,e,...n){if(!t)throw nm(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fu(e),new Error(e)}function Pr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sP(){return av()==="http:"||av()==="https:"}function av(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sP()||Lx()||"connection"in navigator)?navigator.onLine:!0}function aP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=bx()||Mx()}get(){return oP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e){Pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cP=new Pl(3e4,6e4);function ws(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vi(t,e,n,r,i={}){return AE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Rl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return Vx()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&bo(t.emulatorConfig.host)&&(c.credentials="include"),SE.fetch()(await CE(t,t.config.apiHost,n,l),c)})}async function AE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lP),e);try{const i=new hP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw _u(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IE(t,h,c);Fn(t,h)}}catch(i){if(i instanceof Vr)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function ad(t,e,n,r,i={}){const s=await Vi(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function CE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?rm(t.config,i):`${t.config.apiScheme}://${i}`;return uP.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function dP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),cP.get())})}}function _u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zn(t,e,r);return i.customData._tokenResponse=n,i}function lv(t){return t!==void 0&&t.enterprise!==void 0}class fP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pP(t,e){return Vi(t,"GET","/v2/recaptchaConfig",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e){return Vi(t,"POST","/v1/accounts:delete",e)}async function Cc(t,e){return Vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gP(t,e=!1){const n=_t(t),r=await n.getIdToken(e),i=im(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ma(Eh(i.auth_time)),issuedAtTime:Ma(Eh(i.iat)),expirationTime:Ma(Eh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Eh(t){return Number(t)*1e3}function im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const i=uE(n);return i?JSON.parse(i):(Fu("Failed to decode base64 JWT payload"),null)}catch(i){return Fu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function uv(t){const e=im(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vr&&yP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await cl(t,Cc(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xE(s.providerUserInfo):[],l=wP(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function _P(t){const e=_t(t);await xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xE(t){return t.map(e=>{var{providerId:n}=e,r=tm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e){const n=await AE(t,{},async()=>{const r=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await CE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&bo(t.emulatorConfig.host)&&(u.credentials="include"),SE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TP(t,e){return Vi(t,"POST","/v2/accounts:revokeToken",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await EP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=tm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await cl(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gP(this,e)}reload(){return _P(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await cl(this,mP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:L,isAnonymous:z,providerData:F,stsTokenManager:g}=n;ae(C&&g,e,"internal-error");const v=ao.fromJSON(this.name,g);ae(typeof C=="string",e,"internal-error"),Hr(f,e.name),Hr(m,e.name),ae(typeof L=="boolean",e,"internal-error"),ae(typeof z=="boolean",e,"internal-error"),Hr(T,e.name),Hr(S,e.name),Hr(R,e.name),Hr(b,e.name),Hr(A,e.name),Hr(w,e.name);const E=new Vn({uid:C,auth:e,email:m,emailVerified:L,displayName:f,isAnonymous:z,photoURL:S,phoneNumber:T,tenantId:R,stsTokenManager:v,createdAt:A,lastLoginAt:w});return F&&Array.isArray(F)&&(E.providerData=F.map(I=>Object.assign({},I))),b&&(E._redirectEventId=b),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new Vn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ao;l.updateFromIdToken(r);const u=new Vn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function _r(t){Pr(t instanceof Function,"Expected a class definition");let e=cv.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RE.type="NONE";const dv=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Uu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cc(this.auth,{idToken:e}).catch(()=>{});return n?Vn._fromGetAccountInfoResponse(this.auth,n,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(_r(dv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||_r(dv);const o=Uu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const m=await Cc(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Vn._fromGetAccountInfoResponse(e,m,h)}else f=Vn._fromJSON(e,h);c!==s&&(l=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lo(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OE(e))return"Blackberry";if(VE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||NE(e))&&!e.includes("edge/"))return"Chrome";if(bE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PE(t=Ft()){return/firefox\//i.test(t)}function kE(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NE(t=Ft()){return/crios\//i.test(t)}function DE(t=Ft()){return/iemobile/i.test(t)}function bE(t=Ft()){return/android/i.test(t)}function OE(t=Ft()){return/blackberry/i.test(t)}function VE(t=Ft()){return/webos/i.test(t)}function sm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IP(t=Ft()){var e;return sm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SP(){return jx()&&document.documentMode===10}function LE(t=Ft()){return sm(t)||bE(t)||VE(t)||OE(t)||/windows phone/i.test(t)||DE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e=[]){let n;switch(t){case"Browser":n=hv(Ft());break;case"Worker":n=`${hv(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e={}){return Vi(t,"GET","/v2/passwordPolicy",ws(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=6;class RP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fv(this),this.idTokenSubscription=new fv(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cc(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(mi(this));const n=e?_t(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CP(this),n=new RP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vo(t){return _t(t)}class fv{constructor(e){this.auth=e,this.observer=null,this.addObserver=qx(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kP(t){ld=t}function jE(t){return ld.loadJS(t)}function NP(){return ld.recaptchaEnterpriseScript}function DP(){return ld.gapiScript}function bP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class OP{constructor(){this.enterprise=new VP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LP="recaptcha-enterprise",FE="NO_RECAPTCHA";class MP{constructor(e){this.type=LP,this.auth=Vo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{pP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new fP(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;lv(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(FE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OP().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&lv(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=NP();u.length!==0&&(u+=l),jE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function pv(t,e,n,r=!1,i=!1){const s=new MP(t);let o;if(i)o=FE;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function mv(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await pv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await pv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t,e){const n=em(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(hs(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function FP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UP(t,e,n){const r=Vo(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=UE(e),{host:o,port:l}=zP(e),u=l===null?"":`:${l}`,c={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(hs(c,r.config.emulator)&&hs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,bo(o)?(fE(`${s}//${o}${u}`),pE("Auth",!0)):BP()}function UE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zP(t){const e=UE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gv(o)}}}function gv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function $P(t,e){return Vi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return ad(t,"POST","/v1/accounts:signInWithPassword",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}async function qP(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends om{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new dl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mv(e,n,"signInWithPassword",HP);case"emailLink":return WP(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mv(e,r,"signUpPassword",$P);case"emailLink":return qP(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return ad(t,"POST","/v1/accounts:signInWithIdp",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="http://localhost";class ps extends om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=tm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ps(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:KP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QP(t){const e=Ea(Ta(t)).link,n=e?Ea(Ta(e)).deep_link_id:null,r=Ea(Ta(t)).deep_link_id;return(r?Ea(Ta(r)).link:null)||r||n||e||t}class am{constructor(e){var n,r,i,s,o,l;const u=Ea(Ta(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=GP((i=u.mode)!==null&&i!==void 0?i:null);ae(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=QP(e);try{return new am(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,n){return dl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=am.parseLink(n);return ae(r,"argument-error"),dl._fromEmailAndCode(e,r.code,r.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends zE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends kl{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends kl{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends kl{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vn._fromIdTokenResponse(e,r,i),o=yv(r);return new To({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yv(r);return new To({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rc(e,n,r,i)}}function BE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(t,s,e,r):s})}async function YP(t,e,n=!1){const r=await cl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return To._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e,n=!1){const{auth:r}=t;if(On(r.app))return Promise.reject(mi(r));const i="reauthenticate";try{const s=await cl(t,BE(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=im(s.idToken);ae(o,r,"internal-error");const{sub:l}=o;return ae(t.uid===l,r,"user-mismatch"),To._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $E(t,e,n=!1){if(On(t.app))return Promise.reject(mi(t));const r="signIn",i=await BE(t,r,e),s=await To._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JP(t,e){return $E(Vo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t){const e=Vo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ek(t,e,n){return On(t.app)?Promise.reject(mi(t)):JP(_t(t),Lo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZP(t),r})}function tk(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function nk(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function rk(t,e,n,r){return _t(t).onAuthStateChanged(e,n,r)}function ik(t){return _t(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1e3,ok=10;class WE extends HE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ok):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const ak=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends HE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qE.type="SESSION";const KE=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await lk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=lm("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function ck(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function dk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fk(){return GE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",pk=1,kc="firebaseLocalStorage",YE="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cd(t,e){return t.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function mk(){const t=indexedDB.deleteDatabase(QE);return new Nl(t).toPromise()}function Df(){const t=indexedDB.open(QE,pk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kc,{keyPath:YE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kc)?e(r):(r.close(),await mk(),e(await Df()))})})}async function vv(t,e,n){const r=cd(t,!0).put({[YE]:e,value:n});return new Nl(r).toPromise()}async function gk(t,e){const n=cd(t,!1).get(e),r=await new Nl(n).toPromise();return r===void 0?null:r.value}function _v(t,e){const n=cd(t,!0).delete(e);return new Nl(n).toPromise()}const yk=800,vk=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Df(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(fk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dk(),!this.activeServiceWorker)return;this.sender=new uk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Df();return await vv(e,Pc,"1"),await _v(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_v(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=cd(i,!1).getAll();return new Nl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const _k=XE;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e){return e?_r(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ek(t){return $E(t.auth,new um(t),t.bypassAuthState)}function Tk(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),XP(n,new um(t),t.bypassAuthState)}async function Ik(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),YP(n,new um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ek;case"linkViaPopup":case"linkViaRedirect":return Ik;case"reauthViaPopup":case"reauthViaRedirect":return Tk;default:Fn(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new Pl(2e3,1e4);class eo extends JE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Sk.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="pendingRedirect",zu=new Map;class Ck extends JE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zu.get(this.auth._key());if(!e){try{const r=await xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zu.set(this.auth._key(),e)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xk(t,e){const n=kk(e),r=Pk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Rk(t,e){zu.set(t._key(),e)}function Pk(t){return _r(t._redirectPersistence)}function kk(t){return Uu(Ak,t.config.apiKey,t.name)}async function Nk(t,e,n=!1){if(On(t.app))return Promise.reject(mi(t));const r=Vo(t),i=wk(r,e),o=await new Ck(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=10*60*1e3;class bk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ok(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ZE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dk&&this.cachedEventUids.clear(),this.cachedEventUids.has(wv(e))}saveEventToCache(e){this.cachedEventUids.add(wv(e)),this.lastProcessedEventTime=Date.now()}}function wv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ok(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e={}){return Vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mk=/^https?/;async function jk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Vk(t);for(const n of e)try{if(Fk(n))return}catch{}Fn(t,"unauthorized-domain")}function Fk(t){const e=kf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Mk.test(n))return!1;if(Lk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new Pl(3e4,6e4);function Ev(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zk(t){return new Promise((e,n)=>{var r,i,s;function o(){Ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ev(),n(Zn(t,"network-request-failed"))},timeout:Uk.get()})}if(!((i=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=er().gapi)===null||s===void 0)&&s.load)o();else{const l=bP("iframefcb");return er()[l]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},jE(`${DP()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function Bk(t){return Bu=Bu||zk(t),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Pl(5e3,15e3),Hk="__/auth/iframe",Wk="emulator/auth/iframe",qk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gk(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rm(e,Wk):`https://${t.config.authDomain}/${Hk}`,r={apiKey:e.apiKey,appName:t.name,v:Oo},i=Kk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rl(r).slice(1)}`}async function Qk(t){const e=await Bk(t),n=er().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:Gk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),l=er().setTimeout(()=>{s(o)},$k.get());function u(){er().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xk=500,Jk=600,Zk="_blank",eN="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tN(t,e,n,r=Xk,i=Jk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Yk),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ft().toLowerCase();n&&(l=NE(c)?Zk:n),PE(c)&&(e=e||eN,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[T,S])=>`${m}${T}=${S},`,"");if(IP(c)&&l!=="_self")return nN(e||"",l),new Tv(null);const f=window.open(e||"",l,h);ae(f,t,"popup-blocked");try{f.focus()}catch{}return new Tv(f)}function nN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="__/auth/handler",iN="emulator/auth/handler",sN=encodeURIComponent("fac");async function Iv(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oo,eventId:i};if(e instanceof zE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Wx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof kl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${sN}=${encodeURIComponent(u)}`:"";return`${oN(t)}?${Rl(l).slice(1)}${c}`}function oN({config:t}){return t.emulator?rm(t,iN):`https://${t.authDomain}/${rN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="webStorageSupport";class aN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=Nk,this._overrideRedirectResult=Rk}async _openPopup(e,n,r,i){var s;Pr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Iv(e,n,r,kf(),i);return tN(e,o,lm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Iv(e,n,r,kf(),i);return ck(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Qk(e),r=new bk(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Th,{type:Th},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Th];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LE()||kE()||sm()}}const lN=aN;var Sv="@firebase/auth",Av="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dN(t){Eo(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(t)},c=new PP(r,i,s,u);return FP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Eo(new fs("auth-internal",e=>{const n=Vo(e.getProvider("auth").getImmediate());return(r=>new uN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Sv,Av,cN(t)),pi(Sv,Av,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=5*60,fN=hE("authIdTokenMaxAge")||hN;let Cv=null;const pN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fN)return;const i=n==null?void 0:n.token;Cv!==i&&(Cv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mN(t=vE()){const e=em(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jP(t,{popupRedirectResolver:lN,persistence:[_k,ak,KE]}),r=hE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pN(s.toString());nk(n,o,()=>o(n.currentUser)),tk(n,l=>o(l))}}const i=cE("auth");return i&&UP(n,`http://${i}`),n}function gN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dN("Browser");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,eT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,v){function E(){}E.prototype=v.prototype,g.D=v.prototype,g.prototype=new E,g.prototype.constructor=g,g.C=function(I,P,N){for(var x=Array(arguments.length-2),G=2;G<arguments.length;G++)x[G-2]=arguments[G];return v.prototype[P].apply(I,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)I[P]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(P=0;16>P;++P)I[P]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=g.g[0],E=g.g[1],P=g.g[2];var N=g.g[3],x=v+(N^E&(P^N))+I[0]+3614090360&4294967295;v=E+(x<<7&4294967295|x>>>25),x=N+(P^v&(E^P))+I[1]+3905402710&4294967295,N=v+(x<<12&4294967295|x>>>20),x=P+(E^N&(v^E))+I[2]+606105819&4294967295,P=N+(x<<17&4294967295|x>>>15),x=E+(v^P&(N^v))+I[3]+3250441966&4294967295,E=P+(x<<22&4294967295|x>>>10),x=v+(N^E&(P^N))+I[4]+4118548399&4294967295,v=E+(x<<7&4294967295|x>>>25),x=N+(P^v&(E^P))+I[5]+1200080426&4294967295,N=v+(x<<12&4294967295|x>>>20),x=P+(E^N&(v^E))+I[6]+2821735955&4294967295,P=N+(x<<17&4294967295|x>>>15),x=E+(v^P&(N^v))+I[7]+4249261313&4294967295,E=P+(x<<22&4294967295|x>>>10),x=v+(N^E&(P^N))+I[8]+1770035416&4294967295,v=E+(x<<7&4294967295|x>>>25),x=N+(P^v&(E^P))+I[9]+2336552879&4294967295,N=v+(x<<12&4294967295|x>>>20),x=P+(E^N&(v^E))+I[10]+4294925233&4294967295,P=N+(x<<17&4294967295|x>>>15),x=E+(v^P&(N^v))+I[11]+2304563134&4294967295,E=P+(x<<22&4294967295|x>>>10),x=v+(N^E&(P^N))+I[12]+1804603682&4294967295,v=E+(x<<7&4294967295|x>>>25),x=N+(P^v&(E^P))+I[13]+4254626195&4294967295,N=v+(x<<12&4294967295|x>>>20),x=P+(E^N&(v^E))+I[14]+2792965006&4294967295,P=N+(x<<17&4294967295|x>>>15),x=E+(v^P&(N^v))+I[15]+1236535329&4294967295,E=P+(x<<22&4294967295|x>>>10),x=v+(P^N&(E^P))+I[1]+4129170786&4294967295,v=E+(x<<5&4294967295|x>>>27),x=N+(E^P&(v^E))+I[6]+3225465664&4294967295,N=v+(x<<9&4294967295|x>>>23),x=P+(v^E&(N^v))+I[11]+643717713&4294967295,P=N+(x<<14&4294967295|x>>>18),x=E+(N^v&(P^N))+I[0]+3921069994&4294967295,E=P+(x<<20&4294967295|x>>>12),x=v+(P^N&(E^P))+I[5]+3593408605&4294967295,v=E+(x<<5&4294967295|x>>>27),x=N+(E^P&(v^E))+I[10]+38016083&4294967295,N=v+(x<<9&4294967295|x>>>23),x=P+(v^E&(N^v))+I[15]+3634488961&4294967295,P=N+(x<<14&4294967295|x>>>18),x=E+(N^v&(P^N))+I[4]+3889429448&4294967295,E=P+(x<<20&4294967295|x>>>12),x=v+(P^N&(E^P))+I[9]+568446438&4294967295,v=E+(x<<5&4294967295|x>>>27),x=N+(E^P&(v^E))+I[14]+3275163606&4294967295,N=v+(x<<9&4294967295|x>>>23),x=P+(v^E&(N^v))+I[3]+4107603335&4294967295,P=N+(x<<14&4294967295|x>>>18),x=E+(N^v&(P^N))+I[8]+1163531501&4294967295,E=P+(x<<20&4294967295|x>>>12),x=v+(P^N&(E^P))+I[13]+2850285829&4294967295,v=E+(x<<5&4294967295|x>>>27),x=N+(E^P&(v^E))+I[2]+4243563512&4294967295,N=v+(x<<9&4294967295|x>>>23),x=P+(v^E&(N^v))+I[7]+1735328473&4294967295,P=N+(x<<14&4294967295|x>>>18),x=E+(N^v&(P^N))+I[12]+2368359562&4294967295,E=P+(x<<20&4294967295|x>>>12),x=v+(E^P^N)+I[5]+4294588738&4294967295,v=E+(x<<4&4294967295|x>>>28),x=N+(v^E^P)+I[8]+2272392833&4294967295,N=v+(x<<11&4294967295|x>>>21),x=P+(N^v^E)+I[11]+1839030562&4294967295,P=N+(x<<16&4294967295|x>>>16),x=E+(P^N^v)+I[14]+4259657740&4294967295,E=P+(x<<23&4294967295|x>>>9),x=v+(E^P^N)+I[1]+2763975236&4294967295,v=E+(x<<4&4294967295|x>>>28),x=N+(v^E^P)+I[4]+1272893353&4294967295,N=v+(x<<11&4294967295|x>>>21),x=P+(N^v^E)+I[7]+4139469664&4294967295,P=N+(x<<16&4294967295|x>>>16),x=E+(P^N^v)+I[10]+3200236656&4294967295,E=P+(x<<23&4294967295|x>>>9),x=v+(E^P^N)+I[13]+681279174&4294967295,v=E+(x<<4&4294967295|x>>>28),x=N+(v^E^P)+I[0]+3936430074&4294967295,N=v+(x<<11&4294967295|x>>>21),x=P+(N^v^E)+I[3]+3572445317&4294967295,P=N+(x<<16&4294967295|x>>>16),x=E+(P^N^v)+I[6]+76029189&4294967295,E=P+(x<<23&4294967295|x>>>9),x=v+(E^P^N)+I[9]+3654602809&4294967295,v=E+(x<<4&4294967295|x>>>28),x=N+(v^E^P)+I[12]+3873151461&4294967295,N=v+(x<<11&4294967295|x>>>21),x=P+(N^v^E)+I[15]+530742520&4294967295,P=N+(x<<16&4294967295|x>>>16),x=E+(P^N^v)+I[2]+3299628645&4294967295,E=P+(x<<23&4294967295|x>>>9),x=v+(P^(E|~N))+I[0]+4096336452&4294967295,v=E+(x<<6&4294967295|x>>>26),x=N+(E^(v|~P))+I[7]+1126891415&4294967295,N=v+(x<<10&4294967295|x>>>22),x=P+(v^(N|~E))+I[14]+2878612391&4294967295,P=N+(x<<15&4294967295|x>>>17),x=E+(N^(P|~v))+I[5]+4237533241&4294967295,E=P+(x<<21&4294967295|x>>>11),x=v+(P^(E|~N))+I[12]+1700485571&4294967295,v=E+(x<<6&4294967295|x>>>26),x=N+(E^(v|~P))+I[3]+2399980690&4294967295,N=v+(x<<10&4294967295|x>>>22),x=P+(v^(N|~E))+I[10]+4293915773&4294967295,P=N+(x<<15&4294967295|x>>>17),x=E+(N^(P|~v))+I[1]+2240044497&4294967295,E=P+(x<<21&4294967295|x>>>11),x=v+(P^(E|~N))+I[8]+1873313359&4294967295,v=E+(x<<6&4294967295|x>>>26),x=N+(E^(v|~P))+I[15]+4264355552&4294967295,N=v+(x<<10&4294967295|x>>>22),x=P+(v^(N|~E))+I[6]+2734768916&4294967295,P=N+(x<<15&4294967295|x>>>17),x=E+(N^(P|~v))+I[13]+1309151649&4294967295,E=P+(x<<21&4294967295|x>>>11),x=v+(P^(E|~N))+I[4]+4149444226&4294967295,v=E+(x<<6&4294967295|x>>>26),x=N+(E^(v|~P))+I[11]+3174756917&4294967295,N=v+(x<<10&4294967295|x>>>22),x=P+(v^(N|~E))+I[2]+718787259&4294967295,P=N+(x<<15&4294967295|x>>>17),x=E+(N^(P|~v))+I[9]+3951481745&4294967295,g.g[0]=g.g[0]+v&4294967295,g.g[1]=g.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,g.g[2]=g.g[2]+P&4294967295,g.g[3]=g.g[3]+N&4294967295}r.prototype.u=function(g,v){v===void 0&&(v=g.length);for(var E=v-this.blockSize,I=this.B,P=this.h,N=0;N<v;){if(P==0)for(;N<=E;)i(this,g,N),N+=this.blockSize;if(typeof g=="string"){for(;N<v;)if(I[P++]=g.charCodeAt(N++),P==this.blockSize){i(this,I),P=0;break}}else for(;N<v;)if(I[P++]=g[N++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var v=1;v<g.length-8;++v)g[v]=0;var E=8*this.o;for(v=g.length-8;v<g.length;++v)g[v]=E&255,E/=256;for(this.u(g),g=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)g[E++]=this.g[v]>>>I&255;return g};function s(g,v){var E=l;return Object.prototype.hasOwnProperty.call(E,g)?E[g]:E[g]=v(g)}function o(g,v){this.h=v;for(var E=[],I=!0,P=g.length-1;0<=P;P--){var N=g[P]|0;I&&N==v||(E[P]=N,I=!1)}this.g=E}var l={};function u(g){return-128<=g&&128>g?s(g,function(v){return new o([v|0],0>v?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return f;if(0>g)return b(c(-g));for(var v=[],E=1,I=0;g>=E;I++)v[I]=g/E|0,E*=4294967296;return new o(v,0)}function h(g,v){if(g.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(g.charAt(0)=="-")return b(h(g.substring(1),v));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(v,8)),I=f,P=0;P<g.length;P+=8){var N=Math.min(8,g.length-P),x=parseInt(g.substring(P,P+N),v);8>N?(N=c(Math.pow(v,N)),I=I.j(N).add(c(x))):(I=I.j(E),I=I.add(c(x)))}return I}var f=u(0),m=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-b(this).m();for(var g=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);g+=(0<=I?I:4294967296+I)*v,v*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S(this))return"0";if(R(this))return"-"+b(this).toString(g);for(var v=c(Math.pow(g,6)),E=this,I="";;){var P=L(E,v).g;E=A(E,P.j(v));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(g);if(E=P,S(E))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function S(g){if(g.h!=0)return!1;for(var v=0;v<g.g.length;v++)if(g.g[v]!=0)return!1;return!0}function R(g){return g.h==-1}t.l=function(g){return g=A(this,g),R(g)?-1:S(g)?0:1};function b(g){for(var v=g.g.length,E=[],I=0;I<v;I++)E[I]=~g.g[I];return new o(E,~g.h).add(m)}t.abs=function(){return R(this)?b(this):this},t.add=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],I=0,P=0;P<=v;P++){var N=I+(this.i(P)&65535)+(g.i(P)&65535),x=(N>>>16)+(this.i(P)>>>16)+(g.i(P)>>>16);I=x>>>16,N&=65535,x&=65535,E[P]=x<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function A(g,v){return g.add(b(v))}t.j=function(g){if(S(this)||S(g))return f;if(R(this))return R(g)?b(this).j(b(g)):b(b(this).j(g));if(R(g))return b(this.j(b(g)));if(0>this.l(T)&&0>g.l(T))return c(this.m()*g.m());for(var v=this.g.length+g.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<g.g.length;P++){var N=this.i(I)>>>16,x=this.i(I)&65535,G=g.i(P)>>>16,ge=g.i(P)&65535;E[2*I+2*P]+=x*ge,w(E,2*I+2*P),E[2*I+2*P+1]+=N*ge,w(E,2*I+2*P+1),E[2*I+2*P+1]+=x*G,w(E,2*I+2*P+1),E[2*I+2*P+2]+=N*G,w(E,2*I+2*P+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function w(g,v){for(;(g[v]&65535)!=g[v];)g[v+1]+=g[v]>>>16,g[v]&=65535,v++}function C(g,v){this.g=g,this.h=v}function L(g,v){if(S(v))throw Error("division by zero");if(S(g))return new C(f,f);if(R(g))return v=L(b(g),v),new C(b(v.g),b(v.h));if(R(v))return v=L(g,b(v)),new C(b(v.g),v.h);if(30<g.g.length){if(R(g)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(g);)E=z(E),I=z(I);var P=F(E,1),N=F(I,1);for(I=F(I,2),E=F(E,2);!S(I);){var x=N.add(I);0>=x.l(g)&&(P=P.add(E),N=x),I=F(I,1),E=F(E,1)}return v=A(g,P.j(v)),new C(P,v)}for(P=f;0<=g.l(v);){for(E=Math.max(1,Math.floor(g.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=c(E),x=N.j(v);R(x)||0<x.l(g);)E-=I,N=c(E),x=N.j(v);S(N)&&(N=m),P=P.add(N),g=A(g,x)}return new C(P,g)}t.A=function(g){return L(this,g).h},t.and=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&g.i(I);return new o(E,this.h&g.h)},t.or=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|g.i(I);return new o(E,this.h|g.h)},t.xor=function(g){for(var v=Math.max(this.g.length,g.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^g.i(I);return new o(E,this.h^g.h)};function z(g){for(var v=g.g.length+1,E=[],I=0;I<v;I++)E[I]=g.i(I)<<1|g.i(I-1)>>>31;return new o(E,g.h)}function F(g,v){var E=v>>5;v%=32;for(var I=g.g.length-E,P=[],N=0;N<I;N++)P[N]=0<v?g.i(N+E)>>>v|g.i(N+E+1)<<32-v:g.i(N+E);return new o(P,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,gi=o}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tT,Ia,nT,$u,bf,rT,iT,sT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in p))break e;p=p[V]}a=a[a.length-1],_=p[a],d=d(_),d!=_&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,_=!1,V={next:function(){if(!_&&p<a.length){var j=p++;return{value:d(j,a[j]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function f(a,d,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function m(a,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function T(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function S(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,V,j){for(var q=Array(arguments.length-2),be=2;be<arguments.length;be++)q[be-2]=arguments[be];return d.prototype[V].apply(_,q)}}function R(a){const d=a.length;if(0<d){const p=Array(d);for(let _=0;_<d;_++)p[_]=a[_];return p}return[]}function b(a,d){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const V=a.length||0,j=_.length||0;a.length=V+j;for(let q=0;q<j;q++)a[V+q]=_[q]}else a.push(_)}}class A{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function L(a){return L[" "](a),a}L[" "]=function(){};var z=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function F(a,d,p){for(const _ in a)d.call(p,a[_],_,a)}function g(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function v(a){const d={};for(const p in a)d[p]=a[p];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let p,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(p in _)a[p]=_[p];for(let j=0;j<E.length;j++)p=E[j],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function P(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function N(a){l.setTimeout(()=>{throw a},0)}function x(){var a=ie;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class G{constructor(){this.h=this.g=null}add(d,p){const _=ge.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var ge=new A(()=>new Q,a=>a.reset());class Q{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,$=!1,ie=new G,oe=()=>{const a=l.Promise.resolve(void 0);Ce=()=>{a.then(xe)}};var xe=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){N(p)}var d=ge;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}$=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Ut=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function Je(a,d){if(De.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(z){e:{try{L(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:wt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Je.aa.h.call(this)}}S(Je,De);var wt={2:"touch",3:"pen",4:"mouse"};Je.prototype.h=function(){Je.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),As=0;function Nd(a,d,p,_,V){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=V,this.key=++As,this.da=this.fa=!1}function Cs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function xs(a){this.src=a,this.g={},this.h=0}xs.prototype.add=function(a,d,p,_,V){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var q=Bn(a,d,_,V);return-1<q?(d=a[q],p||(d.fa=!1)):(d=new Nd(d,this.src,j,!!_,V),d.fa=p,a.push(d)),d};function lt(a,d){var p=d.type;if(p in a.g){var _=a.g[p],V=Array.prototype.indexOf.call(_,d,void 0),j;(j=0<=V)&&Array.prototype.splice.call(_,V,1),j&&(Cs(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Bn(a,d,p,_){for(var V=0;V<a.length;++V){var j=a[V];if(!j.da&&j.listener==d&&j.capture==!!p&&j.ha==_)return V}return-1}var Rs="closure_lm_"+(1e6*Math.random()|0),$o={};function $n(a,d,p,_,V){if(Array.isArray(d)){for(var j=0;j<d.length;j++)$n(a,d[j],p,_,V);return null}return p=Mr(p),a&&a[Et]?a.K(d,p,c(_)?!!_.capture:!1,V):Dd(a,d,p,!1,_,V)}function Dd(a,d,p,_,V,j){if(!d)throw Error("Invalid event type");var q=c(V)?!!V.capture:!!V,be=qo(a);if(be||(a[Rs]=be=new xs(a)),p=be.add(d,p,_,q,j),p.proxy)return p;if(_=bd(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)Ut||(V=q),V===void 0&&(V=!1),a.addEventListener(d.toString(),_,V);else if(a.attachEvent)a.attachEvent(Fl(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function bd(){function a(p){return d.call(a.src,a.listener,p)}const d=Od;return a}function Ho(a,d,p,_,V){if(Array.isArray(d))for(var j=0;j<d.length;j++)Ho(a,d[j],p,_,V);else _=c(_)?!!_.capture:!!_,p=Mr(p),a&&a[Et]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],p=Bn(j,p,_,V),-1<p&&(Cs(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=qo(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Bn(d,p,_,V)),(p=-1<a?d[a]:null)&&Wo(p))}function Wo(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Et])lt(d.i,a);else{var p=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(p,_,a.capture):d.detachEvent?d.detachEvent(Fl(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=qo(d))?(lt(p,a),p.h==0&&(p.src=null,d[Rs]=null)):Cs(a)}}}function Fl(a){return a in $o?$o[a]:$o[a]="on"+a}function Od(a,d){if(a.da)a=!0;else{d=new Je(d,this);var p=a.listener,_=a.ha||a.src;a.fa&&Wo(a),a=p.call(_,d)}return a}function qo(a){return a=a[Rs],a instanceof xs?a:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mr(a){return typeof a=="function"?a:(a[An]||(a[An]=function(d){return a.handleEvent(d)}),a[An])}function ut(){ye.call(this),this.i=new xs(this),this.M=this,this.F=null}S(ut,ye),ut.prototype[Et]=!0,ut.prototype.removeEventListener=function(a,d,p,_){Ho(this,a,d,p,_)};function ct(a,d){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new De(d,a);else if(d instanceof De)d.target=d.target||a;else{var V=d;d=new De(_,a),I(d,V)}if(V=!0,p)for(var j=p.length-1;0<=j;j--){var q=d.g=p[j];V=rn(q,_,!0,d)&&V}if(q=d.g=a,V=rn(q,_,!0,d)&&V,V=rn(q,_,!1,d)&&V,p)for(j=0;j<p.length;j++)q=d.g=p[j],V=rn(q,_,!1,d)&&V}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],_=0;_<p.length;_++)Cs(p[_]);delete a.g[d],a.h--}}this.F=null},ut.prototype.K=function(a,d,p,_){return this.i.add(String(a),d,!1,p,_)},ut.prototype.L=function(a,d,p,_){return this.i.add(String(a),d,!0,p,_)};function rn(a,d,p,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,j=0;j<d.length;++j){var q=d[j];if(q&&!q.da&&q.capture==p){var be=q.listener,It=q.ha||q.src;q.fa&&lt(a.i,q),V=be.call(It,_)!==!1&&V}}return V&&!_.defaultPrevented}function mn(a,d,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Ko(a){a.g=mn(()=>{a.g=null,a.i&&(a.i=!1,Ko(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Ps extends ye{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(a){ye.call(this),this.h=a,this.g={}}S(Fi,ye);var Cn=[];function Go(a){F(a.g,function(d,p){this.g.hasOwnProperty(p)&&Wo(d)},a),a.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Go(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ks=l.JSON.stringify,Ul=l.JSON.parse,Vd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ns(){}Ns.prototype.h=null;function Ui(a){return a.h||(a.h=a.i())}function Qo(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){De.call(this,"d")}S(zi,De);function Yo(){De.call(this,"c")}S(Yo,De);var Hn={},zl=null;function Bi(){return zl=zl||new ut}Hn.La="serverreachability";function $i(a){De.call(this,Hn.La,a)}S($i,De);function Wn(a){const d=Bi();ct(d,new $i(d))}Hn.STAT_EVENT="statevent";function Bl(a,d){De.call(this,Hn.STAT_EVENT,a),this.stat=d}S(Bl,De);function Tt(a){const d=Bi();ct(d,new Bl(d,a))}Hn.Ma="timingevent";function k(a,d){De.call(this,Hn.Ma,a),this.size=d}S(k,De);function D(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function H(a,d,p,_,V,j){a.info(function(){if(a.g)if(j)for(var q="",be=j.split("&"),It=0;It<be.length;It++){var Ae=be[It].split("=");if(1<Ae.length){var kt=Ae[0];Ae=Ae[1];var Nt=kt.split("_");q=2<=Nt.length&&Nt[1]=="type"?q+(kt+"="+Ae+"&"):q+(kt+"=redacted&")}}else q=null;else q=j;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+d+`
`+p+`
`+q})}function K(a,d,p,_,V,j,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+d+`
`+p+`
`+j+" "+q})}function ne(a,d,p,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+te(a,p)+(_?" "+_:"")})}function ue(a,d){a.info(function(){return"TIMEOUT: "+d})}M.prototype.info=function(){};function te(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var j=V[0];if(j!="noop"&&j!="stop"&&j!="close")for(var q=1;q<V.length;q++)V[q]=""}}}}return ks(p)}catch{return d}}var ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},J={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},re;function ce(){}S(ce,Ns),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},re=new ce;function fe(a,d,p,_){this.j=a,this.i=d,this.l=p,this.R=_||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}var Pe={},Ee={};function Oe(a,d,p){a.L=1,a.v=ql(hr(d)),a.m=p,a.P=!0,ur(a,null)}function ur(a,d){a.F=Date.now(),zt(a),a.A=hr(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Jm(p.i,"t",_),a.C=0,p=a.j.J,a.h=new nt,a.g=gg(a.j,p?d:null,!a.m),0<a.O&&(a.M=new Ps(m(a.Y,a,a.g),a.O)),d=a.U,p=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Cn[0]=V.toString()),V=Cn);for(var j=0;j<V.length;j++){var q=$n(p,V[j],_||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Wn(),H(a.i,a.u,a.A,a.l,a.R,a.m)}fe.prototype.ca=function(a){a=a.target;const d=this.M;d&&fr(a)==3?d.j():this.Y(a)},fe.prototype.Y=function(a){try{if(a==this.g)e:{const Nt=fr(this.g);var d=this.g.Ba();const Vs=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||sg(this.g)))){this.J||Nt!=4||d==7||(d==8||0>=Vs?Wn(3):Wn(2)),cr(this);var p=this.g.Z();this.X=p;t:if(jr(this)){var _=sg(this.g);a="";var V=_.length,j=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),sn(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(j&&d==V-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,K(this.i,this.u,this.A,this.l,this.R,Nt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,It=this.g;if((be=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(be)){var Ae=be;break t}}Ae=null}if(p=Ae)ne(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,p);else{this.o=!1,this.s=3,Tt(12),gn(this),sn(this);break e}}if(this.P){p=!0;let Rn;for(;!this.J&&this.C<q.length;)if(Rn=xn(this,q),Rn==Ee){Nt==4&&(this.s=4,Tt(14),p=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Pe){this.s=4,Tt(15),ne(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else ne(this.i,this.l,Rn,null),Fr(this,Rn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||q.length!=0||this.h.h||(this.s=1,Tt(16),p=!1),this.o=this.o&&p,!p)ne(this.i,this.l,q,"[Invalid Chunked Response]"),gn(this),sn(this);else if(0<q.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Fd(kt),kt.M=!0,Tt(11))}}else ne(this.i,this.l,q,null),Fr(this,q);Nt==4&&gn(this),this.o&&!this.J&&(Nt==4?hg(this.j,this):(this.o=!1,zt(this)))}else rS(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),gn(this),sn(this)}}}catch{}finally{}};function jr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xn(a,d){var p=a.C,_=d.indexOf(`
`,p);return _==-1?Ee:(p=Number(d.substring(p,_)),isNaN(p)?Pe:(_+=1,_+p>d.length?Ee:(d=d.slice(_,_+p),a.C=_+p,d)))}fe.prototype.cancel=function(){this.J=!0,gn(this)};function zt(a){a.S=Date.now()+a.I,Ds(a,a.I)}function Ds(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=D(m(a.ba,a),d)}function cr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}fe.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ue(this.i,this.A),this.L!=2&&(Wn(),Tt(17)),gn(this),this.s=2,sn(this)):Ds(this,this.S-a)};function sn(a){a.j.G==0||a.J||hg(a.j,a)}function gn(a){cr(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Go(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Fr(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||Be(p.h,a))){if(!a.K&&Be(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Jl(p),Yl(p);else break e;jd(p),Tt(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=D(m(p.Za,p),6e3));if(1>=Ur(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Wi(p,11)}else if((a.K||p.g==a)&&Jl(p),!w(d))for(V=p.Da.g.parse(d),d=0;d<V.length;d++){let Ae=V[d];if(p.T=Ae[0],Ae=Ae[1],p.G==2)if(Ae[0]=="c"){p.K=Ae[1],p.ia=Ae[2];const kt=Ae[3];kt!=null&&(p.la=kt,p.j.info("VER="+p.la));const Nt=Ae[4];Nt!=null&&(p.Aa=Nt,p.j.info("SVER="+p.Aa));const Vs=Ae[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(_=1.5*Vs,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Rn=a.g;if(Rn){const eu=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var j=_.h;j.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(qn(j,j.h),j.h=null))}if(_.D){const Ud=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ud&&(_.ya=Ud,je(_.I,_.D,Ud))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var q=a;if(_.qa=mg(_,_.J?_.ia:null,_.W),q.K){Xo(_.h,q);var be=q,It=_.L;It&&(be.I=It),be.B&&(cr(be),zt(be)),_.g=q}else cg(_);0<p.i.length&&Xl(p)}else Ae[0]!="stop"&&Ae[0]!="close"||Wi(p,7);else p.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Wi(p,7):Md(p):Ae[0]!="noop"&&p.l&&p.l.ta(Ae),p.v=0)}}Wn(4)}catch{}}var Te=class{constructor(a,d){this.g=a,this.map=d}};function Me(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dr(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ur(a){return a.h?1:a.g?a.g.size:0}function Be(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function qn(a,d){a.g?a.g.add(d):a.h=d}function Xo(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Me.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function $l(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return R(a.i)}function BI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,_=0;_<p;_++)d.push(a[_]);return d}d=[],p=0;for(_ in a)d[p++]=a[_];return d}function $I(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const _ in a)d[p++]=_;return d}}}function qm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=$I(a),_=BI(a),V=_.length,j=0;j<V;j++)d.call(void 0,_[j],p&&p[j],a)}var Km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HI(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),V=null;if(0<=_){var j=a[p].substring(0,_);V=a[p].substring(_+1)}else j=a[p];d(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Hi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hi){this.h=a.h,Hl(this,a.j),this.o=a.o,this.g=a.g,Wl(this,a.s),this.l=a.l;var d=a.i,p=new ea;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Gm(this,p),this.m=a.m}else a&&(d=String(a).match(Km))?(this.h=!1,Hl(this,d[1]||"",!0),this.o=Jo(d[2]||""),this.g=Jo(d[3]||"",!0),Wl(this,d[4]),this.l=Jo(d[5]||"",!0),Gm(this,d[6]||"",!0),this.m=Jo(d[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}Hi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Zo(d,Qm,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Zo(d,Qm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Zo(p,p.charAt(0)=="/"?KI:qI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Zo(p,QI)),a.join("")};function hr(a){return new Hi(a)}function Hl(a,d,p){a.j=p?Jo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Wl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Gm(a,d,p){d instanceof ea?(a.i=d,YI(a.i,a.h)):(p||(d=Zo(d,GI)),a.i=new ea(d,a.h))}function je(a,d,p){a.i.set(d,p)}function ql(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Jo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zo(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,WI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qm=/[#\/\?@]/g,qI=/[#\?:]/g,KI=/[#\?]/g,GI=/[#\?@]/g,QI=/#/g;function ea(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function zr(a){a.g||(a.g=new Map,a.h=0,a.i&&HI(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=ea.prototype,t.add=function(a,d){zr(this),this.i=null,a=bs(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function Ym(a,d){zr(a),d=bs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Xm(a,d){return zr(a),d=bs(a,d),a.g.has(d)}t.forEach=function(a,d){zr(this),this.g.forEach(function(p,_){p.forEach(function(V){a.call(d,V,_,this)},this)},this)},t.na=function(){zr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let _=0;_<d.length;_++){const V=a[_];for(let j=0;j<V.length;j++)p.push(d[_])}return p},t.V=function(a){zr(this);let d=[];if(typeof a=="string")Xm(this,a)&&(d=d.concat(this.g.get(bs(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return zr(this),this.i=null,a=bs(this,a),Xm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Jm(a,d,p){Ym(a,d),0<p.length&&(a.i=null,a.g.set(bs(a,d),R(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var _=d[p];const j=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var V=j;q[_]!==""&&(V+="="+encodeURIComponent(String(q[_]))),a.push(V)}}return this.i=a.join("&")};function bs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function YI(a,d){d&&!a.j&&(zr(a),a.i=null,a.g.forEach(function(p,_){var V=_.toLowerCase();_!=V&&(Ym(this,_),Jm(this,V,p))},a)),a.j=d}function XI(a,d){const p=new M;if(l.Image){const _=new Image;_.onload=T(Br,p,"TestLoadImage: loaded",!0,d,_),_.onerror=T(Br,p,"TestLoadImage: error",!1,d,_),_.onabort=T(Br,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=T(Br,p,"TestLoadImage: timeout",!1,d,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function JI(a,d){const p=new M,_=new AbortController,V=setTimeout(()=>{_.abort(),Br(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(j=>{clearTimeout(V),j.ok?Br(p,"TestPingServer: ok",!0,d):Br(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Br(p,"TestPingServer: error",!1,d)})}function Br(a,d,p,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(p)}catch{}}function ZI(){this.g=new Vd}function eS(a,d,p){const _=p||"";try{qm(a,function(V,j){let q=V;c(V)&&(q=ks(V)),d.push(_+j+"="+encodeURIComponent(q))})}catch(V){throw d.push(_+"type="+encodeURIComponent("_badmap")),V}}function Kl(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Kl,Ns),Kl.prototype.g=function(){return new Gl(this.l,this.j)},Kl.prototype.i=function(a){return function(){return a}}({});function Gl(a,d){ut.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Gl,ut),t=Gl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,na(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ta(this):na(this),this.readyState==3&&Zm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ta(this))},t.Qa=function(a){this.g&&(this.response=a,ta(this))},t.ga=function(){this.g&&ta(this)};function ta(a){a.readyState=4,a.l=null,a.j=null,a.v=null,na(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function na(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function eg(a){let d="";return F(a,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function Ld(a,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=eg(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):je(a,d,p))}function Ye(a){ut.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ye,ut);var tS=/^https?$/i,nS=["POST","PUT"];t=Ye.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():re.g(),this.v=this.o?Ui(this.o):Ui(re),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){tg(this,j);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)p.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const j of _.keys())p.set(j,_.get(j));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(nS,d,void 0))||_||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,q]of p)this.g.setRequestHeader(j,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ig(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){tg(this,j)}};function tg(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ng(a),Ql(a)}function ng(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),Ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rg(this):this.bb())},t.bb=function(){rg(this)};function rg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||fr(a)!=4||a.Z()!=2)){if(a.u&&fr(a)==4)mn(a.Ea,0,a);else if(ct(a,"readystatechange"),fr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=q===0){var V=String(a.D).match(Km)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),_=!tS.test(V?V.toLowerCase():"")}p=_}if(p)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var j=2<fr(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",ng(a)}}finally{Ql(a)}}}}function Ql(a,d){if(a.g){ig(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ct(a,"ready");try{p.onreadystatechange=_}catch{}}}function ig(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function fr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Ul(d)}};function sg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function rS(a){const d={};a=(a.g&&2<=fr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var p=P(a[_]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=d[V]||[];d[V]=j,j.push(p)}g(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function og(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,a),this.cb=ra("retryDelaySeedMs",1e4,a),this.Wa=ra("forwardChannelMaxRetries",2,a),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Me(a&&a.concurrentRequestLimit),this.Da=new ZI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=og.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,_){Tt(0),this.W=a,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=mg(this,null,this.W),Xl(this)};function Md(a){if(ag(a),a.G==3){var d=a.U++,p=hr(a.I);if(je(p,"SID",a.K),je(p,"RID",d),je(p,"TYPE","terminate"),ia(a,p),d=new fe(a,a.j,d),d.L=2,d.v=ql(hr(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=gg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zt(d)}pg(a)}function Yl(a){a.g&&(Fd(a),a.g.cancel(),a.g=null)}function ag(a){Yl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Jl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Xl(a){if(!dr(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ce||oe(),$||(Ce(),$=!0),ie.add(d,a),a.B=0}}function iS(a,d){return Ur(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=D(m(a.Ga,a,d),fg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new fe(this,this.j,a);let j=this.o;if(this.S&&(j?(j=v(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(V.H=j,j=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=ug(this,V,d),p=hr(this.I),je(p,"RID",a),je(p,"CVER",22),this.D&&je(p,"X-HTTP-Session-Id",this.D),ia(this,p),j&&(this.O?d="headers="+encodeURIComponent(String(eg(j)))+"&"+d:this.m&&Ld(p,this.m,j)),qn(this.h,V),this.Ua&&je(p,"TYPE","init"),this.P?(je(p,"$req",d),je(p,"SID","null"),V.T=!0,Oe(V,p,null)):Oe(V,p,d),this.G=2}}else this.G==3&&(a?lg(this,a):this.i.length==0||dr(this.h)||lg(this))};function lg(a,d){var p;d?p=d.l:p=a.U++;const _=hr(a.I);je(_,"SID",a.K),je(_,"RID",p),je(_,"AID",a.T),ia(a,_),a.m&&a.o&&Ld(_,a.m,a.o),p=new fe(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=ug(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qn(a.h,p),Oe(p,_,d)}function ia(a,d){a.H&&F(a.H,function(p,_){je(d,_,p)}),a.l&&qm({},function(p,_){je(d,_,p)})}function ug(a,d,p){p=Math.min(a.i.length,p);var _=a.l?m(a.l.Na,a.l,a):null;e:{var V=a.i;let j=-1;for(;;){const q=["count="+p];j==-1?0<p?(j=V[0].g,q.push("ofs="+j)):j=0:q.push("ofs="+j);let be=!0;for(let It=0;It<p;It++){let Ae=V[It].g;const kt=V[It].map;if(Ae-=j,0>Ae)j=Math.max(0,V[It].g-100),be=!1;else try{eS(kt,q,"req"+Ae+"_")}catch{_&&_(kt)}}if(be){_=q.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,_}function cg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ce||oe(),$||(Ce(),$=!0),ie.add(d,a),a.v=0}}function jd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=D(m(a.Fa,a),fg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=D(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Yl(this),dg(this))};function Fd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function dg(a){a.g=new fe(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=hr(a.qa);je(d,"RID","rpc"),je(d,"SID",a.K),je(d,"AID",a.T),je(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(d,"TO",a.ja),je(d,"TYPE","xmlhttp"),ia(a,d),a.m&&a.o&&Ld(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ql(hr(d)),p.m=null,p.P=!0,ur(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Yl(this),jd(this),Tt(19))};function Jl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function hg(a,d){var p=null;if(a.g==d){Jl(a),Fd(a),a.g=null;var _=2}else if(Be(a.h,d))p=d.D,Xo(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;_=Bi(),ct(_,new k(_,p)),Xl(a)}else cg(a);else if(V=d.s,V==3||V==0&&0<d.X||!(_==1&&iS(a,d)||_==2&&jd(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),V){case 1:Wi(a,5);break;case 4:Wi(a,10);break;case 3:Wi(a,6);break;default:Wi(a,2)}}}function fg(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function Wi(a,d){if(a.j.info("Error code "+d),d==2){var p=m(a.fb,a),_=a.Xa;const V=!_;_=new Hi(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hl(_,"https"),ql(_),V?XI(_.toString(),p):JI(_.toString(),p)}else Tt(2);a.G=0,a.l&&a.l.sa(d),pg(a),ag(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function pg(a){if(a.G=0,a.ka=[],a.l){const d=$l(a.h);(d.length!=0||a.i.length!=0)&&(b(a.ka,d),b(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function mg(a,d,p){var _=p instanceof Hi?hr(p):new Hi(p);if(_.g!="")d&&(_.g=d+"."+_.g),Wl(_,_.s);else{var V=l.location;_=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var j=new Hi(null);_&&Hl(j,_),d&&(j.g=d),V&&Wl(j,V),p&&(j.l=p),_=j}return p=a.D,d=a.ya,p&&d&&je(_,p,d),je(_,"VER",a.la),ia(a,_),_}function gg(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ye(new Kl({eb:p})):new Ye(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yg(){}t=yg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(a,d){return new on(a,d)};function on(a,d){ut.call(this),this.g=new og(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Os(this)}S(on,ut),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Md(this.g)},on.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=ks(a),a=p);d.i.push(new Te(d.Ya++,a)),d.G==3&&Xl(d)},on.prototype.N=function(){this.g.l=null,delete this.j,Md(this.g),delete this.g,on.aa.N.call(this)};function vg(a){zi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(vg,zi);function _g(){Yo.call(this),this.status=1}S(_g,Yo);function Os(a){this.g=a}S(Os,yg),Os.prototype.ua=function(){ct(this.g,"a")},Os.prototype.ta=function(a){ct(this.g,new vg(a))},Os.prototype.sa=function(a){ct(this.g,new _g)},Os.prototype.ra=function(){ct(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,sT=function(){return new Zl},iT=function(){return Bi()},rT=Hn,bf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,$u=ee,J.COMPLETE="complete",nT=J,Qo.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Ia=Qo,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,tT=Ye}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const Rv="@firebase/firestore",Pv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Jp("@firebase/firestore");function js(){return ms.logLevel}function X(t,...e){if(ms.logLevel<=_e.DEBUG){const n=e.map(cm);ms.debug(`Firestore (${Mo}): ${t}`,...n)}}function kr(t,...e){if(ms.logLevel<=_e.ERROR){const n=e.map(cm);ms.error(`Firestore (${Mo}): ${t}`,...n)}}function Ei(t,...e){if(ms.logLevel<=_e.WARN){const n=e.map(cm);ms.warn(`Firestore (${Mo}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,oT(t,r,n)}function oT(t,e,n){let r=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kr(r),new Error(r)}function Re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||oT(e,i,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class vN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _N{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new aT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class wN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=IN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Of(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return me(r,i);{const s=lT(),o=SN(s.encode(Nv(t,n)),s.encode(Nv(e,n)));return o!==0?o:me(r,i)}}n+=r>65535?2:1}return me(t.length,e.length)}function Nv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function SN(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return me(t[n],e[n]);return me(t.length,e.length)}function Io(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class Qn{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Qn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return me(e.length,n.length)}static compareSegments(e,n){const r=Qn.isNumericId(e),i=Qn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qn.extractNumericId(e).compare(Qn.extractNumericId(n)):Of(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class Ve extends Qn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const AN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Qn{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return AN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new Ct([Dv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Ve.fromString(e))}static fromName(e){return new se(Ve.fromString(e).popFirst(5))}static empty(){return new se(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CN(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bv(t){if(!se.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(se.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dl(t,e){if(!cT(t))throw new Y(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=-62135596800,Lv=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Lv);return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vv)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lv}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:at("string",Ue._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Ue(0,0))}static max(){return new de(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function xN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Ti(i,se.empty(),e)}function RN(t){return new Ti(t.readTime,t.key,hl)}class Ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ti(de.min(),se.empty(),hl)}static max(){return new Ti(de.max(),se.empty(),hl)}}function PN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==kN)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function DN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}hd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=-1;function fd(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function bN(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="";function ON(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mv(e)),e=VN(t.get(n),e);return Mv(e)}function VN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case dT:n+="";break;default:n+=s}}return n}function Mv(t){return t+dT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Li(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=s??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new At(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fv(this.data.getIterator())}getIteratorFrom(e){return new Fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class Fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new cn([])}unionWith(e){let n=new pt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fT("Invalid base64 string: "+s):s}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const LN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=LN.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="server_timestamp",mT="__type__",gT="__previous_value__",yT="__local_write_time__";function fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mT])===null||n===void 0?void 0:n.stringValue)===pT}function pd(t){const e=t.mapValue.fields[gT];return fm(e)?pd(e):e}function fl(t){const e=Ii(t.mapValue.fields[yT].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,i,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const Dc="(default)";class pl{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="__type__",jN="__max__",Tu={mapValue:{}},_T="__vector__",bc="value";function Ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fm(t)?4:UN(t)?9007199254740991:FN(t)?10:11:le(28295,{value:t})}function sr(t,e){if(t===e)return!0;const n=Ai(t);if(n!==Ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ii(i.timestampValue),l=Ii(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Si(i.bytesValue).isEqual(Si(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),l=Ze(s.doubleValue);return o===l?Nc(o)===Nc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Io(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(jv(o)!==jv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!sr(o[u],l[u])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function ml(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=Ai(t),r=Ai(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ze(s.integerValue||s.doubleValue),u=Ze(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Uv(t.timestampValue,e.timestampValue);case 4:return Uv(fl(t),fl(e));case 5:return Of(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Si(s),u=Si(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=me(l[c],u[c]);if(h!==0)return h}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=me(Ze(s.latitude),Ze(o.latitude));return l!==0?l:me(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const f=s.fields||{},m=o.fields||{},T=(l=f[bc])===null||l===void 0?void 0:l.arrayValue,S=(u=m[bc])===null||u===void 0?void 0:u.arrayValue,R=me(((c=T==null?void 0:T.values)===null||c===void 0?void 0:c.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:zv(T,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Tu.mapValue&&o===Tu.mapValue)return 0;if(s===Tu.mapValue)return 1;if(o===Tu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=Of(u[f],h[f]);if(m!==0)return m;const T=So(l[u[f]],c[h[f]]);if(T!==0)return T}return me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw le(23264,{le:n})}}function Uv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Ii(t),r=Ii(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function zv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=So(n[i],r[i]);if(s)return s}return me(n.length,r.length)}function Ao(t){return Vf(t)}function Vf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ii(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Vf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Vf(n.fields[o])}`;return i+"}"}(t.mapValue):le(61005,{value:t})}function Hu(t){switch(Ai(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pd(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return Si(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Hu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Li(r.fields,(s,o)=>{i+=s.length+Hu(o)}),i}(t.mapValue);default:throw le(13486,{value:t})}}function Bv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lf(t){return!!t&&"integerValue"in t}function pm(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function Hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function FN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[vT])===null||n===void 0?void 0:n.stringValue)===_T}function ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Li(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ja(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ja(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Li(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xt(ja(this.value))}}function wT(t){const e=[];return Li(t.fields,(n,r)=>{const i=new Ct([n]);if(Wu(r)){const s=wT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,de.min(),de.min(),de.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,i){return new Mt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Mt(e,2,n,de.min(),de.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,de.min(),de.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.position=e,this.inclusive=n}}function Wv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=So(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n="asc"){this.field=e,this.dir=n}}function zN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{}class ot extends ET{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $N(e,n,r):n==="array-contains"?new qN(e,r):n==="in"?new KN(e,r):n==="not-in"?new GN(e,r):n==="array-contains-any"?new QN(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HN(e,r):new WN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(So(n,this.value)):n!==null&&Ai(this.value)===Ai(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends ET{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new zn(e,n)}matches(e){return TT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function TT(t){return t.op==="and"}function IT(t){return BN(t)&&TT(t)}function BN(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function Mf(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(IT(t))return t.filters.map(e=>Mf(e)).join(",");{const e=t.filters.map(n=>Mf(n)).join(",");return`${t.op}(${e})`}}function ST(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)}(t,e):t instanceof zn?function(r,i){return i instanceof zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&ST(o,i.filters[l]),!0):!1}(t,e):void le(19439)}function AT(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(AT).join(" ,")+"}"}(t):"Filter"}class $N extends ot{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class HN extends ot{constructor(e,n){super(e,"in",n),this.keys=CT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WN extends ot{constructor(e,n){super(e,"not-in",n),this.keys=CT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class qN extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pm(n)&&ml(n.arrayValue,this.value)}}class KN extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ml(this.value.arrayValue,n)}}class GN extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ml(this.value.arrayValue,n)}}class QN extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ml(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Pe=null}}function Kv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new YN(t,e,n,r,i,s,o)}function mm(t){const e=he(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ao(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ao(r)).join(",")),e.Pe=n}return e.Pe}function gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ST(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qv(t.startAt,e.startAt)&&qv(t.endAt,e.endAt)}function jf(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function XN(t,e,n,r,i,s,o,l){return new Uo(t,e,n,r,i,s,o,l)}function ym(t){return new Uo(t)}function Gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xT(t){return t.collectionGroup!==null}function Fa(t){const e=he(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(Ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new gl(s,r))}),n.has(Ct.keyField().canonicalString())||e.Te.push(new gl(Ct.keyField(),r))}return e.Te}function tr(t){const e=he(t);return e.Ie||(e.Ie=JN(e,Fa(t))),e.Ie}function JN(t,e){if(t.limitType==="F")return Kv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new gl(i.field,s)});const n=t.endAt?new Oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oc(t.startAt.position,t.startAt.inclusive):null;return Kv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ff(t,e){const n=t.filters.concat([e]);return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uf(t,e,n){return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function md(t,e){return gm(tr(t),tr(e))&&t.limitType===e.limitType}function RT(t){return`${mm(tr(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AT(i)).join(", ")}]`),fd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ao(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ao(i)).join(",")),`Target(${r})`}(tr(t))}; limitType=${t.limitType})`}function gd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Fa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Wv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Fa(r),i)||r.endAt&&!function(o,l,u){const c=Wv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Fa(r),i))}(t,e)}function ZN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PT(t){return(e,n)=>{let r=!1;for(const i of Fa(t)){const s=eD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eD(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?So(u,c):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Qe(se.comparator);function Nr(){return tD}const kT=new Qe(se.comparator);function Sa(...t){let e=kT;for(const n of t)e=e.insert(n.key,n);return e}function NT(t){let e=kT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return Ua()}function DT(){return Ua()}function Ua(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const nD=new Qe(se.comparator),rD=new pt(se.comparator);function we(...t){let e=rD;for(const n of t)e=e.add(n);return e}const iD=new pt(me);function sD(){return iD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function bT(t){return{integerValue:""+t}}function oD(t,e){return bN(e)?bT(e):vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function aD(t,e,n){return t instanceof yl?function(i,s){const o={fields:{[mT]:{stringValue:pT},[yT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fm(s)&&(s=pd(s)),s&&(o.fields[gT]=s),{mapValue:o}}(n,e):t instanceof vl?VT(t,e):t instanceof _l?LT(t,e):function(i,s){const o=OT(i,s),l=Qv(o)+Qv(i.Ee);return Lf(o)&&Lf(i.Ee)?bT(l):vm(i.serializer,l)}(t,e)}function lD(t,e,n){return t instanceof vl?VT(t,e):t instanceof _l?LT(t,e):n}function OT(t,e){return t instanceof Vc?function(r){return Lf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class yl extends yd{}class vl extends yd{constructor(e){super(),this.elements=e}}function VT(t,e){const n=MT(e);for(const r of t.elements)n.some(i=>sr(i,r))||n.push(r);return{arrayValue:{values:n}}}class _l extends yd{constructor(e){super(),this.elements=e}}function LT(t,e){let n=MT(e);for(const r of t.elements)n=n.filter(i=>!sr(i,r));return{arrayValue:{values:n}}}class Vc extends yd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Qv(t){return Ze(t.integerValue||t.doubleValue)}function MT(t){return pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n){this.field=e,this.transform=n}}function cD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vl&&i instanceof vl||r instanceof _l&&i instanceof _l?Io(r.elements,i.elements,sr):r instanceof Vc&&i instanceof Vc?sr(r.Ee,i.Ee):r instanceof yl&&i instanceof yl}(t.transform,e.transform)}class dD{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vd{}function jT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _m(t.key,Tn.none()):new bl(t.key,t.data,Tn.none());{const n=t.data,r=Xt.empty();let i=new pt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mi(t.key,r,new cn(i.toArray()),Tn.none())}}function hD(t,e,n){t instanceof bl?function(i,s,o){const l=i.value.clone(),u=Xv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Mi?function(i,s,o){if(!qu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Xv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(FT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n,r){return t instanceof bl?function(s,o,l,u){if(!qu(s.precondition,o))return l;const c=s.value.clone(),h=Jv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mi?function(s,o,l,u){if(!qu(s.precondition,o))return l;const c=Jv(s.fieldTransforms,u,o),h=o.data;return h.setAll(FT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,l){return qu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function fD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OT(r.transform,i||null);s!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,s))}return n||null}function Yv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Io(r,i,(s,o)=>cD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bl extends vd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mi extends vd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xv(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,lD(o,l,n[i]))}return r}function Jv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,aD(s,o,e))}return r}class _m extends vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pD extends vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=jT(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(n,r)=>Yv(n,r))&&Io(this.baseMutations,e.baseMutations,(n,r)=>Yv(n,r))}}class wm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return nD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,Ie;function vD(t){switch(t){case U.OK:return le(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function UT(t){if(t===void 0)return kr("GRPC error has no .code"),U.UNKNOWN;switch(t){case rt.OK:return U.OK;case rt.CANCELLED:return U.CANCELLED;case rt.UNKNOWN:return U.UNKNOWN;case rt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case rt.INTERNAL:return U.INTERNAL;case rt.UNAVAILABLE:return U.UNAVAILABLE;case rt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case rt.NOT_FOUND:return U.NOT_FOUND;case rt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case rt.ABORTED:return U.ABORTED;case rt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case rt.DATA_LOSS:return U.DATA_LOSS;default:return le(39323,{code:t})}}(Ie=rt||(rt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new gi([4294967295,4294967295],0);function Zv(t){const e=lT().encode(t),n=new eT;return n.update(e),new Uint8Array(n.digest())}function e_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gi([n,r],0),new gi([i,s],0)]}class Em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Aa(`Invalid padding: ${n}`);if(r<0)throw new Aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=gi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(gi.fromNumber(r)));return i.compare(_D)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Zv(e),[r,i]=e_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Em(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=Zv(e),[r,i]=e_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _d(de.min(),i,new Qe(me),Nr(),we())}}class Ol{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ol(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class zT{constructor(e,n){this.targetId=e,this.De=n}}class BT{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class t_{constructor(){this.ve=0,this.Ce=n_(),this.Fe=Pt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=we(),n=we(),r=we();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le(38017,{changeType:s})}}),new Ol(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=n_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class wD{constructor(e){this.We=e,this.Ge=new Map,this.ze=Nr(),this.je=Iu(),this.Je=Iu(),this.He=new Qe(me)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(jf(s))if(r===0){const o=new se(s.path);this.Xe(n,o,Mt.newNoDocument(o,de.min()))}else Re(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),u=l?this.ut(l,e,o):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Si(r).toUint8Array()}catch(u){if(u instanceof fT)return Ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Em(o,i,s)}catch(u){return Ei(u instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const l=this.st(o);if(l){if(s.current&&jf(l.target)){const u=new se(l.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Mt.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=we();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new _d(e,n,this.He,this.ze,r);return this.ze=Nr(),this.je=Iu(),this.Je=Iu(),this.He=new Qe(me),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new t_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new pt(me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new pt(me),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new t_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Iu(){return new Qe(se.comparator)}function n_(){return new Qe(se.comparator)}const ED={asc:"ASCENDING",desc:"DESCENDING"},TD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ID={and:"AND",or:"OR"};class SD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zf(t,e){return t.useProto3Json||fd(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $T(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AD(t,e){return Lc(t,e.toTimestamp())}function nr(t){return Re(!!t,49232),de.fromTimestamp(function(n){const r=Ii(n);return new Ue(r.seconds,r.nanos)}(t))}function Tm(t,e){return Bf(t,e).canonicalString()}function Bf(t,e){const n=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HT(t){const e=Ve.fromString(t);return Re(QT(e),10190,{key:e.toString()}),e}function $f(t,e){return Tm(t.databaseId,e.path)}function Ih(t,e){const n=HT(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(qT(n))}function WT(t,e){return Tm(t.databaseId,e)}function CD(t){const e=HT(t);return e.length===4?Ve.emptyPath():qT(e)}function Hf(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qT(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function r_(t,e,n){return{name:$f(t,e),fields:n.value.mapValue.fields}}function xD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Re(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?U.UNKNOWN:UT(c.code);return new Y(h,c.message||"")}(o);n=new BT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ih(t,r.document.name),s=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):de.min(),l=new Xt({mapValue:{fields:r.document.fields}}),u=Mt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Ku(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ih(t,r.document),s=r.readTime?nr(r.readTime):de.min(),o=Mt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ku([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ih(t,r.document),s=r.removedTargetIds||[];n=new Ku([],s,i,null)}else{if(!("filter"in e))return le(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new yD(i,s),l=r.targetId;n=new zT(l,o)}}return n}function RD(t,e){let n;if(e instanceof bl)n={update:r_(t,e.key,e.value)};else if(e instanceof _m)n={delete:$f(t,e.key)};else if(e instanceof Mi)n={update:r_(t,e.key,e.data),updateMask:MD(e.fieldMask)};else{if(!(e instanceof pD))return le(16599,{Rt:e.type});n={verify:$f(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vc)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw le(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le(27497)}(t,e.precondition)),n}function PD(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?nr(i.updateTime):nr(s);return o.isEqual(de.min())&&(o=nr(s)),new dD(o,i.transformResults||[])}(n,e))):[]}function kD(t,e){return{documents:[WT(t,e.path)]}}function ND(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WT(t,i);const s=function(c){if(c.length!==0)return GT(zn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Us(m.field),direction:OD(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=zf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function DD(t){let e=CD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=KT(f);return m instanceof zn&&IT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(S){return new gl(zs(S.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,fd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,T=f.values||[];return new Oc(T,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,T=f.values||[];return new Oc(T,m)}(n.endAt)),XN(e,i,o,s,l,"F",u,c)}function bD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(r=>KT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function OD(t){return ED[t]}function VD(t){return TD[t]}function LD(t){return ID[t]}function Us(t){return{fieldPath:t.canonicalString()}}function zs(t){return Ct.fromServerFormat(t.fieldPath)}function GT(t){return t instanceof ot?function(n){if(n.op==="=="){if(Hv(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hv(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:VD(n.op),value:n.value}}}(t):t instanceof zn?function(n){const r=n.getFilters().map(i=>GT(i));return r.length===1?r[0]:{compositeFilter:{op:LD(n.op),filters:r}}}(t):le(54877,{filter:t})}function MD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,i,s=de.min(),o=de.min(),l=Pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.gt=e}}function FD(t){const e=DD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.Dn=new zD}addToCollectionParentIndex(e,n){return this.Dn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ti.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class zD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YT=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(YT,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Co(0)}static ur(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="LruGarbageCollector",BD=1048576;function o_([t,e],[n,r]){const i=me(t,n);return i===0?me(e,r):i}class $D{constructor(e){this.Tr=e,this.buffer=new pt(o_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();o_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(s_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fo(n)?X(s_,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Rr(3e5)})}}class WD{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(hd.ue);const r=new $D(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(i_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),js()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function qD(t,e){return new WD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&za(r.mutation,i,cn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=ns();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Sa();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Nr();const o=Ua(),l=function(){return Ua()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Mi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),za(h.mutation,c,h.mutation.getFieldMask(),Ue.now())):o.set(c.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return l.set(c,new GD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ua();let i=new Qe((o,l)=>o-l),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||cn.empty();h=l.applyToLocalView(c,h),r.set(u,h);const f=(i.get(l.batchId)||we()).add(u);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=DT();h.forEach(m=>{if(!s.has(m)){const T=jT(n.get(m),r.get(m));T!==null&&f.set(m,T),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(ns());let l=hl,u=s;return o.next(c=>B.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,we())).next(h=>({batchId:l,changes:NT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=Sa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Sa();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,u=>{const c=function(f,m){return new Uo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Mt.newInvalidDocument(h)))});let l=Sa();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&za(h.mutation,c,cn.empty(),Ue.now()),gd(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return B.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:FD(i.bundledQuery),readTime:nr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.overlays=new Qe(se.comparator),this.kr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=ns(),s=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ns(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=ns(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return B.resolve(l)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gD(n,r));let s=this.kr.get(n);s===void 0&&(s=we(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.qr=new pt(mt.Qr),this.$r=new pt(mt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new mt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new se(new Ve([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new se(new Ve([])),r=new mt(n,e),i=new mt(n,e+1);let s=we();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return se.comparator(e.key,n.key)||me(e.Hr,n.Hr)}static Ur(e,n){return me(e.Hr,n.Hr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new pt(mt.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mD(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Yr=this.Yr.add(new mt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?hm:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const l=this.Zr(o.Hr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(me);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],l=>{r=r.add(l.Hr)})}),B.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new mt(new se(s),0);let l=new pt(me);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Hr)),!0)},o),B.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return B.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new mt(n,0),i=this.Yr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.ni=e,this.docs=function(){return new Qe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Mt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nr();const o=n.path,l=new se(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PN(RN(h),r)<=0||(i.has(h.key)||gd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le(9500)}ri(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tb(this)}getSize(e){return B.resolve(this.size)}}class tb extends KD{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.persistence=e,this.ii=new Es(n=>mm(n),gm),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.si=0,this.oi=new Im,this.targetCount=0,this._i=Co.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),B.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.hr(n),B.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n){this.ai={},this.overlays={},this.ui=new hd(0),this.ci=!1,this.ci=!0,this.li=new JD,this.referenceDelegate=e(this),this.hi=new nb(this),this.indexManager=new UD,this.remoteDocumentCache=function(i){return new eb(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new jD(n),this.Ti=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new ZD(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new rb(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return B.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class rb extends NN{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ai=new Im,this.Ri=null}static Vi(e){return new Sm(e)}get mi(){if(this.Ri)return this.Ri;throw le(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,r=>{const i=se.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return B.or([()=>B.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Mc{constructor(e,n){this.persistence=e,this.gi=new Es(r=>ON(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qD(this,n)}static Vi(e,n){return new Mc(e,n)}Ii(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return B.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hu(e.data.value)),n}Sr(e,n,r){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Am(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Fx()?8:DN(Ft())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ib;return this.ws(e,n,o).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(js()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(js()<=_e.DEBUG&&X("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(js()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):B.resolve())}ps(e,n){if(Gv(n))return B.resolve(null);let r=tr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Uf(n,null,"F"),r=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,l);return this.Ds(n,c,o,u.readTime)?this.ps(e,Uf(n,null,"F")):this.vs(e,c,n,u)}))})))}ys(e,n,r,i){return Gv(n)||i.isEqual(de.min())?B.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?B.resolve(null):(js()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fs(n)),this.vs(e,o,n,xN(i,hl)).next(l=>l))})}bs(e,n){let r=new pt(PT(e));return n.forEach((i,s)=>{gd(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return js()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.gs.getDocumentsMatchingQuery(e,n,Ti.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LocalStore",ob=3e8;class ab{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Qe(me),this.Ms=new Es(s=>mm(s),gm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QD(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function lb(t,e,n,r){return new ab(t,e,n,r)}async function JT(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:l}))})})}function ub(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,m=f.keys();let T=B.resolve();return m.forEach(S=>{T=T.next(()=>h.getEntry(u,S)).next(R=>{const b=c.docVersions.get(S);Re(b!==null,48541),R.version.compareTo(b)<0&&(f.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),h.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=we();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZT(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function cb(t,e){const n=he(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;l.push(n.hi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,f)));let T=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?T=T.withResumeToken(Pt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(f,T),function(R,b,A){return R.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=ob?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,T,h)&&l.push(n.hi.updateTargetData(s,T))});let u=Nr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(db(s,o,e.documentUpdates).next(h=>{u=h.Ls,c=h.ks})),!r.isEqual(de.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(f=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Fs=i,s))}function db(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X(Cm,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function hb(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fb(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Wf(t,e,n){const r=he(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fo(o))throw o;X(Cm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function a_(t,e,n){const r=he(t);let i=de.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=he(u),m=f.Ms.get(h);return m!==void 0?B.resolve(f.Fs.get(m)):f.hi.getTargetData(c,h)}(r,o,tr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:we())).next(l=>(pb(r,ZN(e),l),{documents:l,qs:s})))}function pb(t,e,n){let r=t.xs.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class l_{constructor(){this.activeTargetIds=sD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mb{constructor(){this.Fo=new l_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new l_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="ConnectivityMonitor";class c_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(u_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){X(u_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=null;function qf(){return Su===null?Su=function(){return 268435456+Math.round(2147483648*Math.random())}():Su++,"0x"+Su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="RestConnection",yb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vb{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=qf(),l=this.Go(e,n.toUriEncodedString());X(Sh,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);const{host:c}=new URL(l),h=bo(c);return this.jo(e,l,u,r,h).then(f=>(X(Sh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ei(Sh,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=yb[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class wb extends vb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=qf();return new Promise((l,u)=>{const c=new tT;c.setWithCredentials(!0),c.listenOnce(nT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $u.NO_ERROR:const f=c.getResponseJson();X(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case $u.TIMEOUT:X(Ot,`RPC '${e}' ${o} timed out`),u(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const m=c.getStatus();if(X(Ot,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let T=c.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const R=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(S.status);u(new Y(R,S.message))}else u(new Y(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(U.UNAVAILABLE,"Connection failed."));break;default:le(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{X(Ot,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);X(Ot,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}P_(e,n,r){const i=qf(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sT(),l=iT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");X(Ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);this.T_(f);let m=!1,T=!1;const S=new _b({Ho:b=>{T?X(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(X(Ot,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),X(Ot,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Yo:()=>f.close()}),R=(b,A,w)=>{b.listen(A,C=>{try{w(C)}catch(L){setTimeout(()=>{throw L},0)}})};return R(f,Ia.EventType.OPEN,()=>{T||(X(Ot,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),R(f,Ia.EventType.CLOSE,()=>{T||(T=!0,X(Ot,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(f))}),R(f,Ia.EventType.ERROR,b=>{T||(T=!0,Ei(Ot,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),S.__(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ia.EventType.MESSAGE,b=>{var A;if(!T){const w=b.data[0];Re(!!w,16349);const C=w,L=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(L){X(Ot,`RPC '${e}' stream ${i} received error:`,L);const z=L.status;let F=function(E){const I=rt[E];if(I!==void 0)return UT(I)}(z),g=L.message;F===void 0&&(F=U.INTERNAL,g="Unknown error status: "+z+" with message "+L.message),T=!0,S.__(new Y(F,g)),f.close()}else X(Ot,`RPC '${e}' stream ${i} received:`,w),S.a_(w)}}),R(l,rT.STAT_EVENT,b=>{b.stat===bf.PROXY?X(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===bf.NOPROXY&&X(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){return new SD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="PersistentStream";class tI{constructor(e,n,r,i,s,o,l,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return X(d_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(X(d_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Eb extends tI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=xD(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?nr(o.readTime):de.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Hf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=jf(u)?{documents:kD(s,u)}:{query:ND(s,u).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$T(s,o.resumeToken);const c=zf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=Lc(s,o.snapshotVersion.toTimestamp());const c=zf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=bD(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Hf(this.serializer),n.removeTarget=e,this.k_(n)}}class Tb extends tI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=PD(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Hf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RD(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{}class Sb extends Ib{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Bf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(U.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,Bf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Ab{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kr(n),this._a=!1):X("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class Cb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ts(this)&&(X(gs,"Restarting streams for network reachability change."),await async function(u){const c=he(u);c.Ia.add(4),await Vl(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Ed(c)}(this))})}),this.Aa=new Ab(r,i)}}async function Ed(t){if(Ts(t))for(const e of t.da)await e(!0)}async function Vl(t){for(const e of t.da)await e(!1)}function nI(t,e){const n=he(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),km(n)?Pm(n):zo(n).x_()&&Rm(n,e))}function xm(t,e){const n=he(t),r=zo(n);n.Ta.delete(e),r.x_()&&rI(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ts(n)&&n.Aa.set("Unknown"))}function Rm(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(t).H_(e)}function rI(t,e){t.Ra.$e(e),zo(t).Y_(e)}function Pm(t){t.Ra=new wD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),zo(t).start(),t.Aa.aa()}function km(t){return Ts(t)&&!zo(t).M_()&&t.Ta.size>0}function Ts(t){return he(t).Ia.size===0}function iI(t){t.Ra=void 0}async function xb(t){t.Aa.set("Online")}async function Rb(t){t.Ta.forEach((e,n)=>{Rm(t,e)})}async function Pb(t,e){iI(t),km(t)?(t.Aa.la(e),Pm(t)):t.Aa.set("Unknown")}async function kb(t,e,n){if(t.Aa.set("Online"),e instanceof BT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ta.delete(l),i.Ra.removeTarget(l))}(t,e)}catch(r){X(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jc(t,r)}else if(e instanceof Ku?t.Ra.Ye(e):e instanceof zT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(de.min()))try{const r=await ZT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Ra.Pt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.Ta.get(u);if(!h)return;s.Ta.set(u,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),rI(s,u);const f=new ri(h.target,u,c,h.sequenceNumber);Rm(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(gs,"Failed to raise snapshot:",r),await jc(t,r)}}async function jc(t,e,n){if(!Fo(e))throw e;t.Ia.add(1),await Vl(t),t.Aa.set("Offline"),n||(n=()=>ZT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(gs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ed(t)})}function sI(t,e){return e().catch(n=>jc(t,n,e))}async function Td(t){const e=he(t),n=Ci(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hm;for(;Nb(e);)try{const i=await hb(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Db(e,i)}catch(i){await jc(e,i)}oI(e)&&aI(e)}function Nb(t){return Ts(t)&&t.Pa.length<10}function Db(t,e){t.Pa.push(e);const n=Ci(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function oI(t){return Ts(t)&&!Ci(t).M_()&&t.Pa.length>0}function aI(t){Ci(t).start()}async function bb(t){Ci(t).na()}async function Ob(t){const e=Ci(t);for(const n of t.Pa)e.X_(n.mutations)}async function Vb(t,e,n){const r=t.Pa.shift(),i=wm.from(r,e,n);await sI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Td(t)}async function Lb(t,e){e&&Ci(t).Z_&&await async function(r,i){if(function(o){return vD(o)&&o!==U.ABORTED}(i.code)){const s=r.Pa.shift();Ci(r).N_(),await sI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Td(r)}}(t,e),oI(t)&&aI(t)}async function h_(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(gs,"RemoteStore received new credentials");const r=Ts(n);n.Ia.add(3),await Vl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ed(n)}async function Mb(t,e){const n=he(t);e?(n.Ia.delete(2),await Ed(n)):e||(n.Ia.add(2),await Vl(n),n.Aa.set("Unknown"))}function zo(t){return t.Va||(t.Va=function(n,r,i){const s=he(n);return s.ia(),new Eb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:xb.bind(null,t),e_:Rb.bind(null,t),n_:Pb.bind(null,t),J_:kb.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),km(t)?Pm(t):t.Aa.set("Unknown")):(await t.Va.stop(),iI(t))})),t.Va}function Ci(t){return t.ma||(t.ma=function(n,r,i){const s=he(n);return s.ia(),new Tb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:bb.bind(null,t),n_:Lb.bind(null,t),ea:Ob.bind(null,t),ta:Vb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Td(t)):(await t.ma.stop(),t.Pa.length>0&&(X(gs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Nm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(kr("AsyncQueue",`${e}: ${t}`),Fo(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Sa(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.fa=new Qe(se.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):le(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class xo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xo(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Fb{constructor(){this.queries=p_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=p_(),s.forEach((o,l)=>{for(const u of l.wa)u.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function p_(){return new Es(t=>RT(t),md)}async function lI(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new jb,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Dm(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&bm(n)}async function uI(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ub(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.wa)l.Ca(i)&&(r=!0);o.ya=i}}r&&bm(n)}function zb(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function bm(t){t.Da.forEach(e=>{e.next()})}var Kf,m_;(m_=Kf||(Kf={})).Fa="default",m_.Cache="cache";class cI{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.key=e}}class hI{constructor(e){this.key=e}}class Bb{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=we(),this.mutatedKeys=we(),this.Xa=PT(e),this.eu=new co(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new f_,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),T=gd(this.query,f)?f:null,S=!!m&&this.mutatedKeys.has(m.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let b=!1;m&&T?m.data.isEqual(T.data)?S!==R&&(r.track({type:3,doc:T}),b=!0):this.iu(m,T)||(r.track({type:2,doc:T}),b=!0,(u&&this.Xa(T,u)>0||c&&this.Xa(T,c)<0)&&(l=!0)):!m&&T?(r.track({type:0,doc:T}),b=!0):m&&!T&&(r.track({type:1,doc:m}),b=!0,(u||c)&&(l=!0)),b&&(T?(o=o.add(T),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(T,S){const R=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{At:b})}};return R(T)-R(S)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(r),i=i!=null&&i;const l=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,c=u!==this.Ya;return this.Ya=u,o.length!==0||c?{snapshot:new xo(this.query,e.eu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new f_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=we(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new hI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new dI(r))}),n}uu(e){this.Ha=e.qs,this.Za=we();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return xo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Om="SyncEngine";class $b{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Hb{constructor(e){this.key=e,this.lu=!1}}class Wb{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Es(l=>RT(l),md),this.Tu=new Map,this.Iu=new Set,this.du=new Qe(se.comparator),this.Eu=new Map,this.Au=new Im,this.Ru={},this.Vu=new Map,this.mu=Co.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qb(t,e,n=!0){const r=vI(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await fI(r,e,n,!0),i}async function Kb(t,e){const n=vI(t);await fI(n,e,!0,!1)}async function fI(t,e,n,r){const i=await fb(t.localStore,tr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await Gb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&nI(t.remoteStore,i),l}async function Gb(t,e,n,r,i){t.gu=(f,m,T)=>async function(R,b,A,w){let C=b.view.nu(A);C.Ds&&(C=await a_(R.localStore,b.query,!1).then(({documents:g})=>b.view.nu(g,C)));const L=w&&w.targetChanges.get(b.targetId),z=w&&w.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(C,R.isPrimaryClient,L,z);return y_(R,b.targetId,F._u),F.snapshot}(t,f,m,T);const s=await a_(t.localStore,e,!0),o=new Bb(e,s.qs),l=o.nu(s.documents),u=Ol.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);y_(t,n,c._u);const h=new $b(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function Qb(t,e,n){const r=he(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!md(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xm(r.remoteStore,i.targetId),Gf(r,i.targetId)}).catch(jo)):(Gf(r,i.targetId),await Wf(r.localStore,i.targetId,!0))}async function Yb(t,e){const n=he(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xm(n.remoteStore,r.targetId))}async function Xb(t,e,n){const r=i2(t);try{const i=await function(o,l){const u=he(o),c=Ue.now(),h=l.reduce((T,S)=>T.add(S.key),we());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=Nr(),R=we();return u.Os.getEntries(T,h).next(b=>{S=b,S.forEach((A,w)=>{w.isValidDocument()||(R=R.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,S)).next(b=>{f=b;const A=[];for(const w of l){const C=fD(w,f.get(w.key).overlayedDocument);C!=null&&A.push(new Mi(w.key,C,wT(C.value.mapValue),Tn.exists(!0)))}return u.mutationQueue.addMutationBatch(T,c,A,l)}).next(b=>{m=b;const A=b.applyToLocalDocumentSet(f,R);return u.documentOverlayCache.saveOverlays(T,b.batchId,A)})}).then(()=>({batchId:m.batchId,changes:NT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ru[o.currentUser.toKey()];c||(c=new Qe(me)),c=c.insert(l,u),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ll(r,i.changes),await Td(r.remoteStore)}catch(i){const s=Dm(i,"Failed to persist write");n.reject(s)}}async function pI(t,e){const n=he(t);try{const r=await cb(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Re(o.lu,14607):i.removedDocuments.size>0&&(Re(o.lu,42227),o.lu=!1))}),await Ll(n,r,e)}catch(r){await jo(r)}}function g_(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=he(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.wa)m.va(l)&&(c=!0)}),c&&bm(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jb(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Qe(se.comparator);o=o.insert(s,Mt.newNoDocument(s,de.min()));const l=we().add(s),u=new _d(de.min(),new Map,new Qe(me),o,l);await pI(r,u),r.du=r.du.remove(s),r.Eu.delete(e),Vm(r)}else await Wf(r.localStore,e,!1).then(()=>Gf(r,e,n)).catch(jo)}async function Zb(t,e){const n=he(t),r=e.batch.batchId;try{const i=await ub(n.localStore,e);gI(n,r,null),mI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ll(n,i)}catch(i){await jo(i)}}async function e2(t,e,n){const r=he(t);try{const i=await function(o,l){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(Re(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);gI(r,e,n),mI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ll(r,i)}catch(i){await jo(i)}}function mI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function gI(t,e,n){const r=he(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Gf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||yI(t,r)})}function yI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vm(t))}function y_(t,e,n){for(const r of n)r instanceof dI?(t.Au.addReference(r.key,e),t2(t,r)):r instanceof hI?(X(Om,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||yI(t,r.key)):le(19791,{yu:r})}function t2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(X(Om,"New document in limbo: "+n),t.Iu.add(r),Vm(t))}function Vm(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new se(Ve.fromString(e)),r=t.mu.next();t.Eu.set(r,new Hb(n)),t.du=t.du.insert(n,r),nI(t.remoteStore,new ri(tr(ym(n.path)),r,"TargetPurposeLimboResolution",hd.ue))}}async function Ll(t,e,n){const r=he(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,u)=>{o.push(r.gu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Am.Es(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await async function(u,c){const h=he(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.Is,T=>h.persistence.referenceDelegate.addReference(f,m.targetId,T)).next(()=>B.forEach(m.ds,T=>h.persistence.referenceDelegate.removeReference(f,m.targetId,T)))))}catch(f){if(!Fo(f))throw f;X(Cm,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const T=h.Fs.get(m),S=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,R)}}}(r.localStore,s))}async function n2(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(Om,"User change. New user:",e.toKey());const r=await JT(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(l=>{l.forEach(u=>{u.reject(new Y(U.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ll(n,r.Bs)}}function r2(t,e){const n=he(t),r=n.Eu.get(e);if(r&&r.lu)return we().add(r.key);{let i=we();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const l=n.Pu.get(o);i=i.unionWith(l.view.tu)}return i}}function vI(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jb.bind(null,e),e.hu.J_=Ub.bind(null,e.eventManager),e.hu.pu=zb.bind(null,e.eventManager),e}function i2(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e2.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return lb(this.persistence,new sb,e.initialUser,this.serializer)}Du(e){return new XT(Sm.Vi,this.serializer)}bu(e){return new mb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class s2 extends Fc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Re(this.persistence.referenceDelegate instanceof Mc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new HD(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new XT(r=>Mc.Vi(r,n),this.serializer)}}class Qf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n2.bind(null,this.syncEngine),await Mb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Fb}()}createDatastore(e){const n=wd(e.databaseInfo.databaseId),r=function(s){return new wb(s)}(e.databaseInfo);return function(s,o,l,u){return new Sb(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new Cb(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return c_.C()?new c_:new gb}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const f=new Wb(i,s,o,l,u,c);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);X(gs,"RemoteStore shutting down."),s.Ia.add(5),await Vl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qf.provider={build:()=>new Qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class o2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X(xi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(xi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ch(t,e){t.asyncQueue.verifyOperationInProgress(),X(xi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ei("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ei("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function v_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await a2(t);X(xi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>h_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>h_(e.remoteStore,i)),t._onlineComponents=e}async function a2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(xi,"Using user provided OfflineComponentProvider");try{await Ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ei("Error using user provided cache. Falling back to memory cache: "+n),await Ch(t,new Fc)}}else X(xi,"Using default OfflineComponentProvider"),await Ch(t,new s2(void 0));return t._offlineComponents}async function wI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(xi,"Using user provided OnlineComponentProvider"),await v_(t,t._uninitializedComponentsProvider._online)):(X(xi,"Using default OnlineComponentProvider"),await v_(t,new Qf))),t._onlineComponents}function l2(t){return wI(t).then(e=>e.syncEngine)}async function EI(t){const e=await wI(t),n=e.eventManager;return n.onListen=qb.bind(null,e.syncEngine),n.onUnlisten=Qb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yb.bind(null,e.syncEngine),n}function u2(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new _I({next:m=>{h.Ou(),o.enqueueAndForget(()=>uI(s,f));const T=m.docs.has(l);!T&&m.fromCache?c.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&m.fromCache&&u&&u.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new cI(ym(l.path),h,{includeMetadataChanges:!0,ka:!0});return lI(s,f)}(await EI(t),t.asyncQueue,e,n,r)),r.promise}function c2(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new _I({next:m=>{h.Ou(),o.enqueueAndForget(()=>uI(s,f)),m.fromCache&&u.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new cI(l,h,{includeMetadataChanges:!0,ka:!0});return lI(s,f)}(await EI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firestore.googleapis.com",w_=!0;class E_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=II,this.ssl=w_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:w_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BD)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yN;switch(r.type){case"firstParty":return new EN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=__.get(n);r&&(X("ComponentProvider","Removing Datastore"),__.delete(n),r.terminate())}(this),Promise.resolve()}}function d2(t,e,n,r={}){var i;t=Un(t,Id);const s=bo(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(fE(`https://${u}`),pE("Firestore",!0)),o.host!==II&&o.host!==u&&Ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!hs(c,l)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Vt.MOCK_USER;else{h=kx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vt(m)}t._authCredentials=new vN(new aT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dl(n,tt._jsonSchema))return new tt(e,r||null,new se(Ve.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:at("string",tt._jsonSchemaVersion),referencePath:at("string")};class yi extends Is{constructor(e,n,r){super(e,n,ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new se(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Ht(t,e,...n){if(t=_t(t),uT("collection","path",e),t instanceof Id){const r=Ve.fromString(e,...n);return Ov(r),new yi(t,null,r)}{if(!(t instanceof tt||t instanceof yi))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Ov(r),new yi(t.firestore,null,r)}}function ar(t,e,...n){if(t=_t(t),arguments.length===1&&(e=dm.newId()),uT("doc","path",e),t instanceof Id){const r=Ve.fromString(e,...n);return bv(r),new tt(t,null,new se(r))}{if(!(t instanceof tt||t instanceof yi))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return bv(r),new tt(t.firestore,t instanceof yi?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="AsyncQueue";class I_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eI(this,"async_queue_retry"),this.oc=()=>{const r=Ah();r&&X(T_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Tr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fo(e))throw e;X(T_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kr("INTERNAL UNHANDLED ERROR: ",S_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Nm.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&le(47125,{hc:S_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function S_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ss extends Id{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new I_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I_(e),this._firestoreClient=void 0,await e}}}function h2(t,e){const n=typeof t=="object"?t:vE(),r=typeof t=="string"?t:Dc,i=em(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Rx("firestore");s&&d2(i,...s)}return i}function Lm(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||f2(t),t._firestoreClient}function f2(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new MN(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new o2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Pt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:at("string",_n._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:at("string",rr._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ir(e.vectorValues);throw new Y(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ir._jsonSchemaVersion="firestore/vectorValue/1.0",ir._jsonSchema={type:at("string",ir._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=/^__.*__$/;class m2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bl(e,this.data,n,this.fieldTransforms)}}class SI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ec:t})}}class Mm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Uc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(AI(this.Ec)&&p2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class g2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wd(e)}Dc(e,n,r,i=!1){return new Mm({Ec:e,methodName:n,bc:r,path:Ct.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cd(t){const e=t._freezeSettings(),n=wd(t._databaseId);return new g2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CI(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Fm("Data must be an object, but it was:",o,r);const l=xI(r,o);let u,c;if(s.merge)u=new cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=Yf(e,f,n);if(!o.contains(m))throw new Y(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PI(h,m)||h.push(m)}u=new cn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new m2(new Xt(l),u,c)}class xd extends Ad{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}class jm extends Ad{_toFieldTransform(e){return new uD(e.path,new yl)}isEqual(e){return e instanceof jm}}function y2(t,e,n,r){const i=t.Dc(1,e,n);Fm("Data must be an object, but it was:",i,r);const s=[],o=Xt.empty();Li(r,(u,c)=>{const h=Um(e,u,n);c=_t(c);const f=i.gc(h);if(c instanceof xd)s.push(h);else{const m=Ml(c,f);m!=null&&(s.push(h),o.set(h,m))}});const l=new cn(s);return new SI(o,l,i.fieldTransforms)}function v2(t,e,n,r,i,s){const o=t.Dc(1,e,n),l=[Yf(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Yf(e,s[m])),u.push(s[m+1]);const c=[],h=Xt.empty();for(let m=l.length-1;m>=0;--m)if(!PI(c,l[m])){const T=l[m];let S=u[m];S=_t(S);const R=o.gc(T);if(S instanceof xd)c.push(T);else{const b=Ml(S,R);b!=null&&(c.push(T),h.set(T,b))}}const f=new cn(c);return new SI(h,f,o.fieldTransforms)}function _2(t,e,n,r=!1){return Ml(n,t.Dc(r?4:3,e))}function Ml(t,e){if(RI(t=_t(t)))return Fm("Unsupported field value:",e,t),xI(t,e);if(t instanceof Ad)return function(r,i){if(!AI(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Ml(l,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:Lc(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(i.serializer,s)}}if(r instanceof rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _n)return{bytesValue:$T(i.serializer,r._byteString)};if(r instanceof tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ir)return function(o,l){return{mapValue:{fields:{[vT]:{stringValue:_T},[bc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.wc("VectorValues must only contain numeric values.");return vm(l.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${dd(r)}`)}(t,e)}function xI(t,e){const n={};return hT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(t,(r,i)=>{const s=Ml(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof rr||t instanceof _n||t instanceof tt||t instanceof Ad||t instanceof ir)}function Fm(t,e,n){if(!RI(n)||!cT(n)){const r=dd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Yf(t,e,n){if((e=_t(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return Um(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const w2=new RegExp("[~\\*/\\[\\]]");function Um(t,e,n){if(e.search(w2)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sd(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(U.INVALID_ARGUMENT,l+t+u)}function PI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E2 extends kI{data(){return super.data()}}function Rd(t,e){return typeof e=="string"?Um(t,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zm{}class NI extends zm{}function Ri(t,e,...n){let r=[];e instanceof zm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Bm).length,l=s.filter(u=>u instanceof Pd).length;if(o>1||o>0&&l>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pd extends NI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pd(e,n,r)}_apply(e){const n=this._parse(e);return bI(e._query,n),new Is(e.firestore,e.converter,Ff(e._query,n))}_parse(e){const n=Cd(e.firestore);return function(s,o,l,u,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){C_(f,h);const S=[];for(const R of f)S.push(A_(u,s,R));m={arrayValue:{values:S}}}else m=A_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||C_(f,h),m=_2(l,o,f,h==="in"||h==="not-in");return ot.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function DI(t,e,n){const r=e,i=Rd("where",t);return Pd._create(i,r,n)}class Bm extends zm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)bI(o,u),o=Ff(o,u)}(e._query,n),new Is(e.firestore,e.converter,Ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends NI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $m(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gl(s,o)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Uo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Pi(t,e="asc"){const n=e,r=Rd("orderBy",t);return $m._create(r,n)}function A_(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!se.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bv(t,new se(r))}if(n instanceof tt)return Bv(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(n)}.`)}function C_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class I2{convertValue(e,n="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Li(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[bc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new ir(s)}convertGeoPoint(e){return new rr(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=Ii(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Re(QT(r),9688,{name:e});const i=new pl(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends kI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:at("string",ss._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class Gu extends ss{data(e={}){return super.data(e)}}class ho{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ca(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gu(this._firestore,this._userDataWriter,r.key,r,new Ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Gu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ca(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Gu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ca(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:S2(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ho._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){t=Un(t,tt);const e=Un(t.firestore,Ss);return u2(Lm(e),t._key).then(n=>C2(e,t,n))}ho._jsonSchemaVersion="firestore/querySnapshot/1.0",ho._jsonSchema={type:at("string",ho._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class LI extends I2{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function ji(t){t=Un(t,Is);const e=Un(t.firestore,Ss),n=Lm(e),r=new LI(e);return T2(t._query),c2(n,t._query).then(i=>new ho(e,r,t,i))}function A2(t,e,n){t=Un(t,tt);const r=Un(t.firestore,Ss),i=OI(t.converter,e,n);return kd(r,[CI(Cd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tn.none())])}function jl(t,e,n,...r){t=Un(t,tt);const i=Un(t.firestore,Ss),s=Cd(i);let o;return o=typeof(e=_t(e))=="string"||e instanceof Sd?v2(s,"updateDoc",t._key,e,n,r):y2(s,"updateDoc",t._key,e),kd(i,[o.toMutation(t._key,Tn.exists(!0))])}function MI(t){return kd(Un(t.firestore,Ss),[new _m(t._key,Tn.none())])}function Bo(t,e){const n=Un(t.firestore,Ss),r=ar(t),i=OI(t.converter,e);return kd(n,[CI(Cd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function kd(t,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>Xb(await l2(r),i,s)),s.promise}(Lm(t),e)}function C2(t,e,n){const r=n.docs.get(e._key),i=new LI(t);return new ss(t,i,e._key,r,new Ca(n.hasPendingWrites,n.fromCache),e.converter)}function Wt(){return new jm("serverTimestamp")}(function(e,n=!0){(function(i){Mo=i})(Oo),Eo(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ss(new _N(r.getProvider("auth-internal")),new TN(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),pi(Rv,Pv,e),pi(Rv,Pv,"esm2017")})();var x2="firebase",R2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(x2,R2,"app");const P2={apiKey:"AIzaSyASf7lyaGhgEl0q_q1j1lQTho4_HjVAICA",authDomain:"customer-ops-portal.firebaseapp.com",projectId:"customer-ops-portal",storageBucket:"customer-ops-portal.firebasestorage.app",messagingSenderId:"96326522125",appId:"1:96326522125:web:077b1758f6095020430c44"},jI=yE(P2),Hm=mN(jI),We=h2(jI);function k2(t){return t?t.toLowerCase():"customer"}const N2=O.createContext(null);function Lr(){const t=O.useContext(N2);if(!t){const[e,n]=O.useState(null),[r,i]=O.useState(null),[s,o]=O.useState(!0);return O.useEffect(()=>{const l=rk(Hm,async u=>{if(n(u),i(null),!u){o(!1);return}try{const c=ar(We,"users",u.uid),h=await VI(c);if(h.exists()){const f=h.data();i({...f,role:k2(f.role)})}else{const f={role:"customer",name:u.email,customerId:null};await A2(c,f,{merge:!0}),i(f)}}catch(c){console.error("Failed loading user profile:",c),i({role:"customer",name:u.email,customerId:null})}finally{o(!1)}});return()=>l()},[]),{user:e,profile:r,loading:s}}return t}async function D2(t,e){return ek(Hm,t,e)}async function b2(){return ik(Hm)}function qi({to:t,children:e,icon:n}){return y.jsxs(gx,{to:t,className:({isActive:r})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-zinc-900 text-white":"text-zinc-600 hover:text-zinc-900 hover:bg-zinc-100"}`,children:[y.jsx("span",{className:"text-lg",children:n}),e]})}function O2(){const{profile:t}=Lr(),e=(t==null?void 0:t.role)||"customer",n=e==="admin"||e==="staff";return y.jsx("aside",{className:"hidden md:block w-56 flex-shrink-0",children:y.jsxs("nav",{className:"sticky top-24 space-y-1",children:[y.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Menu"}),n?y.jsxs(y.Fragment,{children:[y.jsx(qi,{to:"/staff",icon:"",children:"Orders"}),y.jsx(qi,{to:"/customers",icon:"",children:"Customers"}),y.jsx(qi,{to:"/products",icon:"",children:"Products"}),y.jsx(qi,{to:"/catalog",icon:"",children:"Catalog"})]}):y.jsxs(y.Fragment,{children:[y.jsx(qi,{to:"/customer",icon:"",children:"Dashboard"}),y.jsx(qi,{to:"/catalog",icon:"",children:"Catalog"})]}),y.jsx("div",{className:"pt-4",children:y.jsx(qi,{to:"/orders/new",icon:"",children:"New Order"})}),y.jsx("div",{className:"pt-6 px-3",children:y.jsx("div",{className:"p-3 bg-zinc-100 rounded-lg",children:y.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Keep everything on the order  tasks, status, comments. One thread of truth."})})})]})})}function V2(){const{user:t,profile:e}=Lr(),n=async()=>{try{await b2()}catch(i){console.error("Sign out error:",i)}},r=e!=null&&e.role?e.role.charAt(0).toUpperCase()+e.role.slice(1):"";return y.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-zinc-200",children:y.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-9 h-9 bg-zinc-900 rounded-xl flex items-center justify-center",children:y.jsx("span",{className:"text-white text-sm font-bold",children:"CO"})}),y.jsxs("div",{children:[y.jsx("div",{className:"text-sm font-semibold text-zinc-900",children:"Customer Ops"}),y.jsxs("div",{className:"text-xs text-zinc-500",children:[r,(e==null?void 0:e.customerId)&&`  ${e.customerId}`]})]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"text-right hidden sm:block",children:[y.jsx("div",{className:"text-sm font-medium text-zinc-900",children:(e==null?void 0:e.name)||(t==null?void 0:t.email)}),y.jsx("div",{className:"text-xs text-zinc-500",children:t==null?void 0:t.email})]}),y.jsx("button",{onClick:n,className:"px-3 py-1.5 text-sm font-medium text-zinc-600 hover:text-zinc-900 hover:bg-zinc-100 rounded-lg transition",children:"Sign out"})]})]})})})}function L2(){return y.jsxs("div",{className:"min-h-screen bg-zinc-50",children:[y.jsx(V2,{}),y.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex gap-8 py-8",children:[y.jsx(O2,{}),y.jsx("main",{className:"flex-1 min-w-0",children:y.jsx(GC,{})})]})})]})}function M2(){var T;const{user:t,loading:e}=Lr(),r=((T=Oi().state)==null?void 0:T.from)||"/",[i,s]=O.useState(""),[o,l]=O.useState(""),[u,c]=O.useState(!1),[h,f]=O.useState("");if(!e&&t)return y.jsx(ll,{to:r,replace:!0});const m=async S=>{if(S.preventDefault(),!i.trim()||!o){f("Please enter email and password");return}c(!0),f("");try{await D2(i.trim(),o)}catch(R){console.error("Login error:",R),R.code==="auth/user-not-found"?f("No account found with this email"):R.code==="auth/wrong-password"?f("Incorrect password"):R.code==="auth/invalid-email"?f("Invalid email address"):R.code==="auth/invalid-credential"?f("Invalid email or password"):f(R.message||"Login failed. Please try again.")}finally{c(!1)}};return e?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50",children:y.jsx("div",{className:"w-8 h-8 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 px-4",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"inline-flex w-12 h-12 bg-zinc-900 rounded-2xl items-center justify-center mb-4",children:y.jsx("span",{className:"text-white text-lg font-bold",children:"CO"})}),y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Welcome back"}),y.jsx("p",{className:"mt-2 text-sm text-zinc-500",children:"Sign in to manage orders, tasks, and collaborate with your team."})]}),y.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-zinc-200 p-6",children:y.jsxs("form",{onSubmit:m,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:"Email"}),y.jsx("input",{type:"email",value:i,onChange:S=>s(S.target.value),placeholder:"you@company.com",className:"w-full px-3 py-2.5 bg-zinc-50 border border-zinc-200 rounded-lg text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:border-transparent transition",disabled:u})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:"Password"}),y.jsx("input",{type:"password",value:o,onChange:S=>l(S.target.value),placeholder:"",className:"w-full px-3 py-2.5 bg-zinc-50 border border-zinc-200 rounded-lg text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:border-transparent transition",disabled:u})]}),h&&y.jsx("div",{className:"p-3 bg-red-50 border border-red-100 rounded-lg",children:y.jsx("p",{className:"text-sm text-red-600",children:h})}),y.jsx("button",{type:"submit",disabled:u,className:"w-full py-2.5 px-4 bg-zinc-900 text-white text-sm font-medium rounded-lg hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:u?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):"Sign in"})]})}),y.jsxs("div",{className:"mt-6 p-4 bg-white rounded-xl border border-zinc-200",children:[y.jsx("p",{className:"text-xs font-medium text-zinc-500 mb-2",children:"Demo accounts:"}),y.jsxs("div",{className:"space-y-1 text-xs text-zinc-600",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Admin:"})," mallikamin@gmail.com / admin123"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Staff:"})," staff@customerops.com / staff123"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Customer:"})," customer@customerops.com / customer123"]})]})]}),y.jsx("p",{className:"mt-6 text-center text-xs text-zinc-400",children:"Boardroom clarity. Execution-grade tracking."})]})})}function ft({children:t,className:e="",padding:n=!0,...r}){return y.jsx("div",{...r,className:`bg-white rounded-xl border border-zinc-200 ${n?"p-5":""} ${e}`,children:t})}function Ba({title:t,subtitle:e,action:n}){return y.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-base font-semibold text-zinc-900",children:t}),e&&y.jsx("p",{className:"mt-0.5 text-sm text-zinc-500",children:e})]}),n&&y.jsx("div",{children:n})]})}const x_={submitted:"bg-zinc-100 text-zinc-700",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-zinc-100 text-zinc-500",cancelled:"bg-red-50 text-red-700",todo:"bg-zinc-100 text-zinc-600",doing:"bg-blue-50 text-blue-700",blocked:"bg-red-50 text-red-700",done:"bg-emerald-50 text-emerald-700",default:"bg-zinc-100 text-zinc-600",success:"bg-emerald-50 text-emerald-700",warning:"bg-amber-50 text-amber-700",error:"bg-red-50 text-red-700",info:"bg-blue-50 text-blue-700"};function Ro({children:t,variant:e="default",className:n=""}){const r=x_[e]||x_.default;return y.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium ${r} ${n}`,children:t})}function yt({children:t,variant:e="primary",size:n="md",loading:r=!1,className:i="",...s}){const o="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",l={primary:"bg-zinc-900 text-white hover:bg-zinc-800 focus:ring-zinc-900",secondary:"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 focus:ring-zinc-500",ghost:"text-zinc-600 hover:text-zinc-900 hover:bg-zinc-100 focus:ring-zinc-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600"},u={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"};return y.jsx("button",{...s,disabled:s.disabled||r,className:`${o} ${l[e]} ${u[n]} ${i}`,children:r?y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"w-4 h-4 border-2 border-current/30 border-t-current rounded-full animate-spin"}),"Loading..."]}):t})}function ki({icon:t,title:e,subtitle:n,action:r}){return y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[t&&y.jsx("div",{className:"text-4xl mb-4 opacity-50",children:t}),y.jsx("h3",{className:"text-base font-semibold text-zinc-900",children:e}),n&&y.jsx("p",{className:"mt-1 text-sm text-zinc-500 max-w-sm",children:n}),r&&y.jsx("div",{className:"mt-4",children:r})]})}async function j2(t){const e=ar(We,"orders",t),n=await VI(e);return n.exists()?{id:n.id,...n.data()}:null}async function F2(t){const e=Ri(Ht(We,"orders"),DI("customerId","==",t),Pi("createdAt","desc"));return(await ji(e)).docs.map(r=>({id:r.id,...r.data()}))}async function U2(){const t=Ri(Ht(We,"orders"),Pi("createdAt","desc"));return(await ji(t)).docs.map(n=>({id:n.id,...n.data()}))}async function z2({customerId:t,title:e,summary:n,assignedToUid:r,createdByUid:i}){const s=await Bo(Ht(We,"orders"),{customerId:t,title:e,summary:n||"",assignedToUid:r||null,status:"submitted",createdByUid:i,createdAt:Wt(),updatedAt:Wt()});return await Xf(s.id,{type:"created",message:"Order created",createdByUid:i,createdByName:null}),s.id}async function R_(t,e){const n=ar(We,"orders",t);await jl(n,{...e,updatedAt:Wt()})}async function B2(t){const e=Ri(Ht(We,"orders",t,"updates"),Pi("createdAt","desc"));return(await ji(e)).docs.map(r=>({id:r.id,...r.data()}))}async function Xf(t,{type:e,message:n,createdByUid:r,createdByName:i}){await Bo(Ht(We,"orders",t,"updates"),{type:e,message:n,createdByUid:r,createdByName:i||null,createdAt:Wt()})}function $2(){const t=_s(),{profile:e}=Lr(),[n,r]=O.useState([]),[i,s]=O.useState(!0);O.useEffect(()=>{e!=null&&e.customerId?o():s(!1)},[e==null?void 0:e.customerId]);const o=async()=>{s(!0);try{const l=await F2(e.customerId);r(l)}catch(l){console.error("Failed to load orders:",l)}finally{s(!1)}};return e!=null&&e.customerId?y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Your Orders"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Track tasks, updates, and communicate directly on each order"})]}),y.jsx(yt,{onClick:()=>t("/orders/new"),children:"+ New Order"})]}),i?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):n.length===0?y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"No orders yet",subtitle:"Place your first order and we'll keep everything updated here",action:y.jsx(yt,{onClick:()=>t("/catalog"),children:"Browse Catalog"})})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(l=>{var u;return y.jsx(ft,{className:"cursor-pointer hover:border-zinc-300 transition-colors",onClick:()=>t(`/orders/${l.id}`),children:y.jsxs("div",{className:"flex items-start justify-between gap-3",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-medium text-zinc-900 truncate",children:l.title}),l.summary&&y.jsx("p",{className:"mt-1 text-sm text-zinc-500 line-clamp-2",children:l.summary})]}),y.jsx(Ro,{variant:l.status,children:(u=l.status)==null?void 0:u.replace(/_/g," ")})]})},l.id)})})]}):y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"No customer account linked",subtitle:"Your account isn't linked to a customer. Please contact support."})})}function Wm({columns:t,rows:e,onRowClick:n}){return y.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 overflow-hidden",children:y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full",children:[y.jsx("thead",{children:y.jsx("tr",{className:"bg-zinc-50 border-b border-zinc-200",children:t.map(r=>y.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:r.header},r.key))})}),y.jsx("tbody",{className:"divide-y divide-zinc-100",children:e.map((r,i)=>y.jsx("tr",{onClick:()=>n==null?void 0:n(r),className:`${n?"cursor-pointer hover:bg-zinc-50":""} transition-colors`,children:t.map(s=>y.jsx("td",{className:"px-4 py-3 text-sm text-zinc-700",children:s.render?s.render(r):r[s.key]||""},s.key))},r.id||i))})]})})})}function Jt({label:t,error:e,className:n="",...r}){return y.jsxs("div",{className:n,children:[t&&y.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:t}),y.jsx("input",{...r,className:`w-full px-3 py-2 bg-white border rounded-lg text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:border-transparent transition ${e?"border-red-300":"border-zinc-200"}`}),e&&y.jsx("p",{className:"mt-1 text-xs text-red-600",children:e})]})}function H2({label:t,error:e,className:n="",...r}){return y.jsxs("div",{className:n,children:[t&&y.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:t}),y.jsx("textarea",{...r,className:`w-full px-3 py-2 bg-white border rounded-lg text-sm placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:border-transparent transition resize-none ${e?"border-red-300":"border-zinc-200"}`}),e&&y.jsx("p",{className:"mt-1 text-xs text-red-600",children:e})]})}function wl({label:t,error:e,children:n,className:r="",...i}){return y.jsxs("div",{className:r,children:[t&&y.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:t}),y.jsx("select",{...i,className:`w-full px-3 py-2 bg-white border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:border-transparent transition ${e?"border-red-300":"border-zinc-200"}`,children:n}),e&&y.jsx("p",{className:"mt-1 text-xs text-red-600",children:e})]})}function W2(){const t=_s(),[e,n]=O.useState([]),[r,i]=O.useState(""),[s,o]=O.useState(!0);O.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const h=await U2();n(h)}catch(h){console.error("Failed to load orders:",h)}finally{o(!1)}},u=O.useMemo(()=>{const h=r.trim().toLowerCase();return h?e.filter(f=>[f.title,f.summary,f.customerId,f.status].filter(Boolean).some(m=>String(m).toLowerCase().includes(h))):e},[e,r]),c=[{key:"title",header:"Order",render:h=>y.jsxs("div",{children:[y.jsx("div",{className:"font-medium text-zinc-900",children:h.title}),h.summary&&y.jsx("div",{className:"text-xs text-zinc-500 truncate max-w-xs",children:h.summary})]})},{key:"customerId",header:"Customer"},{key:"status",header:"Status",render:h=>{var f;return y.jsx(Ro,{variant:h.status,children:(f=h.status)==null?void 0:f.replace(/_/g," ")})}}];return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Orders"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Manage all customer orders and track progress"})]}),y.jsx(yt,{onClick:()=>t("/orders/new"),children:"+ New Order"})]}),y.jsx(ft,{children:y.jsx(Jt,{placeholder:"Search orders by title, customer, or status...",value:r,onChange:h=>i(h.target.value)})}),s?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):u.length===0?y.jsx(ft,{children:y.jsx(ki,{icon:"",title:r?"No orders found":"No orders yet",subtitle:r?"Try a different search term":"Create your first order to get started",action:!r&&y.jsx(yt,{onClick:()=>t("/orders/new"),children:"Create Order"})})}):y.jsx(Wm,{columns:c,rows:u,onRowClick:h=>t(`/orders/${h.id}`)})]})}async function FI(t=!1){let e=Ri(Ht(We,"products"),Pi("name","asc"));return t&&(e=Ri(Ht(We,"products"),DI("active","==",!0),Pi("name","asc"))),(await ji(e)).docs.map(r=>({id:r.id,...r.data()}))}async function q2({name:t,sku:e,description:n,price:r,unit:i,category:s}){return(await Bo(Ht(We,"products"),{name:t,sku:e||"",description:n||"",price:r||0,unit:i||"each",category:s||"General",active:!0,createdAt:Wt(),updatedAt:Wt()})).id}async function K2(t,e){const n=ar(We,"products",t);await jl(n,{...e,updatedAt:Wt()})}async function G2(t){const e=ar(We,"products",t);await MI(e)}async function Q2(t,e){const n=ar(We,"products",t);await jl(n,{active:e,updatedAt:Wt()})}function Y2(){const t=_s(),{profile:e}=Lr(),n=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="staff",[r,i]=O.useState([]),[s,o]=O.useState(""),[l,u]=O.useState(!0);O.useEffect(()=>{c()},[]);const c=async()=>{u(!0);try{const m=await FI(!n);i(m)}catch(m){console.error("Failed to load products:",m)}finally{u(!1)}},h=r.filter(m=>{var S,R,b;const T=s.toLowerCase();return((S=m.name)==null?void 0:S.toLowerCase().includes(T))||((R=m.sku)==null?void 0:R.toLowerCase().includes(T))||((b=m.category)==null?void 0:b.toLowerCase().includes(T))}),f=h.reduce((m,T)=>{const S=T.category||"General";return m[S]||(m[S]=[]),m[S].push(T),m},{});return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Product Catalog"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Browse available products"})]}),y.jsx(yt,{onClick:()=>t("/orders/new"),children:"Start Order"})]}),y.jsx(ft,{children:y.jsx(Jt,{value:s,onChange:m=>o(m.target.value),placeholder:"Search products..."})}),l?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):h.length===0?y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"No products found",subtitle:s?"Try a different search":"No products available"})}):y.jsx("div",{className:"space-y-8",children:Object.entries(f).map(([m,T])=>y.jsxs("div",{children:[y.jsx("h2",{className:"text-xs font-semibold text-zinc-400 uppercase tracking-wider mb-3",children:m}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(S=>{var R;return y.jsxs(ft,{children:[y.jsxs("div",{className:"flex justify-between gap-2",children:[y.jsx("h3",{className:"font-medium text-zinc-900",children:S.name}),!S.active&&y.jsx(Ro,{variant:"cancelled",children:"Inactive"})]}),S.sku&&y.jsxs("p",{className:"text-xs text-zinc-500",children:["SKU: ",S.sku]}),S.description&&y.jsx("p",{className:"mt-2 text-sm text-zinc-600 line-clamp-2",children:S.description}),y.jsxs("p",{className:"mt-3 text-sm font-semibold",children:["$",((R=S.price)==null?void 0:R.toFixed(2))||"0.00",y.jsxs("span",{className:"text-zinc-400 font-normal",children:[" / ",S.unit||"each"]})]})]},S.id)})})]},m))})]})}async function UI(){const t=Ri(Ht(We,"customers"),Pi("name","asc"));return(await ji(t)).docs.map(n=>({id:n.id,...n.data()}))}async function X2({name:t,contactEmail:e,contactPhone:n,address:r,notes:i}){return(await Bo(Ht(We,"customers"),{name:t,contactEmail:e||"",contactPhone:n||"",address:r||"",notes:i||"",active:!0,createdAt:Wt(),updatedAt:Wt()})).id}async function J2(t,e){const n=ar(We,"customers",t);await jl(n,{...e,updatedAt:Wt()})}async function Z2(t){const e=ar(We,"customers",t);await MI(e)}async function zI(){const t=Ht(We,"users");return(await ji(t)).docs.map(r=>({id:r.id,...r.data()})).filter(r=>{const i=(r.role||"").toLowerCase();return i==="admin"||i==="staff"}).sort((r,i)=>(r.name||"").localeCompare(i.name||""))}function eO(){const t=_s(),{user:e,profile:n}=Lr(),r=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="staff",[i,s]=O.useState(""),[o,l]=O.useState(""),[u,c]=O.useState((n==null?void 0:n.customerId)||""),[h,f]=O.useState(""),[m,T]=O.useState([]),[S,R]=O.useState([]),[b,A]=O.useState(!1),[w,C]=O.useState("");O.useEffect(()=>{r&&L()},[r]);const L=async()=>{try{const[F,g]=await Promise.all([UI(),zI()]);T(F),R(g)}catch(F){console.error("Failed to load data:",F)}},z=async F=>{if(F.preventDefault(),C(""),!i.trim()){C("Please enter an order title");return}const g=r?u:n==null?void 0:n.customerId;if(!g){C("Please select a customer");return}A(!0);try{const v=await z2({customerId:g,title:i.trim(),summary:o.trim(),assignedToUid:r&&h||null,createdByUid:e.uid});t(`/orders/${v}`)}catch(v){console.error("Failed to create order:",v),C((v==null?void 0:v.message)||"Failed to create order")}finally{A(!1)}};return y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Create Order"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Start a new order with tasks, timeline tracking, and collaboration"})]}),y.jsx(ft,{children:y.jsxs("form",{onSubmit:z,className:"space-y-5",children:[y.jsx(Jt,{label:"Order Title",value:i,onChange:F=>s(F.target.value),placeholder:"e.g., Q1 Packaging Order",required:!0}),y.jsx(H2,{label:"Summary (optional)",value:o,onChange:F=>l(F.target.value),placeholder:"Brief description of the order...",rows:3}),r&&y.jsxs(y.Fragment,{children:[y.jsxs(wl,{label:"Customer",value:u,onChange:F=>c(F.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select a customer..."}),m.map(F=>y.jsx("option",{value:F.id,children:F.name},F.id))]}),y.jsxs(wl,{label:"Assign To (optional)",value:h,onChange:F=>f(F.target.value),children:[y.jsx("option",{value:"",children:"Unassigned"}),S.map(F=>y.jsx("option",{value:F.id,children:F.name||F.email},F.id))]})]}),!r&&(n==null?void 0:n.customerId)&&y.jsx("div",{className:"p-3 bg-zinc-50 rounded-lg border border-zinc-200",children:y.jsxs("p",{className:"text-sm text-zinc-600",children:["Creating order for: ",y.jsx("span",{className:"font-medium",children:n.customerId})]})}),w&&y.jsx("div",{className:"p-3 bg-red-50 border border-red-100 rounded-lg",children:y.jsx("p",{className:"text-sm text-red-600",children:w})}),y.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[y.jsx(yt,{type:"button",variant:"secondary",onClick:()=>t(-1),children:"Cancel"}),y.jsx(yt,{type:"submit",loading:b,children:"Create Order"})]})]})})]})}async function tO(t){const e=Ri(Ht(We,"orders",t,"tasks"),Pi("createdAt","asc"));return(await ji(e)).docs.map(r=>({id:r.id,...r.data()}))}async function nO(t,e){return(await Bo(Ht(We,"orders",t,"tasks"),{title:e.title,status:e.status||"todo",assigneeUid:e.assigneeUid||null,parentTaskId:e.parentTaskId||null,clientVisible:e.clientVisible!==!1,clientNote:e.clientNote||"",internalNote:e.internalNote||"",dueDate:e.dueDate||null,createdByUid:e.createdByUid,createdAt:Wt(),updatedAt:Wt()})).id}async function rO(t,e,n){await jl(ar(We,"orders",t,"tasks",e),{...n,updatedAt:Wt()})}async function iO(t){const e=Ri(Ht(We,"orders",t,"comments"),Pi("createdAt","asc"));return(await ji(e)).docs.map(r=>({id:r.id,...r.data()}))}async function sO(t,{message:e,createdByUid:n,createdByName:r,parentId:i=null}){await Bo(Ht(We,"orders",t,"comments"),{message:e,createdByUid:n,createdByName:r||null,parentId:i||null,createdAt:Wt()})}const oO=["submitted","confirmed","in_progress","delivered","closed","cancelled"],P_=["todo","doing","blocked","done"];function aO(){var ge;const{orderId:t}=OC(),e=_s(),{user:n,profile:r}=Lr(),i=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff",[s,o]=O.useState(null),[l,u]=O.useState([]),[c,h]=O.useState([]),[f,m]=O.useState([]),[T,S]=O.useState([]),[R,b]=O.useState(!0),[A,w]=O.useState(""),[C,L]=O.useState(""),[z,F]=O.useState(!1),g=async()=>{try{const[Q,Ce,$,ie,oe]=await Promise.all([j2(t),tO(t),iO(t),B2(t),i?zI():Promise.resolve([])]);o(Q),u(Ce),h($),m(ie),S(oe)}catch(Q){console.error("Failed to load order:",Q)}finally{b(!1)}};O.useEffect(()=>{g()},[t]);const v=O.useMemo(()=>l.filter(Q=>!Q.parentTaskId),[l]),E=O.useMemo(()=>{const Q=new Map;return l.filter(Ce=>Ce.parentTaskId).forEach(Ce=>{Q.has(Ce.parentTaskId)||Q.set(Ce.parentTaskId,[]),Q.get(Ce.parentTaskId).push(Ce)}),Q},[l]),I=async Q=>{if(!(!i||Q===s.status)){F(!0);try{await R_(t,{status:Q}),await Xf(t,{type:"status_change",message:`Status changed to "${Q}"`,createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await g()}finally{F(!1)}}},P=async Q=>{var Ce;if(i){F(!0);try{const $=((Ce=T.find(ie=>ie.id===Q))==null?void 0:Ce.name)||"Unassigned";await R_(t,{assignedToUid:Q||null}),await Xf(t,{type:"assignment",message:Q?`Assigned to ${$}`:"Unassigned",createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await g()}finally{F(!1)}}},N=async()=>{if(A.trim()){F(!0);try{await nO(t,{title:A.trim(),status:"todo",clientVisible:!0,createdByUid:n.uid}),w(""),await g()}finally{F(!1)}}},x=async(Q,Ce)=>{F(!0);try{await rO(t,Q,{status:Ce}),await g()}finally{F(!1)}},G=async()=>{if(C.trim()){F(!0);try{await sO(t,{message:C.trim(),createdByUid:n.uid,createdByName:r==null?void 0:r.name}),L(""),await g()}finally{F(!1)}}};return R?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):s?y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("button",{onClick:()=>e(-1),className:"text-sm text-zinc-500 hover:text-zinc-700 mb-2",children:" Back"}),y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:s.title}),s.summary&&y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:s.summary}),y.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[y.jsx(Ro,{variant:s.status,children:(ge=s.status)==null?void 0:ge.replace(/_/g," ")}),y.jsxs("span",{className:"text-sm text-zinc-500",children:["Customer: ",s.customerId]})]})]}),i&&y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx(wl,{value:s.status,onChange:Q=>I(Q.target.value),disabled:z,children:oO.map(Q=>y.jsx("option",{value:Q,children:Q.replace(/_/g," ")},Q))}),y.jsxs(wl,{value:s.assignedToUid||"",onChange:Q=>P(Q.target.value),disabled:z,children:[y.jsx("option",{value:"",children:"Unassigned"}),T.map(Q=>y.jsx("option",{value:Q.id,children:Q.name||Q.email},Q.id))]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[y.jsx("div",{className:"lg:col-span-2 space-y-4",children:y.jsxs(ft,{children:[y.jsx(Ba,{title:"Tasks",subtitle:"Track work items for this order"}),y.jsxs("div",{className:"flex gap-2 mb-4",children:[y.jsx(Jt,{value:A,onChange:Q=>w(Q.target.value),placeholder:"Add a task...",onKeyDown:Q=>Q.key==="Enter"&&N(),className:"flex-1"}),y.jsx(yt,{onClick:N,loading:z,disabled:!A.trim(),children:"Add"})]}),v.length===0?y.jsx(ki,{icon:"",title:"No tasks yet",subtitle:"Add tasks to track progress"}):y.jsx("div",{className:"space-y-2",children:v.map(Q=>{var Ce;return y.jsxs("div",{className:"p-3 bg-zinc-50 rounded-lg border border-zinc-100",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("span",{className:"text-sm font-medium text-zinc-900 truncate",children:Q.title}),y.jsx(Ro,{variant:Q.status,children:Q.status})]}),y.jsx("select",{value:Q.status,onChange:$=>x(Q.id,$.target.value),className:"text-xs border border-zinc-200 rounded px-2 py-1 bg-white",disabled:z,children:P_.map($=>y.jsx("option",{value:$,children:$},$))})]}),(Ce=E.get(Q.id))==null?void 0:Ce.map($=>y.jsxs("div",{className:"ml-4 mt-2 flex items-center justify-between gap-2 text-sm",children:[y.jsx("span",{className:"text-zinc-600",children:$.title}),y.jsx("select",{value:$.status,onChange:ie=>x($.id,ie.target.value),className:"text-xs border border-zinc-200 rounded px-2 py-1 bg-white",disabled:z,children:P_.map(ie=>y.jsx("option",{value:ie,children:ie},ie))})]},$.id))]},Q.id)})})]})}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs(ft,{children:[y.jsx(Ba,{title:"Comments"}),y.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto mb-4",children:c.length===0?y.jsx("p",{className:"text-sm text-zinc-400",children:"No comments yet"}):c.map(Q=>y.jsxs("div",{className:`p-3 rounded-lg ${Q.createdByUid===(n==null?void 0:n.uid)?"bg-zinc-900 text-white":"bg-zinc-100"}`,children:[y.jsx("p",{className:`text-xs ${Q.createdByUid===(n==null?void 0:n.uid)?"text-zinc-400":"text-zinc-500"}`,children:Q.createdByName||"Unknown"}),y.jsx("p",{className:"text-sm mt-1",children:Q.message})]},Q.id))}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Jt,{value:C,onChange:Q=>L(Q.target.value),placeholder:"Add comment...",onKeyDown:Q=>Q.key==="Enter"&&G(),className:"flex-1"}),y.jsx(yt,{size:"sm",onClick:G,loading:z,children:"Post"})]})]}),y.jsxs(ft,{children:[y.jsx(Ba,{title:"Activity"}),y.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:f.length===0?y.jsx("p",{className:"text-sm text-zinc-400",children:"No activity yet"}):f.map(Q=>y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-zinc-300 mt-1.5 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-zinc-700",children:Q.message}),y.jsx("p",{className:"text-xs text-zinc-400",children:Q.createdByName||"System"})]})]},Q.id))})]})]})]})]}):y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"Order not found",subtitle:"This order doesn't exist or you don't have access",action:y.jsx(yt,{onClick:()=>e(-1),children:"Go back"})})})}function lO(){const[t,e]=O.useState([]),[n,r]=O.useState(""),[i,s]=O.useState(!0),[o,l]=O.useState(!1),[u,c]=O.useState(null),[h,f]=O.useState(!1),[m,T]=O.useState(""),[S,R]=O.useState(""),[b,A]=O.useState("");O.useEffect(()=>{w()},[]);const w=async()=>{s(!0);try{const E=await UI();e(E)}catch(E){console.error("Failed to load customers:",E)}finally{s(!1)}},C=()=>{T(""),R(""),A(""),c(null),l(!1)},L=E=>{T(E.name||""),R(E.contactEmail||""),A(E.contactPhone||""),c(E),l(!0)},z=async E=>{if(E.preventDefault(),!!m.trim()){f(!0);try{u?await J2(u.id,{name:m.trim(),contactEmail:S.trim(),contactPhone:b.trim()}):await X2({name:m.trim(),contactEmail:S.trim(),contactPhone:b.trim()}),C(),await w()}finally{f(!1)}}},F=async E=>{if(confirm(`Delete "${E.name}"?`)){f(!0);try{await Z2(E.id),await w()}finally{f(!1)}}},g=t.filter(E=>{var I,P;return((I=E.name)==null?void 0:I.toLowerCase().includes(n.toLowerCase()))||((P=E.contactEmail)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))}),v=[{key:"name",header:"Name"},{key:"contactEmail",header:"Email"},{key:"contactPhone",header:"Phone"},{key:"actions",header:"",render:E=>y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:I=>{I.stopPropagation(),L(E)},className:"text-xs text-zinc-600 hover:text-zinc-900",children:"Edit"}),y.jsx("button",{onClick:I=>{I.stopPropagation(),F(E)},className:"text-xs text-red-600 hover:text-red-700",children:"Delete"})]})}];return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Customers"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Manage customer accounts"})]}),y.jsx(yt,{onClick:()=>{C(),l(!0)},children:"+ Add Customer"})]}),o&&y.jsxs(ft,{children:[y.jsx(Ba,{title:u?"Edit Customer":"New Customer"}),y.jsxs("form",{onSubmit:z,className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsx(Jt,{label:"Name",value:m,onChange:E=>T(E.target.value),required:!0}),y.jsx(Jt,{label:"Email",type:"email",value:S,onChange:E=>R(E.target.value)}),y.jsx(Jt,{label:"Phone",value:b,onChange:E=>A(E.target.value)})]}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx(yt,{type:"button",variant:"secondary",onClick:C,children:"Cancel"}),y.jsx(yt,{type:"submit",loading:h,children:u?"Save":"Add"})]})]})]}),y.jsx(ft,{children:y.jsx(Jt,{value:n,onChange:E=>r(E.target.value),placeholder:"Search customers..."})}),i?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):g.length===0?y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"No customers",subtitle:"Add your first customer",action:y.jsx(yt,{onClick:()=>l(!0),children:"Add Customer"})})}):y.jsx(Wm,{columns:v,rows:g})]})}function uO(){const[t,e]=O.useState([]),[n,r]=O.useState(""),[i,s]=O.useState(!0),[o,l]=O.useState(!1),[u,c]=O.useState(null),[h,f]=O.useState(!1),[m,T]=O.useState(""),[S,R]=O.useState(""),[b,A]=O.useState(""),[w,C]=O.useState("each"),[L,z]=O.useState("");O.useEffect(()=>{F()},[]);const F=async()=>{s(!0);try{const G=await FI(!1);e(G)}catch(G){console.error("Failed to load products:",G)}finally{s(!1)}},g=()=>{T(""),R(""),A(""),C("each"),z(""),c(null),l(!1)},v=G=>{var ge;T(G.name||""),R(G.sku||""),A(((ge=G.price)==null?void 0:ge.toString())||""),C(G.unit||"each"),z(G.category||""),c(G),l(!0)},E=async G=>{if(G.preventDefault(),!!m.trim()){f(!0);try{const ge={name:m.trim(),sku:S.trim(),price:parseFloat(b)||0,unit:w,category:L.trim()||"General"};u?await K2(u.id,ge):await q2(ge),g(),await F()}finally{f(!1)}}},I=async G=>{f(!0);try{await Q2(G.id,!G.active),await F()}finally{f(!1)}},P=async G=>{if(confirm(`Delete "${G.name}"?`)){f(!0);try{await G2(G.id),await F()}finally{f(!1)}}},N=t.filter(G=>{var ge,Q;return((ge=G.name)==null?void 0:ge.toLowerCase().includes(n.toLowerCase()))||((Q=G.sku)==null?void 0:Q.toLowerCase().includes(n.toLowerCase()))}),x=[{key:"name",header:"Product"},{key:"sku",header:"SKU"},{key:"category",header:"Category"},{key:"price",header:"Price",render:G=>{var ge;return`$${((ge=G.price)==null?void 0:ge.toFixed(2))||"0.00"} / ${G.unit||"each"}`}},{key:"status",header:"Status",render:G=>y.jsx(Ro,{variant:G.active?"done":"cancelled",children:G.active?"Active":"Inactive"})},{key:"actions",header:"",render:G=>y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:ge=>{ge.stopPropagation(),I(G)},className:"text-xs text-zinc-600 hover:text-zinc-900",children:G.active?"Deactivate":"Activate"}),y.jsx("button",{onClick:ge=>{ge.stopPropagation(),v(G)},className:"text-xs text-zinc-600 hover:text-zinc-900",children:"Edit"}),y.jsx("button",{onClick:ge=>{ge.stopPropagation(),P(G)},className:"text-xs text-red-600 hover:text-red-700",children:"Delete"})]})}];return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-semibold text-zinc-900",children:"Products"}),y.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Manage your product catalog"})]}),y.jsx(yt,{onClick:()=>{g(),l(!0)},children:"+ Add Product"})]}),o&&y.jsxs(ft,{children:[y.jsx(Ba,{title:u?"Edit Product":"New Product"}),y.jsxs("form",{onSubmit:E,className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsx(Jt,{label:"Name",value:m,onChange:G=>T(G.target.value),required:!0}),y.jsx(Jt,{label:"SKU",value:S,onChange:G=>R(G.target.value)}),y.jsx(Jt,{label:"Price",type:"number",step:"0.01",value:b,onChange:G=>A(G.target.value)}),y.jsxs(wl,{label:"Unit",value:w,onChange:G=>C(G.target.value),children:[y.jsx("option",{value:"each",children:"Each"}),y.jsx("option",{value:"box",children:"Box"}),y.jsx("option",{value:"case",children:"Case"}),y.jsx("option",{value:"kg",children:"Kg"})]}),y.jsx(Jt,{label:"Category",value:L,onChange:G=>z(G.target.value)})]}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx(yt,{type:"button",variant:"secondary",onClick:g,children:"Cancel"}),y.jsx(yt,{type:"submit",loading:h,children:u?"Save":"Add"})]})]})]}),y.jsx(ft,{children:y.jsx(Jt,{value:n,onChange:G=>r(G.target.value),placeholder:"Search products..."})}),i?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx("div",{className:"w-6 h-6 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"})}):N.length===0?y.jsx(ft,{children:y.jsx(ki,{icon:"",title:"No products",subtitle:"Add your first product",action:y.jsx(yt,{onClick:()=>l(!0),children:"Add Product"})})}):y.jsx(Wm,{columns:x,rows:N})]})}function Au({children:t,allowRoles:e}){const{user:n,profile:r,loading:i}=Lr(),s=Oi();if(i)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:y.jsxs("div",{className:"flex flex-col items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 border-2 border-zinc-200 border-t-zinc-600 rounded-full animate-spin"}),y.jsx("div",{className:"text-sm text-zinc-500",children:"Loading..."})]})});if(!n)return y.jsx(ll,{to:"/login",state:{from:s.pathname},replace:!0});if(e&&e.length>0){const o=(r==null?void 0:r.role)||"customer";if(!e.includes(o))return y.jsx(ll,{to:"/",replace:!0})}return t}function cO(){return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-6xl font-light text-zinc-200",children:"404"}),y.jsx("div",{className:"mt-4 text-xl font-semibold text-zinc-900",children:"Page not found"}),y.jsx("div",{className:"mt-2 text-sm text-zinc-500",children:"The page you're looking for doesn't exist."}),y.jsx("a",{href:"#/",className:"inline-block mt-6 px-4 py-2 text-sm font-medium text-white bg-zinc-900 rounded-lg hover:bg-zinc-800 transition",children:"Go home"})]})})}function dO(){const{profile:t,loading:e}=Lr();if(e)return y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx("div",{className:"text-sm text-zinc-500",children:"Loading..."})});const n=(t==null?void 0:t.role)||"customer";return n==="admin"||n==="staff"?y.jsx(ll,{to:"/staff",replace:!0}):y.jsx(ll,{to:"/customer",replace:!0})}const hO=nx([{path:"/login",element:y.jsx(M2,{})},{path:"/",element:y.jsx(Au,{children:y.jsx(L2,{})}),children:[{index:!0,element:y.jsx(dO,{})},{path:"catalog",element:y.jsx(Y2,{})},{path:"orders/new",element:y.jsx(eO,{})},{path:"orders/:orderId",element:y.jsx(aO,{})},{path:"customer",element:y.jsx($2,{})},{path:"staff",element:y.jsx(Au,{allowRoles:["admin","staff"],children:y.jsx(W2,{})})},{path:"customers",element:y.jsx(Au,{allowRoles:["admin","staff"],children:y.jsx(lO,{})})},{path:"products",element:y.jsx(Au,{allowRoles:["admin","staff"],children:y.jsx(uO,{})})}]},{path:"*",element:y.jsx(cO,{})}]);xh.createRoot(document.getElementById("root")).render(y.jsx(B_.StrictMode,{children:y.jsx(cx,{router:hO})}));
